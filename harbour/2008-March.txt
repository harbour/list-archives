From toninhofwi at yahoo.com.br  Sat Mar  1 12:33:16 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Mar  1 12:30:12 2008
Subject: [Harbour] Bug with ADS and DOUBLE fields
In-Reply-To: <20080229201305.GA6269@localhost.localdomain>
References: <vuegs3tbvn9149p8lre1a33t575p5i092j@4ax.com>
	<20080229201305.GA6269@localhost.localdomain>
Message-ID: <5rgis31dhq3rjeead8ueccihiostvsgq1d@4ax.com>

On Fri, 29 Feb 2008 21:13:05 +0100, you wrote:

>On Fri, 29 Feb 2008, Toninho@fwi wrote:
>> Hi ppl,
>> With ADS, if the double field have large values like 1234567890123,
>> harbour displays ******** instead a value.
>> If I use str(field,20) the value is displayed correct.
>
>Not only double. In ADS* RDDs non of numeric binary field sizes is
>translated to valid size for decimal representation, f.e. the same
>is for short ("I"/"short",2,0) and integer ("I"/"integer",4,0) when
>the decimal representation will be bigger then 2 or 4 digits.
>In each numeric item we keep default size for str() formating and
>ADS RDDs sets this size to binary field size instead of maximum size
>for binary representation. AFAIR this problems exists from the beginning.
>It's only formatting problem when you do not explicitly set the size
>but if you want to fix it then you should set valid size in adsGetValue()
>function. It will be few lines only. You can take maximum sizes for all
>types from dbf1.c or other RDDs I was working on (f.e. s_uiNumLength
>translation table in delim1.c can be used for all integer sizes in
>range 1,8)
>

Thanks Przemek for your answer. I don?t have problems with this issue.
I only report because I think that is a bug.

Best regards,

Toninho.

		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/

From philb at philb.us  Sat Mar  1 13:40:28 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Mar  1 13:59:56 2008
Subject: [Harbour] Time for a release?
Message-ID: <200803011340.28769.philb@philb.us>

Przemek.

The list traffic seems to have died down. I think this would be an appropriate 
time for a release.

Your thoughts?

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From lorenzo.fiorini at gmail.com  Sun Mar  2 04:44:16 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  2 04:44:23 2008
Subject: [Harbour] __HRBLOAD of a string
Message-ID: <9257026e0803020144u4daa7e86na5e0480086f7b91c@mail.gmail.com>

Could __HRBLOAD get the input from a string?

Currently I have several hrb "scripts" and I use _HRBLOAD to
dinamically load them.
To easy the deployment, I'd like to pack them into a zip file and use
hbzlib  functions to extract them into a string.
I'd like to avoid to memowrit+__hrbload and use directly __hrbload.

Comments?

best regards,
Lorenzo
From alex at belacy.belgorod.su  Sun Mar  2 13:25:38 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Sun Mar  2 13:26:29 2008
Subject: [Harbour] Re: __HRBLOAD of a string
In-Reply-To: <9257026e0803020144u4daa7e86na5e0480086f7b91c@mail.gmail.com>
References: <9257026e0803020144u4daa7e86na5e0480086f7b91c@mail.gmail.com>
Message-ID: <514556281.20080302212538@belacy.belgorod.su>

On  Sunday, March 02, 2008, 12:44 Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

LF> Could __HRBLOAD get the input from a string?

 Yes. The first parameter may be a filename or a string with hrb
 content.
 

Regards,
 Alexander
http://kresin.belgorod.su

From lorenzo.fiorini at gmail.com  Sun Mar  2 14:12:19 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  2 14:12:24 2008
Subject: [Harbour] Re: __HRBLOAD of a string
In-Reply-To: <514556281.20080302212538@belacy.belgorod.su>
References: <9257026e0803020144u4daa7e86na5e0480086f7b91c@mail.gmail.com>
	<514556281.20080302212538@belacy.belgorod.su>
Message-ID: <9257026e0803021112yc1d7075i69eaf346be9620dc@mail.gmail.com>

On Sun, Mar 2, 2008 at 7:25 PM, Alexander S.Kresin
<alex@belacy.belgorod.su> wrote:

>   Yes. The first parameter may be a filename or a string with hrb
>   content.

Thanks, I didn't know.

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Mar  3 12:53:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar  3 12:54:07 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <200803011340.28769.philb@philb.us>
References: <200803011340.28769.philb@philb.us>
Message-ID: <20080303175358.GA21302@localhost.localdomain>

On Sat, 01 Mar 2008, Phil Barnett wrote:
> Przemek.
> The list traffic seems to have died down. I think this would be an appropriate 
> time for a release.
> Your thoughts?

I agree though I recently ported some Clipper+CT3 application to Harbour
and I've found some incompatibilities and problems I fixed and I do not
know if I should commit it now. F.e. I've found some strange behavior of
transform() function.
Small investigation shows that this is a problem created by us. Instead of
real fix a hack was committed which break other things and then we have
a series of fixes for problems which were caused by this hack. Just simply
'9' do not interrupt function part of picture expression. This happened
in both Harbour and xHarbour repositories and now both projects have
workarounds for it. When I touch it then I've found other problem with
this function. Neither Harbour nor xHarbour return valid results for
some situations. In xHarbour developers tired to "fix" some of them but
they addressed only some special cases instead of resolving the problem.
The xHarbour transform() implementation has even hard coded hacks to pacify
some hbtest warnings for "@" when result size is smaller then 5 bytes!
It's nonsense because it will work only with hbtest because it depends
on the order of executed transform() and set(_SET_DATEFORMAT,...)
functions - In Clipper it's static buffer overflow bug.
I've even disabled these tests from hbtest left this note:

   /* CA-Cl*pper do not check result size and always exchanges
    * bytes 1-2 with bytes 4-5 for @E conversion. It's buffer overflow
    * bug and I do not want to replicate it inside our transform
    * implementation. It also causes that the results for for strings
    * smaller then 5 bytes behaves randomly.
    * In fact precise tests can show that it's not random behavior
    * but CA-Cl*pper uses static buffer for result and when current one
    * is smaller then 5 bytes then first two bytes are replaced with
    * 4-5 bytes from previous result which was length enough, f.e.:
    *          ? transform( "0123456789", "" )
    *          ? transform( "AB", "@E" )
    *          ? transform( "ab", "@E" )
    * [druzus]
    */

I fixed also other problems I found after some small tests:

    ! fixed bug with '9' used as stop condition of function pattern
      this character cannot be stripped, f.e.:
        ? transform( "abc", "@_99*" )
    ! fixed bug with '*' or '$' used with @), f.e.:
        ? transform( -12345, "@) $999999" )
    ! fixed replacing '.' with ',' when @E is used without picture part, f.e.:
        ? transform( 123.45, "@E" )
    ! fixed ',' conversions
        ? transform( 12.34,"@E ab,cd.ef9,9.99,.--" )
    ! fixed bug with picture starting with ".", f.e.:
        ? transform( 0.3456, ".999" )
    ! fixed "@(" and "@)" conversions, f.e.:
        ? transform( -12345, "@) 1999*999" )
    ! fixed late oveflow detection in "@(" and "@)", f.e.:
        ? transtest( -12345, "@( 6798^999" )
    ! fixed "@E" conversion for dates to keep user delimiters set in
      _SET_DATEFORMAT, f.e.:
        set( _SET_DATEFORMAT, "mm:dd:yyyy" ); ? transform( date(), "@E" )
        set( _SET_DATEFORMAT, "yyyy<mm>dd" ); ? transform( date(), "@E" )
      Please note that Harbour is not strictly Clipper compatible here
      because it respects _SET_DATEFORMAT set by user.
    ! fixed 64bit integer conversion by eliminating conversion to
      'double' f.e.:
        ? transform(  1234567890123456789, "99999999999999999999" )
        ? transform( -1234567890123456789, "99999999999999999999" )
    % speed improvement in numeric conversions

but I do not know if it's good idea to touch such important function
just before release. Your opinion?

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Mar  3 13:41:40 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Mar  3 13:41:40 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <20080303175358.GA21302@localhost.localdomain>
References: <200803011340.28769.philb@philb.us>
	<20080303175358.GA21302@localhost.localdomain>
Message-ID: <47CC4664.7050704@dbtopas.lt>

Przemyslaw Czerpak wrote:
> but I do not know if it's good idea to touch such important function
> just before release. Your opinion?

Hi,

I would prefer release ASAP and changes later.

Best regards,
Mindaugas
From m.lacecilia at gmail.com  Mon Mar  3 18:22:49 2008
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Mon Mar  3 18:22:59 2008
Subject: [Harbour] [hwguiwiki] - Wiki project about HwGUI
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAL/Lfa+3D4tNjFuGCFkWGWgBAAAAAA==@gmail.com>

At the address http://hwgui.altervista.org you find a preliminary wiki site
about HwGUI library.
 
This is a project aiming to improve and update the documentation of the
library, offering a complete reference guide, with sample usage, and other
informations (how-to, faq, tools, usage patterns). The goal is to share the
knowledge about HwGUI among programmers and to concentrate it in one
repository open to everybody.
 
Currently only one item is present in each section of classes, commands and
functions reference. New items will be released in the next days, after
collecting your suggestions.
 
Any suggestion for improving this templates or for implementing the other
areas currently not published wil be appreciated.
If interested, look at home page for information on how to contact the wiki
masters for starting a collaborative job.
Regards.
 
Maurizio la Cecilia               
Skype ID: m.lacecilia
ICQ#: 233042955
Yahoo! ID: maurizio_lacecilia
MSN id: mauriziolc                               
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080304/4974f9ad/attachment.html
From sscc at mweb.co.za  Tue Mar  4 01:34:05 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Mar  4 01:34:21 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <47CC4664.7050704@dbtopas.lt>
References: <200803011340.28769.philb@philb.us>	<20080303175358.GA21302@localhost.localdomain>
	<47CC4664.7050704@dbtopas.lt>
Message-ID: <47CCED5D.7080601@mweb.co.za>

Mindaugas Kavaliauskas wrote:
> Przemyslaw Czerpak wrote:
>> but I do not know if it's good idea to touch such important function
>> just before release. Your opinion?
> 
> Hi,
> 
> I would prefer release ASAP and changes later.

If this is a v1.0 release I would prefer that such a basic function be 
correct.

I think Marek has successfully applied some changes to his local copy 
that Patrick suggested for the MSVC build, I would like to see those 
committed as well.

I think that we should get as much right as we can.

My 2c

Regards
Akex

From philb at philb.us  Tue Mar  4 01:42:26 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Mar  4 01:42:30 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <47CCED5D.7080601@mweb.co.za>
References: <200803011340.28769.philb@philb.us> <47CC4664.7050704@dbtopas.lt>
	<47CCED5D.7080601@mweb.co.za>
Message-ID: <200803040142.26497.philb@philb.us>

On Tuesday 04 March 2008 01:34:05 am Alex Strickland wrote:
> If this is a v1.0 release I would prefer that such a basic function be
> correct.

It is not. This will be beta 4 or rc1.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From sscc at mweb.co.za  Tue Mar  4 01:56:13 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Mar  4 01:56:26 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <47CCED5D.7080601@mweb.co.za>
References: <200803011340.28769.philb@philb.us>	<20080303175358.GA21302@localhost.localdomain>	<47CC4664.7050704@dbtopas.lt>
	<47CCED5D.7080601@mweb.co.za>
Message-ID: <47CCF28D.3050405@mweb.co.za>

Alex Strickland wrote:

> I think Marek has successfully applied some changes to his local copy 
> that Patrick suggested for the MSVC build, I would like to see those 
> committed as well.

Sorry, that should be Paul Tucker.

Regards
Alex
From tomaz.zupan at orpo.si  Tue Mar  4 02:01:12 2008
From: tomaz.zupan at orpo.si (=?iso-8859-2?q?Toma=BE_Zupan?=)
Date: Tue Mar  4 02:01:17 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <20080303175358.GA21302@localhost.localdomain>
References: <200803011340.28769.philb@philb.us>
	<20080303175358.GA21302@localhost.localdomain>
Message-ID: <200803040801.12278.tomaz.zupan@orpo.si>

Dne ponedeljek 3. marca 2008 je Przemyslaw Czerpak napisal(a):
>
> but I do not know if it's good idea to touch such important function
> just before release. Your opinion?
>

We should roll out RC1 now and IMO this fix should go in after RC1 release. 

LP, Toma?
From sscc at mweb.co.za  Tue Mar  4 02:18:23 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Mar  4 02:19:28 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <47CCF28D.3050405@mweb.co.za>
References: <200803011340.28769.philb@philb.us>	<20080303175358.GA21302@localhost.localdomain>	<47CC4664.7050704@dbtopas.lt>	<47CCED5D.7080601@mweb.co.za>
	<47CCF28D.3050405@mweb.co.za>
Message-ID: <47CCF7BF.6050003@mweb.co.za>

Why so paranoid?

I think I can count the number of errors that Przemyslaw has 
introduced on one hand, and I wouldn't need all of it.

Regards
Alex

From mbelgrano at deltain.it  Tue Mar  4 04:25:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Mar  4 04:25:43 2008
Subject: [Harbour] Run as clr managed code
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E9F7@SRV02.deltain.net>

How much difficult is for Harbour run as clr managed code?
Will harbour search same collaboration for having this capability?
http://www.dotgnu.org/, http://www.parrotcode.org/ 
http://ildjit.sourceforge.net/  http://dotgnu.info/ 
http://www.mono-project.com/Main_Page


Massimo Belgrano

From mpaliwoda at interia.pl  Tue Mar  4 05:02:26 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Mar  4 05:02:50 2008
Subject: [Harbour] Re: Run as clr managed code
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815E9F7@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815E9F7@SRV02.deltain.net>
Message-ID: <fqj6nm$82r$1@ger.gmane.org>

> How much difficult is for Harbour run as clr managed code?
> Will harbour search same collaboration for having this capability?
> http://www.dotgnu.org/, http://www.parrotcode.org/ 
> http://ildjit.sourceforge.net/  http://dotgnu.info/ 
> http://www.mono-project.com/Main_Page

It is *absolutly* boring to read the same questions over and over again.

These questions have been answered many times so far - please lookup archs.

-- 

Marek

From teo at windtelsoft.com  Tue Mar  4 05:49:31 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Mar  4 05:49:47 2008
Subject: [Harbour] Multiple DESTRUCTOR calls on inherited classes
Message-ID: <200803040449.32104.teo@windtelsoft.com>

Hello,

In a set of inherited classes, the DESTRUCTOR procedure is called more than 
one time if a parent class, has a DESTRUCTOR.

The below prg sample gives:

<output>
Destroying Dummy0 : DUMMY3
Destroying Dummy0 : DUMMY3
Destroying Dummy0 : DUMMY3
</output>

I think that this is incorrect behavior. Acceptable only when each parent 
class has his own DESTRUCTOR.


best regards

Teo Fonrouge


<prg>
#include "hbclass.ch"

FUNCTION Main()
  LOCAL o

  o := Dummy3():New()

RETURN NIL

CLASS Dummy3 FROM Dummy2
ENDCLASS
	
CLASS Dummy2 FROM Dummy1
ENDCLASS

CLASS Dummy1 FROM Dummy0
ENDCLASS

CLASS Dummy0
  DESTRUCTOR OnDestruct()
ENDCLASS

PROCEDURE OnDestruct CLASS Dummy0
  ? "Destroying Dummy0 : " + ::ClassName
RETURN
</prg>
From druzus at acn.waw.pl  Tue Mar  4 05:51:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar  4 05:51:59 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <47CC4664.7050704@dbtopas.lt>
References: <200803011340.28769.philb@philb.us>
	<20080303175358.GA21302@localhost.localdomain>
	<47CC4664.7050704@dbtopas.lt>
Message-ID: <20080304105153.GA6398@localhost.localdomain>

On Mon, 03 Mar 2008, Mindaugas Kavaliauskas wrote:
> Przemyslaw Czerpak wrote:
> >but I do not know if it's good idea to touch such important function
> >just before release. Your opinion?
> Hi,
> I would prefer release ASAP and changes later.

OK but how many changes we want to introduce before next release
and final 1.0 version? I would like to unblock SVN repository as
soon as possible.
And second thing. I would like to ask someone to control the release
process. Can some of you do it?

best regards,
Przemek

ps. I'm attaching regression test for transform() which shows some
    of problems with current Harbour and xHarbour transform()
    implementation. It should execute cleanly just like compiled
    by Clipper and with the modifications I made it does.
-------------- next part --------------
static s_stop := .f.

proc main()
test()
return

function transtest( xVal, cPict, cExpect )
local cResult := transform( xVal, cPict )
if !cResult == cExpect
   s_stop := .t.
endif
return iif( cResult == cExpect, "[OK]  ", "[ERROR] ["+cExpect+"] => ") + ;
       "[" + cResult + "]"

proc stop()
if s_stop
   ? repl("*",50)
   inkey(0)
   s_stop := .f.
endif
return

proc test()
local dt
? transtest( "abcd", "@9!*", "ABCD" )
? transtest( "abcd", "@_9!*", "ABCD" )
? transtest( "abcd", "@_9"+chr(9)+"9!9", "aBc" )
? transtest( "abcd", "@!!!", "ABCD" )
? transtest( "abcd", "@9", "abcd" )
?
? transtest( 134.24, "99,999.99", "   134.24" )
? transtest( 134.24, "@E 99,999.99", "   134,24" )
? transtest( -134.24,"@E 99,999.99", "  -134,24" )
? transtest( 134.24, "@E99,999.99", "       134,24" )
? transtest( -134.24, "@E99,999.99", "      -134,24" )
?
? transtest(-7, "@X 9999", "   7 DB")
? transtest(stod("19920509"), "@E", "09/05/92")
? transtest(val("3.10"),"@X", "3.10")
? transtest(0.80,".9999", ".8000" )
? transtest(-0.80, ".9999", ".****" )
? transtest(12345.123, "@X99", "     12345.123")
? transtest(-12345.123, "@X99", "     12345.123 DB" )
? transtest( 123456.78, "@E", "    123456,78")
? transtest(0,"@C 9.99", "0.00")
stop()
#ifdef __HARBOUR__
dt:=stod("19871231")
set date format to "MM:DD:YYYY"
? transtest( dt, "@E", "31:12:1987" )
set date format to "DD:MM:YYYY"
? transtest( dt, "@E", "31:12:1987")
set date format to "YYYY:MM:DD"
? transtest( dt, "@E", "31:12:1987")
set date format to "YYYY:DD:MM"
? transtest( dt, "@E", "31:12:1987")
set date format to "YY:MM:DD"
? transtest( dt, "@E", "31:12:87")
set date format to "MM:DD:YY"
? transtest( dt, "@E", "31:12:87")
set date format to "DD:MM:YY"
? transtest( dt, "@E", "31:12:87")
set date format to "<YY:DD.MM>"
? transtest( dt, "@E", "<31:12.87>")
set date format to "|YY|MM|DD|"
? transtest( dt, "@E", "|31|12|87|")
set date format to "MM<DD>YY"
? transtest( dt, "@E", "31<12>87")
stop()
#endif

? Transtest( -5, "@(Z $###,##9.99",  "(      5.00)" )
? Transtest( -10, "@)Z $###,##9.99", "$    (10.00)" )
? Transtest( -20, "@Z $###,##9.99",  "$    -20.00" )
? transtest(100,"9999.", " 100.")
? transtest(1.1,"@B!99.99", "1.1         ")
? transtest(12.345,"@R 99/99", "  /12")
? transtest( "1234567890", "@9", "1234567890")
? transtest( 1234567890, "@9", " 1234567890")
? Transtest( 1234, "9 999", "1 234" )
? Transtest( 123.123456, "999.99.99.99", "123.12.45.  " )
? Transtest( 123.123456, "$$$.$$.$$.$$", "123.12.45.  " )
? Transtest( 123.123456, "***.**.**.**", "123.12.45.  " )
? Transtest( 99999, "9.999", "*.***" )
? Transtest(    99, "*.***", "*.***" )
? transtest( 12345, "9999.", "****." )
stop()
? transtest(-12345.00, "@(", "(    12345.00)")
? transtest(-12345.00, "@)", "    (12345.00)")
? transtest(-123456789.00, "@(", "(123456789.00)")
? transtest(-123456789.00, "@)", "(123456789.00)")
? transtest(-1234567890, "@(", "(         1234567890)")
? transtest(-1234567890, "@)", "         (1234567890)")
? transtest(-12345, "@( [999999]", "( 12345])")
? transtest(-12345, "@) [999999]", "[(12345])")
? transtest(-12345, "@( $999999", "( 12345)")
? transtest(-12345, "@) $999999", "$(12345)")
? transtest(-12345, "@( #999999", "( 12345)")
? transtest(-12345, "@) #999999", " (12345)")
? transtest(-12345, "@( $99999", "(12345)")
? transtest(-12345, "@) $99999", "(12345)")
? transtest(-12345, "@( #99999", "(12345)")
? transtest(-12345, "@) #99999", "(12345)")
? transtest(-12345, "@( 6798^999", "(7*8^***)")
? transtest(-12345, "@( 9798^9999", "(718^2345)")
stop()
?
tofix()
return

proc tofix()
? transtest( 134.24, "@E99,999.99", "       134,24" )
? transtest( -134.24, "@E99,999.99", "      -134,24" )
? transtest(0.80,".9999", ".8000")
? transtest(-0.80,".9999", ".****")
? transtest(12345.123, "@X99", "     12345.123")
? transtest(-12345.123, "@X99", "     12345.123 DB")
? transtest( 123456.78, "@E", "    123456,78")
? transtest(0,"@C 9.99", "0.00")
? transtest(1.1,"@B!99.99", "1.1         ")
? transtest(-12345, "@) [999999]", "[(12345])")
? transtest(-12345, "@) $999999", "$(12345)")
? transtest(-12345, "@) *999999", "*(12345)")
? transtest(-12345, "@) #999999", " (12345)")
? transtest(-12345, "@) *9$9*999]", "*($12345])")
? transtest(-12345, "@) *999*999]", "* (12345])")
? transtest(-12345, "@) 0999*999]", "0 (12345])")
? transtest(-12345, "@) 1999*999]", "1 (12345])")
? transtest(-12345, "@) *[99*999]", "([ 12345])")
? transtest(-12345, "@) *****999]", "(**12345])")
? transtest(-12345, "@) *1***999]", "(1*12345])")
? transtest(-12345, "@) * 999999]", "* (12345])")
? transtest( -5, "@(Z $###,##9.99",  "(      5.00)" )
? transtest( -10, "@)Z $###,##9.99", "$    (10.00)" )
? transtest( -5, "@(Z $999,999.99",  "(      5.00)" )
? transtest( -10, "@)Z $999,999.99", "$    (10.00)" )
? transtest( -5, "@(Z 999,999.99",   "(     5.00)" )
? transtest( -10, "@)Z 999,999.99",  "    (10.00)" )
? transtest( -20, "@Z $###,##9.99",  "$    -20.00" )
? transtest(0.1,".9", ".1")
? transtest(0.0,".9", ".0")
? transtest(1,".9", ".*")
? transtest(.456,".9", ".5")
? transtest(123,"99.-", "**.-")
stop()
? transtest(-123.45,"999,999.99", "   -123.45")
? transtest(-123456.78,"999,999,999.99", "   -123,456.78")
? transtest(-123456.78,"$$$,$$$,$$$.$$", "$$ -123,456.78")
? transtest(-123456.78,"***,***,***.**", "***-123,456.78")
? transtest(123456.78,"@E 888,$$$,$$$.$$", "888.123.456,78")
? transtest(123456.78,"@E 888x,$$$,$$$.$$", "888xx123.456,78")
? transtest(123456.78,"@E 888x,,$$$,$$$.$$", "888xxx123.456,78")
? transtest(123456.78,"@E 8,88x,,$$$,$$$.$$", "8.88xxx123.456,78")
? transtest(123456.78,"@E 8,88x,,$$$,,$$$.$$", "8.88xxx123..456,78")
? transtest(123456.78,"@E 8,88x,,$$$,,$$$.$$77,7", "8.88xxx123..456,7877,7")
? transtest(123456,"@E 8,88x,,$$$,,$$$77,7", "8.88xxx123..45677,7")
? transtest(123456,"@E -,999,999", " -123.456")
? transtest(12345,"@E -,999,999", " - 12.345")
? transtest(12345,"@E -,|999,999", " -| 12.345")
? transtest(12345,"@E ^-,|999,999", "^^-| 12.345")
? transtest(12345,"@E 1-,|999,999", "11-| 12.345")
? transtest(12345,"@E |--,|999,999", "|---| 12.345")
stop()
? transtest(12.34,"@E 99'99", "  '12")
? transtest(12.34,"99,99,11", "   12,11")
? transtest(12.34,"@E 99,99,11", "   12,11")
? transtest(12.34,"@E 99,", "12,")
? transtest(12.34,"@E 9,9", "1.2")
? transtest(12.34,"@E ab,cd.ef9,9.99,.--", "abbcd,ef***,* ,.--")
? transtest(12.34,"@E ab,cd,ef9,9.99,.--", "abbcddef1.2,34,.--")
? transtest(12.34,"@E ,ab,cd,ef9,9.99,.--", ",abbcddef1.2,34,.--")
? transtest(12.34,"@E ,,,,99,.99,.--", ",,,,12.,34,.--")
? transtest(124.4,"@E ,,,,9,9.99,.--", ",,,,***,**,.--")
? transtest(  1.2,"@E ,,,,*,*.**,.--", ",,,,**1,20,.--")
? transtest(12.34,"@E ,,,,*,*.**,.--", ",,,,1.2,34,.--")
? transtest(12.34,"@E ,,,,*,*.**,.--,--", ",,,,1.2,34,.--,--")
? transtest(12.34,"@E ,,,,*,*,.,**", ",,,,1.2.,,34")
? transtest(12.34,",,,,*,*,.,**", ",,,,1,2,..34")
? transtest(12.34,",,,,*,*,.,*|,*", ",,,,1,2,..3||4")
? transtest(12.34,",,,,*,*,.,*,*", ",,,,1,2,..3,4")
? transtest(123.345678912,"@E 999.99.99,99.99.", "123,34,67.89,  .")
#ifdef __HARBOUR__
? transtest(  1234567890123456789, "99999999999999999999", " 1234567890123456789" )
? transtest( -1234567890123456789, "99999999999999999999", "-1234567890123456789" )
#else
? transtest(  1234567890123456789, "99999999999999999999", " 1234567890123457000" )
? transtest( -1234567890123456789, "99999999999999999999", "-1234567890123457000" )
#endif
stop()
set(_SET_DATEFORMAT,"YYYY/MM/DD")
? transtest(12345678,"@D", "1234/56/78")
set(_SET_DATEFORMAT,"YYYY.MM.DD")
? transtest(1234.56789,"@D", "1234.56.9 ")
set(_SET_DATEFORMAT,"YYYY.MM:DD")
? transtest(1234.56789,"@D", "1234.56:79")
? transtest(123.345678912,"@D ", " 123.34:57")
set(_SET_DATEFORMAT,"MM-DD-YYYY")
? transtest(.t.,"@RE <|,yY#lL,|>", "99-99-9999T")
? transtest(.f.,"@RE <|,yY#lL,|>", "99-99-9999F")
? transtest(.t.,"@RD <|,yY#lL,|>", "99-99-9999T")
? transtest(.f.,"@RD <|,yY#lL,|>", "99-99-9999F")
? transtest(.f.,"@DE <|,yY#lL,|>", "9")
? transtest("abcdefghij","@S15! <XXXXXXXX>", "<BCDEFGHI>")
? transtest("abcdefghij","@S0! <XXXXXXXX>", "<BCDEFGHI>")
? transtest("abcdefghij","@S5! <XXXXXXXX>", "<BCDE")
stop()
SET FIXED ON
? transtest( 1234,         ,      "            1234" )
? transtest( 1234,     ""  ,      "            1234" )
? transtest( 1234,     "@" ,      "            1234" )
? transtest( 1234,     "@!",      "            1234" )
? transtest( -1234,        ,      "           -1234" )
? transtest( -1234,    "@" ,      "           -1234" )
#ifdef HB_C52_STRICT
? transtest( round(123,0),      , "       123.00" )
? transtest( round(123,0), "@!",  "       123.00" )
? transtest( round(123.0,0),    , "       123.00" )
? transtest( round(123.0,0),"@!", "       123.00" )
#endif
stop()
? transtest( 1234.567,     ,      "      1234.57" )
? transtest( 1234.567,   "",      "      1234.57" )
? transtest( 1234.567, "@" ,      "      1234.57" )
? transtest( 1234.567, "@!",      "      1234.57" )
? transtest( -1234.567,    ,      "     -1234.57" )
? transtest( -1234.567, "@",      "     -1234.57" )
? transtest( val("-1.0"),  ,      "-1.00" )
? transtest( val("-1.0"), "@",    "-1.00" )
? transtest( val("-123"),  ,      "      -123" )
? transtest( val("-123"), "@",    "      -123" )
? transtest( 0,            ,      "               0" )
? transtest( 0.0,          ,      "         0.00" )
? transtest( val("1"),     ,      "      1" )
? transtest( val("12"),    ,      "      12" )
? transtest( val("123"),   ,      "      123" )
? transtest( val("1234"),  ,      "      1234" )
stop()
set decimal to 3
? transtest( 0.0,          ,      "         0.000" )
? transtest( val("1"),     ,      "        1" )
? transtest( val("12"),    ,      "        12" )
? transtest( val("123"),   ,      "        123" )
? transtest( val("1234"),  ,      "        1234" )
set decimal to 4
? transtest( 0.0,          ,      "         0.0000" )
? transtest( val("1"),     ,      "          1" )
? transtest( val("12"),    ,      "          12" )
? transtest( val("123"),   ,      "          123" )
? transtest( val("1234"),  ,      "          1234" )
SET FIXED OFF
stop()
? transtest( -1234, ,          "     -1234" )
? transtest( -1234, "@B",      "-1234     " )
? transtest( -1234, "@(",      "(     1234)" )
? transtest( -1234, "@)",      "     (1234)" )
? transtest( -1234, "@B)",     "(1234)     " )
? transtest( -1234, "@B(",     "(1234)     " )
? transtest( "(  12)", "@B(",  "(  12)" )
? transtest( "(  12)", "@B)",  "(  12)" )
? transtest( "   12", "@B(",   "12   " )
? transtest( "   12", "@B)",   "12   " )
#ifdef __HARBOUR__
? transtest( 1234, "@L",       "0000001234" )
? transtest( 1234, "@0",       "0000001234" )
? transtest( 1234, "@L(",      "0000001234" )
? transtest( 1234, "@0)",      "0000001234" )
? transtest( -1234, "@L(",     "(000001234)" )
? transtest( -1234, "@0)",     "(000001234)" )
/* please test it with FoxPro and xbase++ to check if they give the same result */
? transtest( -1234, "@L",      "-000001234" )
? transtest( -1234, "@0",      "-000001234" )
#endif
/* FlagShip extensions */
? transtest( -1234, "@Z",      "     -1234" )
? transtest( 1234, "@Z",       "      1234" )
? transtest( -1234, "@F",      "     -1234" )
? transtest( 1234, "@F",       "      1234" )
? transtest( -1234, "@T",      "     -1234" )
? transtest( 1234, "@T",       "      1234" )

? transtest( 123456789.12, "@,39 999,999,999.99",  "123,456,789.12" )
? transtest( 123456789.12, "@,39 999,999,999.99",  "123,456,789.12" )
? transtest( 123.456, "@R 9 9 9.9", "1 2 3.5" )
stop()
return

#ifndef __HARBOUR__
func stod(s)
local cDf:=set(_SET_DATEFORMAT,"YYYY/MM/DD"), dt
dt:=ctod(stuff(stuff(s,7,0,"/"),5,0,"/"))
set(_SET_DATEFORMAT,cDf)
return dt
#endif
From mbelgrano at deltain.it  Tue Mar  4 06:25:51 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Mar  4 06:25:59 2008
Subject: [Harbour] Re: Run as clr managed code
In-Reply-To: <fqj6nm$82r$1@ger.gmane.org>
References: <AFB948164110ED43B5EB849E8DEEF03815E9F7@SRV02.deltain.net>
	<fqj6nm$82r$1@ger.gmane.org>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815E9FB@SRV02.deltain.net>

Sorry
for turn this mailing list into a searchable archive can the list
administrator add archive@mail-archive.com as a member of  mailing list
http://www.mail-archive.com/

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Marek Paliwoda
Sent: Tuesday, March 04, 2008 11:02 AM
To: harbour@harbour-project.org
Subject: [Harbour] Re: Run as clr managed code

> How much difficult is for Harbour run as clr managed code?
> Will harbour search same collaboration for having this capability?
> http://www.dotgnu.org/, http://www.parrotcode.org/ 
> http://ildjit.sourceforge.net/  http://dotgnu.info/ 
> http://www.mono-project.com/Main_Page

It is *absolutly* boring to read the same questions over and over again.

These questions have been answered many times so far - please lookup
archs.

-- 

Marek

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From dbtopas at dbtopas.lt  Tue Mar  4 08:00:02 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Mar  4 08:00:01 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <20080304105153.GA6398@localhost.localdomain>
References: <200803011340.28769.philb@philb.us>	<20080303175358.GA21302@localhost.localdomain>	<47CC4664.7050704@dbtopas.lt>
	<20080304105153.GA6398@localhost.localdomain>
Message-ID: <47CD47D2.9000309@dbtopas.lt>

Przemyslaw Czerpak wrote:
>> I would prefer release ASAP and changes later.
> 
> OK but how many changes we want to introduce before next release
> and final 1.0 version? I would like to unblock SVN repository as
> soon as possible.


Hi,


saying above I've meant exactly the same as you, i.e.: "I would like to 
unblock SVN repository as soon as possible". I have a feeling that only 
no SVN activity with make people feeling, what we must do a release. 
Otherwise SVN will be half-opened for another half of a year. But in 
general I have no objection to any your commits, fell free to commit it!!!


 > If this is a v1.0 release I would prefer that such a basic function
 > be correct.

I think we are going to implement many things like MT, maybe change some 
API functions to be codepage or MT friendly, change .hrb file format, 
and many other core changes we we've not imagined yet. So, I do not 
expect for current release to be "final 1.0" with stable fixed Harbour 
core. And I do not care if it is 1.0 or 0.1.0, I just want a release 
with current stable code and open SVN for development.


Best regards,
Mindaugas
From druzus at acn.waw.pl  Tue Mar  4 07:59:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar  4 08:00:04 2008
Subject: [Harbour] Multiple DESTRUCTOR calls on inherited classes
In-Reply-To: <200803040449.32104.teo@windtelsoft.com>
References: <200803040449.32104.teo@windtelsoft.com>
Message-ID: <20080304125956.GB6398@localhost.localdomain>

On Tue, 04 Mar 2008, Teo Fonrouge wrote:
> Hello,
> In a set of inherited classes, the DESTRUCTOR procedure is called more than 
> one time if a parent class, has a DESTRUCTOR.
> I think that this is incorrect behavior. Acceptable only when each parent 
> class has his own DESTRUCTOR.

Below is patch which fixes it. I'll commit it after new release.

best regards,
Przemek


Index: harbour/source/vm/classes.c
===================================================================
--- harbour/source/vm/classes.c	(wersja 8313)
+++ harbour/source/vm/classes.c	(kopia robocza)
@@ -2041,11 +2041,20 @@
    {
       if( pbClasses[ uiClass ] == 1 )
       {
-         hb_vmPushSymbol( &s___msgDestructor );
-         hb_clsMakeSuperObject( hb_stackAllocItem(), pObject, uiClass );
-         hb_vmSend( 0 );
-         if( hb_vmRequestQuery() != 0 )
-            break;
+         PMETHOD pDestructor = hb_clsFindMsg( &s_pClasses[ uiClass ],
+                                              s___msgDestructor.pDynSym );
+         if( pDestructor )
+         {
+            if( pbClasses[ pDestructor->uiSprClass ] == 1 )
+            {
+               hb_vmPushSymbol( &s___msgDestructor );
+               hb_clsMakeSuperObject( hb_stackAllocItem(), pObject, uiClass );
+               hb_vmSend( 0 );
+               if( hb_vmRequestQuery() != 0 )
+                  break;
+               pbClasses[ pDestructor->uiSprClass ] |= 2;
+            }
+         }
       }
    }
 
From alex at belacy.belgorod.su  Tue Mar  4 08:22:39 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Tue Mar  4 08:22:49 2008
Subject: [Harbour] Re:  Time for a release?
In-Reply-To: <20080304105153.GA6398@localhost.localdomain>
References: <200803011340.28769.philb@philb.us>	<20080303175358.GA21302@localhost.localdomain>	<47CC4664.7050704@dbtopas.lt>
	<20080304105153.GA6398@localhost.localdomain>
Message-ID: <47CD4D1F.6000603@belacy.belgorod.su>

Przemyslaw Czerpak writes:

> And second thing. I would like to ask someone to control the release
> process. Can some of you do it?
> 
   If you mean creating release and packages on a Sourceforge - I can.
   What I don't know is how to tag the SVN as I did this with CVS.

  Regards,
   Alexander.
From soporte at dsgsoftware.com  Tue Mar  4 11:20:15 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Mar  4 11:20:34 2008
Subject: [Harbour] DbOrderInfo( DBOI_CUSTOM )
Message-ID: <005601c87e13$a9a636a0$6c00000a@PcJuanxp>

Hi all, Przemek,

Is there any secondary effect in changing dynamically the CUSTOM flag of the 
existent indexes ?

Best regards
Juan 

From mpaliwoda at interia.pl  Tue Mar  4 13:03:43 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Mar  4 13:03:49 2008
Subject: [Harbour] Re:  Time for a release?
In-Reply-To: <47CD4D1F.6000603@belacy.belgorod.su>
References: <200803011340.28769.philb@philb.us>	<20080303175358.GA21302@localhost.localdomain>	<47CC4664.7050704@dbtopas.lt>	<20080304105153.GA6398@localhost.localdomain>
	<47CD4D1F.6000603@belacy.belgorod.su>
Message-ID: <47CD8EFF.6050604@interia.pl>

Hi all,

>> And second thing. I would like to ask someone to control the release
>> process. Can some of you do it?
>>
>   If you mean creating release and packages on a Sourceforge - I can.
>   What I don't know is how to tag the SVN as I did this with CVS.

I can prepare packages for MSVC 6.0, MSVC 8.0 and WinCE 4.20 ARM,
but I need to know if I have to use -DHB_PCRE_REGEX -DPCRE_STATIC
to build PCRE library also.
And how about -DHB_FM_STATISTICS_OFF, -DHB_PP_MULTILINE_STRING and
-DHB_C52_STRICT ? Should they be used or not in a final build ?

-- 

Marek

----------------------------------------------------------------------
Bedac w toalecie korzystala z ...
Sprawd? >>> http://link.interia.pl/f1d2e 

From philb at philb.us  Wed Mar  5 01:00:48 2008
From: philb at philb.us (Phil Barnett)
Date: Wed Mar  5 01:00:52 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <20080304105153.GA6398@localhost.localdomain>
References: <200803011340.28769.philb@philb.us> <47CC4664.7050704@dbtopas.lt>
	<20080304105153.GA6398@localhost.localdomain>
Message-ID: <200803050100.48920.philb@philb.us>

On Tuesday 04 March 2008 05:51:53 am Przemyslaw Czerpak wrote:
> On Mon, 03 Mar 2008, Mindaugas Kavaliauskas wrote:
> > Przemyslaw Czerpak wrote:
> > >but I do not know if it's good idea to touch such important function
> > >just before release. Your opinion?
> >
> > Hi,
> > I would prefer release ASAP and changes later.
>
> OK but how many changes we want to introduce before next release
> and final 1.0 version? I would like to unblock SVN repository as
> soon as possible.

Unlock it to what?

We are in Beta. That means no new features, only bug fixes. If that's what 
you're referring to, then fine.

When we make what we have stable enough to release, then we'll call it 1.0 and 
open the SVN for the tornado that will follow.

Right now, we need to be working toward a release candidate. And quickly.

> And second thing. I would like to ask someone to control the release
> process. Can some of you do it?

I can. I haven't done many releases here and none with SVN, but if you'll all 
bear with me, I'll document it so it's more painless.

> ps. I'm attaching regression test for transform() which shows some
>     of problems with current Harbour and xHarbour transform()
>     implementation. It should execute cleanly just like compiled
>     by Clipper and with the modifications I made it does.

We appreciate everything you have done for this project. Thanks.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From lorenzo.fiorini at gmail.com  Wed Mar  5 04:55:34 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar  5 04:55:44 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
Message-ID: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>

While it correctly gives .F. under Linux

procedure main()

   local cHome := getenv( "HOME" )

   ? cHome

   ? file( cHome + "/.notexist/notexist" )

   return

Any hint?

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Mar  5 06:47:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar  5 06:47:08 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
Message-ID: <20080305114703.GA7410@localhost.localdomain>

On Wed, 05 Mar 2008, Lorenzo Fiorini wrote:
> While it correctly gives .F. under Linux
> procedure main()
>    local cHome := getenv( "HOME" )
>    ? cHome
>    ? file( cHome + "/.notexist/notexist" )
>    return
> Any hint?

What hardware?
Most of non x86 CPUs needs strict alignment. Have you compiled
Harbour with HB_STRICT_ALIGNMENT macro?, f.e.:
   export C_USR=-DHB_STRICT_ALIGNMENT

If it not help then try to reduce this sample and eliminate
one of the functions (getenv() or file()) so it will be easier
to locate the source of problem.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Mar  5 07:06:59 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar  5 07:07:05 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <20080305114703.GA7410@localhost.localdomain>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
	<20080305114703.GA7410@localhost.localdomain>
Message-ID: <9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>

On Wed, Mar 5, 2008 at 12:47 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  What hardware?

PPC32

>  Most of non x86 CPUs needs strict alignment. Have you compiled
>  Harbour with HB_STRICT_ALIGNMENT macro?, f.e.:
>    export C_USR=-DHB_STRICT_ALIGNMENT

No I'll try.

>  If it not help then try to reduce this sample and eliminate
>  one of the functions (getenv() or file()) so it will be easier
>  to locate the source of problem.

The problem is file() and the dir that don't exist. file( "./notexist"
) returns .F.

best regards,
Lorenzo
>
>  best regards,
>  Przemek
>  _______________________________________________
>  Harbour mailing list
>  Harbour@harbour-project.org
>  http://lists.harbour-project.org/mailman/listinfo/harbour
>
From druzus at acn.waw.pl  Wed Mar  5 07:13:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar  5 07:13:59 2008
Subject: [Harbour] Time for a release?
In-Reply-To: <200803050100.48920.philb@philb.us>
References: <200803011340.28769.philb@philb.us> <47CC4664.7050704@dbtopas.lt>
	<20080304105153.GA6398@localhost.localdomain>
	<200803050100.48920.philb@philb.us>
Message-ID: <20080305121353.GB7410@localhost.localdomain>

On Wed, 05 Mar 2008, Phil Barnett wrote:
> > OK but how many changes we want to introduce before next release
> > and final 1.0 version? I would like to unblock SVN repository as
> > soon as possible.
> Unlock it to what?

For new 1.2/2.0 or any other version were we can commit long waiting
new features and extensions.

> We are in Beta. That means no new features, only bug fixes. If that's what 
> you're referring to, then fine.

Yes, it is. And because to release 1.0 we need at lease one RC version
without any modifications then I begin to think I should commit some
of my recent fixes ASAP or I'll force yet another RC what will increase
the release freeze period.

> When we make what we have stable enough to release, then we'll call
> it 1.0 and open the SVN for the tornado that will follow.

Exactly.

> Right now, we need to be working toward a release candidate. And quickly.

I agree and I want to see 1.0 ASAP. We have to accept what we have now
or we will never release 1.0. I know that many things can be done yet
but there is no chance to start them and release 1.0 in this year.

> > And second thing. I would like to ask someone to control the release
> > process. Can some of you do it?
> I can. I haven't done many releases here and none with SVN, but if you'll all 
> bear with me, I'll document it so it's more painless.

Thank you very much. In doc/howtorel.txt there is a text about
CVS releasing which may help in creating such documentation.

> > ps. I'm attaching regression test for transform() which shows some
> >     of problems with current Harbour and xHarbour transform()
> >     implementation. It should execute cleanly just like compiled
> >     by Clipper and with the modifications I made it does.
> We appreciate everything you have done for this project. Thanks.

I'll commit this with some other minor fixes and one important and
missing HB_GTI_* action which is necessary for proper CP setting on
some terminals today and I think we can start release process.
I can create binaries for x86@32 (RH73, FC3, SUSE10.3), x86@64 (SUSE10.3),
MinGW32 linux cross builds (FC3, SUSE10.3), ARM/WinCE linux cross
builds (FC3, SUSE10.3), DOS (DJGPP, OpenWatcom) and maybe some of
HP-UX builds. I can also create BSD build but AFAIR we there is
Harbour BSD port. Does anyone uses it? Should it be updated?
And what about .DEB packages? We need .DEB files for Debian and
Ubuntu created by make_deb.sh and official debian files should be
updated for current ones. They comes from quite old 0.44 version
and do not have important functionality. Can some of Debian/Ubuntu
users ask about it?

best regards,
Przemek
From druzus at acn.waw.pl  Wed Mar  5 07:17:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar  5 07:17:20 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
	<20080305114703.GA7410@localhost.localdomain>
	<9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>
Message-ID: <20080305121709.GC7410@localhost.localdomain>

On Wed, 05 Mar 2008, Lorenzo Fiorini wrote:
> The problem is file() and the dir that don't exist. file( "./notexist"
> ) returns .F.

Can you catch it in GDB to see C call stack?

best regards,
Przemek
From teo at windtelsoft.com  Wed Mar  5 10:15:04 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Mar  5 10:15:24 2008
Subject: [Harbour] Multiple DESTRUCTOR calls on inherited classes
In-Reply-To: <20080304125956.GB6398@localhost.localdomain>
References: <200803040449.32104.teo@windtelsoft.com>
	<20080304125956.GB6398@localhost.localdomain>
Message-ID: <200803050915.04469.teo@windtelsoft.com>

On Tuesday 04 March 2008 06:59:56 am Przemyslaw Czerpak wrote:
> On Tue, 04 Mar 2008, Teo Fonrouge wrote:
> > Hello,
> > In a set of inherited classes, the DESTRUCTOR procedure is called more
> > than one time if a parent class, has a DESTRUCTOR.
> > I think that this is incorrect behavior. Acceptable only when each parent
> > class has his own DESTRUCTOR.
>
> Below is patch which fixes it. I'll commit it after new release.
>
[snip]

Thank you Przemek.


best regards

Teo Fonrouge
From lorenzo.fiorini at gmail.com  Wed Mar  5 10:34:11 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar  5 10:34:26 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <20080305121709.GC7410@localhost.localdomain>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
	<20080305114703.GA7410@localhost.localdomain>
	<9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>
	<20080305121709.GC7410@localhost.localdomain>
Message-ID: <9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>

On Wed, Mar 5, 2008 at 1:17 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  Can you catch it in GDB to see C call stack?

I've rebuilt with -O3 -g -DHB_STRICT_ALIGNMENT and I get:

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0x00000000
                         0x9442dcec in closedir$UNIX2003 ()

(gdb) bt
#0  0x9442dcec in closedir$UNIX2003 ()
#1  0x0004d4a8 in hb_fsFindFirst (pszFileMask=0x312aa0
"/Users/fiorlo/.notexist/notexist", attrmask=0) at ../../hbffind.c:853
#2  0x00047334 in hb_fsFile (pFilename=0x312aa0
"/Users/fiorlo/.notexist/notexist") at ../../file.c:65
#3  0x0005b8ac in hb_spFile (pFilename=0x3129f0
"/Users/fiorlo/.notexist/notexist", pRetPath=<value temporarily
unavailable, due to optimizations>) at ../../spfiles.c:78
#4  0x000474fc in HB_FUN_FILE () at ../../filehb.c:71
#5  0x000302fc in hb_vmDo (uiParams=<value temporarily unavailable,
due to optimizations>) at ../../hvm.c:4868
#6  0x0002bec8 in hb_vmExecute (pCode=0xb6370 "\r\001",
pSymbols=0xb9014) at ../../hvm.c:1057
#7  0x00001cf0 in HB_FUN_MAIN ()
#8  0x000302fc in hb_vmDo (uiParams=<value temporarily unavailable,
due to optimizations>) at ../../hvm.c:4868
#9  0x0003aa5c in main (argc=<value temporarily unavailable, due to
optimizations>, argv=<value temporarily unavailable, due to
optimizations>) at mainstd.c:66

I'm using OS X since few days so I'm not an expert. I miss a "decent"
terminal program since the built-in terminal app is almost unusable.
I've successfully dowloaded and built putty from darwinports.org but I
can't get pterm working.

best regards,
Lorenzo
From maurilio.longo at libero.it  Wed Mar  5 11:18:57 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Mar  5 11:19:17 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>	<20080305114703.GA7410@localhost.localdomain>	<9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>	<20080305121709.GC7410@localhost.localdomain>
	<9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
Message-ID: <47CEC7F1.8060303@libero.it>

Lorenzo,

welcome aboard Mac OS X :) You won't regret, I'm almost sure!

Maurilio.

Lorenzo Fiorini wrote:
> On Wed, Mar 5, 2008 at 1:17 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> 
>>  Can you catch it in GDB to see C call stack?
> 
> I've rebuilt with -O3 -g -DHB_STRICT_ALIGNMENT and I get:
> 
> Program received signal EXC_BAD_ACCESS, Could not access memory.
> Reason: KERN_PROTECTION_FAILURE at address: 0x00000000
>                          0x9442dcec in closedir$UNIX2003 ()
> 
> (gdb) bt
> #0  0x9442dcec in closedir$UNIX2003 ()
> #1  0x0004d4a8 in hb_fsFindFirst (pszFileMask=0x312aa0
> "/Users/fiorlo/.notexist/notexist", attrmask=0) at ../../hbffind.c:853
> #2  0x00047334 in hb_fsFile (pFilename=0x312aa0
> "/Users/fiorlo/.notexist/notexist") at ../../file.c:65
> #3  0x0005b8ac in hb_spFile (pFilename=0x3129f0
> "/Users/fiorlo/.notexist/notexist", pRetPath=<value temporarily
> unavailable, due to optimizations>) at ../../spfiles.c:78
> #4  0x000474fc in HB_FUN_FILE () at ../../filehb.c:71
> #5  0x000302fc in hb_vmDo (uiParams=<value temporarily unavailable,
> due to optimizations>) at ../../hvm.c:4868
> #6  0x0002bec8 in hb_vmExecute (pCode=0xb6370 "\r\001",
> pSymbols=0xb9014) at ../../hvm.c:1057
> #7  0x00001cf0 in HB_FUN_MAIN ()
> #8  0x000302fc in hb_vmDo (uiParams=<value temporarily unavailable,
> due to optimizations>) at ../../hvm.c:4868
> #9  0x0003aa5c in main (argc=<value temporarily unavailable, due to
> optimizations>, argv=<value temporarily unavailable, due to
> optimizations>) at mainstd.c:66
> 
> I'm using OS X since few days so I'm not an expert. I miss a "decent"
> terminal program since the built-in terminal app is almost unusable.
> I've successfully dowloaded and built putty from darwinports.org but I
> can't get pterm working.
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dbtopas at dbtopas.lt  Wed Mar  5 11:36:29 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Mar  5 11:36:26 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>	<20080305114703.GA7410@localhost.localdomain>	<9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>	<20080305121709.GC7410@localhost.localdomain>
	<9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
Message-ID: <47CECC0D.7090409@dbtopas.lt>

> (gdb) bt
> #0  0x9442dcec in closedir$UNIX2003 ()
> #1  0x0004d4a8 in hb_fsFindFirst (pszFileMask=0x312aa0
> "/Users/fiorlo/.notexist/notexist", attrmask=0) at ../../hbffind.c:853

Hi,


looks like missing line in rtl/hbffind.c:hb_fsFindClose():

+        if( info->dir )
          {
             closedir( info->dir );
          }


Best regards,
Mindaugas

From druzus at acn.waw.pl  Wed Mar  5 12:01:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar  5 12:01:12 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
	<20080305114703.GA7410@localhost.localdomain>
	<9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>
	<20080305121709.GC7410@localhost.localdomain>
	<9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
Message-ID: <20080305170100.GA12683@localhost.localdomain>

On Wed, 05 Mar 2008, Lorenzo Fiorini wrote:
> >  Can you catch it in GDB to see C call stack?
> I've rebuilt with -O3 -g -DHB_STRICT_ALIGNMENT and I get:
> Program received signal EXC_BAD_ACCESS, Could not access memory.
> Reason: KERN_PROTECTION_FAILURE at address: 0x00000000
>                          0x9442dcec in closedir$UNIX2003 ()
> (gdb) bt
> #0  0x9442dcec in closedir$UNIX2003 ()
> #1  0x0004d4a8 in hb_fsFindFirst (pszFileMask=0x312aa0
> "/Users/fiorlo/.notexist/notexist", attrmask=0) at ../../hbffind.c:853

Thank you. It's a bug which can be exploited on some *nix systems.
It has to be fixed and I'll do that ASAP.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Mar  5 12:54:32 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar  5 12:54:36 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <47CECC0D.7090409@dbtopas.lt>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
	<20080305114703.GA7410@localhost.localdomain>
	<9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>
	<20080305121709.GC7410@localhost.localdomain>
	<9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
	<47CECC0D.7090409@dbtopas.lt>
Message-ID: <9257026e0803050954i5c172e56uf4a1b78ea545d69a@mail.gmail.com>

On Wed, Mar 5, 2008 at 5:36 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:

>  looks like missing line in rtl/hbffind.c:hb_fsFindClose():
>
>  +        if( info->dir )
>           {
>              closedir( info->dir );
>           }

Do you mean where there is /* Intentionally do nothing */ ?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Mar  5 13:11:01 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar  5 13:14:45 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <47CEC7F1.8060303@libero.it>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
	<20080305114703.GA7410@localhost.localdomain>
	<9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>
	<20080305121709.GC7410@localhost.localdomain>
	<9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
	<47CEC7F1.8060303@libero.it>
Message-ID: <9257026e0803051011v3e76cf68se09afa2977a72fe5@mail.gmail.com>

On Wed, Mar 5, 2008 at 5:18 PM, Maurilio Longo <maurilio.longo@libero.it> wrote:

>  welcome aboard Mac OS X :) You won't regret, I'm almost sure!

I'm not new in the Apple world. I've programmed on an Apple II in 1984
:))) and I still have an Apple IIe compatible with two external 51/4"
floppy drives but unfortunately it doesn't work anymore.

Hey now that I recall I still have a book "How to interface 6502" somewhere.

Let me look if there is sth still useful :))).

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Mar  5 13:17:10 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar  5 13:19:29 2008
Subject: [Harbour] This code result in a "Bus error" under OS X 10.5
In-Reply-To: <47CECC0D.7090409@dbtopas.lt>
References: <9257026e0803050155q6a979b03r74e7d572c86bce5c@mail.gmail.com>
	<20080305114703.GA7410@localhost.localdomain>
	<9257026e0803050406h4ef7aedek776ca00744252fa7@mail.gmail.com>
	<20080305121709.GC7410@localhost.localdomain>
	<9257026e0803050734i766dbf87o4dfc3ec42a10228@mail.gmail.com>
	<47CECC0D.7090409@dbtopas.lt>
Message-ID: <9257026e0803051017v1ad0f168yf79ab37f78695971@mail.gmail.com>

On Wed, Mar 5, 2008 at 5:36 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:

>  looks like missing line in rtl/hbffind.c:hb_fsFindClose():
>
>  +        if( info->dir )
>           {
>              closedir( info->dir );
>           }

You're right, now it works.

Many thanks,
Lorenzo
From druzus at acn.waw.pl  Wed Mar  5 13:23:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar  5 13:25:46 2008
Subject: [Harbour] 2008-03-05 19:10 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20080305182323.GA13270@localhost.localdomain>

2008-03-05 19:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/screen2.c
    ! fixed possible vary bad bug (memory buffer overflow) in SCREENSTR()

  * harbour/source/rtl/hbffind.c
    ! fixed possible GPF in some *nixes

  * harbour/source/vm/classes.c
    ! do not execute the same destructor inherited from different parent
      classes more then once

  * harbour/source/rtl/transfrm.c
    ! fixed bug with '9' used as stop condition of function pattern
      this character cannot be stripped, f.e.:
        ? transform( "abc", "@_99*" )
    ! fixed bug with '*' or '$' used with @), f.e.:
        ? transform( -12345, "@) $999999" )
    ! fixed replacing '.' with ',' when @E is used without picture part, f.e.:
        ? transform( 123.45, "@E" )
    ! fixed ',' conversions
        ? transform( 12.34,"@E ab,cd.ef9,9.99,.--" )
    ! fixed bug with picture starting with ".", f.e.:
	? transform( 0.3456, ".999" )
    ! fixed "@(" and "@)" conversions, f.e.:
        ? transform( -12345, "@) 1999*999" )
    ! fixed late oveflow detection in "@(" and "@)", f.e.:
        ? transtest( -12345, "@( 6798^999" )
    ! fixed "@E" conversion for dates to keep user delimiters set in
      _SET_DATEFORMAT, f.e.:
        set( _SET_DATEFORMAT, "mm:dd:yyyy" ); ? transform( date(), "@E" )
        set( _SET_DATEFORMAT, "yyyy<mm>dd" ); ? transform( date(), "@E" )
      Please note that Harbour is not strictly Clipper compatible here
      because it respects _SET_DATEFORMAT set by user.
    ! fixed 64bit integer conversion by eliminating conversion to
      'double' f.e.:
        ? transform(  1234567890123456789, "99999999999999999999" )
        ? transform( -1234567890123456789, "99999999999999999999" )
    ! some other fixes, see regression test transtst.prg
    % speed improvement in numeric conversions

  + harbour/tests/transtst.prg
    + added regression test for transform function

  * harbour/utils/hbtest/rt_trans.prg
    * disabled transform() tests for "@E" and result smaller then 5 bytes
      CA-Cl*pper do not check result size and always exchanges
      bytes 1-2 with bytes 4-5 for @E conversion. It's buffer overflow
      bug and I do not want to replicate it inside our transform
      implementation. It also causes that the results for for strings
      smaller then 5 bytes behaves randomly.
      In fact precise tests can show that it's not random behavior
      but CA-Cl*pper uses static buffer for result and when current one
      is smaller then 5 bytes then first two bytes are replaced with
      4-5 bytes from previous result which was length enough, f.e.:
               ? transform( "0123456789", "" )
               ? transform( "AB", "@E" )
               ? transform( "ab", "@E" )
      Replicating exact CA-Cl*pper behavior it's trivial (it will be enough
      to use static buffer two and not check the size of current result) but
      IMHO it's bug.

  * harbour/source/rtl/round.c
    * added strictly Clipper compatible code covered by HB_C52_STRICT
      and comment about possible difference in Harbour.

  * harbour/include/hbgtinfo.ch
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gtsln/gtsln.c
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/gtwvt/gtwvt.c
    + added HB_GTI_ISUNICODE - it returns logical value with information
      about Unicode mode in active GT driver - it's necessary for proper
      CP initialization in some GTDs which can work in both mode depending
      on client side settings

  * harbour/source/rtl/gttrm/gttrm.c
    * improved UTF-8 detection
    * added automatic PuTTY detection
    * improved PuTTY and some xterm key handling
    * added some missing RXVT keys

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Mar  5 13:49:05 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar  5 13:49:21 2008
Subject: [Harbour] gttrm OS X Alt keys
Message-ID: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>

It seems that K_ALT_keys are "aliens" in the OS X world even using
putty and a Linux server.

Has anybody already done sth about it?

( for example our debug uses Alt+D )

best regards,
Lorenzo
From miguelangel at marchuet.net  Wed Mar  5 15:34:34 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Mar  5 15:35:29 2008
Subject: [Harbour] ourXdbu in sourceforge
Message-ID: <47CF03DA.9060300@marchuet.net>

ourXdbu has been added to

https://sourceforge.net/projects/ourxdbu/

Best regards,
Miguel Angel marchuet
From druzus at acn.waw.pl  Wed Mar  5 18:31:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar  5 18:31:49 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
Message-ID: <20080305233142.GA5289@localhost.localdomain>

On Wed, 05 Mar 2008, Lorenzo Fiorini wrote:
> It seems that K_ALT_keys are "aliens" in the OS X world even using
> putty and a Linux server.

When you want to test terminal keyboard capabilities then please first
check escape sequences generated for given key combinations. It will
give you an answer if sth can be implemented or not.
So please run tests/gtkeys.prg with //gtstd and check what is shown
for K_ALT_A:
1. nothing - key combination is not supported by your terminal program
   Check if your terminal program have some switches which can enable them.
2. the same as for A - key is sent but it's not possible to recognize
   if it's simple A or K_ALT_A so it will not work in any program
   Check if your terminal program have some switches which can enable
   unique escape sequence for them.
3. unique escape sequence is sent - it's possible to add support for
   the key or key combination. The question is if our terminal GTs
   (GTTRM, GTCRS, GTSLN) can recognize it. Now you should check it
   using tests/gtkeys.prg with this GTs, f.e.: //gttrm
   If given GT driver do not recognize it then please check your terminal
   type set in environment variables (echo $HB_TERM;echo $TERM). If it's
   also properly set then please send here the following information:
      a. name of terminal program you are using
      b. terminal type set in TERM or HB_TERM
      c. name of key or key combination which does not work
      d. exact escape sequence sent for given key or key combination
         from ./gtkeys //GTSTD
      e. result of decoding the same key (combination) by the terminal
         GT you are testing from ./gtkeys
   and I'll simply add support for this key or key combination or I'll
   tell you how to set TERM variable or update termcap/terminfo database
   on the server side if it will be possible.

'"alien" in the OS X world' does not give me any information what's
the problem. So what exactly happens in your case: 1, 2 or 3 above
and if then please send also a,b,c,d,e information. Then maybe I'll
be able to help.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Mar  6 01:32:36 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar  6 01:32:41 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <20080305233142.GA5289@localhost.localdomain>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
	<20080305233142.GA5289@localhost.localdomain>
Message-ID: <9257026e0803052232y2cd7735at49fac353267350f2@mail.gmail.com>

On Thu, Mar 6, 2008 at 12:31 AM, Przemyslaw Czerpak

>  When you want to test terminal keyboard capabilities then please first
>  [...]
>  '"alien" in the OS X world' does not give me any information what's
>  the problem. So what exactly happens in your case: 1, 2 or 3 above
>  and if then please send also a,b,c,d,e information. Then maybe I'll
>  be able to help.

Sorry if I was too generic but I've just started to work on OS X and I
don't want to report a "problem" when it's a platform issue.
What I meant is that Alt keys are never used in OS X native programs
so I was looking for comments from more skilled OS X users.

However since my first step is to enable OS X clients to use remote
gttrm apps using putty I'd like to have Alt keys support so I'll do
the test you suggested and I'll report.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Thu Mar  6 04:08:56 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar  6 04:09:02 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <20080305233142.GA5289@localhost.localdomain>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
	<20080305233142.GA5289@localhost.localdomain>
Message-ID: <9257026e0803060108y5fbf093dt2a39359335fb6cc9@mail.gmail.com>

On Thu, Mar 6, 2008 at 12:31 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  So please run tests/gtkeys.prg with //gtstd and check what is shown
>  for K_ALT_A:

With "standard" OS X Teminal App, iTerm App and putty:

char: 195
char: 165

> Now you should check it using tests/gtkeys.prg with this GTs, f.e.: //gttrm

same as above.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Mar  6 04:49:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Mar  6 04:50:02 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <9257026e0803060108y5fbf093dt2a39359335fb6cc9@mail.gmail.com>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
	<20080305233142.GA5289@localhost.localdomain>
	<9257026e0803060108y5fbf093dt2a39359335fb6cc9@mail.gmail.com>
Message-ID: <20080306094955.GA8057@localhost.localdomain>

On Thu, 06 Mar 2008, Lorenzo Fiorini wrote:
> >  So please run tests/gtkeys.prg with //gtstd and check what is shown
> >  for K_ALT_A:
> With "standard" OS X Teminal App, iTerm App and putty:
> char: 195
> char: 165

Fine. Now you can add workaround for it yourself by simple:
   hb_gtInfo( HB_GTI_ADDKEYMAP, { K_ALT_A, chr( 195 ) + chr( 165 ) } )
but if you want me to add more generic support for it then we should
check more general rules used by MaxOSX for ALT keys.
So first we should check is console is in UTF-8 mode and if GTTRM
detected it automatically. The values suggests that it's single UTF-8
character but GTTRM cannot detect UTF8 mode.
   ? HB_UTF8PEEK( chr( 195 ) + chr( 165 ), 1 ) // => 229 == 0xE5

What shows:

   #include "hbgtinfo.ch"
   proc main()
      ? hb_gtInfo(HB_GTI_ISUNICODE)
   return

Just try to make also:
   printf "[\xc3\xa5]\n"
from bash and check how many characters will be shown. Check your PuTTY
configuration, disable UTF-8 and check how many keys will be returned
for K_ALT_A (still 2 or 1?) BTW. Are the above two bytes sent together
or first one is set when you hit ALT and second when you hit A.
Finally check other key values to find global decoding rules. It's
possible that with ALT you simply have some other characters on MacOSX
so please also test some of cursor keys with ALT combination, f.e.
escape sequences for K_LEFT and K_ALT_LEFT, K_RIGHT and K_ALT_RIGHT,
K_ENTER and K_ALT_ENTER
If you answer for all of the above questions (and maybe some others,
BTW what is your TERM envvar) then we can add general support for MacOSX
and PuTTY to GTTRM if it needs some additional code. But I'm still not
sure if it's really necessary. It's possible that only UTF-8 mode was
not detected automatically. Unfortunately there is no standard way to
make it and I have to use small hack. It's possible that it does not
work with PuTTY MacOSX port. If yes then I can try to update it.

best regards,
Przemek
From sscc at mweb.co.za  Thu Mar  6 06:14:51 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Mar  6 06:14:57 2008
Subject: [Harbour] RDD's for 16bit 
Message-ID: <47CFD22B.6090207@mweb.co.za>

To all

Is there conceptually/technically/legally any impediment to compiling 
the CDX RDD to be used with Clipper (16bit obviously)?

I ask because I would like to implement encryption and I still have a 
large part of my application running with Clipper and Clip4Win.

Regards
Alex
From lorenzo.fiorini at gmail.com  Thu Mar  6 07:17:12 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar  6 07:18:07 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <20080306094955.GA8057@localhost.localdomain>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
	<20080305233142.GA5289@localhost.localdomain>
	<9257026e0803060108y5fbf093dt2a39359335fb6cc9@mail.gmail.com>
	<20080306094955.GA8057@localhost.localdomain>
Message-ID: <9257026e0803060417l3955f944n27c5efff88ff9e85@mail.gmail.com>

On Thu, Mar 6, 2008 at 10:49 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  What shows:
>
>    #include "hbgtinfo.ch"
>    proc main()
>       ? hb_gtInfo(HB_GTI_ISUNICODE)
>    return
> [...]
>  Just try to make also:
>    printf "[\xc3\xa5]\n"

With Unicode UTF-8:

.T.  1 char

With Western ISO-Latin-1:

.F.  2 chars

env var TERM is linux

>  If you answer for all of the above questions (and maybe some others,
>  BTW what is your TERM envvar) then we can add general support for MacOSX
>  and PuTTY to GTTRM if it needs some additional code. But I'm still not
>  sure if it's really necessary. It's possible that only UTF-8 mode was
>  not detected automatically. Unfortunately there is no standard way to
>  make it and I have to use small hack. It's possible that it does not
>  work with PuTTY MacOSX port. If yes then I can try to update it.

Do you think it'll be difficult to support another app called iTerm?

I can't find a putty package already built for Mac OS X and I can't
ask to users to compile it from developer tools.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Mar  6 09:27:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Mar  6 09:28:02 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <9257026e0803060417l3955f944n27c5efff88ff9e85@mail.gmail.com>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
	<20080305233142.GA5289@localhost.localdomain>
	<9257026e0803060108y5fbf093dt2a39359335fb6cc9@mail.gmail.com>
	<20080306094955.GA8057@localhost.localdomain>
	<9257026e0803060417l3955f944n27c5efff88ff9e85@mail.gmail.com>
Message-ID: <20080306142749.GA9089@localhost.localdomain>

On Thu, 06 Mar 2008, Lorenzo Fiorini wrote:
> >  What shows:
> >    #include "hbgtinfo.ch"
> >    proc main()
> >       ? hb_gtInfo(HB_GTI_ISUNICODE)
> >    return
> > [...]
> >  Just try to make also:
> >    printf "[\xc3\xa5]\n"
> With Unicode UTF-8:
> .T.  1 char
> With Western ISO-Latin-1:
> .F.  2 chars
> env var TERM is linux

So UTF-8 is properly recognized. But when you were making test with
gtkeys //gttrm which mode was active. Can you check the results
of K_ALT_A with and without UTF-8.
And what are the results of ALT + cursor keys.

> >  If you answer for all of the above questions (and maybe some others,
> >  BTW what is your TERM envvar) then we can add general support for MacOSX
> >  and PuTTY to GTTRM if it needs some additional code. But I'm still not
> >  sure if it's really necessary. It's possible that only UTF-8 mode was
> >  not detected automatically. Unfortunately there is no standard way to
> >  make it and I have to use small hack. It's possible that it does not
> >  work with PuTTY MacOSX port. If yes then I can try to update it.
> Do you think it'll be difficult to support another app called iTerm?

No. Just simply test it and check how it works. I suggest to use UTF-8 mode
if possible. But the question is about terminal capabilities supported by
iTerm.

> I can't find a putty package already built for Mac OS X and I can't
> ask to users to compile it from developer tools.

Create binaries and put it somewhere on public forum or better MacOSX
package with PuTTY binaries.

best regards,
Przemek
From philb at philb.us  Thu Mar  6 09:50:32 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Mar  6 09:50:36 2008
Subject: [Harbour] RDD's for 16bit
In-Reply-To: <47CFD22B.6090207@mweb.co.za>
References: <47CFD22B.6090207@mweb.co.za>
Message-ID: <200803060950.32319.philb@philb.us>

On Thursday 06 March 2008 06:14:51 am Alex Strickland wrote:
> To all
>
> Is there conceptually/technically/legally any impediment to compiling
> the CDX RDD to be used with Clipper (16bit obviously)?
>
> I ask because I would like to implement encryption and I still have a
> large part of my application running with Clipper and Clip4Win.

Most of the requirements of the GPL revolve around what happens if you 
redistribute compiled code. If you do, you are required to make the source 
code of the GPL parts of the compiled code available to your end users. If 
this is internal to a company and you are on the payroll, there is generally 
no requirement.

The second level of GPL is that when you make modifications to the GPL 
portions of the code, you make those modifications freely avialable to the 
world with a GPL license, ie: you give back to the community.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From lorenzo.fiorini at gmail.com  Thu Mar  6 10:29:54 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar  6 10:30:27 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <20080306142749.GA9089@localhost.localdomain>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
	<20080305233142.GA5289@localhost.localdomain>
	<9257026e0803060108y5fbf093dt2a39359335fb6cc9@mail.gmail.com>
	<20080306094955.GA8057@localhost.localdomain>
	<9257026e0803060417l3955f944n27c5efff88ff9e85@mail.gmail.com>
	<20080306142749.GA9089@localhost.localdomain>
Message-ID: <9257026e0803060729o62171dccy68c1bebd735203b9@mail.gmail.com>

On Thu, Mar 6, 2008 at 3:27 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  So UTF-8 is properly recognized. But when you were making test with
>  gtkeys //gttrm which mode was active. Can you check the results
>  of K_ALT_A with and without UTF-8.
>  And what are the results of ALT + cursor keys.

With Unicode UTF-8 Alt+A:

char: 195
char: 165

when I press the A, nothing happens pressing Alt

Alt+cursor keys give "normal" K_RIGHT, K_LEFT, K_DOWN, K_UP

>  Create binaries and put it somewhere on public forum or better MacOSX
>  package with PuTTY binaries.

Yes, I considered it but putty needs X11 env which is not installed by default.

Probably you can give me some hints: on OS X putty localhost works
while pterm opens but doesn't show the shell prompt but it asks the
confirmation when I close the window.

best regards,
Lorenzo
From jfl at mafact.com  Thu Mar  6 11:22:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Thu Mar  6 11:22:18 2008
Subject: [Harbour] RDD's for 16bit
Message-ID: <35f29c50.1c87fa6.18bb1ca.bb3@mafact.com>

I don't think Alex would like to redistribute the RDD by itself. If I correctly understand, he would like to use this RDD to compile some "End Users" programs, but from the Clipper Compiler instead of Harbour. So I thinks there is no legal problem here.

I could be interested also, but I really have a doubt about technical possibility.

Alex, If you are interested, I actually created one C4W emulator running under Harbour and Fwh. It is not 100% compatible nor 100% finished but could be of interest.

Regards,

JF,

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Phil Barnett
Envoy??: jeudi 6 mars 2008 15:51
??: harbour@harbour-project.org
Objet?: Re: [Harbour] RDD's for 16bit

On Thursday 06 March 2008 06:14:51 am Alex Strickland wrote:
> To all
>
> Is there conceptually/technically/legally any impediment to compiling
> the CDX RDD to be used with Clipper (16bit obviously)?
>
> I ask because I would like to implement encryption and I still have a
> large part of my application running with Clipper and Clip4Win.

Most of the requirements of the GPL revolve around what happens if you 
redistribute compiled code. If you do, you are required to make the source 
code of the GPL parts of the compiled code available to your end users. If 
this is internal to a company and you are on the payroll, there is generally 
no requirement.

The second level of GPL is that when you make modifications to the GPL 
portions of the code, you make those modifications freely avialable to the 
world with a GPL license, ie: you give back to the community.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From philb at philb.us  Thu Mar  6 11:27:30 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Mar  6 11:27:50 2008
Subject: [Harbour] RDD's for 16bit
In-Reply-To: <35f29c50.1c87fa6.18bb1ca.bb3@mafact.com>
References: <35f29c50.1c87fa6.18bb1ca.bb3@mafact.com>
Message-ID: <200803061127.30719.philb@philb.us>

On Thursday 06 March 2008 11:22:00 am J. Lefebvre wrote:

> I don't think Alex would like to redistribute the RDD by itself. If I
> correctly understand, he would like to use this RDD to compile some "End
> Users" programs, but from the Clipper Compiler instead of Harbour. So I
> thinks there is no legal problem here.

If GPL code is distributed in any way, that creates a legal condition. GPL 
code is copyrighted and you have permission to distribute it if you follow 
the rules. The rules are that you have to supply the source code if it is 
requested.

> I could be interested also, but I really have a doubt about technical
> possibility.

Agreed.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From randy at palmasdev.com  Thu Mar  6 12:37:30 2008
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Mar  6 12:38:13 2008
Subject: [Harbour] RDD's for 16bit
In-Reply-To: <35f29c50.1c87fa6.18bb1ca.bb3@mafact.com>
References: <35f29c50.1c87fa6.18bb1ca.bb3@mafact.com>
Message-ID: <20080306173715.F3A3DEB80@smtp.tor.pathcom.com>

Hi Alex,

>Alex, If you are interested, I actually created one C4W emulator 
>running under Harbour and Fwh. It is not 100% compatible nor 100% 
>finished but could be of interest.

I have switched to WinDock (from C4W32) and you get all the source 
code - Works very well with Harbour!

Regards,
Randy. 

From lorenzo.fiorini at gmail.com  Fri Mar  7 11:10:55 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar  7 13:41:32 2008
Subject: [Harbour] ordcreate hangs in OS X
Message-ID: <9257026e0803070810x2e2c33adg7d984832e9954c43@mail.gmail.com>

No RT error the app simply hang and rlock says the records are locked.

A small test in the same dir works but when I try to recreate indexes
the app hangs.

If I Ctrl+C gdb I get:

Program received signal SIGINT, Interrupt.
0x9447ad50 in fcntl$UNIX2003 ()
(gdb) bt
#0  0x9447ad50 in fcntl$UNIX2003 ()
#1  0x00076918 in hb_fsLock ()
#2  0x000bae4c in hb_dbfLockIdxFile ()
#3  0x000c6dac in hb_cdxIndexLockWrite ()
#4  0x000da108 in hb_cdxOrderCreate ()
#5  0x000ac704 in HB_FUN_ORDCREATE ()

Any suggestion?

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Mar  7 19:39:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Mar  7 20:57:52 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <9257026e0803060729o62171dccy68c1bebd735203b9@mail.gmail.com>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
	<20080305233142.GA5289@localhost.localdomain>
	<9257026e0803060108y5fbf093dt2a39359335fb6cc9@mail.gmail.com>
	<20080306094955.GA8057@localhost.localdomain>
	<9257026e0803060417l3955f944n27c5efff88ff9e85@mail.gmail.com>
	<20080306142749.GA9089@localhost.localdomain>
	<9257026e0803060729o62171dccy68c1bebd735203b9@mail.gmail.com>
Message-ID: <20080308003951.GB5255@localhost.localdomain>

On Thu, 06 Mar 2008, Lorenzo Fiorini wrote:
> >  So UTF-8 is properly recognized. But when you were making test with
> >  gtkeys //gttrm which mode was active. Can you check the results
> >  of K_ALT_A with and without UTF-8.
> >  And what are the results of ALT + cursor keys.
> With Unicode UTF-8 Alt+A:
> char: 195
> char: 165

I'm a little bit confused. The GTTRM results should not be the same
for UTF and ISO modes. Can you repeat the tests?
But please remember that GTTRM detects UTF8/ISO mode at application
startup and when you change it in your terminal settings during
application execution it will not be detected.

> Alt+cursor keys give "normal" K_RIGHT, K_LEFT, K_DOWN, K_UP

So this probably will not work.

> >  Create binaries and put it somewhere on public forum or better MacOSX
> >  package with PuTTY binaries.
> Yes, I considered it but putty needs X11 env which is not installed by default.

So it's the problem. I think that the easiest way will be using
some MscOSX default terminal program. If screen output is correct
(try UTF8 mode if you want to used all font glyphs) then check the
keyboard. If you can document the escape key sequences used by this
terminal emulator (using GTSTD) then I can add support for it if it
will be necessary and this terminal program is not XTERM compatible.
What TERM envvar it sets?

> Probably you can give me some hints: on OS X putty localhost works
> while pterm opens but doesn't show the shell prompt but it asks the
> confirmation when I close the window.

Sorry but it looks like sth hard coded in PuTTY MacOSX code.
Maybe it simply cannot find default SHELL or this is result
of executing it. It's also possible that the problem is inside
allocating pseudo terminal (it's a virtual device) for shell
session. Probably using MacOSX I would find the answer but
now I can only guess.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sat Mar  8 01:00:51 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Mar  8 01:05:34 2008
Subject: [Harbour] gttrm OS X Alt keys
In-Reply-To: <20080308003951.GB5255@localhost.localdomain>
References: <9257026e0803051049s5b14bb1fn6212757bb41441e4@mail.gmail.com>
	<20080305233142.GA5289@localhost.localdomain>
	<9257026e0803060108y5fbf093dt2a39359335fb6cc9@mail.gmail.com>
	<20080306094955.GA8057@localhost.localdomain>
	<9257026e0803060417l3955f944n27c5efff88ff9e85@mail.gmail.com>
	<20080306142749.GA9089@localhost.localdomain>
	<9257026e0803060729o62171dccy68c1bebd735203b9@mail.gmail.com>
	<20080308003951.GB5255@localhost.localdomain>
Message-ID: <9257026e0803072200t50be2949ucf1ecd3c018c9eaa@mail.gmail.com>

On Sat, Mar 8, 2008 at 1:39 AM, Przemyslaw Czerpak

>  I'm a little bit confused. The GTTRM results should not be the same
>  for UTF and ISO modes. Can you repeat the tests?
>  But please remember that GTTRM detects UTF8/ISO mode at application
>  startup and when you change it in your terminal settings during
>  application execution it will not be detected.

I'll repeat the tests Monday.

>  Probably using MacOSX I would find the answer but
>  now I can only guess.

Many thanks anyway.

best regards,
Lorenzo
From mbelgrano at deltain.it  Sun Mar  9 05:30:02 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Mar  9 05:30:11 2008
Subject: [Harbour] 2008-03-05 19:10 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080305182323.GA13270@localhost.localdomain>
References: <20080305182323.GA13270@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA22@SRV02.deltain.net>

>  + harbour/tests/transtst.prg
>    + added regression test for transform function


Will regression test moved to utils/hbtest/rt_?
From lorenzo.fiorini at gmail.com  Sun Mar  9 08:19:44 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  9 08:20:01 2008
Subject: [Harbour] Random segfaults using latest svn under Linux
Message-ID: <9257026e0803090519j78015597gd10862e45eb74f15@mail.gmail.com>

I'm testing my apps with this svn under Linux Fc8 32 bit with gttrm
2008-03-05 19:19 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
and I get strange random SegFaults.
The ones below are simply examples but I get strange errors about
undefined vars that exists or .and. errors on code that works since
years.

Since they are random I can't be sure but so far I got them using
gttrm. The same app gtxwc seem to work.

Any idea?

best regards,
Lorenzo

#0  hb_vmExecute (pCode=0xbfd2d928 "x????\b\b\230
o\t?q<\bX??\210\233g\t?", pSymbols=0x83c71c0) at ../../hvm.c:1079
#1  0x083c73b0 in symbols_table ()
#2  0xbfd2d928 in ?? ()
#3  0x083c71c0 in symbols_table ()
#4  0x083c6f70 in symbols_table ()
#5  0x096f2098 in ?? ()
#6  0xbfd2d928 in ?? ()
#7  0x080c325b in HB_FUN_TMEMOEDITOR_EDIT () at memoedit.c:280
#8  0x0000015d in ?? ()
#9  0x00000001 in ?? ()
#10 0x007d0013 in _dl_map_object_deps () from /lib/ld-linux.so.2
Backtrace stopped: previous frame inner to this frame (corrupt stack?)

...

#0  0x080c5ed4 in hb_gt_getClipboard (pszClipData=0xbff91120,
pulLen=0xbff9111c) at ../../gtclip.c:85
#1  0x080b0f4d in hb_gt_def_Info (pGT=0x8c82388, iType=15,
pInfo=0xbff91180) at ../../hbgtcore.c:1529
#2  0x080a8f2f in hb_gtInfo (iType=15, pInfo=0xbff91180) at ../../gtapi.c:893
#3  0x080aa437 in HB_FUN_HB_GTINFO () at ../../gtfunc.c:108
#4  0x080902f5 in hb_vmDo (uiParams=1) at ../../hvm.c:4868
#5  0x0808b3f4 in hb_vmExecute (pCode=0x835e040
"\r\003\001$?\002fP\002$?\002\tP\004$?\0020?", pSymbols=0x83c96e0)

...
From druzus at acn.waw.pl  Sun Mar  9 10:51:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Mar  9 10:51:34 2008
Subject: [Harbour] Random segfaults using latest svn under Linux
In-Reply-To: <9257026e0803090519j78015597gd10862e45eb74f15@mail.gmail.com>
References: <9257026e0803090519j78015597gd10862e45eb74f15@mail.gmail.com>
Message-ID: <20080309145128.GA1443@localhost.localdomain>

On Sun, 09 Mar 2008, Lorenzo Fiorini wrote:
> I'm testing my apps with this svn under Linux Fc8 32 bit with gttrm
> 2008-03-05 19:19 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> and I get strange random SegFaults.
> The ones below are simply examples but I get strange errors about
> undefined vars that exists or .and. errors on code that works since
> years.
> Since they are random I can't be sure but so far I got them using
> gttrm. The same app gtxwc seem to work.
> Any idea?

Looks like a build problem (f.e. not clean build or mixed binary
files from current code and some old builds or xharbour) or your
code can exploit some internal memory corruption problem.
Please check if you are making real clean build. Do you use any 3-rd
party code or code which does not come from Harbour SVN repository?
If after full clean build the problem will still exist then please
make tests using valgrind and send here stderr output, f.e.:
   valgrind --tool=memcheck --leak-check=yes --num-callers=16 -v \
      ./yourapp 2> log.out

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Mar  9 11:18:00 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  9 11:18:04 2008
Subject: [Harbour] Re: Random segfaults using latest svn under Linux
In-Reply-To: <9257026e0803090519j78015597gd10862e45eb74f15@mail.gmail.com>
References: <9257026e0803090519j78015597gd10862e45eb74f15@mail.gmail.com>
Message-ID: <9257026e0803090818o21415faayb23e0ec8c742aa49@mail.gmail.com>

On Sun, Mar 9, 2008 at 1:19 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> I'm testing my apps with this svn under Linux Fc8 32 bit with gttrm
>  2008-03-05 19:19 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  and I get strange random SegFaults.

I've found a test. The code below works with gtxwc but with gttrm gives:

Program received signal SIGSEGV, Segmentation fault.
0x08093904 in hb_gt_getClipboard (pszClipData=0xbf95d040,
pulLen=0xbf95d03c) at ../../gtclip.c:85
85	      *pszClipData[ s_ulClipboardLen ] = '\0';

#include "hbcompat.ch"

procedure main()

   ? GTSETCLIPBOARD( "test clip" )

   ? GTGETCLIPBOARD()

   return

best regards,
Lorenzo
From druzus at acn.waw.pl  Sun Mar  9 11:18:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Mar  9 11:18:35 2008
Subject: [Harbour] 2008-03-05 19:10 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EA22@SRV02.deltain.net>
References: <20080305182323.GA13270@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815EA22@SRV02.deltain.net>
Message-ID: <20080309151829.GB1443@localhost.localdomain>

On Sun, 09 Mar 2008, Massimo Belgrano wrote:
> >  + harbour/tests/transtst.prg
> >    + added regression test for transform function
> Will regression test moved to utils/hbtest/rt_?

If you can add them then it will be very nice. For sure it
will help to verify any future modifications in TRANSFORM() code.
The transform tests are in utils/hbtest/rt_trans.prg

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Mar  9 11:34:01 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  9 11:34:05 2008
Subject: [Harbour] Random segfaults using latest svn under Linux
In-Reply-To: <20080309145128.GA1443@localhost.localdomain>
References: <9257026e0803090519j78015597gd10862e45eb74f15@mail.gmail.com>
	<20080309145128.GA1443@localhost.localdomain>
Message-ID: <9257026e0803090834l31df1908vee4c03df7b9a630d@mail.gmail.com>

On Sun, Mar 9, 2008 at 3:51 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  Looks like a build problem (f.e. not clean build or mixed binary
>  files from current code and some old builds or xharbour) or your
>  code can exploit some internal memory corruption problem.

Did you get the test code msg?

#include "hbcompat.ch"

procedure main()

   ? GTSETCLIPBOARD( "test clip" )

   ? GTGETCLIPBOARD()

   return

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Mar  9 11:41:45 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  9 11:41:52 2008
Subject: [Harbour] Random segfaults using latest svn under Linux
In-Reply-To: <20080309145128.GA1443@localhost.localdomain>
References: <9257026e0803090519j78015597gd10862e45eb74f15@mail.gmail.com>
	<20080309145128.GA1443@localhost.localdomain>
Message-ID: <9257026e0803090841k5c56ca9duec821553294a2f90@mail.gmail.com>

On Sun, Mar 9, 2008 at 3:51 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  If after full clean build the problem will still exist then please
>  make tests using valgrind and send here stderr output, f.e.:
>    valgrind --tool=memcheck --leak-check=yes --num-callers=16 -v \
>       ./yourapp 2> log.out

Can this help?

==4019== 1 errors in context 1 of 1:
==4019== Invalid write of size 1
==4019==    at 0x80939A4: hb_gt_getClipboard (gtclip.c:85)
==4019==    by 0x8089E8C: hb_gt_def_Info (hbgtcore.c:1529)
==4019==    by 0x80840AE: hb_gtInfo (gtapi.c:893)
==4019==    by 0x80855B6: HB_FUN_HB_GTINFO (gtfunc.c:108)
==4019==    by 0x805C934: hb_vmDo (hvm.c:4868)
==4019==    by 0x8057A33: hb_vmExecute (hvm.c:1057)
==4019==    by 0x8049C37: HB_FUN_MAIN (in /mnt/win_q/dvl/src/mytests/tt97)
==4019==    by 0x805C934: hb_vmDo (hvm.c:4868)
==4019==    by 0x806654D: main (mainstd.c:66)
==4019==  Address 0xF is not stack'd, malloc'd or (recently) free'd
--4019--

where tt97.prg is:

#include "hbcompat.ch"

procedure main()

  ? GTSETCLIPBOARD( "test clip" )

  ? GTGETCLIPBOARD()

  return

best regards,
Lorenzo
From mbelgrano at deltain.it  Sun Mar  9 11:46:26 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Mar  9 11:46:41 2008
Subject: [Harbour] Why hbtest return me 22 error
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA24@SRV02.deltain.net>

I have executed hbtest of harbour and I receive 22 error
What result must I receive
I have missed something?
Why hbtest of xarbour is different?
Is possible recompile hbtest in xharbour?

Harbour Regression Test Suite
Copyright 1999-2000, http://www.harbour-project.org
------------------------------------------------------------------------
---
      Version: Harbour devel build 1.1-1 Intl.
     Compiler: Borland C++ 5.5.1 (32 bit)
           OS: Windows Vista 6.0.6000
   Date, Time: 2008.03.09 16:42:13
       Output: (stdout)
Shortcut opt.: ON
     Switches:  
========================================================================
===
R No.  Line            TestCall()                               ->
Result
| Expected

------------------------------------------------------------------------
---
!  594 MAIN_HVMA(341)  saArray[ 1000 ]                         
       Result: "E BASE 1132 Bound error array access
A:2:A:{.[1].};N:1000 "
     Expected: "E BASE 1132 Bound error array access "
!  595 MAIN_HVMA(342)  saArray[ 1000 ] := 1                    
       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
     Expected: "E BASE 1133 Bound error array assign "
!  724 MAIN_HVMA(503)  RTSTR( 00000500000000000000 )           
       Result: " 16  500000000000000"
     Expected: " 21       500000000000000"
!  725 MAIN_HVMA(504)  RTSTR( 0500000000000000 )               
       Result: " 16  500000000000000"
     Expected: " 17   500000000000000"
! 1069 MAIN_MATH(359)  Str(1234567890 * 1234567890 )           
       Result: " 1524157875019052100"
     Expected: " 1524157875019052000"
! 1429 MAIN_STR(275)   AllTrim( NIL )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1430 MAIN_STR(276)   AllTrim( 100 )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1502 MAIN_STR(376)   StrTran( NIL )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1503 MAIN_STR(377)   StrTran( 100 )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1504 MAIN_STR(379)   StrTran( "AA", 1 )                      
       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2584 MAIN_ARRAY(107) AFill( NIL )                            
       Result: "E BASE 6004 Argument error AFILL A:1:U:NIL "
     Expected: "E BASE 6004 Argument error AFILL "
! 2628 MAIN_ARRAY(163) ASize( NIL )                            
       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2629 MAIN_ARRAY(164) ASize( {} )                             
       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2630 MAIN_ARRAY(165) ASize( ErrorNew() )                     
       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2631 MAIN_ARRAY(167) ASize( NIL, 0 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2634 MAIN_ARRAY(170) ASize( NIL, 1 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2640 MAIN_ARRAY(176) ASize( NIL, -1 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2655 MAIN_ARRAY(201) Array( -1 )                             
       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
     Expected: "E BASE 1131 Bound error array dimension "
! 2656 MAIN_ARRAY(202) Array( 1, 0, -10 )                      
       Result: "E BASE 1131 Bound error array dimension
A:3:N:1;N:0;N:-10 "
     Expected: "E BASE 1131 Bound error array dimension "
! 3198 MAIN_MISC(554)  HB_SToD("99990101")                     
       Result: HB_SToD("99990101")
     Expected: HB_SToD("        ")
! 4453 MAIN_LAST(179)  __MRestore( "$NOTHERE.MEM", .F. )       
       Result: "E BASE 2005 Open error $NOTHERE.MEM
A:2:C:$NOTHERE.MEM;L:.F. F:DR"
     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4455 MAIN_LAST(183)  __MSave( BADFNAME(), "*", .T. )         
       Result: "E BASE 2006 Create error *BADNAM*.MEM
A:3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
     Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
========================================================================
===
Test calls passed:       4433 ( 99.50 % )
Test calls failed:         22 ( 0.50 % )
                   ----------
            Total:       4455 ( Time elapsed: 0.13 seconds )

WARNING ! Failures detected
From druzus at acn.waw.pl  Sun Mar  9 11:49:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Mar  9 11:49:16 2008
Subject: [Harbour] 2008-03-09 16:47 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200803091549.m29Fn9fS007514@31-mo5-4.acn.waw.pl>

2008-03-09 16:47 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtclip.c
    ! fixed two very bad bugs in get clipboard action used for W32 and
      GTs which do not support system clipboard data

best regards
Przemek
From lorenzo.fiorini at gmail.com  Sun Mar  9 12:34:09 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  9 12:34:36 2008
Subject: [Harbour] Random segfaults using latest svn under Linux
In-Reply-To: <20080309145128.GA1443@localhost.localdomain>
References: <9257026e0803090519j78015597gd10862e45eb74f15@mail.gmail.com>
	<20080309145128.GA1443@localhost.localdomain>
Message-ID: <9257026e0803090934k4dd6e25fsb39ee7df3dbb6db1@mail.gmail.com>

On Sun, Mar 9, 2008 at 3:51 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  make tests using valgrind and send here stderr output, f.e.:
>    valgrind --tool=memcheck --leak-check=yes --num-callers=16 -v \
>       ./yourapp 2> log.out

I've rebuilt everything but I still get segfaults.

The same test removing hbcompat.ch.

#include "hbgtinfo.ch"

procedure main()

   ? hb_gtInfo( HB_GTI_CLIPBOARDDATA, "test clip" )

   alert( hb_gtInfo( HB_GTI_CLIPBOARDDATA ) )

   return

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Mar  9 12:56:29 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  9 12:56:36 2008
Subject: [Harbour] 2008-03-09 16:47 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200803091549.m29Fn9fS007514@31-mo5-4.acn.waw.pl>
References: <200803091549.m29Fn9fS007514@31-mo5-4.acn.waw.pl>
Message-ID: <9257026e0803090956l6f4ef250rc8d3dd77dc6415cd@mail.gmail.com>

On Sun, Mar 9, 2008 at 4:49 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> 2008-03-09 16:47 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/gtclip.c
>     ! fixed two very bad bugs in get clipboard action used for W32 and
>       GTs which do not support system clipboard data

Thanks it fixes the segfaults.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Mar  9 13:33:37 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Mar  9 13:33:40 2008
Subject: [Harbour] 2008-03-09 18:30 UTC+0100 Lorenzo Fiorini
Message-ID: <9257026e0803091033n3367061ak1a9c39a59905cfb4@mail.gmail.com>

2008-03-09 18:30 UTC+0100 Lorenzo Fiorini
  * config/darwin/install.cf
    added missed semicolon
  * contrib/hbtip/utils.c
    added translation for CR and LF

best regards,
Lorenzo
From druzus at acn.waw.pl  Sun Mar  9 14:56:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Mar  9 14:56:36 2008
Subject: [Harbour] Why hbtest return me 22 error
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EA24@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EA24@SRV02.deltain.net>
Message-ID: <20080309185603.GA1713@localhost.localdomain>

On Sun, 09 Mar 2008, Massimo Belgrano wrote:
> I have executed hbtest of harbour and I receive 22 error
> What result must I receive
> I have missed something?

The results shows some of differences between Harbour and Clipper.


> !  724 MAIN_HVMA(503)  RTSTR( 00000500000000000000 )           
>        Result: " 16  500000000000000"
>      Expected: " 21       500000000000000"
> !  725 MAIN_HVMA(504)  RTSTR( 0500000000000000 )               
>        Result: " 16  500000000000000"
>      Expected: " 17   500000000000000"

Harbour supports 64 bit integer numbers so some rules which are used
in Clipper for integer numbers works in Harbour for much bigger numbers 
then in Clipper. In generated PCODE all integer numbers are stored
without information about the size used for string formatting. Such
information is only with PCODE used for DOUBLE values. This is Clipper
compatible behavior fully replicated in Harbour. But because Harbour
supports 64bit signed integers then this rule is used for bigger range
of numbers. The difference can be seen in code which uses integer
numbers with 0 prefix which are over the range -2^31 : 2^31-1 but
inside 2^63-1 : 2^63, f.e.:
   ? 00100000000000
If you needs strict Clipper compatible results then you uncomment
this line:

   /* #define PCODE_LONG_LIM(l)     HB_LIM_INT32( l ) */

in include hbdefs.h

We can also hide this incompatibility by intorducing new PCODE for
64bit signed integers which will keep also the default string formatting
size but I do not know if such minor difference is enough to introduce
new PCODE. Anyhow hbtest nicely show it.

> ! 1069 MAIN_MATH(359)  Str(1234567890 * 1234567890 )           
>        Result: " 1524157875019052100"
>      Expected: " 1524157875019052000"

This is also side effect of 64 bit integer support. Just simply 64 bit
integer es have smaller range then IEEE754 double values but bigger
precision. IEEE754 double value has 53 bit precision and 64 bit integers
63bit. When Clipper converts double values to string then only 15 most
significant decimal digits are presented and rest is 0. Harbour stores
the results in 640bit integer and presents exact value: 1524157875019052100
Here also hbtest shows the difference between Harbour and Clipper and
this difference can also be hidden very easy in hbdefs.h if you really
need strict compatibility.

> ! 3198 MAIN_MISC(554)  HB_SToD("99990101")                     
>        Result: HB_SToD("99990101")
>      Expected: HB_SToD("        ")

Harbour supports dates up 9999/12/31 when Clipper only to 2999/12/31
so HB_SToD("99990101") returns valid date but Clipper does not
accept it. If you need strict compatibility then see in
source/common/hbdate.c HB_DATE_YEAR_LIMIT macro.

> !  594 MAIN_HVMA(341)  saArray[ 1000 ]                         
>        Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N:1000 "
>      Expected: "E BASE 1132 Bound error array access "

this and all other errors shows only one difference.
When RT error is generated Harbour nearly always stores in ARGS array of
RTE object parameters passed to function or used in HVM action when Clipper
makes it only in some chosen places. In this case it's:
   A:2:A:{.[1].};N:1000
means that in oErr:ARGS you have arrays where first parameter is
saArray and second is: 1000. IMHO it's very nice feature for users
which can check more precisely RTE conditions but it's not strictly
Clipper compatible so hbtest catch it.

> Why hbtest of xarbour is different?

Be carefull with xHarbour hbtest - in some places the epxected results
were hacked to pacify reported warnings instead of making real fix in
core code. Always verify the results with Clipper. Please also remember
that there are differences btween CL52 and CL53 and some thingsa in Harbour
are CL53 compatible and some other C53.

> Is possible recompile hbtest in xharbour?

Probably yes but in Harbour hbtest also tests classes code (rt_class.prg)
and this part will probably show hundreds of errors and finally GPF on
destructors tests. This are old xHarbour bugs I was writing about many
times in the past and I even create test code examples in tests/ directory
but seems that no one in xHarbour devel team is interested in fixing them.

best regards,
Przemek
From mbelgrano at deltain.it  Sun Mar  9 15:20:42 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Mar  9 15:23:01 2008
Subject: [Harbour] 2008-03-05 19:10 UTC+0100
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080309151829.GB1443@localhost.localdomain>
References: <20080305182323.GA13270@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03815EA22@SRV02.deltain.net>
	<20080309151829.GB1443@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA25@SRV02.deltain.net>

Yes i can without problem, But need write access

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw
Czerpak
Sent: Sunday, March 09, 2008 4:18 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] 2008-03-05 19:10 UTC+0100
PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Sun, 09 Mar 2008, Massimo Belgrano wrote:
> >  + harbour/tests/transtst.prg
> >    + added regression test for transform function
> Will regression test moved to utils/hbtest/rt_?

If you can add them then it will be very nice. For sure it
will help to verify any future modifications in TRANSFORM() code.
The transform tests are in utils/hbtest/rt_trans.prg

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Sun Mar  9 16:29:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Mar  9 16:29:24 2008
Subject: [Harbour] 2008-03-05 19:10 UTC+0100
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EA25@SRV02.deltain.net>
References: <20080309151829.GB1443@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815EA25@SRV02.deltain.net>
Message-ID: <20080309202911.GA8387@localhost.localdomain>

On Sun, 09 Mar 2008, Massimo Belgrano wrote:
> Yes i can without problem, But need write access

I hope that someone with SVN admin privileges will give it for you.
You should send your SF ID here.

best regards,
Przemek
From mbelgrano at deltain.it  Sun Mar  9 17:30:31 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Mar  9 17:30:47 2008
Subject: [Harbour] 2008-03-05 19:10
	UTC+0100PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080309202911.GA8387@localhost.localdomain>
References: <20080309151829.GB1443@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03815EA25@SRV02.deltain.net>
	<20080309202911.GA8387@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA26@SRV02.deltain.net>

mbelgrano

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw
Czerpak
Sent: Sunday, March 09, 2008 9:29 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: [Harbour] 2008-03-05 19:10
UTC+0100PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Sun, 09 Mar 2008, Massimo Belgrano wrote:
> Yes i can without problem, But need write access

I hope that someone with SVN admin privileges will give it for you.
You should send your SF ID here.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From philb at philb.us  Mon Mar 10 00:36:02 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Mar 10 00:36:09 2008
Subject: [Harbour] 2008-03-05 19:10
	UTC+0100PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EA26@SRV02.deltain.net>
References: <20080309151829.GB1443@localhost.localdomain>
	<20080309202911.GA8387@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815EA26@SRV02.deltain.net>
Message-ID: <200803100036.02863.philb@philb.us>

On Sunday 09 March 2008 05:30:31 pm Massimo Belgrano wrote:
> mbelgrano

Done

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From mbelgrano at deltain.it  Mon Mar 10 06:36:21 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Mar 10 06:37:01 2008
Subject: [Harbour] How import mailing zipped archive
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA27@SRV02.deltain.net>

How import in out look the mailing zipped archive
http://lists.harbour-project.org/pipermail/harbour/

Thanks in advance
Massimo Belgrano
?


From druzus at acn.waw.pl  Mon Mar 10 08:10:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 10 08:10:45 2008
Subject: [Harbour] 2008-03-10 13:10 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200803101210.m2ACAfHA012113@31-mo5-4.acn.waw.pl>

2008-03-10 13:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapifs.h
    ! default usage of BSD locks in *BSD systems for emulating
      DOS/Windows DENY_* flags has been disabled because tests
      on FreeBSD 6.2 and MacOSX shows that this implementation
      can create self deadlock when used simultaneously with
      POSIX locks - thanks to Phil and Lorenzo for locating the
      problem and tests.

best regards
Przemek
From philb at philb.us  Mon Mar 10 08:26:44 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Mar 10 08:27:34 2008
Subject: [Harbour] How import mailing zipped archive
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EA27@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EA27@SRV02.deltain.net>
Message-ID: <200803100826.44801.philb@philb.us>

On Monday 10 March 2008 06:36:21 am Massimo Belgrano wrote:
> How import in out look the mailing zipped archive
> http://lists.harbour-project.org/pipermail/harbour/

I don't think outlook supports mbox files.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From mbelgrano at deltain.it  Mon Mar 10 09:38:44 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Mar 10 09:38:59 2008
Subject: [Harbour] where is hbmk for w32/bcc
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA2B@SRV02.deltain.net>

How compile in w32/bcc

	hbmk
	hblnk
	hbcc
Where are source?

From mbelgrano at deltain.it  Mon Mar 10 10:37:38 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Mar 10 10:39:26 2008
Subject: [Harbour] just in time compile from clipboard
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA2E@SRV02.deltain.net>

How made easy running simple script found on websiste or fourm
Is very basic but I hope that can be interesting for [x]harbour
developer

Compile jtt.prg 
#include "inkey.ch"

function main
   LOCAL X_WHERE,X_CLIP
   KEYBOARD CHR(K_CTRL_C)  // COPY TO CLIBBOARD IF NOT ALREADY MADE
   X_CLIP=GTGetClipboard()
   X_WHERE=GetEnv( "TMP" )
   IDLE=FCREATE(X_WHERE+"\TEST.PRG")
   FWRITE(IDLE,X_CLIP)
   FCLOSE(IDLE)
   X_COMMAND="HARBOUR /N /GH "+X_WHERE+"\TEST.PRG"
   RUN (x_Command)
   // IF ERROR
   //    X_COMMAND="Notepad.exe "+X_WHERE+"\TEST.PRG"
   X_COMMAND="HBRUN TEST.HRB"
   RUN (X_COMMAND)
   RETURN


http://groups.google.it/group/comp.lang.xharbour/browse_thread/thread/b7
df1af212ee7a81/887f0920ca975ac5?lnk=gst&q=clipper+get+differences#
select main function
copy 
start jtt (by a shortcut) 

Massimo Belgrano
From lorenzo.fiorini at gmail.com  Mon Mar 10 11:53:44 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 10 11:55:52 2008
Subject: [Harbour] gcc 4.3.0 warnings
Message-ID: <9257026e0803100853r7e6337cy79f9ac59f0652fc0@mail.gmail.com>

Now that gcc 4.30 has been released I've tried to rebuild Harbour with
it under Fc9 RawHide X86_64.

Here are the warnings I got:

../../hbstr.c: In function 'hb_numRound':
../../hbstr.c:340: warning: array subscript is below array bounds
../../hbstr.c: In function 'hb_numDecConv':
../../hbstr.c:340: warning: array subscript is below array bounds
../../errorapi.c: In function 'HB_FUN__OSCODE':
../../errorapi.c:336: warning: 'iValue' may be used uninitialized in
this function
../../errorapi.c: In function 'HB_FUN__GENCODE':
../../errorapi.c:316: warning: 'iValue' may be used uninitialized in
this function
../../errorapi.c: In function 'HB_FUN__TRIES':
../../errorapi.c:384: warning: 'iValue' may be used uninitialized in
this function
../../errorapi.c: In function 'HB_FUN__SUBCODE':
../../errorapi.c:352: warning: 'iValue' may be used uninitialized in
this function
../../errorapi.c: In function 'HB_FUN__SEVERITY':
../../errorapi.c:368: warning: 'iValue' may be used uninitialized in
this function
../../dbfntx1.c: In function 'hb_ntxSortOut':
../../dbfntx1.c:5050: warning: 'ulRec' may be used uninitialized in
this function
../../dbfntx1.c:5052: warning: 'pKeyVal' may be used uninitialized in
this function

best regards,
Lorenzo
From mbelgrano at deltain.it  Mon Mar 10 12:29:53 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Mar 10 12:35:45 2008
Subject: [Harbour] 2008-03-05 19:10 UTC+0100
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080309151829.GB1443@localhost.localdomain>
References: <20080305182323.GA13270@localhost.localdomain><AFB948164110ED43B5EB849E8DEEF03815EA22@SRV02.deltain.net>
	<20080309151829.GB1443@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA32@SRV02.deltain.net>

Done. It is my fisrt contribute please control
Now harbour have 4658 test instead 4455
I can't try xbase++

Harbour Regression Test Suite
Copyright 1999-2000, http://www.harbour-project.org
------------------------------------------------------------------------
---
      Version: Harbour devel build 1.1-1 Intl.
     Compiler: Borland C++ 5.5.1 (32 bit)
           OS: Windows Vista 6.0.6000
   Date, Time: 2008.03.10 17:19:31
       Output: (stdout)
Shortcut opt.: ON
     Switches:  
========================================================================
===
R No.  Line            TestCall()                               ->
Result
| Expected

------------------------------------------------------------------------
---
!  594 MAIN_HVMA(341)  saArray[ 1000 ]                         
       Result: "E BASE 1132 Bound error array access
A:2:A:{.[1].};N:1000 "
     Expected: "E BASE 1132 Bound error array access "
!  595 MAIN_HVMA(342)  saArray[ 1000 ] := 1                    
       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
     Expected: "E BASE 1133 Bound error array assign "
!  724 MAIN_HVMA(503)  RTSTR( 00000500000000000000 )           
       Result: " 16  500000000000000"
     Expected: " 21       500000000000000"
!  725 MAIN_HVMA(504)  RTSTR( 0500000000000000 )               
       Result: " 16  500000000000000"
     Expected: " 17   500000000000000"
! 1069 MAIN_MATH(359)  Str(1234567890 * 1234567890 )           
       Result: " 1524157875019052100"
     Expected: " 1524157875019052000"
! 1429 MAIN_STR(275)   AllTrim( NIL )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1430 MAIN_STR(276)   AllTrim( 100 )                          
       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1502 MAIN_STR(376)   StrTran( NIL )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1503 MAIN_STR(377)   StrTran( 100 )                          
       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1504 MAIN_STR(379)   StrTran( "AA", 1 )                      
       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2318 MAIN_TRANS(529) Transform(stod("19920509"), "@E")       
       Result: "09.05.1992"
     Expected: "09/05/92"
! 2721 NEW_STRINGS(484 hb_ValToStr( 4.0 / 2 )                  
       Result: "         2.0000"
     Expected: "         2.00"
! 2723 NEW_STRINGS(486 hb_ValToStr( hb_SToD( "20010101" ) )    
       Result: "01-01-2001"
     Expected: "2001.01.01"
! 2787 MAIN_ARRAY(107) AFill( NIL )                            
       Result: "E BASE 6004 Argument error AFILL A:1:U:NIL "
     Expected: "E BASE 6004 Argument error AFILL "
! 2831 MAIN_ARRAY(163) ASize( NIL )                            
       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2832 MAIN_ARRAY(164) ASize( {} )                             
       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2833 MAIN_ARRAY(165) ASize( ErrorNew() )                     
       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2834 MAIN_ARRAY(167) ASize( NIL, 0 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2837 MAIN_ARRAY(170) ASize( NIL, 1 )                         
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2843 MAIN_ARRAY(176) ASize( NIL, -1 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2858 MAIN_ARRAY(201) Array( -1 )                             
       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
     Expected: "E BASE 1131 Bound error array dimension "
! 2859 MAIN_ARRAY(202) Array( 1, 0, -10 )                      
       Result: "E BASE 1131 Bound error array dimension
A:3:N:1;N:0;N:-10 "
     Expected: "E BASE 1131 Bound error array dimension "
! 3401 MAIN_MISC(554)  HB_SToD("99990101")                     
       Result: HB_SToD("99990101")
     Expected: HB_SToD("        ")
! 3433 MAIN_MISC(595)  Str(Descend( -740.354 ))                
       Result: "       740.3540"
     Expected: "       740.35"
! 3434 MAIN_MISC(596)  Str(Descend( -740.359 ))                
       Result: "       740.3590"
     Expected: "       740.36"
! 4656 MAIN_LAST(179)  __MRestore( "$NOTHERE.MEM", .F. )       
       Result: "E BASE 2005 Open error $NOTHERE.MEM
A:2:C:$NOTHERE.MEM;L:.F. F:DR"
     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4658 MAIN_LAST(183)  __MSave( BADFNAME(), "*", .T. )         
       Result: "E BASE 2006 Create error *BADNAM*.MEM
A:3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
     Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
========================================================================
===
Test calls passed:       4631 ( 99.42 % )
Test calls failed:         27 ( 0.58 % )
                   ----------
            Total:       4658 ( Time elapsed: 0.1840 seconds )

WARNING ! Failures detected

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw
Czerpak
Sent: Sunday, March 09, 2008 4:18 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] 2008-03-05 19:10 UTC+0100
PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Sun, 09 Mar 2008, Massimo Belgrano wrote:
> >  + harbour/tests/transtst.prg
> >    + added regression test for transform function
> Will regression test moved to utils/hbtest/rt_?

If you can add them then it will be very nice. For sure it
will help to verify any future modifications in TRANSFORM() code.
The transform tests are in utils/hbtest/rt_trans.prg

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Mar 10 14:49:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 10 16:34:45 2008
Subject: [Harbour] 2008-03-05 19:10 UTC+0100
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EA32@SRV02.deltain.net>
References: <20080309151829.GB1443@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03815EA32@SRV02.deltain.net>
Message-ID: <20080310184918.GA25218@localhost.localdomain>

On Mon, 10 Mar 2008, Massimo Belgrano wrote:
> Done. It is my fisrt contribute please control
> Now harbour have 4658 test instead 4455

Thank you but you haven't updated ChangeLog file.
Please read doc/howtosvn.txt first then update ChangeLog file
and remember about adding ChangeLog description during commit.
Please also update formatting. We are using 3 SPACEs for indenting
and TABs are forbidden. Look at other lines in this files and try
to keep the same formatting. When many people update the same file
using similar formatting greatly improve code readability.

> ! 2318 MAIN_TRANS(529) Transform(stod("19920509"), "@E")       
>        Result: "09.05.1992"
>      Expected: "09/05/92"

This line needs default date format before execution:
   SET DATEFORMAT TO "MM/DD/YY"
Please update this line to expected result

> ! 2721 NEW_STRINGS(484 hb_ValToStr( 4.0 / 2 )                  
>        Result: "         2.0000"
>      Expected: "         2.00"

You restored _SET_FIXED and/or _SET_DECIMAL value after transform tests.
Please add it or it will effect other tests.

> ! 2723 NEW_STRINGS(486 hb_ValToStr( hb_SToD( "20010101" ) )    
>        Result: "01-01-2001"
>      Expected: "2001.01.01"

You haven't restored _SET_DATEFORMAT value after transform tests.
Please add it or it will effect other tests.

best regards,
Przemek
From mbelgrano at deltain.it  Tue Mar 11 05:00:19 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Mar 11 05:03:46 2008
Subject: [Harbour] 2008-03-10 09:53 UTC+0100 Belgrano Massimo 
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA38@SRV02.deltain.net>

2008-03-10 09:53 UTC+0100 Belgrano Massimo (mbelgrano/at/deltain.it)

  * harbour/utils/hbtest/rt_trans.prg

    ! added news regression test 

      Corretted error

      Formatted source

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080311/5fd4560c/attachment.html
From druzus at acn.waw.pl  Tue Mar 11 09:04:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 11 09:05:43 2008
Subject: [Harbour] 2008-03-11 14:04 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200803111304.m2BD4ndW012757@31-mo5-4.acn.waw.pl>

2008-03-11 14:04 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/utils/hbtest/rt_trans.prg
    * cleaned TRANSFORM() tests

  * harbour/contrib/rddads/ads1.c
    ! fixed binary number formatting

best regards
Przemek
From jarabal at ya.com  Tue Mar 11 16:08:54 2008
From: jarabal at ya.com (Javier)
Date: Tue Mar 11 16:21:52 2008
Subject: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <E81A6FCA-2C6E-48A4-B9C5-6EE7DA913A04@GMail.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net>	<3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>	<4718D6E2.1070103@ya.com>
	<E81A6FCA-2C6E-48A4-B9C5-6EE7DA913A04@GMail.com>
Message-ID: <47D6E6D6.4070401@ya.com>

Thanks Patrick !!!

best regards,
Xavi

Patrick Mast, xHarbour.com escribi?:
> Hello Javier,
>
>> Ok, but ... *WHY* is closed development mailing list, even read?
>
> We have no objection to open up the xHarbour Devlist. Let me look into 
> it on how to do it.
>
> Patrick
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From lorenzo.fiorini at gmail.com  Wed Mar 12 06:43:30 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar 12 06:43:36 2008
Subject: [Harbour] preprocessor question
Message-ID: <9257026e0803120343w5f358629o6fc43fddbfbd328a@mail.gmail.com>

I'm heavily using Harbour to create AJAX apps and this means that
prg's main task is to send xhtml and javascript  to the browser.

xhtml and javascript files often comes from page design tools and so
it's useful to keep them separate from prg code that's not an xml
document.

So prgs looks like:

function xyz()

   local cContent := ""

   #include "foo1.html"
   #include "foo1.js"
   #include "foo2.js"

   cContent += "<...><...></html>"

return cContent

and every file is sth like:

#pragma __cstream|cContent+=%s

[ .... ]

#pragma _endtext

which are not expected in "standard" xhtml or javascript and give
errors in tools.

I wonder if exist sth like #pragma __include "file" to have sth like:

function xyz()

   local cContent := ""

   #pragma __cstream|cContent+=%s
   #pragma __include "foo1.html"
   #pragma __include "foo1.js"
   #pragma __include "foo2.js"
   #pragma _endtext

   cContent += "<...><...></html>"

return cContent

or if exist a different way to do this.

best regards,
Lorenzo
From labitas at gmail.com  Wed Mar 12 07:51:33 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Mar 12 07:51:53 2008
Subject: [Harbour] dbeval incompatibility
Message-ID: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com>

Hi, all

[only for info]

There is letter in xHarbour forum from Anatole Kolotovkin
("dbeval incompatibility", 2008.02.25 10:07)
and it is relevant for Harbour too.
IMHO it must be included in dissonance with Clipper list.

-----

Hello, All!

in Clipper dbeval () remembers current aliase.
I do not assert that it correctly, but so is.
======== example
Func Main()
   local i
   altd()
   dbcreate('tmp1',{{'wfld1','N',2,0}})
   use tmp1 new
   for i=1 to 10
     dbappend()
     field->wfld1:=i
   next

   dbcreate('tmp2',{{'wfld2','N',2,0}})
   use tmp2 new
   for i=1 to 10
     dbappend()
     field->wfld2:=i+10
   next
   dbselectarea(1)
   dbgotop()
   dbeval({|| dbselectarea(2) },;
          {|| wfld1<> 0},;
          {|| wfld1<> 0} )

   browse()
return NIL


With best regards, Anatole Kolotovkin.  E-mail: abakkav@rol.ru

-----

Best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080312/5d1abcf9/attachment.html
From lorenzo.fiorini at gmail.com  Wed Mar 12 08:34:16 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar 12 08:34:57 2008
Subject: [Harbour] Re: preprocessor question
In-Reply-To: <9257026e0803120343w5f358629o6fc43fddbfbd328a@mail.gmail.com>
References: <9257026e0803120343w5f358629o6fc43fddbfbd328a@mail.gmail.com>
Message-ID: <9257026e0803120534q25a87268ifba20a1afa1be0df@mail.gmail.com>

On Wed, Mar 12, 2008 at 11:43 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

>  I wonder if exist sth like #pragma __include "file" to have sth like:
>
>  function xyz()
>
>    local cContent := ""
>
>    #pragma __cstream|cContent+=%s
>    #pragma __include "foo1.html"
>    #pragma __include "foo1.js"
>    #pragma __include "foo2.js"
>    #pragma _endtext
>
>    cContent += "<...><...></html>"
>
>  return cContent

Probably, would be easier to have sth like:

 function xyz()

    local cContent := ""

    #pragma __include|"foo1.html"|cContent+=%s
    #pragma __include|"foo1.js"|cContent+=%s
    #pragma __include|"foo2.js"|cContent+=%s

    cContent += "<...><...></html>"

    return cContent
From druzus at acn.waw.pl  Wed Mar 12 08:45:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar 12 08:45:55 2008
Subject: [Harbour] dbeval incompatibility
In-Reply-To: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com>
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com>
Message-ID: <20080312124536.GA6600@localhost.localdomain>

On Wed, 12 Mar 2008, Saulius Zrelskis wrote:
> Hi, all
> There is letter in xHarbour forum from Anatole Kolotovkin
> ("dbeval incompatibility", 2008.02.25 10:07)
> and it is relevant for Harbour too.
> IMHO it must be included in dissonance with Clipper list.

I know about it and this message does not describe whole problem
and only one special case.
In general for _ALL_ evaluated user codeblocks RDD should set and
restore current workarea. I've fixed it sometime ago but the fix
is in my local SVN copy which also contains other modifications,
f.e. for MT mode. I'll check if I can easy extract only this fix
and commit.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Mar 12 09:27:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar 12 09:27:55 2008
Subject: [Harbour] preprocessor question
In-Reply-To: <9257026e0803120343w5f358629o6fc43fddbfbd328a@mail.gmail.com>
References: <9257026e0803120343w5f358629o6fc43fddbfbd328a@mail.gmail.com>
Message-ID: <20080312132731.GB6600@localhost.localdomain>

On Wed, 12 Mar 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

[...]
> #pragma __cstream|cContent+=%s
> [ .... ]
> #pragma _endtext
> which are not expected in "standard" xhtml or javascript and give
> errors in tools.
> I wonder if exist sth like #pragma __include "file" to have sth like:
> function xyz()
>    local cContent := ""
>    #pragma __cstream|cContent+=%s
>    #pragma __include "foo1.html"
>    #pragma __include "foo1.js"
>    #pragma __include "foo2.js"
>    #pragma _endtext
>    cContent += "<...><...></html>"
> return cContent
> or if exist a different way to do this.

When you open the stream then it can be closed only by
   #pragma __endtext
or:
   ENDTEXT
and all other lines are ignored. It's important because it means
that you can have other pragmas for foreign language and only one
is reserved. I do not want to increase number of stop conditions
end I think that I should even remove ENDTEXT for __stream and
__cstream pragams or for all stream pragmas end accept it only
for TEXT clause.
But I'll think about sth like:
   #pragma __cstreaminclude <"file_name">|<code with %s result marker>
f.e.:
   #pragma __cstreaminclude "foo1.html"|cContent+=%s

best regards,
Przemek
From labitas at gmail.com  Wed Mar 12 09:54:03 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Mar 12 09:54:07 2008
Subject: [Harbour] dbeval incompatibility
In-Reply-To: <20080312124536.GA6600@localhost.localdomain>
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com>
	<20080312124536.GA6600@localhost.localdomain>
Message-ID: <2386af1b0803120654s3a79d928hbcc71caa12ffa1a4@mail.gmail.com>

2008/3/12, Przemyslaw Czerpak <druzus@acn.waw.pl>:

> In general for _ALL_ evaluated user codeblocks RDD should set and
> restore current workarea.


and as you know very well, Clipper for this purpose uses waEvalBlock method,
which does this work

Best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080312/a71954e6/attachment.html
From lorenzo.fiorini at gmail.com  Wed Mar 12 10:03:32 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar 12 10:04:29 2008
Subject: [Harbour] preprocessor question
In-Reply-To: <20080312132731.GB6600@localhost.localdomain>
References: <9257026e0803120343w5f358629o6fc43fddbfbd328a@mail.gmail.com>
	<20080312132731.GB6600@localhost.localdomain>
Message-ID: <9257026e0803120703s8309f7ay2e972e417cb65654@mail.gmail.com>

On Wed, Mar 12, 2008 at 2:27 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  But I'll think about sth like:
>    #pragma __cstreaminclude <"file_name">|<code with %s result marker>
>  f.e.:
>    #pragma __cstreaminclude "foo1.html"|cContent+=%s

I would be perfect.

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Mar 12 11:46:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar 12 11:46:33 2008
Subject: [Harbour] dbeval incompatibility
In-Reply-To: <2386af1b0803120654s3a79d928hbcc71caa12ffa1a4@mail.gmail.com>
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com>
	<20080312124536.GA6600@localhost.localdomain>
	<2386af1b0803120654s3a79d928hbcc71caa12ffa1a4@mail.gmail.com>
Message-ID: <20080312154627.GA7776@localhost.localdomain>

On Wed, 12 Mar 2008, Saulius Zrelskis wrote:
> > In general for _ALL_ evaluated user codeblocks RDD should set and
> > restore current workarea.
> and as you know very well, Clipper for this purpose uses waEvalBlock method,
> which does this work

Yes, it is. We should also add protection against other possible problem
when RT error is generated. Now it's possible to create very bad situation
when user code will close current WA and then we will return to caller
function which will still try to access allocated before structures
what may cause unpredictable results. To fix it will be necessary to
make some deeper modifications so now I only keep it on my TODO list.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Mar 12 11:49:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar 12 11:49:29 2008
Subject: [Harbour] dbeval incompatibility
In-Reply-To: <20080312124536.GA6600@localhost.localdomain>
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com>
	<20080312124536.GA6600@localhost.localdomain>
Message-ID: <20080312154924.GB7776@localhost.localdomain>

On Wed, 12 Mar 2008, Przemyslaw Czerpak wrote:
> I'll check if I can easy extract only this fix and commit.

I've checked and I can extract it and also some other minor fixes
and cleanups but without new code. I'll commit them together to avoid
problems with future synchronization.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Mar 12 12:44:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar 12 12:44:59 2008
Subject: [Harbour] 2008-03-12 17:43 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200803121644.m2CGiLUN019545@31-mo5-4.acn.waw.pl>

2008-03-12 17:43 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
  * harbour/source/common/hbver.c
  * harbour/source/rtl/gttone.c
    * added hb_iswince() and fixed TONE() for WinCE

  * harbour/source/rtl/math.c
    ! added workaround for SIGFPE platforms which generate it instead of
      setting errno during execution of math functions

  * harbour/source/rtl/gtcrs/hb-charmap.def
    ! remap 0x9b (155) to '.' in Linux terminals - it's control code

  * harbour/source/rdd/dbsql.c
  * harbour/source/rdd/workarea.c
  * harbour/source/rdd/dbf1.c
    ! always restore current workarea in WA EVAL() method
    ! always use EVAL() method for user codeblocks and macros

  * harbour/source/rdd/dbcmd.c
    ! fixed DBRELATION() called without numeric parameters or with 0 to
      return first relation expression (Clipper compatible)

  * harbour/contrib/hbtip/thtml.prg
    ! fixed wrongly ported to Harbour xHarbour specific code

  * harbour/source/common/hbstr.c
    + added missing const in one declaration
    * formatting

  * harbour/source/rtl/transfrm.c
    ! fixed casting for C++ compilers

  * harbour/source/rtl/errorapi.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
    ! cleanup warnings

  * harbour/source/common/hbtrace.c
  * harbour/source/rdd/dbcmdx.c
  * harbour/source/rdd/wafunc.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/hbsix/sxcrypt.c
    * formatting

best regards
Przemek
From lorenzo.fiorini at gmail.com  Thu Mar 13 02:54:59 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar 13 02:55:03 2008
Subject: [Harbour] Segfault at dbsql.c
Message-ID: <9257026e0803122354h581fe7b5n1c5b8b53e904dc0d@mail.gmail.com>

I'm testing latest ChangeLog and I get:

#0  hb_vmEvalBlockOrMacro (pItem=0x0) at ../../hvm.c:5058
#1  0x080d0724 in hb_waEvalBlock (pArea=0x996f8d8, pBlock=0x0) at
../../workarea.c:1749
#2  0x080d4ee4 in HB_FUN___DBSQL () at ../../dbsql.c:262
#3  0x08089c95 in hb_vmDo (uiParams=15) at ../../hvm.c:4868
#4  0x08084d94 in hb_vmExecute (pCode=0x81686c0
"\r\027\v3../ddu/ddusql.prg:DBF2SQL", pSymbols=0x8297c40) at
../../hvm.c:1057
#5 ...

dbsql.c at revision 8322 works.

best ergards,
Lorenzo
From niki at synel.co.il  Thu Mar 13 04:36:46 2008
From: niki at synel.co.il (Chen Kedem)
Date: Thu Mar 13 04:34:50 2008
Subject: [Harbour] FW: SourceForge site updates
Message-ID: <47D8E79E.7990@synel.co.il>

Just for your information:

http://sourceforge.net/docs/A04/

( 2008-03-07 05:25:00 - Project CVS Service, Project Shell Service,
Project Subversion (SVN) Service, SourceForge.net Web Site )
On 2008-03-06, during a routine security audit, SourceForge.net staff
identified a deficiency in systems data control. We are unaware of any
exploitation of this data, which was present in encrypted form. In
addition to removing the data, as a preventative measure we have also
forced password changes for all SourceForge.net user accounts.

( 2008-03-06 14:23:47 - SourceForge.net Web Site )
In support of improved security, all SourceForge.net user passwords
have been expired and must be changed upon next login. CVS, Subversion
and Shell users will need to login to the site to change their password
before they will be able to access these services.


  Chen.
From sscc at mweb.co.za  Thu Mar 13 05:10:24 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Mar 13 05:10:53 2008
Subject: [Harbour] RDD's for 16bit
In-Reply-To: <20080306173715.F3A3DEB80@smtp.tor.pathcom.com>
References: <35f29c50.1c87fa6.18bb1ca.bb3@mafact.com>
	<20080306173715.F3A3DEB80@smtp.tor.pathcom.com>
Message-ID: <47D8EF80.5080105@mweb.co.za>

Randy Portnoff wrote:

>> Alex, If you are interested, I actually created one C4W emulator 
>> running under Harbour and Fwh. It is not 100% compatible nor 100% 
>> finished but could be of interest.
> 
> I have switched to WinDock (from C4W32) and you get all the source code 
> - Works very well with Harbour!

The creators of Windock very kindly sent me a zipped up copy compiled 
for VC and to repay them I have not done anything with it! As you can 
imagine, this is on my conscience, so I think I should give it a try.

I made good progress with HWGUI but this was with an app that does not 
use dialogs much, however, I am now loathe to throw at least this 
small progress out.

To M. Lefebvre

As the paragraph above shows I should follow this up before 
investigating your kind offer.

To Phil

Your opinion on the legalities sounds right to me, particularly on the 
"portions" of GPL code.

Thanks
Alex

From jfl at mafact.com  Thu Mar 13 05:58:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Thu Mar 13 05:58:54 2008
Subject: [Harbour] RDD's for 16bit
Message-ID: <d28024da.1c884f0.8b9e9d.29@mafact.com>

Hi Alex,

I just downloaded Windock sources and I was on the way to compile it for VC when I just see your message...

Could you send me the compiled version you receive ? So I could have a try also.

Thanks,

JF,

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Alex Strickland
Envoy??: jeudi 13 mars 2008 10:10
??: Harbour Project Main Developer List.
Objet?: Re: [Harbour] RDD's for 16bit

Randy Portnoff wrote:

>> Alex, If you are interested, I actually created one C4W emulator 
>> running under Harbour and Fwh. It is not 100% compatible nor 100% 
>> finished but could be of interest.
> 
> I have switched to WinDock (from C4W32) and you get all the source code 
> - Works very well with Harbour!

The creators of Windock very kindly sent me a zipped up copy compiled 
for VC and to repay them I have not done anything with it! As you can 
imagine, this is on my conscience, so I think I should give it a try.

I made good progress with HWGUI but this was with an app that does not 
use dialogs much, however, I am now loathe to throw at least this 
small progress out.

To M. Lefebvre

As the paragraph above shows I should follow this up before 
investigating your kind offer.

To Phil

Your opinion on the legalities sounds right to me, particularly on the 
"portions" of GPL code.

Thanks
Alex

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


From druzus at acn.waw.pl  Thu Mar 13 06:15:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Mar 13 06:15:08 2008
Subject: [Harbour] 2008-03-13 11:14 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200803131015.m2DAF2AP008929@31-mo5-4.acn.waw.pl>

2008-03-13 11:14 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbsql.c
    ! fixed typo in last commit which causes GPF when FOR condition was used
      without WHILE - thanks to Lorenzo

best regards
Przemek
From lorenzo.fiorini at gmail.com  Thu Mar 13 06:54:55 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar 13 06:55:04 2008
Subject: [Harbour] 2008-03-13 11:14 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200803131015.m2DAF2AP008929@31-mo5-4.acn.waw.pl>
References: <200803131015.m2DAF2AP008929@31-mo5-4.acn.waw.pl>
Message-ID: <9257026e0803130354o6cfabcfdq89d286a630d894bb@mail.gmail.com>

On Thu, Mar 13, 2008 at 11:15 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>   * harbour/source/rdd/dbsql.c
>     ! fixed typo in last commit which causes GPF when FOR condition was used
>       without WHILE - thanks to Lorenzo

Thanks to you, reporting is easier than fixing.

best regards,
Lorenzo
From sscc at mweb.co.za  Thu Mar 13 08:11:52 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Mar 13 08:12:14 2008
Subject: [Harbour] RDD's for 16bit
In-Reply-To: <d28024da.1c884f0.8b9e9d.29@mafact.com>
References: <d28024da.1c884f0.8b9e9d.29@mafact.com>
Message-ID: <47D91A08.5090708@mweb.co.za>

J. Lefebvre wrote:

> I just downloaded Windock sources and I was on the way to compile it for VC when I just see your message...
> 
> Could you send me the compiled version you receive ? So I could have a try also.

It is two files - wd-wdtk.zip ~ 1.2Mb and tools.zip ~ 18Mb, dated 17 
July 2007.

Are you ok with 19Mb e-mail?

Regards
Alex
From jfl at mafact.com  Thu Mar 13 08:43:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Thu Mar 13 08:44:05 2008
Subject: [Harbour] RDD's for 16bit
Message-ID: <e7c0699c.1c88507.122e57b.1767@mafact.com>

Yes, no problem at all, it's our mail server.

Thanks,

You can also go to ftp://mafact.com/mafact/upload and simply drop the files there.

Let me know your choice,

Regards,

JF,

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Alex Strickland
Envoy??: jeudi 13 mars 2008 13:12
??: Harbour Project Main Developer List.
Objet?: Re: [Harbour] RDD's for 16bit

J. Lefebvre wrote:

> I just downloaded Windock sources and I was on the way to compile it for VC when I just see your message...
> 
> Could you send me the compiled version you receive ? So I could have a try also.

It is two files - wd-wdtk.zip ~ 1.2Mb and tools.zip ~ 18Mb, dated 17 
July 2007.

Are you ok with 19Mb e-mail?

Regards
Alex
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


From info at fsgiudice.com  Thu Mar 13 16:00:45 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Mar 13 16:00:56 2008
Subject: [Harbour] hbzlib error
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com><20080312124536.GA6600@localhost.localdomain>
	<20080312154924.GB7776@localhost.localdomain>
Message-ID: <002c01c88544$edcc2af0$b400a8c0@ASUSFSG>

Hi,

I need to zip / unzip some files and I'm testing hbzlib but I have found a 
problem under BCC / WinXP (not tested yet in other environments).
If I compress simple files it creates a valid zip file, but if I compress 
even one only exe file (about 600kb of size) the zip  is corrupted.
Tested either with my prgs than with myzip.prg in 
harbour/contrib/hbzlib/tests. (running: myzip test.zip myfile.exe )

Anyone experiences this ?

I'm using SVN 2008-03-09 18:30 UTC+0100 Lorenzo Fiorini 
(lorenzo.fiorini/at/gmail.com)

TIA

Francesco

From jfl at mafact.com  Thu Mar 13 17:02:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Thu Mar 13 17:02:31 2008
Subject: [Harbour] RDD's for 16bit
Message-ID: <83622062.1c8854d.2eb1432.7334@mafact.com>

Thanks Alex,

Files where successfully uploaded.

Regards,

JF 

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de J. Lefebvre
Envoy??: jeudi 13 mars 2008 13:43
??: 'Harbour Project Main Developer List.'
Objet?: RE: [Harbour] RDD's for 16bit

Yes, no problem at all, it's our mail server.

Thanks,

You can also go to ftp://mafact.com/mafact/upload and simply drop the files there.

Let me know your choice,

Regards,

JF,

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Alex Strickland
Envoy??: jeudi 13 mars 2008 13:12
??: Harbour Project Main Developer List.
Objet?: Re: [Harbour] RDD's for 16bit

J. Lefebvre wrote:

> I just downloaded Windock sources and I was on the way to compile it for VC when I just see your message...
> 
> Could you send me the compiled version you receive ? So I could have a try also.

It is two files - wd-wdtk.zip ~ 1.2Mb and tools.zip ~ 18Mb, dated 17 
July 2007.

Are you ok with 19Mb e-mail?

Regards
Alex
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Mar 13 21:44:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Mar 13 21:44:08 2008
Subject: [Harbour] hbzlib error
In-Reply-To: <002c01c88544$edcc2af0$b400a8c0@ASUSFSG>
References: <20080312154924.GB7776@localhost.localdomain>
	<002c01c88544$edcc2af0$b400a8c0@ASUSFSG>
Message-ID: <20080314014400.GA5368@localhost.localdomain>

On Thu, 13 Mar 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> I need to zip / unzip some files and I'm testing hbzlib but I have found a 
> problem under BCC / WinXP (not tested yet in other environments).
> If I compress simple files it creates a valid zip file, but if I compress 
> even one only exe file (about 600kb of size) the zip  is corrupted.
> Tested either with my prgs than with myzip.prg in 
> harbour/contrib/hbzlib/tests. (running: myzip test.zip myfile.exe )
> Anyone experiences this ?

I haven't but I know what sth what can be source of such problems.
Inside XHB lib we have very old ZLIB code and if you are linking
your application also with this library then mixed functions from
original ZLIB and this library may cause problems.
Please try to build myzip but eliminate from link script any
references to XHB.LIB and check if it's still wrong. For me it
works well without any problems.

BTW we will have to remove from XHB library hbchksum.c and hbcomprs.c
because it can be source for serious problems when other code will need
full ZLIB library.

best regards,
Przemek
From eyelagui at hotmail.com  Wed Mar 12 09:26:24 2008
From: eyelagui at hotmail.com (Richard Acosta)
Date: Thu Mar 13 22:10:03 2008
Subject: [Harbour] Colors and borders on popupmenu
Message-ID: <BLU115-DAV1CF686D35993E59977754C0080@phx.gbl>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: Menues2.jpg
Type: image/jpeg
Size: 46424 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080312/72f910fc/Menues2-0001.jpg
From info at fsgiudice.com  Fri Mar 14 09:40:42 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Mar 14 09:40:52 2008
Subject: [Harbour] hbzlib error
References: <20080312154924.GB7776@localhost.localdomain><002c01c88544$edcc2af0$b400a8c0@ASUSFSG>
	<20080314014400.GA5368@localhost.localdomain>
Message-ID: <002f01c885d9$008f7c20$b400a8c0@ASUSFSG>

Hi Przemek,

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, March 14, 2008 2:44 AM
Subject: Re: [Harbour] hbzlib error


>
> I haven't but I know what sth what can be source of such problems.
> Inside XHB lib we have very old ZLIB code and if you are linking
> your application also with this library then mixed functions from
> original ZLIB and this library may cause problems.
> Please try to build myzip but eliminate from link script any
> references to XHB.LIB and check if it's still wrong. For me it
> works well without any problems.

Already done, there is no reference to xhb.

Compiled and linked with minimal list of libs and using sample myzip.prg
But result is the same.

I have built hbzlib it using zlib123-dll.zip as downloaded from zlib.net and 
I got the error of wrong zip as explained before.

I have also built the library using 
http://www.winimage.com/zLibDll/zlib123dll.zip
But after a successfull built the program GPFs and I got ther error:

ModLoad: 00400000 0048e000   C:\cvs\HARBOU~1\contrib\hbzlib\tests\myzip.exe
ModLoad: 7c910000 7c9c6000   C:\WINDOWS\system32\ntdll.dll
ModLoad: 7c800000 7c900000   C:\WINDOWS\system32\kernel32.dll
ModLoad: 10000000 10016000 
C:\cvs\HARBOU~1\contrib\hbzlib\tests\ZLIBWAPI.DLL
ModLoad: 73d00000 73d27000   C:\WINDOWS\system32\CRTDLL.dll
ModLoad: 7e390000 7e420000   C:\WINDOWS\system32\USER32.DLL
ModLoad: 77e40000 77e87000   C:\WINDOWS\system32\GDI32.dll
ModLoad: 76340000 7635d000   C:\WINDOWS\system32\IMM32.DLL
ModLoad: 77f40000 77feb000   C:\WINDOWS\system32\ADVAPI32.dll
ModLoad: 77da0000 77e31000   C:\WINDOWS\system32\RPCRT4.dll
ModLoad: 008c0000 00915000   C:\Programmi\Agnitum\Outpost 
Firewall\wl_hook.dll
(184.bc): Access violation - code c0000005 (first chance)
First chance exceptions are reported before any exception handling.
This exception may be expected and handled.
eax=00000000 ebx=00004000 ecx=00000000 edx=00008000 esi=0097f0b0 
edi=0097ad7c
eip=0097ad7c esp=0012fd8c ebp=00955a28 iopl=0         nv up ei pl zr na pe 
nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000 
efl=00010246
0097ad7c 8411            test    byte ptr [ecx],dl 
ds:0023:00000000=??


After some days of troubling I have also tryed to build a my own version of 
zlib directly from sources and it *seems* to work using last zlib 1.23 
version and without needs of external dll.
Now I have to solve only a problem with one file handle not closed after 
call of zip function, but zip files (with also big files) are ok.
Surely it is not correct because I have left original calls (just some 
changes to pacify some warnings), but for now seems to be running.
I have to test it in a bigger application, but for now it is sufficient.

Thank you for help

Best regards

Francesco


From dbtopas at dbtopas.lt  Fri Mar 14 10:55:26 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Mar 14 10:56:08 2008
Subject: [Harbour] hbzlib error
In-Reply-To: <002c01c88544$edcc2af0$b400a8c0@ASUSFSG>
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com><20080312124536.GA6600@localhost.localdomain>	<20080312154924.GB7776@localhost.localdomain>
	<002c01c88544$edcc2af0$b400a8c0@ASUSFSG>
Message-ID: <47DA91DE.8070403@dbtopas.lt>

> I need to zip / unzip some files and I'm testing hbzlib but I have found 
> a problem under BCC / WinXP (not tested yet in other environments).
> If I compress simple files it creates a valid zip file, but if I 
> compress even one only exe file (about 600kb of size) the zip  is 
> corrupted.
> Tested either with my prgs than with myzip.prg in 
> harbour/contrib/hbzlib/tests. (running: myzip test.zip myfile.exe )
> 
> Anyone experiences this ?

Hi,


I haven't noticed it before, but I can reproduce the problem now. File 
zipped with myzip.exe and unzipped with myunzip.exe becomes corrupted 
(shorter, in my case 606208 bytes instead of original 623616). The 
problem is with zip, but not unzip (3rd party software gives error, 
trying to unzip files made by myzip.exe).

I've traced main loop of hb_zipStoreFile():
   while ( ( ulLen = hb_fsReadLarge( hFile, pString, 1024 * 16 ) ) > 0 )
   {
      zipWriteInFileInZip( hZip, pString, ulLen );
   }
   zipCloseFileInZip( hZip );

I found no problem, i.e., all file is buffered into zip, and 
zipWriteInFileInZip() and zipCloseFileInZip() return no error.

Looks like bug in minizip code. I'll try to find a problem in spare time.


Best regards,
Mindaugas



From dbtopas at dbtopas.lt  Fri Mar 14 11:50:27 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Mar 14 11:51:30 2008
Subject: [Harbour] hbzlib error
In-Reply-To: <47DA91DE.8070403@dbtopas.lt>
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com><20080312124536.GA6600@localhost.localdomain>	<20080312154924.GB7776@localhost.localdomain>	<002c01c88544$edcc2af0$b400a8c0@ASUSFSG>
	<47DA91DE.8070403@dbtopas.lt>
Message-ID: <47DA9EC3.1020900@dbtopas.lt>

> Looks like bug in minizip code. I'll try to find a problem in spare time.

Hi,


my bug in minizip code. Just add symbol ";" in the end of 
contrib/hbzlib/zip.c line 1054. I have no time to commit the fix now.


Best regards,
Mindaugas
From info at fsgiudice.com  Fri Mar 14 12:03:14 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Mar 14 12:13:40 2008
Subject: [Harbour] hbzlib error
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com><20080312124536.GA6600@localhost.localdomain>	<20080312154924.GB7776@localhost.localdomain><002c01c88544$edcc2af0$b400a8c0@ASUSFSG>
	<47DA91DE.8070403@dbtopas.lt>
Message-ID: <000301c885ec$e94c31c0$b400a8c0@ASUSFSG>

Hi Mindaugas,

----- Original Message ----- 
From: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, March 14, 2008 3:55 PM
Subject: Re: [Harbour] hbzlib error


>
>
> I haven't noticed it before, but I can reproduce the problem now. File 
> zipped with myzip.exe and unzipped with myunzip.exe becomes corrupted 
> (shorter, in my case 606208 bytes instead of original 623616). The problem 
> is with zip, but not unzip (3rd party software gives error, trying to 
> unzip files made by myzip.exe).
>
> I've traced main loop of hb_zipStoreFile():
>   while ( ( ulLen = hb_fsReadLarge( hFile, pString, 1024 * 16 ) ) > 0 )
>   {
>      zipWriteInFileInZip( hZip, pString, ulLen );
>   }
>   zipCloseFileInZip( hZip );
>
> I found no problem, i.e., all file is buffered into zip, and 
> zipWriteInFileInZip() and zipCloseFileInZip() return no error.
>
> Looks like bug in minizip code. I'll try to find a problem in spare time.
>

Yes, exactly.
Thank you, I hope you will find the time.
Could you find time also to see if it is possible to build a static lib 
without needs of external dll ?

Best regards

Francesco


From info at fsgiudice.com  Sat Mar 15 04:31:11 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Mar 15 04:31:18 2008
Subject: [Harbour] hbzlib error
References: <2386af1b0803120451m23438fc2o62c64d83384a8cc6@mail.gmail.com><20080312124536.GA6600@localhost.localdomain>	<20080312154924.GB7776@localhost.localdomain>	<002c01c88544$edcc2af0$b400a8c0@ASUSFSG><47DA91DE.8070403@dbtopas.lt>
	<47DA9EC3.1020900@dbtopas.lt>
Message-ID: <000301c88676$ed355f20$b400a8c0@ASUSFSG>


----- Original Message ----- 
From: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, March 14, 2008 4:50 PM
Subject: Re: [Harbour] hbzlib error


> 
> my bug in minizip code. Just add symbol ";" in the end of 
> contrib/hbzlib/zip.c line 1054. I have no time to commit the fix now.
> 
> 

It works. Thank you.
I will commit asap.

Best Regards

Francesco
From dbtopas at dbtopas.lt  Sat Mar 15 09:13:54 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Mar 15 09:16:02 2008
Subject: [Harbour] ChangeLog 2008-03-15 15:15 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <47DBCB92.6040604@dbtopas.lt>

2008-03-15 15:15 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/contrib/hbzlib/zip.c
     ! fixed compression bug
From druzus at acn.waw.pl  Sat Mar 15 11:58:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Mar 15 11:58:46 2008
Subject: [Harbour] 2008-03-15 16:58 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200803151558.m2FFwcnB007262@31-mo5-4.acn.waw.pl>

2008-03-15 16:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbzlib/zip.c
    ! fixed to not ignore errors in zipFlushWriteBuffer()

  * harbour/contrib/hbzlib/tests/myzip.prg
  * harbour/contrib/hbzlib/tests/myunzip.prg
    ! removed procedure return values

best regards
Przemek
From dmacias at mail.udg.mx  Sat Mar 15 16:59:43 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Mar 15 16:59:37 2008
Subject: [Harbour] Harbour under OS/2 - eCS
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47DC38BF.5010906@mail.udg.mx>

Current Harbour under OS/2 build OK ( with my own global.cf )

Below are result of hbtest.exe

"Copyright 1999-2000" should be updated ?

David Macias


Harbour Regression Test Suite
Copyright 1999-2000, http://www.harbour-project.org
---------------------------------------------------------------------------
       Version: Harbour devel build 1.1-1 Intl.
      Compiler: EMX GNU C 3.3.5 (32 bit)
            OS: OS/2 4.50
    Date, Time: 2008.03.15 14:50:35
        Output: (stdout)
Shortcut opt.: ON
      Switches:
===========================================================================
R No.  Line            TestCall()                               -> 
Result 
               | Expected 

---------------------------------------------------------------------------
!  594 MAIN_HVMA(341)  saArray[ 1000 ]
        Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N:1000 "
      Expected: "E BASE 1132 Bound error array access "
!  595 MAIN_HVMA(342)  saArray[ 1000 ] := 1
        Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
      Expected: "E BASE 1133 Bound error array assign "
!  724 MAIN_HVMA(503)  RTSTR( 00000500000000000000 )
        Result: " 16  500000000000000"
      Expected: " 21       500000000000000"
!  725 MAIN_HVMA(504)  RTSTR( 0500000000000000 )
        Result: " 16  500000000000000"
      Expected: " 17   500000000000000"
! 1069 MAIN_MATH(359)  Str(1234567890 * 1234567890 )
        Result: " 1524157875019052100"
      Expected: " 1524157875019052000"
! 1429 MAIN_STR(275)   AllTrim( NIL )
        Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
      Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1430 MAIN_STR(276)   AllTrim( 100 )
        Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
      Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1502 MAIN_STR(376)   StrTran( NIL )
        Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
      Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1503 MAIN_STR(377)   StrTran( 100 )
        Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
      Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1504 MAIN_STR(379)   StrTran( "AA", 1 )
        Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
      Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2789 MAIN_ARRAY(107) AFill( NIL )
        Result: "E BASE 6004 Argument error AFILL A:1:U:NIL "
      Expected: "E BASE 6004 Argument error AFILL "
! 2833 MAIN_ARRAY(163) ASize( NIL )
        Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
      Expected: "E BASE 2023 Argument error ASIZE "
! 2834 MAIN_ARRAY(164) ASize( {} )
        Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
      Expected: "E BASE 2023 Argument error ASIZE "
! 2835 MAIN_ARRAY(165) ASize( ErrorNew() )
        Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
      Expected: "E BASE 2023 Argument error ASIZE "
! 2836 MAIN_ARRAY(167) ASize( NIL, 0 )
        Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
      Expected: "E BASE 2023 Argument error ASIZE "
! 2839 MAIN_ARRAY(170) ASize( NIL, 1 )
        Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
      Expected: "E BASE 2023 Argument error ASIZE "
! 2845 MAIN_ARRAY(176) ASize( NIL, -1 )
        Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
      Expected: "E BASE 2023 Argument error ASIZE "
! 2860 MAIN_ARRAY(201) Array( -1 )
        Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
      Expected: "E BASE 1131 Bound error array dimension "
! 2861 MAIN_ARRAY(202) Array( 1, 0, -10 )
        Result: "E BASE 1131 Bound error array dimension A:3:N:1;N:0;N:-10 "
      Expected: "E BASE 1131 Bound error array dimension "
! 3403 MAIN_MISC(554)  HB_SToD("99990101")
        Result: HB_SToD("99990101")
      Expected: HB_SToD("        ")
! 4658 MAIN_LAST(179)  __MRestore( "$NOTHERE.MEM", .F. )
        Result: "E BASE 2005 Open error $NOTHERE.MEM 
A:2:C:$NOTHERE.MEM;L:.F. F:DR"
      Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4660 MAIN_LAST(183)  __MSave( BADFNAME(), "*", .T. )
        Result: "E BASE 2006 Create error *BADNAM*.MEM 
A:3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
      Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
===========================================================================
Test calls passed:       4638 ( 99.53 % )
Test calls failed:         22 ( 0.47 % )
                    ----------
             Total:       4660 ( Time elapsed: 0.62 seconds )

WARNING ! Failures detected



From mbelgrano at deltain.it  Mon Mar 17 07:16:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Mar 17 07:16:25 2008
Subject: [Harbour] Harbour & Visual FOXPRO 9 Format & locking
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA53@SRV02.deltain.net>

ADS 9  Have Enhanced FoxPro Support:
Advantage support for FoxPro DBF tables and CDX/IDX index files has been
enhanced to include all data types supported by Visual FoxPro 9. This
includes support for Auto-increment, BLOB (Binary Large Objects),
Currency, DateTime (timestamp), VarBinary, and VarChar field types.
Null field support has also been added to give true SQL-style NULL
handling for Visual FoxPro DBF tables. Support for true unique
(candidate) indexes is now also available on DBF tables; this allows for
better SQL optimization, the definition of primary keys, and the
creation of referential integrity rules.
Additionally, support for long field names with DBF tables has been
added. 
In addition to supporting the robust and high-performance Advantage
proprietary locking on the new table format, Advantage also supports
Visual FoxPro compatibility locking, which allows you to use
Advantage-enabled applications to share tables with existing Visual
FoxPro applications that are not using Advantage

Wich of this are also harbour feature?


Massimo Belgrano

From lorenzo.fiorini at gmail.com  Mon Mar 17 10:58:18 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 17 10:58:22 2008
Subject: [Harbour] What about the release?
Message-ID: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>

What are we waiting for?

I suggest:

1) to tag "now" the svn as beta4

2) create zip/tgz tarball with the svn at beta4

3) upload the zip/tgz

4) immediately reopen the trunk to the developers

5) the packagers will use the zip/tgz to create the binaries when
they'll have time and the binaries will be uploaded when and if
they'll be ready

Any comments?

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Mar 17 13:37:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 17 13:37:10 2008
Subject: [Harbour] What about the release?
In-Reply-To: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
Message-ID: <20080317173704.GA7183@localhost.localdomain>

On Mon, 17 Mar 2008, Lorenzo Fiorini wrote:
> What are we waiting for?

For someone who will make it ;-)

> I suggest:
> 1) to tag "now" the svn as beta4

Rather RC1 to decrease the time of release process.

> 2) create zip/tgz tarball with the svn at beta4

We already have script for creating tgz archive with whole
SVN source code automatically which packs _ONLY_ files which
are in SVN repository so there is no risk that some local
files will be packed too. Probably we should add sth like
that for ZIP too or simply convert .tgz archive to .zip format.
I can add option to current bin/pack_src.sh to create also .zip
files ASAP.

> 3) upload the zip/tgz
> 4) immediately reopen the trunk to the developers

This will not be such easy. We will have to wait for user input
about new release. If sth will be wrong then we will have to fix
it and release RC2 and repeat the process.
When we fix all problems then last RC should be marked as 1.0
I think that to weeks periods before releases should be enough
though it will depend on Harbour users and how actively they
will test new binaries.
When we release version 1.0 then we will create 1.0 branch and
unblock SVN for next modifications.

> 5) the packagers will use the zip/tgz to create the binaries when
> they'll have time and the binaries will be uploaded when and if
> they'll be ready

They can also download from SVN code snapshot tagged by us even so
it's not strictly necessary though for some people who do not have
SVN or do not know SVN options it may help.
We should only agree which build time options we want to set.
Because using different regex library is compile time option only
(different regex implementation supported by us use different API
so it's not possible to make it only link time option without additional
harbour libraries) then I suggest to chose current default one inside
our core code. In *nixes builds (and others which can use hb* scripts,
f.e. MinGW, DJGPP) FM statistic is user link time option but in others
not so I suggest to create such RC builds with FM enabled (without
HB_FM_STATISTICS_OFF macro) for better tests. In current SVN HB_EXTENSION
is disabled by default. We should agree if we want to enable it for
RC binaries. If yes then I suggest to change the default setting in
hbsetup.ch. The last one optional extenssion which I know is used
by Harbour users and not enabled by default is HB_PP_MULTILINE_STRING
defined in hbsetup.h so we should also decide if we want to enable it
or not. Then we can start release process ASAP. If there are some other
important optional build macros then please ask.
I would like to hear your opinion about default settings ASAP.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Mar 17 15:42:37 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 17 15:45:08 2008
Subject: [Harbour] What about the release?
In-Reply-To: <20080317173704.GA7183@localhost.localdomain>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<20080317173704.GA7183@localhost.localdomain>
Message-ID: <9257026e0803171242x2bf98576q80926d96d180267f@mail.gmail.com>

On Mon, Mar 17, 2008 at 6:37 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  For someone who will make it ;-)

It was my impression :)

>  Rather RC1 to decrease the time of release process.

Ok.

>  They can also download from SVN code snapshot tagged by us even so
>  it's not strictly necessary though for some people who do not have
>  SVN or do not know SVN options it may help.

Ok.

>  We should only agree which build time options we want to set.
> ...
>  I would like to hear your opinion about default settings ASAP.

I personally use standard hbsetup.ch and -DHB_P_MULTILINE_STRING.

I've nothing against set HB_EXTENSION true.

best regards,
Lorenzo
From a.jurkiewicz at abix.info.pl  Mon Mar 17 19:01:16 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Mon Mar 17 19:01:21 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
Message-ID: <200803180001.16101.a.jurkiewicz@abix.info.pl>

Dear developers,
can anybody answer little question:
Why if I'm doing dbgotop(), the pointer does not move to the beggining of 
file ?

adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> hbmk test.prg
Harbour devel build 1.1-1 Intl.
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'test.prg'...
Lines 8, Functions/Procedures 1
Generating C source output to 'test.c'... Done.

adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> cat test.prg

use pozycje new
index on towar_k to pozt
dbgotop()
? "aa" + str(recno())
dbgoto(1)
? "ab" + str(recno())

adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> ./test

aa      4519
ab         1
adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni>

-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu | http://www.abix.info.pl
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From a.jurkiewicz at abix.info.pl  Mon Mar 17 19:38:47 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Mon Mar 17 19:38:52 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <200803180001.16101.a.jurkiewicz@abix.info.pl>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
Message-ID: <200803180038.47674.a.jurkiewicz@abix.info.pl>

Dnia wtorek, 18 marca 2008, ABIX - Adam Jurkiewicz napisa?:
>
> adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> ./test
>
> aa      4519
> ab         1
> adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni>

A dbf file pozycje has 4518 records, so "aa" has to be EOF(), not some record 
which is first in index.


-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu | http://www.abix.info.pl
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From lkrausem at shaw.ca  Mon Mar 17 19:53:31 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Mon Mar 17 19:54:54 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <200803180001.16101.a.jurkiewicz@abix.info.pl>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
Message-ID: <47DF047B.1080103@shaw.ca>

Adam:

IIRC, you have to close and reopen the dbf with its new index - then
the dbgoto() should work as expected.

ABIX - Adam Jurkiewicz wrote:
> Dear developers,
> can anybody answer little question:
> Why if I'm doing dbgotop(), the pointer does not move to the beggining of 
> file ?
>
> adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> hbmk test.prg
> Harbour devel build 1.1-1 Intl.
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> Compiling 'test.prg'...
> Lines 8, Functions/Procedures 1
> Generating C source output to 'test.c'... Done.
>
> adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> cat test.prg
>
> use pozycje new
> index on towar_k to pozt
> dbgotop()
> ? "aa" + str(recno())
> dbgoto(1)
> ? "ab" + str(recno())
>
> adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> ./test
>
> aa      4519
> ab         1
> adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni>
>
>   

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From druzus at acn.waw.pl  Mon Mar 17 21:08:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 17 21:08:42 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <200803180001.16101.a.jurkiewicz@abix.info.pl>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
Message-ID: <20080318010835.GA5811@localhost.localdomain>

On Tue, 18 Mar 2008, ABIX - Adam Jurkiewicz wrote:
> can anybody answer little question:
> Why if I'm doing dbgotop(), the pointer does not move to the beggining of 
> file ?

dbGoTop() move to first visible record in index file keeping current
order not to the 1-st physical record what dbGoto(1) does.
When current order is defined by index files (? indexord() shows non
0 value) then RDD chose record bound with 1-st index key in the index
file. It does not have to be 1-st record in table (DBF file). When
current order is set to 0 (OrdSetFocus(0)) then dbGoTop() uses natural
record order in the table. In DBF related RDDs it's physical order
so it can make what you are asking for but unlike dbGoTo() the dbGoTop()
function respects also filters set by SET FILTER TO <exp> and/or by
SET DELETE {ON|OFF} so after moving to 1-st logical record it skips
all records which does not pass active filer condition(s). So even
with natural record order (0) it does not have to chose 1-st physical
record. F.e. if your filter condition excludes all records (f.e. after
SET FILTER TO (.F.) or after SET DELETE ON when all records are deleted)
then it will finish skipping process at EOF position.

HTH,

pozdrawiam,
Przemek
From philb at philb.us  Mon Mar 17 23:44:53 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Mar 17 23:44:59 2008
Subject: [Harbour] What about the release?
In-Reply-To: <20080317173704.GA7183@localhost.localdomain>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<20080317173704.GA7183@localhost.localdomain>
Message-ID: <200803172344.53434.philb@philb.us>

On Monday 17 March 2008 01:37:04 pm Przemyslaw Czerpak wrote:
> On Mon, 17 Mar 2008, Lorenzo Fiorini wrote:
> > What are we waiting for?
>
> For someone who will make it ;-)

I was waiting for your go ahead. I can do it at any time.

-- 
"Sometimes I wonder whether the world is being run by smart people who are 
putting us on or by imbeciles who really mean it." - Mark Twain
From a.jurkiewicz at abix.info.pl  Tue Mar 18 05:36:08 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Tue Mar 18 05:50:21 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <20080318010835.GA5811@localhost.localdomain>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
	<20080318010835.GA5811@localhost.localdomain>
Message-ID: <200803181036.08847.a.jurkiewicz@abix.info.pl>

Dnia wtorek, 18 marca 2008, Przemyslaw Czerpak napisa?:
>
> dbGoTop() move to first visible record in index file keeping current
Przemek,
as usualy You have right, but please look at this - I've made little program 
to test the situation with dbGoTop() and dbGoBottom(), because I think, that 
all of my knowledge of Clipper have to go out ...

// --- Source code is: -------------------------------------
adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> cat test.prg
  use pozycje new
  dbclearfilter()
  my_x("test 1")
  ? "indexord: " + str(indexord())
  ? "records in dbf: " + str(reccount())
  ? "start position: " + str(recno())
  index on towar_k to pozt
  ? "stop  position: " + str(recno())
  my_x("after index on...")
  ? "---------------"
  my_moving()

function my_moving()
  dbgotop()
  ? "a" + str(recno())
  my_dbgotop()
  ? "b" + str(recno())
  dbgobottom()
  ? "c" + str(recno())
  my_dbgobottom()
  ? "d" + str(recno())
return nil

function my_x(s)
? s+ " -bof: " + transform(bof(),"L")
? s+ " -eof: " + transform(eof(),"L")
return nil

function my_dbgotop()
  my_x("called from my_dbgotop()")
  do while !bof()
    dbskip(-1)
    ? "x: "+str(recno())
  enddo
return nil

function my_dbgobottom()
  do while !eof()
    dbskip()
  enddo
return nil
// ----------------------------------------------------

Compiled under OpenSUSE 10.3 (you remember...) without! --fulstatic..
Harbour fro SVN from last night, build 8326.

adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> hbmk test.prg
Harbour devel build 1.1-1 Intl.
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'test.prg'...
Lines 41, Functions/Procedures 5
Generating C source output to 'test.c'... Done.
adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> ./test

test 1 -bof: F
test 1 -eof: F
indexord:          0
records in dbf:       4518
start position:          1
stop  position:       4519
after index on... -bof: T
after index on... -eof: T
---------------
a      4519
called from my_dbgotop() -bof: T
called from my_dbgotop() -eof: T
b      4519
c      4519
d      4519

// -------------------------------------------------------

And now the same source code compiled under Clipper 5.2e and Blinker in DOSemu 
box ... Please take a look on that, in DOS/Clipper seem to works perfectly!
 
BLINKER : link was successful
TEST.EXE (301 kb) (0.1 seconds)
Koniec.
C:\SERWIS\SEREK\UNI>test.exe
 
test 1 -bof: F
test 1 -eof: F
indexord:          0
records in dbf:       4518
start position:       1
stop  position:    3927
after index on... -bof: F
after index on... -eof: F
---------------
a   3927
called from my_dbgotop() -bof: F
called from my_dbgotop() -eof: F
x:    3927
b   3927
c   2385
d   4519
C:\SERWIS\SEREK\UNI>                           

// ------------------------------------------------------
What you say to such situation ?

adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> valgrind test
==6364== Memcheck, a memory error detector.
==6364== Copyright (C) 2002-2007, and GNU GPL'd, by Julian Seward et al.
==6364== Using LibVEX rev 1804, a library for dynamic binary translation.
==6364== Copyright (C) 2004-2007, and GNU GPL'd, by OpenWorks LLP.
==6364== Using valgrind-3.3.0, a dynamic binary instrumentation framework.
==6364== Copyright (C) 2000-2007, and GNU GPL'd, by Julian Seward et al.
==6364== For more details, rerun with: -v
==6364==
==6364==
==6364== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 3 from 1)
==6364== malloc/free: in use at exit: 0 bytes in 0 blocks.
==6364== malloc/free: 415 allocs, 415 frees, 19,294 bytes allocated.
==6364== For counts of detected errors, rerun with: -v
==6364== All heap blocks were freed -- no leaks are possible.

=================================
Note at the end:
Please, test this code on your RedHat, I've put test.prg and pozycje.dbf on my 
FTP on your serwer in test directory.
If this is caused by SuSE, then I'll switch to Ubuntu ;-)

Best regards,
Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu | http://www.abix.info.pl
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From druzus at acn.waw.pl  Tue Mar 18 09:05:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 18 09:05:24 2008
Subject: [Harbour] What about the release?
In-Reply-To: <200803172344.53434.philb@philb.us>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<20080317173704.GA7183@localhost.localdomain>
	<200803172344.53434.philb@philb.us>
Message-ID: <20080318130518.GA6566@localhost.localdomain>

On Mon, 17 Mar 2008, Phil Barnett wrote:
> I was waiting for your go ahead. I can do it at any time.

I'm really sorry, I have to missed it.
Please do it.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Mar 18 09:25:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 18 09:25:46 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <200803181036.08847.a.jurkiewicz@abix.info.pl>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
	<20080318010835.GA5811@localhost.localdomain>
	<200803181036.08847.a.jurkiewicz@abix.info.pl>
Message-ID: <20080318132503.GB6566@localhost.localdomain>

On Tue, 18 Mar 2008, ABIX - Adam Jurkiewicz wrote:
> Przemek,
> as usualy You have right, but please look at this - I've made little program 
> to test the situation with dbGoTop() and dbGoBottom(), because I think, that 
> all of my knowledge of Clipper have to go out ...
> 
> adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> hbmk test.prg
> Harbour devel build 1.1-1 Intl.
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> Compiling 'test.prg'...
> Lines 41, Functions/Procedures 5
> Generating C source output to 'test.c'... Done.
> adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> ./test
> test 1 -bof: F
> test 1 -eof: F
> indexord:          0
> records in dbf:       4518
> start position:          1
> stop  position:       4519
> after index on... -bof: T
> after index on... -eof: T
> ---------------
> a      4519
> called from my_dbgotop() -bof: T
> called from my_dbgotop() -eof: T
> b      4519
> c      4519
> d      4519

This are wrong results. I do not know how you created them.
Maybe you are using some corrupted Harbour binaries or for
some reasons new NTX index is corrupted and seems to have no
records. I cannot replicated such situation (at least without
RT error).

> And now the same source code compiled under Clipper 5.2e and Blinker in DOSemu 
> box ... Please take a look on that, in DOS/Clipper seem to works perfectly!
> test 1 -bof: F
> test 1 -eof: F
> indexord:          0
> records in dbf:       4518
> start position:       1
> stop  position:    3927
> after index on... -bof: F
> after index on... -eof: F
> ---------------
> a   3927
> called from my_dbgotop() -bof: F
> called from my_dbgotop() -eof: F
> x:    3927
> b   3927
> c   2385
> d   4519
> C:\SERWIS\SEREK\UNI>                           

This are correct results which I also receive using Harbour.
I tested on OpenSuse10.3, RH, Fedora.

> What you say to such situation ?

I can only guess. Corrupted Harbour binaries, some FS problems or
strange quota which cuts files without returning errors to application?

> Note at the end:
> Please, test this code on your RedHat, I've put test.prg and pozycje.dbf on my 
> FTP on your serwer in test directory.
> If this is caused by SuSE, then I'll switch to Ubuntu ;-)

I works for me on OpenSuse, RH, Fedora without any problems so I do not
expect that changing distribution will help you in any way. I'd rather
suggest to find the real reason because it's highly possible to you
replicate the same conditions with other distribution. Can you upload
also NTX file created in your system? Maybe I will be able to sth more
seeing it.

best regards,
Przemek
From mpaliwoda at interia.pl  Tue Mar 18 10:17:30 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Mar 18 10:17:39 2008
Subject: [Harbour] What about the release?
In-Reply-To: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
Message-ID: <47DFCEFA.2020101@interia.pl>

Guys,

> 5) the packagers will use the zip/tgz to create the binaries when
> they'll have time and the binaries will be uploaded when and if
> they'll be ready

Although I declared that I could prepare binary builds for MSVC
not so long ago, things have changed significanly lately. Due to
serious healthy problems I've had recently, I won't be able to
participate in Harbour project for the next few weeks (at least).
I am really sorry I cannot fullfill my promises. Please accept
my appologies.

-- 

Marek

----------------------------------------------------------------------
Zobacz - 180 km/h w skodzie tatusia!
kliknij >>> http://link.interia.pl/f1d1e

From druzus at acn.waw.pl  Tue Mar 18 10:23:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 18 10:23:47 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <20080318132503.GB6566@localhost.localdomain>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
	<20080318010835.GA5811@localhost.localdomain>
	<200803181036.08847.a.jurkiewicz@abix.info.pl>
	<20080318132503.GB6566@localhost.localdomain>
Message-ID: <20080318142342.GA9076@localhost.localdomain>

On Tue, 18 Mar 2008, Przemyslaw Czerpak wrote:
> This are wrong results. I do not know how you created them.
> Maybe you are using some corrupted Harbour binaries or for
> some reasons new NTX index is corrupted and seems to have no
> records. I cannot replicated such situation (at least without
> RT error).

I think that I know the answer.
You are not using binaries created from current source code but from
the code after:

   2008-02-08 15:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
     * harbour/source/rdd/dbfntx/dbfntx1.c
       ! fixed possible memory leak during accessing corrupted NTX files
       ! fixed possible GPF during accessing corrupted NTX files

and before:

   2008-02-18 12:12 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
     * harbour/source/rdd/dbfntx/dbfntx1.c
       ! fixed very bad typo in my last commit - thanks to Jorge and Enrico
         for confirmation

In this version DBFNTX was broken and the results should be similar
to yours.
Rebuild Harbour from current SVN code and problem will disappear.

best regards,
Przemek
From gvarona at ec-red.com  Tue Mar 18 12:12:39 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue Mar 18 12:11:12 2008
Subject: [Harbour] Changelog
In-Reply-To: <C032AE9E-C40F-4B66-9CB3-32D4E3CE4181@syenar.hu>
References: <e05f43e64483a061c7bfea9570012c9c.qmail@home.pl>	<9BC9C910-25CD-4AA2-8E1E-BF432DAB1F7E@syenar.hu>	<47A20ACA.4010603@ec-red.com>
	<C032AE9E-C40F-4B66-9CB3-32D4E3CE4181@syenar.hu>
Message-ID: <47DFE9F7.6010009@ec-red.com>

Szak?ts Viktor escribi?:
> Hi Guillermo,
> You'll need to add the include path for these external
> packages to your custom C options:
[SPA] ?D?nde puedo obtener este paquete (ADS)? ?es libre / opensource?
[ENG] Where can I get this package (ADS)? Is free / opensource?

Thank you.

Best Regards
GVS

>
> set C_USR=-IC:\ads\acesdk -IC:\zlib-dll\include
>
> Brgds,
> Viktor
>
> On 2008.01.31., at 18:52, Guillermo Varona Silup? wrote:
>
>> Szak?ts Viktor escribi?:
>>> Thanks, now it works perfectly.
>> [SPA] Hola, yo estoy obteniendo estos mensajes:
>> [ENG] Hello, I am getting these messages:
>>
>> D:\harbour>MAKE_GNU
>> ../../ioapi.c:13:18: zlib.h: No such file or directory In file 
>> included from ../../ioapi.c:14:
>> ../../ioapi.h:38: error: syntax error before '*' token
>> ../../ioapi.h:39: error: syntax error before '*' token
>> ../../ioapi.h:40: error: syntax error before '*' token
>> ../../ioapi.h:41: error: syntax error before "OF"
>> ../../ioapi.h:42: error: syntax error before "OF"
>> ../../ioapi.h:43: error: syntax error before "OF"
>> ../../ioapi.h:44: error: syntax error before "OF"
>> ../../ioapi.h:48: error: syntax error before "open_file_func"
>> ../../ioapi.h:48: warning: no semicolon at end of struct or union
>> ../../ioapi.h:49: warning: type defaults to `int' in declaration of 
>> `zread_file'
>> ../../ioapi.h:49: warning: data definition has no type or storage class
>> ../../ioapi.h:50: error: syntax error before "zwrite_file"
>> ../../ioapi.h:50: warning: type defaults to `int' in declaration of 
>> `zwrite_file'
>> ../../ioapi.h:50: warning: data definition has no type or storage class
>> ../../ioapi.h:51: error: syntax error before "ztell_file"
>> ../../ioapi.h:51: warning: type defaults to `int' in declaration of 
>> `ztell_file'
>> ../../ioapi.h:51: warning: data definition has no type or storage class
>> ../../ioapi.h:52: error: syntax error before "zseek_file"
>> ../../ioapi.h:52: warning: type defaults to `int' in declaration of 
>> `zseek_file'
>> ../../ioapi.h:52: warning: data definition has no type or storage class
>> ../../ioapi.h:53: error: syntax error before "zclose_file"
>> ../../ioapi.h:53: warning: type defaults to `int' in declaration of 
>> `zclose_file'
>> ../../ioapi.h:53: warning: data definition has no type or storage class
>> ../../ioapi.h:54: error: syntax error before "zerror_file"
>> ../../ioapi.h:54: warning: type defaults to `int' in declaration of 
>> `zerror_file'
>> ../../ioapi.h:54: warning: data definition has no type or storage class
>> ../../ioapi.h:55: error: syntax error before "opaque"
>> ../../ioapi.h:55: warning: type defaults to `int' in declaration of 
>> `opaque'
>> ../../ioapi.h:55: warning: data definition has no type or storage class
>> ../../ioapi.h:56: warning: type defaults to `int' in declaration of 
>> `zlib_filefunc_def'
>> ../../ioapi.h:56: warning: data definition has no type or storage class
>> ../../ioapi.h:60: error: syntax error before "OF"
>> ../../ioapi.c:49: error: syntax error before "OF"
>> ../../ioapi.c:53: error: syntax error before "OF"
>> ../../ioapi.c:59: error: syntax error before "OF"
>> ../../ioapi.c:63: error: syntax error before "OF"
>> ../../ioapi.c:69: error: syntax error before "opaque"
>> ../../ioapi.c:72: warning: return type defaults to `int'
>> ../../ioapi.c: In function `fopen_file_func':
>> ../../ioapi.c:78: error: `mode' undeclared (first use in this function)
>> ../../ioapi.c:78: error: (Each undeclared identifier is reported only 
>> once
>> ../../ioapi.c:78: error: for each function it appears in.)
>> ../../ioapi.c:87: error: `filename' undeclared (first use in this 
>> function)
>> ../../ioapi.c:89: warning: return makes integer from pointer without 
>> a cast
>> ../../ioapi.c: At top level:
>> ../../ioapi.c:93: error: syntax error before "fread_file_func"
>> ../../ioapi.c:94: error: syntax error before "opaque"
>> ../../ioapi.c:98: warning: return type defaults to `int'
>> ../../ioapi.c: In function `fread_file_func':
>> ../../ioapi.c:99: error: `uLong' undeclared (first use in this function)
>> ../../ioapi.c:99: error: syntax error before "ret"
>> ../../ioapi.c:103: error: `ret' undeclared (first use in this function)
>> ../../ioapi.c:103: error: syntax error before "fread"
>> ../../ioapi.c: At top level:
>> ../../ioapi.c:108: error: syntax error before "fwrite_file_func"
>> ../../ioapi.c:109: error: syntax error before "opaque"
>> ../../ioapi.c:113: warning: return type defaults to `int'
>> ../../ioapi.c: In function `fwrite_file_func':
>> ../../ioapi.c:114: error: `uLong' undeclared (first use in this 
>> function)
>> ../../ioapi.c:114: error: syntax error before "ret"
>> ../../ioapi.c:118: error: `ret' undeclared (first use in this function)
>> ../../ioapi.c:118: error: syntax error before "fwrite"
>> ../../ioapi.c: At top level:
>> ../../ioapi.c:123: error: syntax error before "opaque"
>> ../../ioapi.c: In function `ftell_file_func':
>> ../../ioapi.c:130: error: `stream' undeclared (first use in this 
>> function)
>> ../../ioapi.c: At top level:
>> ../../ioapi.c:135: error: syntax error before "opaque"
>> ../../ioapi.c: In function `fseek_file_func':
>> ../../ioapi.c:145: error: `origin' undeclared (first use in this 
>> function)
>> ../../ioapi.c:159: error: `stream' undeclared (first use in this 
>> function)
>> ../../ioapi.c:159: error: `offset' undeclared (first use in this 
>> function)
>> ../../ioapi.c: At top level:
>> ../../ioapi.c:164: error: syntax error before "opaque"
>> ../../ioapi.c: In function `fclose_file_func':
>> ../../ioapi.c:171: error: `stream' undeclared (first use in this 
>> function)
>> ../../ioapi.c: At top level:
>> ../../ioapi.c:176: error: syntax error before "opaque"
>> ../../ioapi.c: In function `ferror_file_func':
>> ../../ioapi.c:183: error: `stream' undeclared (first use in this 
>> function)
>> ../../ioapi.c: At top level:
>> ../../ioapi.c:188: error: syntax error before '*' token
>> ../../ioapi.c: In function `fill_fopen_filefunc':
>> ../../ioapi.c:190: error: `pzlib_filefunc_def' undeclared (first use 
>> in this fun
>> ction)
>> make[3]: *** [ioapi.o] Error 1
>> make[2]: *** [descend] Error 2
>> In file included from ../../ads1.c:66: ../../rddads.h:69:17: ace.h: 
>> No such file or directory
>> In file included from ../../ads1.c:66: ../../rddads.h:149: error: 
>> syntax error before "ADSHANDLE" ../../rddads.h:149: warning: no 
>> semicolon at end of struct or union
>> ../../rddads.h:150: warning: type defaults to `int' in declaration of 
>> `hOrdCurrent'
>> ../../rddads.h:150: warning: data definition has no type or storage 
>> class
>> ../../rddads.h:151: error: syntax error before "hStatement"
>> ../../rddads.h:151: warning: type defaults to `int' in declaration of 
>> `hStatement'
>> ../../rddads.h:151: warning: data definition has no type or storage 
>> class
>> ../../rddads.h:152: warning: type defaults to `int' in declaration of 
>> `ADSAREA'
>> ../../rddads.h:152: warning: data definition has no type or storage 
>> class
>> ../../rddads.h:154: error: syntax error before '*' token
>> ../../rddads.h:154: warning: type defaults to `int' in declaration of 
>> `ADSAREAP'
>> ../../rddads.h:154: warning: data definition has no type or storage 
>> class
>> ../../rddads.h:186: error: syntax error before "adsConnectHandle"
>> ../../rddads.h:186: warning: type defaults to `int' in declaration of 
>> `adsConnectHandle'
>> ../../rddads.h:186: warning: data definition has no type or storage 
>> class
>> ../../rddads.h:187: error: syntax error before "pArea"
>> ../../rddads.h:188: error: syntax error before 
>> "hb_rddGetADSWorkAreaPointer"
>> ../../rddads.h:188: warning: type defaults to `int' in declaration of 
>> `hb_rddGetADSWorkAreaPointer'
>> ../../rddads.h:188: warning: data definition has no type or storage 
>> class
>> ../../ads1.c: In function `adsSetListener_callback':
>> ../../ads1.c:108: warning: implicit declaration of function 
>> `AdsSetDateFormat'
>> ../../ads1.c:108: error: `UNSIGNED8' undeclared (first use in this 
>> function)
>> ../../ads1.c:108: error: (Each undeclared identifier is reported only 
>> once
>> ../../ads1.c:108: error: for each function it appears in.)
>> ../../ads1.c:108: error: syntax error before ')' token
>> ../../ads1.c:111: warning: implicit declaration of function 
>> `AdsSetDefault'
>> ../../ads1.c:111: error: syntax error before ')' token
>> ../../ads1.c:114: warning: implicit declaration of function 
>> `AdsShowDeleted'
>> ../../ads1.c:117: warning: implicit declaration of function 
>> `AdsSetEpoch'
>> ../../ads1.c:120: warning: implicit declaration of function 
>> `AdsSetExact'
>> ../../ads1.c:123: warning: implicit declaration of function 
>> `AdsSetSearchPath'
>> ../../ads1.c:123: error: syntax error before ')' token
>> ../../ads1.c:127: warning: implicit declaration of function 
>> `AdsSetDecimals'
>> ../../ads1.c:127: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:127: error: syntax error before "hb_setGetNI"
>> ../../ads1.c: In function `adsSetSend':
>> ../../ads1.c:151: error: `UNSIGNED8' undeclared (first use in this 
>> function)
>> ../../ads1.c:151: error: syntax error before ')' token
>> ../../ads1.c:152: error: syntax error before ')' token
>> ../../ads1.c:156: error: syntax error before ')' token
>> ../../ads1.c:157: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:157: error: syntax error before "hb_setGetNI"
>> ../../ads1.c: At top level:
>> ../../ads1.c:160: error: syntax error before "pArea"
>> ../../ads1.c: In function `commonError':
>> ../../ads1.c:167: error: `uiGenCode' undeclared (first use in this 
>> function)
>> ../../ads1.c:168: error: `uiSubCode' undeclared (first use in this 
>> function)
>> ../../ads1.c:170: error: `uiOsCode' undeclared (first use in this 
>> function)
>> ../../ads1.c:172: error: `szFileName' undeclared (first use in this 
>> function)
>> ../../ads1.c:174: error: `uiFlags' undeclared (first use in this 
>> function)
>> ../../ads1.c:176: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:237: error: syntax error before "hIndex"
>> ../../ads1.c: In function `adsIndexKeyCmp':
>> ../../ads1.c:239: error: `UNSIGNED32' undeclared (first use in this 
>> function)
>> ../../ads1.c:239: error: syntax error before "u32RetVal"
>> ../../ads1.c:240: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:242: error: `UNSIGNED8' undeclared (first use in this 
>> function)
>> ../../ads1.c:250: error: `u32RetVal' undeclared (first use in this 
>> function)
>> ../../ads1.c:250: warning: implicit declaration of function 
>> `AdsExtractKey'
>> ../../ads1.c:250: error: `hIndex' undeclared (first use in this 
>> function)
>> ../../ads1.c:250: error: `pucCurKey' undeclared (first use in this 
>> function)
>> ../../ads1.c:250: error: `u16CurKeyLen' undeclared (first use in this 
>> function)
>> ../../ads1.c:251: error: `AE_SUCCESS' undeclared (first use in this 
>> function)
>> ../../ads1.c:255: error: `u16KeyLen' undeclared (first use in this 
>> function)
>> ../../ads1.c:256: error: syntax error before ')' token
>> ../../ads1.c: At top level:
>> ../../ads1.c:263: error: syntax error before "return"
>> ../../ads1.c: In function `adsGetFileType':
>> ../../ads1.c:269: error: `ADS_CDX' undeclared (first use in this 
>> function)
>> ../../ads1.c:270: error: `ADS_NTX' undeclared (first use in this 
>> function)
>> ../../ads1.c:271: error: `ADS_ADT' undeclared (first use in this 
>> function)
>> ../../ads1.c: In function `adsTableExt':
>> ../../ads1.c:276: error: `ADS_ADT' undeclared (first use in this 
>> function)
>> ../../ads1.c: In function `adsMemoExt':
>> ../../ads1.c:281: error: `ADS_ADT' undeclared (first use in this 
>> function)
>> ../../ads1.c:282: error: `ADS_CDX' undeclared (first use in this 
>> function)
>> ../../ads1.c: In function `adsIndexExt':
>> ../../ads1.c:287: error: `ADS_ADT' undeclared (first use in this 
>> function)
>> ../../ads1.c:288: error: `ADS_CDX' undeclared (first use in this 
>> function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:291: error: syntax error before "hb_adsFindBag"
>> ../../ads1.c:291: error: syntax error before "pArea"
>> ../../ads1.c:292: warning: return type defaults to `int'
>> ../../ads1.c: In function `hb_adsFindBag':
>> ../../ads1.c:296: error: `ADSHANDLE' undeclared (first use in this 
>> function)
>> ../../ads1.c:296: error: syntax error before "ahIndex"
>> ../../ads1.c:297: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:298: error: `UNSIGNED32' undeclared (first use in this 
>> function)
>> ../../ads1.c:300: error: `u32Result' undeclared (first use in this 
>> function)
>> ../../ads1.c:300: warning: implicit declaration of function 
>> `AdsOpenIndex'
>> ../../ads1.c:300: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:301: error: `UNSIGNED8' undeclared (first use in this 
>> function)
>> ../../ads1.c:301: error: syntax error before ')' token
>> ../../ads1.c:302: error: `AE_INDEX_ALREADY_OPEN' undeclared (first 
>> use in this function)
>> ../../ads1.c:304: error: `ahIndex' undeclared (first use in this 
>> function)
>> ../../ads1.c:306: error: `AE_SUCCESS' undeclared (first use in this 
>> function)
>> ../../ads1.c:308: warning: implicit declaration of function 
>> `AdsCloseIndex'
>> ../../ads1.c: At top level:
>> ../../ads1.c:346: error: syntax error before "pArea"
>> ../../ads1.c: In function `hb_adsUpdateAreaFlags':
>> ../../ads1.c:348: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:348: error: syntax error before "u16Bof"
>> ../../ads1.c:350: warning: implicit declaration of function `AdsAtBOF'
>> ../../ads1.c:350: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:350: error: `u16Bof' undeclared (first use in this 
>> function)
>> ../../ads1.c:351: warning: implicit declaration of function `AdsAtEOF'
>> ../../ads1.c:351: error: `u16Eof' undeclared (first use in this 
>> function)
>> ../../ads1.c:352: warning: implicit declaration of function `AdsIsFound'
>> ../../ads1.c:352: error: `u16Found' undeclared (first use in this 
>> function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:363: error: syntax error before "pArea"
>> ../../ads1.c: In function `hb_adsCheckLock':
>> ../../ads1.c:365: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:367: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:367: error: syntax error before "u16Locked"
>> ../../ads1.c:368: error: `UNSIGNED32' undeclared (first use in this 
>> function)
>> ../../ads1.c:370: error: `u32RetVal' undeclared (first use in this 
>> function)
>> ../../ads1.c:370: warning: implicit declaration of function 
>> `AdsIsRecordLocked'
>> ../../ads1.c:370: error: `u16Locked' undeclared (first use in this 
>> function)
>> ../../ads1.c:371: error: `AE_SUCCESS' undeclared (first use in this 
>> function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:385: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsGetKeyItem':
>> ../../ads1.c:390: error: `iKeyType' undeclared (first use in this 
>> function)
>> ../../ads1.c:396: error: `ADS_RAW' undeclared (first use in this 
>> function)
>> ../../ads1.c:397: error: `ADS_STRING' undeclared (first use in this 
>> function)
>> ../../ads1.c:398: error: `pItem' undeclared (first use in this function)
>> ../../ads1.c:398: error: `pKeyBuf' undeclared (first use in this 
>> function)
>> ../../ads1.c:398: error: `iKeyLen' undeclared (first use in this 
>> function)
>> ../../ads1.c:401: error: `ADS_NUMERIC' undeclared (first use in this 
>> function)
>> ../../ads1.c:402: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:402: error: `ADS_NTX' undeclared (first use in this 
>> function)
>> ../../ads1.c:432: error: `ADS_DATE' undeclared (first use in this 
>> function)
>> ../../ads1.c:444: error: `ADS_LOGICAL' undeclared (first use in this 
>> function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:454: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsScopeGet':
>> ../../ads1.c:456: error: `UNSIGNED8' undeclared (first use in this 
>> function)
>> ../../ads1.c:456: error: syntax error before "pucScope"
>> ../../ads1.c:457: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:458: error: `UNSIGNED32' undeclared (first use in this 
>> function)
>> ../../ads1.c:463: error: `hOrder' undeclared (first use in this 
>> function)
>> ../../ads1.c:466: error: `nScope' undeclared (first use in this 
>> function)
>> ../../ads1.c:466: error: `ADS_TOP' undeclared (first use in this 
>> function)
>> ../../ads1.c:466: error: `ADS_BOTTOM' undeclared (first use in this 
>> function)
>> ../../ads1.c:468: error: `u32RetVal' undeclared (first use in this 
>> function)
>> ../../ads1.c:468: warning: implicit declaration of function 
>> `AdsGetScope'
>> ../../ads1.c:468: error: syntax error before "nScope"
>> ../../ads1.c:470: error: `AE_SUCCESS' undeclared (first use in this 
>> function)
>> ../../ads1.c:472: warning: implicit declaration of function 
>> `AdsGetKeyType'
>> ../../ads1.c:472: error: `u16KeyType' undeclared (first use in this 
>> function)
>> ../../ads1.c:473: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:473: error: `pItem' undeclared (first use in this function)
>> ../../ads1.c:473: error: `pucScope' undeclared (first use in this 
>> function)
>> ../../ads1.c:473: error: `u16Len' undeclared (first use in this 
>> function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:482: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsScopeSet':
>> ../../ads1.c:484: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:484: error: syntax error before "u16DataType"
>> ../../ads1.c:485: error: `UNSIGNED8' undeclared (first use in this 
>> function)
>> ../../ads1.c:485: error: `pucScope' undeclared (first use in this 
>> function)
>> ../../ads1.c:487: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:491: error: `hOrder' undeclared (first use in this 
>> function)
>> ../../ads1.c:493: error: `nScope' undeclared (first use in this 
>> function)
>> ../../ads1.c:493: error: `ADS_TOP' undeclared (first use in this 
>> function)
>> ../../ads1.c:493: error: `ADS_BOTTOM' undeclared (first use in this 
>> function)
>> ../../ads1.c:494: error: `pItem' undeclared (first use in this function)
>> ../../ads1.c:496: error: syntax error before "u16KeyType"
>> ../../ads1.c:497: error: `u16KeyType' undeclared (first use in this 
>> function)
>> ../../ads1.c:502: error: `ADS_RAW' undeclared (first use in this 
>> function)
>> ../../ads1.c:503: error: `ADS_STRING' undeclared (first use in this 
>> function)
>> ../../ads1.c:513: error: syntax error before ')' token
>> ../../ads1.c:514: warning: implicit declaration of function 
>> `AdsSetScope'
>> ../../ads1.c:515: error: syntax error before ')' token
>> ../../ads1.c:520: error: `ADS_NUMERIC' undeclared (first use in this 
>> function)
>> ../../ads1.c:527: error: `u16DataType' undeclared (first use in this 
>> function)
>> ../../ads1.c:527: error: `ADS_DOUBLEKEY' undeclared (first use in 
>> this function)
>> ../../ads1.c:529: error: syntax error before ')' token
>> ../../ads1.c:530: error: syntax error before "sizeof"
>> ../../ads1.c:535: error: `ADS_DATE' undeclared (first use in this 
>> function)
>> ../../ads1.c:543: error: syntax error before ')' token
>> ../../ads1.c:544: error: syntax error before "sizeof"
>> ../../ads1.c:548: error: `ADS_LOGICAL' undeclared (first use in this 
>> function)
>> ../../ads1.c:550: error: syntax error before ')' token
>> ../../ads1.c:551: error: `ADS_STRINGKEY' undeclared (first use in 
>> this function)
>> ../../ads1.c:557: warning: implicit declaration of function 
>> `AdsClearScope'
>> ../../ads1.c: At top level:
>> ../../ads1.c:568: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsGetRelPos':
>> ../../ads1.c:573: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:581: error: `hOrder' undeclared (first use in this 
>> function)
>> ../../ads1.c:583: error: `DOUBLE' undeclared (first use in this 
>> function)
>> ../../ads1.c:583: error: syntax error before "dPos"
>> ../../ads1.c:584: warning: implicit declaration of function 
>> `AdsGetRelKeyPos'
>> ../../ads1.c:584: error: `dPos' undeclared (first use in this function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:603: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsSetRelPos':
>> ../../ads1.c:605: error: `ADSHANDLE' undeclared (first use in this 
>> function)
>> ../../ads1.c:605: error: syntax error before "hCurrOrder"
>> ../../ads1.c:607: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:607: error: `hOrder' undeclared (first use in this 
>> function)
>> ../../ads1.c:608: error: `dPos' undeclared (first use in this function)
>> ../../ads1.c:621: warning: implicit declaration of function 
>> `AdsSetRelKeyPos'
>> ../../ads1.c:645: error: `hCurrOrder' undeclared (first use in this 
>> function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:648: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsCloseCursor':
>> ../../ads1.c:654: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:657: error: `UNSIGNED32' undeclared (first use in this 
>> function)
>> ../../ads1.c:657: error: syntax error before "u32RetVal"
>> ../../ads1.c:659: error: `u32RetVal' undeclared (first use in this 
>> function)
>> ../../ads1.c:659: error: `AE_SUCCESS' undeclared (first use in this 
>> function)
>> ../../ads1.c:667: warning: implicit declaration of function 
>> `AdsCloseSQLStatement'
>> ../../ads1.c: At top level:
>> ../../ads1.c:696: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsBof':
>> ../../ads1.c:701: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:704: error: `pBof' undeclared (first use in this function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:709: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsEof':
>> ../../ads1.c:714: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:717: error: `pEof' undeclared (first use in this function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:722: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsFound':
>> ../../ads1.c:727: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:730: error: `pFound' undeclared (first use in this 
>> function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:735: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsGoBottom':
>> ../../ads1.c:740: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:744: warning: implicit declaration of function 
>> `AdsGotoBottom'
>> ../../ads1.c: At top level:
>> ../../ads1.c:755: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsGoTo':
>> ../../ads1.c:766: error: `UNSIGNED32' undeclared (first use in this 
>> function)
>> ../../ads1.c:766: error: syntax error before "ulRetVal"
>> ../../ads1.c:789: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:792: warning: implicit declaration of function 
>> `AdsGetRecordNum'
>> ../../ads1.c:792: error: `ADS_IGNOREFILTERS' undeclared (first use in 
>> this function)
>> ../../ads1.c:792: error: `u32RecNo' undeclared (first use in this 
>> function)
>> ../../ads1.c:798: error: `ulRetVal' undeclared (first use in this 
>> function)
>> ../../ads1.c:798: warning: implicit declaration of function 
>> `AdsGotoRecord'
>> ../../ads1.c:798: error: syntax error before "ulRecNo"
>> ../../ads1.c:800: error: `AE_INVALID_RECORD_NUMBER' undeclared (first 
>> use in this function)
>> ../../ads1.c:806: error: `ulRecNo' undeclared (first use in this 
>> function)
>> ../../ads1.c:827: warning: implicit declaration of function 
>> `AdsRefreshRecord'
>> ../../ads1.c:834: error: `AE_SUCCESS' undeclared (first use in this 
>> function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:837: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsGoToId':
>> ../../ads1.c:843: error: `pItem' undeclared (first use in this function)
>> ../../ads1.c:846: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c: At top level:
>> ../../ads1.c:855: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsGoTop':
>> ../../ads1.c:860: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:864: warning: implicit declaration of function `AdsGotoTop'
>> ../../ads1.c: At top level:
>> ../../ads1.c:875: error: syntax error before "pArea"
>> ../../ads1.c: In function `adsSeek':
>> ../../ads1.c:877: error: `UNSIGNED32' undeclared (first use in this 
>> function)
>> ../../ads1.c:877: error: syntax error before "u32RecNo"
>> ../../ads1.c:878: error: `UNSIGNED16' undeclared (first use in this 
>> function)
>> ../../ads1.c:880: error: `UNSIGNED8' undeclared (first use in this 
>> function)
>> ../../ads1.c:880: error: `pszKey' undeclared (first use in this 
>> function)
>> ../../ads1.c:882: error: `pucSavedKey' undeclared (first use in this 
>> function)
>> ../../ads1.c:883: error: syntax error before "u16SavedKeyLen"
>> ../../ads1.c:887: error: `pArea' undeclared (first use in this function)
>> ../../ads1.c:894: error: `pKey' undeclared (first use in this function)
>> ../../ads1.c:896: error: syntax error before ')' token
>> ../../ads1.c:897: error: `u16KeyLen' undeclared (first use in this 
>> function)
>> ../../ads1.c:897: error: syntax error before "hb_itemGetCLen"
>> . . .
>>
>> Best Regards.
>> GVS
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> __________ Information from ESET Smart Security, version of virus 
> signature database 2843 (20080201) __________
>
> The message was checked by ESET Smart Security.
>
> http://www.eset.com
>
>
>

From a.jurkiewicz at abix.info.pl  Tue Mar 18 12:17:01 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Tue Mar 18 12:17:07 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <20080318142342.GA9076@localhost.localdomain>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
	<20080318132503.GB6566@localhost.localdomain>
	<20080318142342.GA9076@localhost.localdomain>
Message-ID: <200803181717.02087.a.jurkiewicz@abix.info.pl>

Dnia wtorek, 18 marca 2008, Przemyslaw Czerpak napisa?:
> On Tue, 18 Mar 2008, Przemyslaw Czerpak wrote:
>
> I think that I know the answer.
> You are not using binaries created from current source code but from
> the code after:
>
>    2008-02-08 15:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>      * harbour/source/rdd/dbfntx/dbfntx1.c
>        ! fixed possible memory leak during accessing corrupted NTX files
>        ! fixed possible GPF during accessing corrupted NTX files
>
I'm using SVN: 
SVNURL="https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour"
PROJECT=harbour
* $Id: ChangeLog 8326 2008-03-15 15:58:36Z druzus $

2008-03-15 16:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbzlib/zip.c
    ! fixed to not ignore errors in zipFlushWriteBuffer()

  * harbour/contrib/hbzlib/tests/myzip.prg
  * harbour/contrib/hbzlib/tests/myunzip.prg
    ! removed procedure return values

And still have a problem. Maybe SVN URL is not good ?

Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu | http://www.abix.info.pl
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From druzus at acn.waw.pl  Tue Mar 18 12:36:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 18 12:36:51 2008
Subject: [Harbour] What about the release?
In-Reply-To: <47DFCEFA.2020101@interia.pl>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<47DFCEFA.2020101@interia.pl>
Message-ID: <20080318163636.GA10513@localhost.localdomain>

On Tue, 18 Mar 2008, Marek Paliwoda wrote:
> Although I declared that I could prepare binary builds for MSVC
> not so long ago, things have changed significanly lately. Due to
> serious healthy problems I've had recently, I won't be able to
> participate in Harbour project for the next few weeks (at least).
> I am really sorry I cannot fullfill my promises. Please accept
> my appologies.

Marek nie przejmuj si? - to naprawd? nie jest istotne.
Mam nadziej?, ?e szybko wr?cisz do zdrowia i zar?wno ty
jak i twoi najbli?si b?dzie mieli si? ?wietnie.
I to tak naprawd? si? liczy :-)

Pozdrowienia dla Ciebie, ?ony i dzieci.
Przemek
From a.jurkiewicz at abix.info.pl  Tue Mar 18 12:43:01 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Tue Mar 18 12:43:19 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <20080318142342.GA9076@localhost.localdomain>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
	<20080318132503.GB6566@localhost.localdomain>
	<20080318142342.GA9076@localhost.localdomain>
Message-ID: <200803181743.01265.a.jurkiewicz@abix.info.pl>

Dnia wtorek, 18 marca 2008, Przemyslaw Czerpak napisa?:
> Rebuild Harbour from current SVN code and problem will disappear.

Problem disapper, when I use CDX ..
	REQUEST DBFCDX, DBFFPT
	rddsetdefault( "DBFCDX" )

but with NTX still exist.
SVN from last night.

I think we can put away for a while this subject.

Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu | http://www.abix.info.pl
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From druzus at acn.waw.pl  Tue Mar 18 13:50:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 18 13:50:50 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <200803181717.02087.a.jurkiewicz@abix.info.pl>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
	<20080318132503.GB6566@localhost.localdomain>
	<20080318142342.GA9076@localhost.localdomain>
	<200803181717.02087.a.jurkiewicz@abix.info.pl>
Message-ID: <20080318175044.GA11732@localhost.localdomain>

On Tue, 18 Mar 2008, ABIX - Adam Jurkiewicz wrote:
> I'm using SVN: 
> SVNURL="https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour"
> PROJECT=harbour
> * $Id: ChangeLog 8326 2008-03-15 15:58:36Z druzus $
> 2008-03-15 16:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/contrib/hbzlib/zip.c
>     ! fixed to not ignore errors in zipFlushWriteBuffer()
> 
>   * harbour/contrib/hbzlib/tests/myzip.prg
>   * harbour/contrib/hbzlib/tests/myunzip.prg
>     ! removed procedure return values
> And still have a problem. Maybe SVN URL is not good ?

For sure it's correct.
Ten against one that you are still using the version I said.
I do not know where you make a mistake but if you create
new binaries from current code and install it in your system
then the problem will disappear.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Mar 18 13:52:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 18 13:52:23 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <200803181743.01265.a.jurkiewicz@abix.info.pl>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
	<20080318132503.GB6566@localhost.localdomain>
	<20080318142342.GA9076@localhost.localdomain>
	<200803181743.01265.a.jurkiewicz@abix.info.pl>
Message-ID: <20080318175215.GB11732@localhost.localdomain>

On Tue, 18 Mar 2008, ABIX - Adam Jurkiewicz wrote:
> Problem disapper, when I use CDX ..
> 	REQUEST DBFCDX, DBFFPT
> 	rddsetdefault( "DBFCDX" )
> but with NTX still exist.
> SVN from last night.

Exactly. This problem was only in DBFNTX. As I said you are using
the broken version. Please recompile Harbour from current SVN code.

best regards,
Przemek
From a.jurkiewicz at abix.info.pl  Tue Mar 18 15:19:27 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Tue Mar 18 15:19:32 2008
Subject: [Harbour] Why dbgotop() differs from dbgoto(1) ?
In-Reply-To: <20080318175044.GA11732@localhost.localdomain>
References: <200803180001.16101.a.jurkiewicz@abix.info.pl>
	<200803181717.02087.a.jurkiewicz@abix.info.pl>
	<20080318175044.GA11732@localhost.localdomain>
Message-ID: <200803182019.28017.a.jurkiewicz@abix.info.pl>

Dnia wtorek, 18 marca 2008, Przemyslaw Czerpak napisa?:

> new binaries from current code and install it in your system
YEs, yes,yes ! Install it !!! Oh, I'm little tired ...
rpm should be my friend, not enemy.
Now it works, for later use, I suggest change output of hb*, f.e.

adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> hbmk test
Harbour devel build 1.1-1 Intl.

change to:
adasiek@abix-acer:~/ABIX/Serwis.Klienci/Serek/uni> hbmk test
Harbour devel build 1.1-1 svn id:8326 Intl.

Then everytime you compile, you can see exactly what build of SVN you use.
In case someone (like me) get the newest svsn and forget to rpm -Uvh ...

Thanks, Przemek.

Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu | http://www.abix.info.pl
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From mpaliwoda at interia.pl  Tue Mar 18 15:29:40 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Tue Mar 18 15:29:47 2008
Subject: [Harbour] What about the release?
In-Reply-To: <20080318163636.GA10513@localhost.localdomain>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>	<47DFCEFA.2020101@interia.pl>
	<20080318163636.GA10513@localhost.localdomain>
Message-ID: <47E01824.3040506@interia.pl>

Cze?? Przemek,

>> Although I declared that I could prepare binary builds for MSVC
>> not so long ago, things have changed significanly lately. Due to
>> serious healthy problems I've had recently, I won't be able to
>> participate in Harbour project for the next few weeks (at least).
>> I am really sorry I cannot fullfill my promises. Please accept
>> my appologies.
> 
> Marek nie przejmuj si? - to naprawd? nie jest istotne.
> Mam nadziej?, ?e szybko wr?cisz do zdrowia i zar?wno ty
> jak i twoi najbli?si b?dzie mieli si? ?wietnie.
> I to tak naprawd? si? liczy :-)

Mam tak? szczer? nadziej?. Ale r??nie mo?e by? ...
Nie tracimy jednak ducha :).

> Pozdrowienia dla Ciebie, ?ony i dzieci.

Wielkie dzi?ki. I wzajemnie - najlepsze ?yczenia
dla Ciebie i Rodziny :).

-- 

Marek

----------------------------------------------------------------------
Wojna wampirow trwa - po ktorej jestes stronie?
Zagraj >>> http://link.interia.pl/f1cf4

From lorenzo.fiorini at gmail.com  Tue Mar 18 17:01:19 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Mar 18 17:01:25 2008
Subject: [Harbour] What about the release?
In-Reply-To: <47DFCEFA.2020101@interia.pl>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<47DFCEFA.2020101@interia.pl>
Message-ID: <9257026e0803181401y1b694de1ie60d558bf56da75d@mail.gmail.com>

On Tue, Mar 18, 2008 at 3:17 PM, Marek Paliwoda <mpaliwoda@interia.pl> wrote:

>  Although I declared that I could prepare binary builds for MSVC
>  not so long ago, things have changed significanly lately. Due to
>  serious healthy problems I've had recently, I won't be able to
>  participate in Harbour project for the next few weeks (at least).
>  I am really sorry I cannot fullfill my promises. Please accept
>  my appologies.

Good luck Marek, I'm sure you'll be back soon.

best regards,
Lorenzo
From miguelangel at marchuet.net  Tue Mar 18 17:43:32 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Mar 18 17:43:30 2008
Subject: [Harbour] ourXdbu List and Track
Message-ID: <47E03784.6010706@marchuet.net>

If any body want request a new feature about ourxdbu

please write it at:

http://sourceforge.net/tracker/?group_id=219849

Download last versions at:

http://sourceforge.net/project/showfiles.php?group_id=219849

Actual CVS support full ADSADT,ADSCDX and ADSNTX.
Added DELETE dialog.


Best regards,
Miguel Angel marchuet
From philb at philb.us  Tue Mar 18 22:29:44 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Mar 18 22:29:47 2008
Subject: [Harbour] What about the release?
In-Reply-To: <20080318130518.GA6566@localhost.localdomain>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<200803172344.53434.philb@philb.us>
	<20080318130518.GA6566@localhost.localdomain>
Message-ID: <200803182229.44413.philb@philb.us>

On Tuesday 18 March 2008 09:05:18 am Przemyslaw Czerpak wrote:
> On Mon, 17 Mar 2008, Phil Barnett wrote:
> > I was waiting for your go ahead. I can do it at any time.
>
> I'm really sorry, I have to missed it.
> Please do it.

Ok, I think I'll have time tomorrow night. Thursday night is my Linux user 
group meeting and I can't miss it because I'm presenting. Friday night is 
Wife night. Saturday, I'm on call at work.

I'll make every effort to have it done tomorrow night, but if not, Sunday at 
the latest.

-- 
In order to ensure a safe police state; the right of the people to keep and 
bear arms must be infringed.
From sscc at mweb.co.za  Wed Mar 19 02:48:11 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Mar 19 02:48:42 2008
Subject: [Harbour] What about the release?
In-Reply-To: <47DFCEFA.2020101@interia.pl>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<47DFCEFA.2020101@interia.pl>
Message-ID: <47E0B72B.5080402@mweb.co.za>

Marek Paliwoda wrote:
> 
> Although I declared that I could prepare binary builds for MSVC
> not so long ago, things have changed significanly lately. Due to
> serious healthy problems I've had recently, I won't be able to
> participate in Harbour project for the next few weeks (at least).
> I am really sorry I cannot fullfill my promises. Please accept
> my appologies.

Please do not apologise, I will try and supply MSVC 6 and MSVC 8.

I hope you are well soon.

Regards
Alex

From peter.sulyok at creditexpress.hu  Thu Mar 20 04:30:14 2008
From: peter.sulyok at creditexpress.hu (=?iso-8859-2?Q?Sulyok_P=E9ter?=)
Date: Thu Mar 20 04:30:20 2008
Subject: [Harbour] problem width dbsetfilter
Message-ID: <004901c88a64$9f1bc8a0$eb01000a@pc16>

Dear Developers!

I had got a problem width the dbsetfilter function when i used an mdb file.
When i gave an explicit filtercond then haven't any problem, but when i give an variable in a filtercond, then the program generate runtime error message.
Two example (sorry, my englis isn't correct).

Example1:
#include "adordd.ch"
function mdbtest()
   DbCreate( "test2.mdb;table2", { { "_FIRST",   "C", 10, 0 }, { "_LAST",    "C", 10, 0 }, { "_Age",     "N",  8, 0 } }, "ADORDD" )
   HB_AdoSetTable( "table2" )
dbUseArea( .F., "ADORDD", "test2.mdb",, if(.F. .OR. .F., !.F., NIL), .F. ) 
   dbAppend()
   test2->_First   = "Peter"
   test2->_Last    = "Sulyok"
   test2->_Age     = 21
   dbAppend()
   test2->_First   = "Monika"
   test2->_Last    = "Matis"
   test2->_Age     = 35
dbsetfilter({||_FIRST=='Monika'},"_FIRST=='Monika'")
msginfo(str(reccount()))
dbclosearea()
return nil

The result of msginfo is 1.
The program can run.

Example 2:
#include "adordd.ch"
Function mdbtest()
local cnev:="Monika"
   DbCreate( "test2.mdb;table2", { { "_FIRST",   "C", 10, 0 }, { "_LAST",    "C", 10, 0 }, { "_Age",     "N",  8, 0 } }, "ADORDD" )
   HB_AdoSetTable( "table2" )
dbUseArea( .F., "ADORDD", "test2.mdb",, if(.F. .OR. .F., !.F., NIL), .F. )
   dbAppend()
   test2->_First   = "Peter"
   test2->_Last    = "Sulyok"
   test2->_Age     = 21
   dbAppend()
   test2->_First   = "Monika"
   test2->_Last    = "Matis"
   test2->_Age     = 35
dbsetfilter({||_FIRST==cnev},"_FIRST==cnev")
msginfo(str(reccount()))
dbclosearea()
return nil

This function generates an error message.
Any comments or ideas?
How can i correcting the second example to do running?

Best regards:

            Peti
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080320/9b6b6bb2/attachment.html
From gybartal at gmail.com  Thu Mar 20 05:16:32 2008
From: gybartal at gmail.com (Gyula Bartal)
Date: Thu Mar 20 05:16:36 2008
Subject: [Harbour] problem width dbsetfilter
In-Reply-To: <004901c88a64$9f1bc8a0$eb01000a@pc16>
References: <004901c88a64$9f1bc8a0$eb01000a@pc16>
Message-ID: <16174587.post@talk.nabble.com>


Hi Peti

Try


Function mdbtest()
local cnev:="Monika"
Local cFilter := "_FIRST=='"+AllTrim(cnev)+"'"    // string is
"_FIRST=='Monika'"

..........

DbSetFilter( &("{|| "+ cFilter + " }") , cFilter )        //
DbSetFilter(bFilter,cFilter)  , bFilter := COMPILE(cFilter)
....


Best regards

    Gyula Bartal



Sulyok P?ter-2 wrote:
> 
> Dear Developers!
> 
> I had got a problem width the dbsetfilter function when i used an mdb
> file.
> When i gave an explicit filtercond then haven't any problem, but when i
> give an variable in a filtercond, then the program generate runtime error
> message.
> Two example (sorry, my englis isn't correct).
> 
> 
> Example 2:
> #include "adordd.ch"
> Function mdbtest()
> local cnev:="Monika"
> ....
> dbsetfilter({||_FIRST==cnev},"_FIRST==cnev")
> ...
> return nil
> Best regards:
> 
>             Peti
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/problem-width-dbsetfilter-tp16174232p16174587.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dmacias at mail.udg.mx  Fri Mar 21 06:31:50 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Mar 21 06:34:29 2008
Subject: [Harbour] Harbour under Mandriva 2008
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47E38E96.4020903@mail.udg.mx>

I am testing current Harbour under Mandriva 2008
gcc (GCC) 4.2.2 20071128 (prerelease) (4.2.2-3.1mdv2008.0)

Building a system result in errors included below

Something is missing, but what ?

Link:

export HB_GT_LIB=gttrm
export HB_SCREEN_LIB=

gcc -o thsuphost.exe sgggen0.o ctprgext.o \
  sgg00.o sggnet.o ctsistem.o ctclpnet.o cntlib.o david0.o cntads.o 
hsamples.o hbfalta.o  \
  suphost.o libhost.o conm1.o libreria.o hbfsuphost.o  \
  -I${HB_INC} -L${HB_LIB} \
  -l${HB_GT_LIB} ${HB_SCREEN_LIB} \
  -lhbvm -lhbpp -lhbrtl -lhbrdd -lrddfpt -lrddcdx -lrddntx -lhbhsx 
-lhbsix -lhbusrrdd \
  -lhbmacro -lhbcommon -lhblang -lhbcpage    \
  -lhbdebug -lhbcplr -lhbpcre -lhbct -lhbnf \
  -lhbtip -lxhb -lhbclipsm


David Macias



/harbour803/harbour/lib//libhbvm.a(hvm.o): In function `hb_vmModulus':
hvm.c:(.text+0x58c8): undefined reference to `fmod'
/harbour803/harbour/lib//libhbvm.a(hvm.o): In function `hb_vmPower':
hvm.c:(.text+0x59b1): undefined reference to `pow'
/harbour803/harbour/lib//libhbrtl.a(errorapi.o): In function `hb_errLaunch':
errorapi.c:(.text+0xdf4): undefined reference to `hb_itemDo'
/harbour803/harbour/lib//libhbrtl.a(errorapi.o): In function 
`hb_errLaunchSubst':
errorapi.c:(.text+0x1037): undefined reference to `hb_itemDo'
/harbour803/harbour/lib//libhbrtl.a(idle.o): In function `hb_idleState':
idle.c:(.text+0x9b): undefined reference to `hb_itemDo'
/harbour803/harbour/lib//libhbrtl.a(math.o): In function `hb_matherrblock':
math.c:(.text+0x54c): undefined reference to `hb_itemDo'
/harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_EXP':
math.c:(.text+0x7d7): undefined reference to `exp'
/harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_LOG':
math.c:(.text+0x90e): undefined reference to `log'
/harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_SQRT':
math.c:(.text+0xa48): undefined reference to `sqrt'
/harbour803/harbour/lib//libhbrtl.a(tgetint.o):(.data+0xc8): undefined 
reference to `HB_FUN_HB_PVALUE'
/harbour803/harbour/lib//libhbrdd.a(dbstrux.o):(.data+0x128): undefined 
reference to `HB_FUN_HB_FNAMESPLIT'
/harbour803/harbour/lib//libhbrdd.a(dbf1.o): In function 
`hb_dbfLockIdxFile':
dbf1.c:(.text+0x200e): undefined reference to `hb_random_num'
/harbour803/harbour/lib//libhbrdd.a(hbdbsort.o): In function 
`hb_dbQSortInit':
hbdbsort.c:(.text+0x2f): undefined reference to `hb_fsCreateTemp'
/harbour803/harbour/lib//librddfpt.a(dbffpt1.o): In function `hb_fptDoPack':
dbffpt1.c:(.text+0x9a0d): undefined reference to `hb_fsCreateTemp'
/harbour803/harbour/lib//librddfpt.a(dbffpt1.o): In function `hb_fptPack':
dbffpt1.c:(.text+0xa00b): undefined reference to `hb_fsCreateTemp'
/harbour803/harbour/lib//librddcdx.a(dbfcdx1.o): In function 
`hb_cdxOrderCreate':
dbfcdx1.c:(.text+0xfc81): undefined reference to `hb_fsCreateTemp'
/harbour803/harbour/lib//librddcdx.a(dbfcdx1.o): In function 
`hb_cdxSortWritePage':
dbfcdx1.c:(.text+0x12f56): undefined reference to `hb_fsCreateTemp'
/harbour803/harbour/lib//librddcdx.a(dbfcdx1.o): In function 
`hb_cdxSortNew':
dbfcdx1.c:(.text+0x138af): undefined reference to `sqrt'
dbfcdx1.c:(.text+0x138bd): undefined reference to `ceil'
/harbour803/harbour/lib//librddntx.a(dbfntx1.o): In function 
`hb_ntxSortWritePage':
dbfntx1.c:(.text+0xa5a4): undefined reference to `hb_fsCreateTemp'
/harbour803/harbour/lib//librddntx.a(dbfntx1.o): In function 
`hb_ntxSortNew':
dbfntx1.c:(.text+0xaff2): undefined reference to `sqrt'
dbfntx1.c:(.text+0xb000): undefined reference to `ceil'
dbfntx1.c:(.text+0xb048): undefined reference to `sqrt'
dbfntx1.c:(.text+0xb050): undefined reference to `ceil'
/harbour803/harbour/lib//librddntx.a(dbfntx1.o): In function 
`ntxOrderCreate':
dbfntx1.c:(.text+0xdeb1): undefined reference to `hb_fsCreateTemp'
/harbour803/harbour/lib//libhbcommon.a(hbstr.o): In function `hb_numPow10':
hbstr.c:(.text+0x44f): undefined reference to `pow'
collect2: ld devolvi? el estado de salida 1
.

From teo at windtelsoft.com  Fri Mar 21 11:47:06 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Fri Mar 21 11:47:22 2008
Subject: [Harbour] Harbour under Mandriva 2008
In-Reply-To: <47E38E96.4020903@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47E38E96.4020903@mail.udg.mx>
Message-ID: <200803210947.06939.teo@windtelsoft.com>

On Friday 21 March 2008 04:31:50 am David Arturo Macias Corona wrote:
> I am testing current Harbour under Mandriva 2008
> gcc (GCC) 4.2.2 20071128 (prerelease) (4.2.2-3.1mdv2008.0)
>
> Building a system result in errors included below
>
> Something is missing, but what ?
>
> Link:
>
> export HB_GT_LIB=gttrm
> export HB_SCREEN_LIB=
>
> gcc -o thsuphost.exe sgggen0.o ctprgext.o \
>   sgg00.o sggnet.o ctsistem.o ctclpnet.o cntlib.o david0.o cntads.o
> hsamples.o hbfalta.o  \
>   suphost.o libhost.o conm1.o libreria.o hbfsuphost.o  \
>   -I${HB_INC} -L${HB_LIB} \
>   -l${HB_GT_LIB} ${HB_SCREEN_LIB} \
>   -lhbvm -lhbpp -lhbrtl -lhbrdd -lrddfpt -lrddcdx -lrddntx -lhbhsx
> -lhbsix -lhbusrrdd \
>   -lhbmacro -lhbcommon -lhblang -lhbcpage    \
>   -lhbdebug -lhbcplr -lhbpcre -lhbct -lhbnf \
>   -lhbtip -lxhb -lhbclipsm

Hello David,

You need to give link-time info to solve cross references by 'grouping' the 
harbour libs, this is done by simply adding the "-Wl,--start-group 
<hblibs,...> -Wl,--end-group" options, eg:

   -Wl,--start-group -lhbvm -lhbpp -lhbrtl -lhbrdd -lrddfpt -lrddcdx -lrddntx -lhbhsx
   -lhbsix -lhbusrrdd \
   -lhbmacro -lhbcommon -lhblang -lhbcpage    \
   -lhbdebug -lhbcplr -lhbpcre -lhbct -lhbnf \
   -lhbtip -lxhb -Wl,--end-group -lhbclipsm

[snip]


best regards

Teo Fonrouge
From cascoharb at gmail.com  Fri Mar 21 12:57:07 2008
From: cascoharb at gmail.com (Irv Paton)
Date: Fri Mar 21 12:57:15 2008
Subject: [Harbour] Doc issues.
Message-ID: <b9a334db0803210957y14bea226v4d096550c8b6d1de@mail.gmail.com>

I'm working on learning Harbour to convert some old clipper apps to Harbour
w/WinAPI. Digging through docs on Beta 3 distribution, I have a couple
simple questions:

1. Are "harbour portable objects" still a part of the Harbour project? The
file: ..\harbour\doc\hrb_faq.txt  talks only about this feature. If it's not
used, then I suggest that file be deleted from distro. With a name like
hrb_faq.txt, it is misleading too.

2. I worked with gendoc feature a little. Was able to run genhtm.bat on
..\harbour\doc and get a good htm collection. Tried it on
..\harbour\contrib\libgt\doc and only got partial htm. I can see from forum
that this tool may be in limbo. Should this tool work? I don't know the
history of this tool, but can see the simple structure of the doc txt files
that it reads. Can someone give status on this tool and should I spend any
more time trying to make it work on libgt?

Thank you,
Irv Paton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080321/fcae59e5/attachment.html
From druzus at acn.waw.pl  Fri Mar 21 13:28:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Mar 21 13:28:28 2008
Subject: [Harbour] Harbour under Mandriva 2008
In-Reply-To: <47E38E96.4020903@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47E38E96.4020903@mail.udg.mx>
Message-ID: <20080321172820.GA7560@localhost.localdomain>

On Fri, 21 Mar 2008, David Arturo Macias Corona wrote:
> I am testing current Harbour under Mandriva 2008
> gcc (GCC) 4.2.2 20071128 (prerelease) (4.2.2-3.1mdv2008.0)
> Building a system result in errors included below
> Something is missing, but what ?

You haven't set HB_COMPILER and HB_ARCHITECTURE envvars.
Instead of setting them manually please simply
run:
   ./make_gnu.sh
or
   ./make_gcc.sh.
Mandriva is RPM based distribution then I suggest to run
   ./make_rpm.sh
from non root account (in general I suggest to not use root
account from normal work) and then install binary RPMs generated
from root account. The RPMs will be create in ${HOME}/RPM/RPMS/<arch>
directory.
All above scripts automatically detects used environment and set
all necessary variables automatically.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Mar 21 20:43:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Mar 21 20:43:29 2008
Subject: [Harbour] Harbour under OS/2 - eCS
In-Reply-To: <47DC38BF.5010906@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47DC38BF.5010906@mail.udg.mx>
Message-ID: <20080322004321.GA15304@localhost.localdomain>

On Sat, 15 Mar 2008, David Arturo Macias Corona wrote:
> Current Harbour under OS/2 build OK ( with my own global.cf )

Can you send your global.cf here?
And if possible please also create small make_os2_gcc.cmd with
all necessary settings. I'll add it to SVN.

best regards,
Przemek
From dmacias at mail.udg.mx  Sat Mar 22 05:35:05 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Mar 22 05:34:57 2008
Subject: [Harbour] Re: Harbour under Mandriva 2008
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47E4D2C9.3030203@mail.udg.mx>

 >You need to give link-time info to solve cross references by 
'grouping' >the
 >harbour libs, this is done by simply adding the "-Wl,--start-group
 ><hblibs,...> -Wl,--end-group" options, eg:
 >
 >   -Wl,--start-group -lhbvm -lhbpp -lhbrtl -lhbrdd -lrddfpt -lrddcdx 
     >-lrddntx -lhbhsx
 >   -lhbsix -lhbusrrdd \
 >   -lhbmacro -lhbcommon -lhblang -lhbcpage    \
 >   -lhbdebug -lhbcplr -lhbpcre -lhbct -lhbnf \
 >   -lhbtip -lxhb -Wl,--end-group -lhbclipsm

Teo:

Using your suggested form for link more than half of errors disappear, 
but other remain ( fmod, pow, exp, log, sqrt, ceil )

Errors included below

What more must I change ?

David Macias


/harbour803/harbour/lib//libhbvm.a(hvm.o): In function `hb_vmModulus':
hvm.c:(.text+0x58c8): undefined reference to `fmod'
/harbour803/harbour/lib//libhbvm.a(hvm.o): In function `hb_vmPower':
hvm.c:(.text+0x59b1): undefined reference to `pow'
/harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_EXP':
math.c:(.text+0x7d7): undefined reference to `exp'
/harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_LOG':
math.c:(.text+0x90e): undefined reference to `log'
/harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_SQRT':
math.c:(.text+0xa48): undefined reference to `sqrt'
/harbour803/harbour/lib//librddcdx.a(dbfcdx1.o): In function 
`hb_cdxSortNew':
dbfcdx1.c:(.text+0x138af): undefined reference to `sqrt'
dbfcdx1.c:(.text+0x138bd): undefined reference to `ceil'
/harbour803/harbour/lib//librddntx.a(dbfntx1.o): In function 
`hb_ntxSortNew':
dbfntx1.c:(.text+0xaff2): undefined reference to `sqrt'
dbfntx1.c:(.text+0xb000): undefined reference to `ceil'
dbfntx1.c:(.text+0xb048): undefined reference to `sqrt'
dbfntx1.c:(.text+0xb050): undefined reference to `ceil'
/harbour803/harbour/lib//libhbcommon.a(hbstr.o): In function `hb_numPow10':
hbstr.c:(.text+0x44f): undefined reference to `pow'
collect2: ld devolvi? el estado de salida 1

From dmacias at mail.udg.mx  Sat Mar 22 05:51:34 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Mar 22 05:51:27 2008
Subject: [Harbour] Re: Harbour under Mandriva 2008
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47E4D6A6.8080302@mail.udg.mx>

 >You haven't set HB_COMPILER and HB_ARCHITECTURE envvars.
 >Instead of setting them manually please simply
 >run:
 >   ./make_gnu.sh
 >or
 >   ./make_gcc.sh.
 >Mandriva is RPM based distribution then I suggest to run
 >   ./make_rpm.sh
 >from non root account (in general I suggest to not use root
 >account from normal work) and then install binary RPMs generated
 >from root account. The RPMs will be create in ${HOME}/RPM/RPMS/<arch>
 >directory.
 >All above scripts automatically detects used environment and set
 >all necessary variables automatically.

Przemek:

I created Harbour using ./make_gnu.sh and all seem to be created fine

As Teo suggested, this problem seem related only to "link-time info to 
solve cross references"

His example solve many errors but other remain (see other message)

David Macias

From dmacias at mail.udg.mx  Sat Mar 22 06:18:57 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Mar 22 06:18:50 2008
Subject: [Harbour] Re: Harbour under OS/2 - eCS
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47E4DD11.9020003@mail.udg.mx>

Przemek:

 >Can you send your global.cf here?

You will find it in my message (it include explanations):
--------------------------------------------
Re: 2008-02-08 15:58 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
9/02/08 03:59 AM
--------------------------------------------

 >And if possible please also create small make_os2_gcc.cmd with
 >all necessary settings. I'll add it to SVN.

Suggested name is make_gnu_os2.cmd
I made one but changes results minimal

Make a copy of make_gnu.bat and change:

rem $Id: make_gnu_os2.cmd 7860 2007-10-24 01:16:44Z vszakats $
    and
if "%HB_ARCHITECTURE%" == "" set HB_ARCHITECTURE=os2
if "%HB_COMPILER%" == "" set HB_COMPILER=gcc
if "%HB_GT_LIB%" == "" set HB_GT_LIB=

David Macias
From mbelgrano at deltain.it  Sat Mar 22 07:22:38 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Mar 22 07:23:30 2008
Subject: [Harbour] Happy easter
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA7E@SRV02.deltain.net>

         H    H      A      PPPPPP  PPPPPP  Y   Y

         H    H     A A     P    P  P    P   Y Y

         HHHHHH    A   A    PPPPPP  PPPPPP    Y

         H    H   AAAAAAA   P       P         Y

         H    H  A       A  P       P         Y

 

                             , 

                            /|      __  

                           / |   ,-~ /  

                          Y :|  //  /    

                          | jj /( .^  

                          >-"~"-v"  

                         /       Y    

                        jo  o    |  

                       ( ~T~     j   

                        >._-' _./   

                       /   "~"  |   

                      Y     _,  | 

                     /| ;-"~ _  l 

                    / l/ ,-"~    \  

                    \//\/      .- \  

                     R        /    Y     

                     O       I     ! 

                      W      _\    /"\ 

                    (" ~----( ~   Y.  )   

                   ,aaadddd8888888bbbbaaa,_

               ,adP"::' 888  "Y8ba,  ```::Y8aa,_

             ,dP"  ::' ,88P    ,88P'   ,::: ``8"Yba,

            ,88'  ,::  d88'   d8P'     :::'  ,P  `)88a,

           ,888   ::'  888   "Y8ba,    :::   d'   d8P`Ya,

          ,888P  ,::  ,88P     ,88P'  ,:::  ,P   ,88'  `Ya,

          8888'  ::'  d88'    d8P'    :::'  d'   d8P   ,::b,

          8888   ::   888    "Y8ba,   :::   8    88'   ::::b

          8888   ::   888      ,88P'  :::   8    88,   ::::P

          8888,  ::,  Y88,    d8P'    :::,  Y,   Y8b   `::P'

          `888b  `::  `88b   "Y8ba,   `:::  `b   `88,  ,d"

           `888   ::,  888     ,88P'   :::   Y,   Y8b,d"

            `88,  `::  Y88,   d8P'     :::,  `b  _)8P"

             `Yb,  ::, `88b  "Y8ba,    `::: _,8adP"  

               `"Yb,::, 888    ,88P'  __::adP""'   

                   `"""norMANDVEILLeux"""'

 

 

         EEEEEE      A      SSSSSS  TTTTT  EEEEEE  RRRRRR

         E          A A     S         T    E       R    R

         EEE       A   A    SSSSSS    T    EEE     RRRRR

         E        AAAAAAA        S    T    E       R  R

         EEEEEE  A       A  SSSSSS    T    EEEEEE  R   R

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080322/4508c76b/attachment-0001.html
From teo at windtelsoft.com  Sat Mar 22 10:02:52 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sat Mar 22 10:03:13 2008
Subject: [Harbour] Re: Harbour under Mandriva 2008
In-Reply-To: <47E4D2C9.3030203@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47E4D2C9.3030203@mail.udg.mx>
Message-ID: <200803220802.52703.teo@windtelsoft.com>

On Saturday 22 March 2008 03:35:05 am David Arturo Macias Corona wrote:
>  >You need to give link-time info to solve cross references by
>
> 'grouping' >the
>
>  >harbour libs, this is done by simply adding the "-Wl,--start-group
>  ><hblibs,...> -Wl,--end-group" options, eg:
>  >
>  >   -Wl,--start-group -lhbvm -lhbpp -lhbrtl -lhbrdd -lrddfpt -lrddcdx
>  >
>      >-lrddntx -lhbhsx
>  >
>  >   -lhbsix -lhbusrrdd \
>  >   -lhbmacro -lhbcommon -lhblang -lhbcpage    \
>  >   -lhbdebug -lhbcplr -lhbpcre -lhbct -lhbnf \
>  >   -lhbtip -lxhb -Wl,--end-group -lhbclipsm
>
> Teo:
>
> Using your suggested form for link more than half of errors disappear,
> but other remain ( fmod, pow, exp, log, sqrt, ceil )
>
> Errors included below
>
> What more must I change ?
>
> David Macias
>
>
> /harbour803/harbour/lib//libhbvm.a(hvm.o): In function `hb_vmModulus':
> hvm.c:(.text+0x58c8): undefined reference to `fmod'
> /harbour803/harbour/lib//libhbvm.a(hvm.o): In function `hb_vmPower':
> hvm.c:(.text+0x59b1): undefined reference to `pow'
> /harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_EXP':
> math.c:(.text+0x7d7): undefined reference to `exp'
> /harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_LOG':
> math.c:(.text+0x90e): undefined reference to `log'
> /harbour803/harbour/lib//libhbrtl.a(math.o): In function `HB_FUN_SQRT':
> math.c:(.text+0xa48): undefined reference to `sqrt'
> /harbour803/harbour/lib//librddcdx.a(dbfcdx1.o): In function
> `hb_cdxSortNew':
> dbfcdx1.c:(.text+0x138af): undefined reference to `sqrt'
> dbfcdx1.c:(.text+0x138bd): undefined reference to `ceil'
> /harbour803/harbour/lib//librddntx.a(dbfntx1.o): In function
> `hb_ntxSortNew':
> dbfntx1.c:(.text+0xaff2): undefined reference to `sqrt'
> dbfntx1.c:(.text+0xb000): undefined reference to `ceil'
> dbfntx1.c:(.text+0xb048): undefined reference to `sqrt'
> dbfntx1.c:(.text+0xb050): undefined reference to `ceil'
> /harbour803/harbour/lib//libhbcommon.a(hbstr.o): In function `hb_numPow10':
> hbstr.c:(.text+0x44f): undefined reference to `pow'
> collect2: ld devolvi? el estado de salida 1

David,

You need to link in the math lib, just add at the end of your link 
sequence:  -lm

BTW, for environments that use bash shells (like linux), harbour provides the 
scripts:

hbcmp, hblnk, hbrun

those scripts allows you to easily compile, link and run respectively. e.g.:

hbcmp hello.prg  // produces hello.o
hblnk hello.o    // produces hello executable binary file, 
                 // automatically includes all the needed libs.
hbrun hello.prg  // executes the hello.prg

check the help (just call any of those scripts without arguments) for details.


best regards

Teo Fonrouge


From dmacias at mail.udg.mx  Sun Mar 23 03:29:09 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Mar 23 03:29:03 2008
Subject: [Harbour] Re: Harbour under Mandriva 2008
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47E606C5.8020203@mail.udg.mx>

 > David,

 > You need to link in the math lib, just add at the end of your link
 > sequence:  -lm

 > BTW, for environments that use bash shells (like linux), harbour 
 >provides the
 > scripts:

 > hbcmp, hblnk, hbrun

 > those scripts allows you to easily compile, link and run 
respectively. > e.g.:

 > hbcmp hello.prg  // produces hello.o
 > hblnk hello.o    // produces hello executable binary file,
 >                  // automatically includes all the needed libs.
 > hbrun hello.prg  // executes the hello.prg

 > check the help (just call any of those scripts without arguments) for 
 > > details.

Thanks Teo
-lm was missing and now everything link/work fine

I use hbcmp, hblnk, hbrun sometimes, but I use my own scripts for some 
specific needs

Final link sequence was based in hb-build (static), bld.bat ( bcc32, 
gcc, mingw32 ), your suggestions, hbdot Makefile, harbour\lib dir list 
and trial and error

Keys are hbvm, hbrtl repeated and -lm
In hb-build exist as:
   SYSTEM_LIBS="-lm -ldl"

This is my working sequence (not all are used):
  -I${HB_INC} -L${HB_LIB} \
  -lhbcpage -lhbdebug -lhbvm -lhbrtl \
  -l${HB_GT_LIB} ${HB_SCREEN_LIB} \
  -lhblang -lhbrdd -lhbrtl -lhbvm -lhbmacro -lhbpp \
  -lrddfpt -lrddntx -lrddcdx -lhbhsx -lhbsix -lhbcommon \
  -lhbclipsm \
  -lhbusrrdd \
  -lhbcplr -lhbpcre -lhbct -lhbnf \
  -lhbtip -lxhb  \
  -lfm -lm -ldl


David Macias


From dmacias at mail.udg.mx  Sun Mar 23 03:55:00 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Mar 23 03:54:52 2008
Subject: [Harbour] Re: Harbour under Mandriva 2008
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47E60CD4.9020307@mail.udg.mx>

This code:
   DBCreate( cBase, aStruc, cRDD )
where
   cBase=/mnt/win_d/dat\sggopera.dbf

work fine with Mdva2008/Harbour June 2007

But with Mdva2008/current Harbour result error:

Error DBFCDX/1004  Create error: /mnt/win_d/dat\sggopera.dbf;(Error DOS 13)

Difference is management of separator "\" in dat\sggopera.dbf
Older Harbour use \ or /, while current Harbour does not accept \ (or 
does not convert to / )

Is not just case of DbCreate(). Previously is used FILE(cBase) and other 
file operations
   IF ! FILE( cBase )
     ...
     DBCreate( cBase, ... )
   ENDIF
   USE ( cBase )
   ...

Obviously there was a change of \ management in file operations

Suggestions to handle / review this change ?

David Macias


From niki at synel.co.il  Sun Mar 23 04:14:44 2008
From: niki at synel.co.il (Chen Kedem)
Date: Sun Mar 23 04:12:44 2008
Subject: [Harbour] Re: Doc issues.
Message-ID: <47E61174.6351@synel.co.il>

Irv Paton wrote:
> 1. Are "harbour portable objects" still a part of the Harbour
> project?
> The file: ..\harbour\doc\hrb_faq.txt  talks only about this feature.

This doc is an early document about the structure of .HRB files.
It was meant to be an FAQ for the .HRB files, not the Harbour FAQ
(which has an old and unmaintained FAQ here:
http://www.harbour-project.org/faq/harbour.html )
You can complie a PRG into HRB using the /gh switch, and execute
it with the hbrun utility.

harbour myTest.prg /w /a /n /gh
hbrun myTest.hrb

Like most of the docs in the repositoty it became rather old.
I'm afraid that no serious work was done on the docs in the
past 8 or so years. I patch a few files from time to time,
but nothing new is added or fixed.

> Can someone give status on this tool and should I spend any
> more time trying to make it work on libgt?

HBDOC is a utility that intended to take text files with comments
and tags similar to the one used by the Nanforum library for Clipper,
and output various output formats. This tool is not maintained for
quite some times, it have some build in stubs to allow it to create
the index section on the Harbour main doc section. And it was built
in the Windows/DOS environment so it have a few problems with file
casing when working under a case-sensitive file system.

If you have the time, any contribution to maintain the docs or this
program (probably needs a re-write) would be welcomed. If you just
need the docs themself, well, there are general Clipper docs on the
net (and printed books), there is the great doc work made by
xharbour.com for their port. Or, you can just read the text files
that we have, the structure is rather plain.


  Chen.
From cascoharb at gmail.com  Sun Mar 23 13:49:18 2008
From: cascoharb at gmail.com (Irv Paton)
Date: Sun Mar 23 13:49:23 2008
Subject: [Harbour] Re: Doc issues.
In-Reply-To: <47E61174.6351@synel.co.il>
References: <47E61174.6351@synel.co.il>
Message-ID: <b9a334db0803231049g44363b38w66da92ec66850032@mail.gmail.com>

Thank you Chen, I may work on it. As I learn new programs I like
to write up notes for  my own use, and I'm doing that on Harbour. My first
effort that may be helpful to others was to pull together the notes on the
GT api (mostly by Przemek) and how to specify which one to use in your
harbour code. I hope it is ok to post my site where it is posted, as I have
no advertising there. Anyone who wants to look at the GT write-up is
welcome,
and if you want, let me know if you think it is ok and if I should do
anything
else with it.

The site is www.patondata.com/harbour.

Irv Paton



> > Can someone give status on this tool and should I spend any
> > more time trying to make it work on libgt?
>
> HBDOC is a utility that intended to take text files with comments
> and tags similar to the one used by the Nanforum library for Clipper,
> and output various output formats. This tool is not maintained for
> quite some times, it have some build in stubs to allow it to create
> the index section on the Harbour main doc section. And it was built
> in the Windows/DOS environment so it have a few problems with file
> casing when working under a case-sensitive file system.
>
> If you have the time, any contribution to maintain the docs or this
> program (probably needs a re-write) would be welcomed. If you just
> need the docs themself, well, there are general Clipper docs on the
> net (and printed books), there is the great doc work made by
> xharbour.com for their port. Or, you can just read the text files
> that we have, the structure is rather plain.
>
>  Chen.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080323/88eafe71/attachment.html
From dmacias at mail.udg.mx  Mon Mar 24 02:40:33 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Mar 24 02:40:25 2008
Subject: [Harbour] Re: What about the release?
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47E74CE1.2020202@mail.udg.mx>

 >I'll make every effort to have it done tomorrow night, but if not, 
 >Sunday at
 >the latest.

There are a lot of changes since last release, too much to be contained 
in harbour/doc/whatsnew.txt   :-)

David Macias

From r at astral-it.com  Sat Mar 22 20:10:29 2008
From: r at astral-it.com (roman modic)
Date: Mon Mar 24 05:21:08 2008
Subject: [Harbour] Happy easter
References: <AFB948164110ED43B5EB849E8DEEF03815EA7E@SRV02.deltain.net>
Message-ID: <D1E946A1254F4EAE92D80502BDB44B1E@MASTERMIND>

Lovely
  ----- Original Message ----- 
  From: Massimo Belgrano 
  To: Harbour Project Main Developer List. 
  Sent: Saturday, March 22, 2008 12:22 PM
  Subject: [Harbour] Happy easter


           H    H      A      PPPPPP  PPPPPP  Y   Y

           H    H     A A     P    P  P    P   Y Y

           HHHHHH    A   A    PPPPPP  PPPPPP    Y

           H    H   AAAAAAA   P       P         Y

           H    H  A       A  P       P         Y

   

                               , 

                              /|      __  

                             / |   ,-~ /  

                            Y :|  //  /    

                            | jj /( .^  

                            >-"~"-v"  

                           /       Y    

                          jo  o    |  

                         ( ~T~     j   

                          >._-' _./   

                         /   "~"  |   

                        Y     _,  | 

                       /| ;-"~ _  l 

                      / l/ ,-"~    \  

                      \//\/      .- \  

                       R        /    Y     

                       O       I     ! 

                        W      _\    /"\ 

                      (" ~----( ~   Y.  )   

                     ,aaadddd8888888bbbbaaa,_

                 ,adP"::' 888  "Y8ba,  ```::Y8aa,_

               ,dP"  ::' ,88P    ,88P'   ,::: ``8"Yba,

              ,88'  ,::  d88'   d8P'     :::'  ,P  `)88a,

             ,888   ::'  888   "Y8ba,    :::   d'   d8P`Ya,

            ,888P  ,::  ,88P     ,88P'  ,:::  ,P   ,88'  `Ya,

            8888'  ::'  d88'    d8P'    :::'  d'   d8P   ,::b,

            8888   ::   888    "Y8ba,   :::   8    88'   ::::b

            8888   ::   888      ,88P'  :::   8    88,   ::::P

            8888,  ::,  Y88,    d8P'    :::,  Y,   Y8b   `::P'

            `888b  `::  `88b   "Y8ba,   `:::  `b   `88,  ,d"

             `888   ::,  888     ,88P'   :::   Y,   Y8b,d"

              `88,  `::  Y88,   d8P'     :::,  `b  _)8P"

               `Yb,  ::, `88b  "Y8ba,    `::: _,8adP"  

                 `"Yb,::, 888    ,88P'  __::adP""'   

                     `"""norMANDVEILLeux"""'

   

   

           EEEEEE      A      SSSSSS  TTTTT  EEEEEE  RRRRRR

           E          A A     S         T    E       R    R

           EEE       A   A    SSSSSS    T    EEE     RRRRR

           E        AAAAAAA        S    T    E       R  R

           EEEEEE  A       A  SSSSSS    T    EEEEEE  R   R

   

   

   



------------------------------------------------------------------------------


  _______________________________________________
  Harbour mailing list
  Harbour@harbour-project.org
  http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080323/5fbeed76/attachment-0001.html
From druzus at acn.waw.pl  Tue Mar 25 07:09:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 25 07:09:53 2008
Subject: [Harbour] Re: Harbour under Mandriva 2008
In-Reply-To: <47E60CD4.9020307@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<47E60CD4.9020307@mail.udg.mx>
Message-ID: <20080325110946.GA9723@localhost.localdomain>

On Sun, 23 Mar 2008, David Arturo Macias Corona wrote:
> This code:
>   DBCreate( cBase, aStruc, cRDD )
> where
>   cBase=/mnt/win_d/dat\sggopera.dbf
> work fine with Mdva2008/Harbour June 2007
> But with Mdva2008/current Harbour result error:
> Error DBFCDX/1004  Create error: /mnt/win_d/dat\sggopera.dbf;(Error DOS 13)

Exactly. It was a bug which still exist in xHarbour and in Harbour
it was fixed. It was not possible to use "\" in files names in *nixes.
Now it it.

> Difference is management of separator "\" in dat\sggopera.dbf
> Older Harbour use \ or /, while current Harbour does not accept \ (or 
> does not convert to / )

If you need such translation you have to enable it yourself.
Now it's fully controlled by programmer not hard coded in RTL code.

> Is not just case of DbCreate(). Previously is used FILE(cBase) and other 
> file operations
>   IF ! FILE( cBase )
>     ...
>     DBCreate( cBase, ... )
>   ENDIF
>   USE ( cBase )
>   ...
> Obviously there was a change of \ management in file operations
> Suggestions to handle / review this change ?

Now it's OK. Before it was wrong. Just like still in xHarbour.
If you want to enable such translation then add to your code:

  SET DIRSEPARATOR "\"

best regards,
Przemek
From druzus at acn.waw.pl  Tue Mar 25 07:13:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 25 07:13:52 2008
Subject: [Harbour] What about the release?
In-Reply-To: <200803182229.44413.philb@philb.us>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<200803172344.53434.philb@philb.us>
	<20080318130518.GA6566@localhost.localdomain>
	<200803182229.44413.philb@philb.us>
Message-ID: <20080325111346.GB9723@localhost.localdomain>

On Tue, 18 Mar 2008, Phil Barnett wrote:
> > > I was waiting for your go ahead. I can do it at any time.
> > I'm really sorry, I have to missed it.
> > Please do it.
> Ok, I think I'll have time tomorrow night. Thursday night is my Linux user 
> group meeting and I can't miss it because I'm presenting. Friday night is 
> Wife night. Saturday, I'm on call at work.
> I'll make every effort to have it done tomorrow night, but if not, Sunday at 
> the latest.

Hi Phil,

Seems that we forgot about easter days ;-)
But it's even good. I collected few cleanups and I'll commit them yet.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Mar 25 07:27:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Mar 25 07:27:15 2008
Subject: [Harbour] 2008-03-25 12:26 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200803251127.m2PBR9j0009943@31-mo5-4.acn.waw.pl>

2008-03-25 12:26 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/lang/Makefile
  + harbour/source/lang/msgskiso.c
  + harbour/source/lang/msgskwin.c
  + harbour/source/lang/msgskkam.c
  + harbour/source/lang/msgsk852.c
    + added Slovak national messages by Gyula Bartal - many thanks

  * harbour/include/hbapi.h
  * harbour/source/vm/arrays.c
    ! Guarded hb_arraySetNLL() declaration with #ifndef HB_LONG_LONG_OFF.
    ! Fixed trace in hb_arraySetNInt().
      By Phil Krylov borrowed from xHarbour

  * harbour/include/hbgtcore.h
    ! added missing HB_EXTERN_BEGIN / HB_EXTERN_END
      By Ron Pinkas borrowed from xHarbour

  * harbour/source/rtl/gtos2/gtos2.c
    % updated for much faster screen updating in OS2 console - many
      thanks for Maurilio Longo for tests and code.

  * harbour/source/rtl/cdpapi.c
    ! fixed CP string translation for CPs with accented equal characters
    + added HB_UTF8CHR( <nUniVal> ) -> <cUtf8Char>
      It's compatible with the function HB_UTF8CHR() by Phil Krylov in
      xHarbour

  * harbour/source/rtl/gtsln/gtsln.h
    * removed repeated #include <unistd.h>

  * harbour/contrib/hbct/files.c
    ! fixed FILESEEK() called with 3-rd parameter set to .T. (exact
      attribute match)

  * harbour/config/os2/global.cf
    ! added fixes by David Arturo Macias Corona

  + harbour/make_os2_gcc.cmd
    + added build file for GCC OS2 users with minimal environment settings

best regards
Przemek
From philb at philb.us  Wed Mar 26 03:31:59 2008
From: philb at philb.us (Phil Barnett)
Date: Wed Mar 26 03:32:06 2008
Subject: [Harbour] What about the release?
In-Reply-To: <20080325111346.GB9723@localhost.localdomain>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<200803182229.44413.philb@philb.us>
	<20080325111346.GB9723@localhost.localdomain>
Message-ID: <200803260331.59740.philb@philb.us>

On Tuesday 25 March 2008 07:13:46 am Przemyslaw Czerpak wrote:
> On Tue, 18 Mar 2008, Phil Barnett wrote:
> > > > I was waiting for your go ahead. I can do it at any time.
> > >
> > > I'm really sorry, I have to missed it.
> > > Please do it.
> >
> > Ok, I think I'll have time tomorrow night. Thursday night is my Linux
> > user group meeting and I can't miss it because I'm presenting. Friday
> > night is Wife night. Saturday, I'm on call at work.
> > I'll make every effort to have it done tomorrow night, but if not, Sunday
> > at the latest.
>
> Hi Phil,
>
> Seems that we forgot about easter days ;-)
> But it's even good. I collected few cleanups and I'll commit them yet.

Ok. Thanks. I've been more than busy. To the point that I wonder if I'll ever 
see any sleep again. It's 3:30 am and I just finished up a bit of programming 
that's due to go into testing tomorrow morning.

Can someone work on the what's new? Just a recap of the big things would be 
great.

-- 
In order to ensure a safe police state; the right of the people to keep and 
bear arms must be infringed.
From mbelgrano at deltain.it  Wed Mar 26 09:19:33 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Mar 26 09:20:02 2008
Subject: [Harbour] What about creating a harbour user group on usenet?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA9A@SRV02.deltain.net>

What about creating a harbour user newsgroup on usenet (like xharbour)?

http://www.faqs.org/faqs/usenet/creating-newsgroups/part1/

Anyone have experiences about creating usenet ng?


Massimo Belgrano

From druzus at acn.waw.pl  Wed Mar 26 11:55:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Mar 26 11:55:09 2008
Subject: [Harbour] 2008-03-26 16:54 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200803261555.m2QFt2op008233@31-mo5-4.acn.waw.pl>

2008-03-26 16:54 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtos2/gtos2.c
    * small changes, removed some un-needed code
      - by Maurilio Longo in xHarbour
    ! use screen buffer in BYTEs instead of USHORTs to avoid possible
      problems on big endian machines. I do not know if such OS2 ports
      exist but this code should be also endian independent like rest
      of Harbour code

  * harbour/source/rtl/hbgtcore.c
    ! Fixed screen buffer corruption on little-endian platforms in
      hb_gt_def_ColdArea() - fixed by Phil Krylov in xHarbour - many thanks

best regards
Przemek
From alex at belacy.belgorod.su  Wed Mar 26 12:46:08 2008
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Wed Mar 26 12:44:50 2008
Subject: [Harbour] Leto DB build 5 has been released
Message-ID: <1435518144.20080326194608@belacy.belgorod.su>

All basic RDD functionality has been implemented. Relations, orderListAdd, orderListClear has been added.

The server works im multithread mode now. First thread listen sockets,
accept connections and answers to commands, which doesn't demand database access and Harbour's VM/stack functions.
The second answers to all other commands.

DBFNTX support has been added. The driver, which will be used to open a table ( DBFCDX or DBFNTX ) is determined
 at server side from the letodb.ini - see readme.txt for details.


Regards,
 Alexander
http://kresin.belgorod.su

From jarabal at ya.com  Wed Mar 26 13:21:27 2008
From: jarabal at ya.com (Javier)
Date: Wed Mar 26 13:21:41 2008
Subject: [Harbour] What about creating a harbour user group on usenet?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EA9A@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EA9A@SRV02.deltain.net>
Message-ID: <47EA8617.2080308@ya.com>

Would not it be better to concentrate everything in one?
Sorry but I don't see thousand of subscribers in the projects neither 
problems of spams.
On the contrary, the one which I see is a drop participation in small 
projects more and more divided.

best regards,
Xavi

Massimo Belgrano escribi?:
> What about creating a harbour user newsgroup on usenet (like xharbour)?
>
> http://www.faqs.org/faqs/usenet/creating-newsgroups/part1/
>
> Anyone have experiences about creating usenet ng?
>
>
> Massimo Belgrano
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
From mbelgrano at deltain.it  Wed Mar 26 13:48:57 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Mar 26 13:49:12 2008
Subject: [Harbour] What about creating a harbour user group on usenet?
In-Reply-To: <47EA8617.2080308@ya.com>
References: <AFB948164110ED43B5EB849E8DEEF03815EA9A@SRV02.deltain.net>
	<47EA8617.2080308@ya.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EA9F@SRV02.deltain.net>

I have thinked that a new user read with difficult the developer mailing list

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Javier
Sent: Wednesday, March 26, 2008 6:21 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] What about creating a harbour user group on usenet?

Would not it be better to concentrate everything in one?
Sorry but I don't see thousand of subscribers in the projects neither 
problems of spams.
On the contrary, the one which I see is a drop participation in small 
projects more and more divided.

best regards,
Xavi

Massimo Belgrano escribi?:
> What about creating a harbour user newsgroup on usenet (like xharbour)?
>
> http://www.faqs.org/faqs/usenet/creating-newsgroups/part1/
>
> Anyone have experiences about creating usenet ng?
>
>
> Massimo Belgrano
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From rodrmigu at gmail.com  Wed Mar 26 14:47:13 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Wed Mar 26 14:47:21 2008
Subject: [Harbour] What about creating a harbour user group on usenet?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EA9F@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EA9A@SRV02.deltain.net>
	<47EA8617.2080308@ya.com>
	<AFB948164110ED43B5EB849E8DEEF03815EA9F@SRV02.deltain.net>
Message-ID: <80b05d460803261147h980b702wde819b237aa714ea@mail.gmail.com>

I've to agree, the developer mailing list is not the most easy thing in the
world for a new user or normal developer to get in contact with harbour dev
team. Usenet is more democratic way to do that, but I don't know if get a
new user in usenet will be a easy task as well.

Rodrigo

On Wed, Mar 26, 2008 at 2:48 PM, Massimo Belgrano <mbelgrano@deltain.it>
wrote:

> I have thinked that a new user read with difficult the developer mailing
> list
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:
> harbour-bounces@harbour-project.org] On Behalf Of Javier
> Sent: Wednesday, March 26, 2008 6:21 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] What about creating a harbour user group on usenet?
>
> Would not it be better to concentrate everything in one?
> Sorry but I don't see thousand of subscribers in the projects neither
> problems of spams.
> On the contrary, the one which I see is a drop participation in small
> projects more and more divided.
>
> best regards,
> Xavi
>
> Massimo Belgrano escribi?:
> > What about creating a harbour user newsgroup on usenet (like xharbour)?
> >
> > http://www.faqs.org/faqs/usenet/creating-newsgroups/part1/
> >
> > Anyone have experiences about creating usenet ng?
> >
> >
> > Massimo Belgrano
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080326/322d7eb1/attachment.html
From dmacias at mail.udg.mx  Wed Mar 26 16:41:46 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Mar 26 16:42:17 2008
Subject: [Harbour] Re: 2008-03-25 12:26 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47EAB50A.1000507@mail.udg.mx>

 >2008-03-25 12:26 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/config/os2/global.cf
 >    ! added fixes by David Arturo Macias Corona

Thanks Przemek
A fresh checkout build/install/clean fine

 >  + harbour/make_os2_gcc.cmd
 >    + added build file for GCC OS2 users with minimal environment 
 >settings

Very minimal
User can not do things as "make install", ...

David Macias


From philb at philb.us  Wed Mar 26 20:54:27 2008
From: philb at philb.us (Phil Barnett)
Date: Wed Mar 26 20:54:33 2008
Subject: [Harbour] What about creating a harbour user group on usenet?
In-Reply-To: <80b05d460803261147h980b702wde819b237aa714ea@mail.gmail.com>
References: <AFB948164110ED43B5EB849E8DEEF03815EA9A@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EA9F@SRV02.deltain.net>
	<80b05d460803261147h980b702wde819b237aa714ea@mail.gmail.com>
Message-ID: <200803262054.27718.philb@philb.us>

On Wednesday 26 March 2008 02:47:13 pm Rodrigo Miguel wrote:

> I've to agree, the developer mailing list is not the most easy thing in the
> world for a new user or normal developer to get in contact with harbour dev
> team. Usenet is more democratic way to do that, but I don't know if get a
> new user in usenet will be a easy task as well.

We used to have a Harbour-User list, but it was seldom used. Now that we are 
creating version 1.0, it is time to have that list again.

I can handle that. There's nothing special about a usenet group, other than 
spam. After using both kinds for decades, I feel that a self controlled 
mailing list is the best.

-- 
In order to ensure a safe police state; the right of the people to keep and 
bear arms must be infringed.
From dmacias at mail.udg.mx  Thu Mar 27 03:40:52 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Mar 27 03:40:38 2008
Subject: [Harbour] Re: Harbour under Mandriva 2008
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47EB4F84.2050607@mail.udg.mx>

 >> Error DBFCDX/1004  Create error: /mnt/win_d/dat\sggopera.dbf;(Error 
 >DOS 13)

 >Exactly. It was a bug which still exist in xHarbour and in Harbour
 >it was fixed. It was not possible to use "\" in files names in *nixes.
 >Now it it.

Checked. Mandriva 2008 support "\" in file names, for example 
test\file.txt, but created using "test\\file.txt". With just an \, 
result is testfile.txt

 >If you need such translation you have to enable it yourself.
 >Now it's fully controlled by programmer not hard coded in RTL code.

 >> Obviously there was a change of \ management in file operations
 >> Suggestions to handle / review this change ?

 >Now it's OK. Before it was wrong. Just like still in xHarbour.
 >If you want to enable such translation then add to your code:

 >  SET DIRSEPARATOR "\"

Checked and it work (?)
What exactly is purpose/mean of SET DIRSEPARATOR ( set(104) ) ?
By default is OS_PATH_DELIMITER

This code:

qout( set( 104 ) )
PRIV cFile := cSvrDbf+"dat\sggopera.dbf"
QOUT( cFile, FILE(cFile) )

set( 104, "\" )
qout( set( 104 ) )
QOUT( cFile, FILE(cFile) )

results to:
/
/mnt/win_d/dat\sggopera.dbf .F.
\
/mnt/win_d/dat\sggopera.dbf .T.


and rest of file operations mixing / and \ results fine
That mean set( 104, "\" ) translate \ to / on file operations ?

David Macias


From dmacias at mail.udg.mx  Thu Mar 27 03:51:04 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Mar 27 03:50:51 2008
Subject: [Harbour] Re: Harbour under Mandriva 2008
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <47EB51E8.4050405@mail.udg.mx>

 >What exactly is purpose/mean of SET DIRSEPARATOR ( set(104) ) ?
 >By default is OS_PATH_DELIMITER

 >That mean set( 104, "\" ) translate \ to / on file operations ?

Przemek:

Forget response
 From ChangeLog:

2002-09-23 11:00 UTC-0300 Gustavo Junior Alves <alves@coslinux.com.br>
   * source/rtl/set.c
     ! Implement SET FILECASE, DIRCASE and DIRSEPARATOR


2007-11-04 02:34 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
   * harbour/source/rtl/filesys.c
     ! fixed _SET_DIRSEPARATOR behavior - now it's always set to default
       OS directory separator what means no translations. If you want to
       enable some translations then it should be set to other value, f.e.
       in *nixes:
          set( _SET_DIRSEPARATOR, "\" )
       enables translations of "\" in paths to "/"


David Macias



From maurilio.longo at libero.it  Thu Mar 27 04:34:20 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Mar 27 04:36:27 2008
Subject: [Harbour] 2008-03-26 16:54 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <200803261555.m2QFt2op008233@31-mo5-4.acn.waw.pl>
References: <200803261555.m2QFt2op008233@31-mo5-4.acn.waw.pl>
Message-ID: <47EB5C0C.1010903@libero.it>

Przemyslaw Czerpak wrote:
> 2008-03-26 16:54 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/gtos2/gtos2.c
>     * small changes, removed some un-needed code
>       - by Maurilio Longo in xHarbour
>     ! use screen buffer in BYTEs instead of USHORTs to avoid possible
>       problems on big endian machines. I do not know if such OS2 ports
>       exist but this code should be also endian independent like rest
>       of Harbour code
> 
Once upon a time there was a powerpc port of OS/2... but it is long gone .) (I
 don't know if powerpc was a big-endian architecture).

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Thu Mar 27 08:02:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Mar 27 08:02:48 2008
Subject: [Harbour] What about the release?
In-Reply-To: <200803260331.59740.philb@philb.us>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<200803182229.44413.philb@philb.us>
	<20080325111346.GB9723@localhost.localdomain>
	<200803260331.59740.philb@philb.us>
Message-ID: <20080327120230.GA9959@localhost.localdomain>

On Wed, 26 Mar 2008, Phil Barnett wrote:
> Can someone work on the what's new? Just a recap of the big things would be 
> great.

I'll try in this weekend.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Mar 27 08:09:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Mar 27 08:10:03 2008
Subject: [Harbour] 2008-03-26 16:54 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <47EB5C0C.1010903@libero.it>
References: <200803261555.m2QFt2op008233@31-mo5-4.acn.waw.pl>
	<47EB5C0C.1010903@libero.it>
Message-ID: <20080327120946.GB9959@localhost.localdomain>

On Thu, 27 Mar 2008, Maurilio Longo wrote:
> Przemyslaw Czerpak wrote:
> > 2008-03-26 16:54 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> >   * harbour/source/rtl/gtos2/gtos2.c
> >     * small changes, removed some un-needed code
> >       - by Maurilio Longo in xHarbour
> >     ! use screen buffer in BYTEs instead of USHORTs to avoid possible
> >       problems on big endian machines. I do not know if such OS2 ports
> >       exist but this code should be also endian independent like rest
> >       of Harbour code
> Once upon a time there was a powerpc port of OS/2... but it is long gone .) (I
>  don't know if powerpc was a big-endian architecture).

Thank you for information. There is quite big number of different PPC
processors. The ones I was working with were big endian machines but
I do not know if all. Anyhow it's good to always keep the whole code
endian clean to eliminate stupid mistakes when someone will copy few
lines to other file, f.e. working on new GT.

best regards,
Przemek
From carlosjviola at gmail.com  Thu Mar 27 09:46:06 2008
From: carlosjviola at gmail.com (Carlos Viola)
Date: Thu Mar 27 09:46:11 2008
Subject: [Harbour] Encrypt DBF tables
In-Reply-To: <704f34940803270521l33405365o99b6c219f3240a8f@mail.gmail.com>
References: <704f34940803270521l33405365o99b6c219f3240a8f@mail.gmail.com>
Message-ID: <704f34940803270646l9733b66m5dd277880ca73215@mail.gmail.com>

Hello everyone,

I would be very grateful if anybody can give me some advicel me about
the following:

I need to encrypt DBF data. I have memo fields in dbf tables. Is there
any way to do this using Harbour and CDX ?

If the problem are memo fields, do you know if  there is another
solution like changing this field type for another type like "V"
fields of six driver

Thanks in advance,

Carlos
From phil at newstar.rinet.ru  Thu Mar 27 09:51:12 2008
From: phil at newstar.rinet.ru (Phil Krylov)
Date: Thu Mar 27 09:51:20 2008
Subject: [Harbour] 2008-03-26 16:54 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080327120946.GB9959@localhost.localdomain>
References: <200803261555.m2QFt2op008233@31-mo5-4.acn.waw.pl>
	<47EB5C0C.1010903@libero.it>
	<20080327120946.GB9959@localhost.localdomain>
Message-ID: <c10dbf450803270651u53b7532t9868bc740ae2b898@mail.gmail.com>

Hi,

On 27/03/2008, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> Thank you for information. There is quite big number of different PPC
>  processors. The ones I was working with were big endian machines but
>  I do not know if all. Anyhow it's good to always keep the whole code
>  endian clean to eliminate stupid mistakes when someone will copy few
>  lines to other file, f.e. working on new GT.

(OFFTOPIC)

PowerPCs can switch endianness programmatically so it usually depends
on OS; e.g. Mac OS Classic / Mac OS X use big-endian mode, and Windows
NT/powerpc used litlle-endian. Also I know that Microsoft Virtual PC
used to run a little-endian virtual machine with Windows within Mac OS
(big endian) using that feature.

-- Ph.
From druzus at acn.waw.pl  Thu Mar 27 11:34:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Mar 27 11:35:11 2008
Subject: [Harbour] 2008-03-26 16:54 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <c10dbf450803270651u53b7532t9868bc740ae2b898@mail.gmail.com>
References: <200803261555.m2QFt2op008233@31-mo5-4.acn.waw.pl>
	<47EB5C0C.1010903@libero.it>
	<20080327120946.GB9959@localhost.localdomain>
	<c10dbf450803270651u53b7532t9868bc740ae2b898@mail.gmail.com>
Message-ID: <20080327153444.GA10535@localhost.localdomain>

On Thu, 27 Mar 2008, Phil Krylov wrote:
> PowerPCs can switch endianness programmatically so it usually depends
> on OS; e.g. Mac OS Classic / Mac OS X use big-endian mode, and Windows
> NT/powerpc used litlle-endian. Also I know that Microsoft Virtual PC
> used to run a little-endian virtual machine with Windows within Mac OS
> (big endian) using that feature.

Thank you for information.
All PPC I used were controlled by different *nixes and I had only
remote access to them.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Mar 27 11:41:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Mar 27 11:43:57 2008
Subject: [Harbour] Encrypt DBF tables
In-Reply-To: <704f34940803270646l9733b66m5dd277880ca73215@mail.gmail.com>
References: <704f34940803270521l33405365o99b6c219f3240a8f@mail.gmail.com>
	<704f34940803270646l9733b66m5dd277880ca73215@mail.gmail.com>
Message-ID: <20080327154128.GB10535@localhost.localdomain>

On Thu, 27 Mar 2008, Carlos Viola wrote:
> Hello everyone,
> I would be very grateful if anybody can give me some advicel me about
> the following:
> I need to encrypt DBF data. I have memo fields in dbf tables. Is there
> any way to do this using Harbour and CDX ?

Now not. The DBF encryption with memo fields is blocked until I will
not find to resolve the problem with some SIX3 bugs. I'm afraid that
if I'll unblock it now then it will not be possible to fix it later
without breaking backward compatibility.

> If the problem are memo fields, do you know if  there is another
> solution like changing this field type for another type like "V"
> fields of six driver

"V" fields stored in memo files also disable encryption so it will
not help.
Now we are in release freeze state so I cannot change it but when
we unblock the SVN repository for new extensions then I'll try to
find a while to resolve the problem.

BTW do you need to encrypt also memo files or table will be enough?

best regards,
Przemek
From carlosjviola at gmail.com  Thu Mar 27 13:00:12 2008
From: carlosjviola at gmail.com (Carlos Viola)
Date: Thu Mar 27 13:00:38 2008
Subject: [Harbour] Fwd: Encrypt DBF tables
In-Reply-To: <704f34940803270521l33405365o99b6c219f3240a8f@mail.gmail.com>
References: <704f34940803270521l33405365o99b6c219f3240a8f@mail.gmail.com>
Message-ID: <704f34940803271000v7900c1d6rc13a1c44c64d3754@mail.gmail.com>

Przemek,

Thank you very much for your fast and clear answer.

I understand harbour is in release freeze state at this moment.

I do not need to encrypt memo fields. Encrypting only the table would be enough.

Thank you again for your fantastic work!

Carlos.



On Thu, 27 Mar 2008, Carlos Viola wrote:
> Hello everyone,
> I would be very grateful if anybody can give me some advicel me about
> the following:
> I need to encrypt DBF data. I have memo fields in dbf tables. Is there
> any way to do this using Harbour and CDX ?

Now not. The DBF encryption with memo fields is blocked until I will
not find to resolve the problem with some SIX3 bugs. I'm afraid that
if I'll unblock it now then it will not be possible to fix it later
without breaking backward compatibility.

> If the problem are memo fields, do you know if  there is another
> solution like changing this field type for another type like "V"
> fields of six driver

"V" fields stored in memo files also disable encryption so it will
not help.
Now we are in release freeze state so I cannot change it but when
we unblock the SVN repository for new extensions then I'll try to
find a while to resolve the problem.

BTW do you need to encrypt also memo files or table will be enough?

best regards,
Przemek
From marcos.gambeta at yahoo.com.br  Sat Mar 29 09:05:35 2008
From: marcos.gambeta at yahoo.com.br (Marcos Antonio Gambeta)
Date: Sat Mar 29 09:08:18 2008
Subject: [Harbour] Compiling Harbour with DJGPP
Message-ID: <47EE3E9F.6040605@yahoo.com.br>

Hi all,

Compiling current Harbour with DJGPP (using Windows Vista Ultimate) , i
am getting the errors below:

---------- begin ----------

D:\djgpp>set DJGPP=D:\DJGPP\DJGPP.ENV

D:\djgpp>set PATH=D:\DJGPP\BIN;%PATH%

D:\djgpp>cd /hrbdjgpp

D:\hrbdjgpp>set HB_ARCHITECTURE=dos

D:\hrbdjgpp>set HB_COMPILER=djgpp

D:\hrbdjgpp>set HB_GT_LIB=gtdos

D:\hrbdjgpp>set HB_BIN_INSTALL=d:\hrbdjgpp\bin

D:\hrbdjgpp>set HB_LIB_INSTALL=d:\hrbdjgpp\lib

D:\hrbdjgpp>set HB_INC_INSTALL=d:\hrbdjgpp\include

D:\hrbdjgpp>make_gnu.bat
Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

Extended Error 183

File not found - ..\..\
File not found - ..\..\
gcc.exe: harboury.c: No such file or directory (ENOENT)
gcc.exe: no input files
make.exe[3]: *** [harboury.o] Error 1
make.exe[2]: *** [descend] Error 2
make.exe[1]: *** [first] Error 2
make.exe: *** [first] Error 2

D:\hrbdjgpp>

---------- end ----------

---------- content of the file make_gnu.log ----------

d:\djgpp\bin\make.exe -C doc first
make.exe[1]: Entering directory `d:/hrbdjgpp/doc'
d:\djgpp\bin\make.exe -C en first
make.exe[2]: Entering directory `d:/hrbdjgpp/doc/en'
make.exe[2]: Nothing to be done for `first'.
make.exe[2]: Leaving directory `d:/hrbdjgpp/doc/en'
d:\djgpp\bin\make.exe -C es first
make.exe[2]: Entering directory `d:/hrbdjgpp/doc/es'
make.exe[2]: Nothing to be done for `first'.
make.exe[2]: Leaving directory `d:/hrbdjgpp/doc/es'
make.exe[1]: Leaving directory `d:/hrbdjgpp/doc'
d:\djgpp\bin\make.exe -C include first
make.exe[1]: Entering directory `d:/hrbdjgpp/include'
make.exe[1]: Nothing to be done for `first'.
make.exe[1]: Leaving directory `d:/hrbdjgpp/include'
d:\djgpp\bin\make.exe -C source first
make.exe[1]: Entering directory `d:/hrbdjgpp/source'
d:\djgpp\bin\make.exe -C common first
make.exe[2]: Entering directory `d:/hrbdjgpp/source/common'

D:\HRBDJGPP\SOURCE\COMMON>if not exist dos\nul md dos
D:\HRBDJGPP\SOURCE\COMMON>if not exist dos\djgpp\nul md dos\djgpp
D:\HRBDJGPP\SOURCE\COMMON>if not exist ..\..\lib\dos\nul md ..\..\lib\dos
D:\HRBDJGPP\SOURCE\COMMON>if not exist ..\..\lib\dos\djgpp\nul md
...\..\lib\dos\djgppmake.exe[3]: Entering directory
`d:/hrbdjgpp/source/common/DOS/DJGPP'
make.exe[3]: `../../../../lib/dos/djgpp/libhbcommon.a' is up to date.
make.exe[3]: Leaving directory `d:/hrbdjgpp/source/common/DOS/DJGPP'
make.exe[2]: Leaving directory `d:/hrbdjgpp/source/common'
d:\djgpp\bin\make.exe -C pp first
make.exe[2]: Entering directory `d:/hrbdjgpp/source/pp'

D:\HRBDJGPP\SOURCE\PP>if not exist dos\nul md dos
D:\HRBDJGPP\SOURCE\PP>if not exist dos\djgpp\nul md dos\djgpp
D:\HRBDJGPP\SOURCE\PP>if not exist ..\..\lib\dos\nul md ..\..\lib\dos
D:\HRBDJGPP\SOURCE\PP>if not exist ..\..\lib\dos\djgpp\nul md
...\..\lib\dos\djgppmake.exe[3]: Entering directory
`d:/hrbdjgpp/source/pp/DOS/DJGPP'
make.exe[3]: `../../../../lib/dos/djgpp/libhbpp.a' is up to date.
make.exe[3]: Leaving directory `d:/hrbdjgpp/source/pp/DOS/DJGPP'
make.exe[2]: Leaving directory `d:/hrbdjgpp/source/pp'
d:\djgpp\bin\make.exe -C compiler first
make.exe[2]: Entering directory `d:/hrbdjgpp/source/compiler'

D:\HRBDJGPP\SOURCE\COMPILER>if not exist dos\nul md dos
D:\HRBDJGPP\SOURCE\COMPILER>if not exist dos\djgpp\nul md dos\djgpp
D:\HRBDJGPP\SOURCE\COMPILER>if not exist ..\..\lib\dos\nul md ..\..\lib\dos
D:\HRBDJGPP\SOURCE\COMPILER>if not exist ..\..\lib\dos\djgpp\nul md
...\..\lib\dos\djgppmake.exe[3]: Entering directory
`d:/hrbdjgpp/source/compiler/DOS/DJGPP'
C:\WINDOWS\SYSTEM32\COMMAND.COM /Ccopy ..\..\harbour.yyc harboury.c
       0 file(s) copied
C:\WINDOWS\SYSTEM32\COMMAND.COM /Ccopy ..\..\harbour.yyh harboury.h
       0 file(s) copied
gcc -I. -I../../../../include -Wall -W  -c harboury.c -oharboury.o
make.exe[3]: Leaving directory `d:/hrbdjgpp/source/compiler/DOS/DJGPP'
make.exe[2]: Leaving directory `d:/hrbdjgpp/source/compiler'
make.exe[1]: Leaving directory `d:/hrbdjgpp/source'

---------- end of the file make_gnu.log ----------

In the folder d:\hrbdjgpp\lib\dos\djgpp, i see the files:

libhbcommon.a (68 kb)
libhbpp.a (324 kb)

Any help will be appreciated.



Regards,
Marcos Antonio Gambeta
marcosgambeta at gmail dot com



From marcos.gambeta at yahoo.com.br  Sun Mar 30 06:50:50 2008
From: marcos.gambeta at yahoo.com.br (Marcos Antonio Gambeta)
Date: Sun Mar 30 06:52:57 2008
Subject: [Harbour] Compiling Harbour with DJGPP
In-Reply-To: <47EE3E9F.6040605@yahoo.com.br>
References: <47EE3E9F.6040605@yahoo.com.br>
Message-ID: <47EF708A.2020504@yahoo.com.br>

"Extended Error 183" don?t stop the compilation. The first real problem is:

C:\WINDOWS\SYSTEM32\COMMAND.COM /Ccopy ..\..\harbour.yyc harboury.c
      0 file(s) copied
C:\WINDOWS\SYSTEM32\COMMAND.COM /Ccopy ..\..\harbour.yyh harboury.h
      0 file(s) copied

To resolve, i copied the files manually:

copy source\compiler\harbour.yyc source\compiler\dos\djgpp\harboury.c
copy source\compiler\harbour.yyh source\compiler\dos\djgpp\harboury.h

The next error is:

.../../gtpca.c: In function 'hb_gt_pca_Init':
.../../gtpca.c:508: error: storage size of 'win' isn't known
.../../gtpca.c:510: error: 'TIOCGWINSZ' undeclared (first use in this 
function)
.../../gtpca.c:510: error: (Each undeclared identifier is reported only once
.../../gtpca.c:510: error: for each function it appears in.)
.../../gtpca.c:508: warning: unused variable 'win'
make.exe[4]: *** [gtpca.o] Error 1
make.exe[3]: *** [descend] Error 2
make.exe[2]: *** [first] Error 2
make.exe[1]: *** [first] Error 2
make.exe: *** [first] Error 2

Bug to be fixed ? Or a local problem ?


Regards,
Marcos Antonio Gambeta
marcosgambeta at gmail dot com


From maurilio.longo at libero.it  Mon Mar 31 03:16:40 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Mar 31 03:16:46 2008
Subject: [Harbour] Encrypt DBF tables
In-Reply-To: <20080327154128.GB10535@localhost.localdomain>
References: <704f34940803270521l33405365o99b6c219f3240a8f@mail.gmail.com>	<704f34940803270646l9733b66m5dd277880ca73215@mail.gmail.com>
	<20080327154128.GB10535@localhost.localdomain>
Message-ID: <47F08FD8.4000709@libero.it>

Przemyslaw Czerpak wrote:
> BTW do you need to encrypt also memo files or table will be enough?
> 
Przemyslaw,

I think encryption of indexes (even loosing compatibility) should be done,
otherwise encrypted data can be seen inside them.

Best regars.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From guy.roussin at teledetection.fr  Mon Mar 31 03:46:09 2008
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon Mar 31 03:46:12 2008
Subject: [Harbour] Accessing big text files with very long lines
Message-ID: <47F096C1.9020108@teledetection.fr>

Hi,

I create a little class to access big text files with very long lines.
So, after parsing the file, i can get very quickly a line in the text file.
Now, i want to fclose() the text file when the object is destroyed.
How can i do this with harbour ?

-- 
Guy Roussin

-------------- next part --------------
#!/usr/bin/hbrun
#include "hbclass.ch"

// Note: BUFLEN must be >= len(::cSep)
#define BUFLEN 1024

function main()
 local oObjet
 oObjet := FLaccess():New("clLine.prg")
 ? oObjet:numberOfLines()
 ? oObjet:getLine()
 ? oObjet:getLine()
 ? oObjet:getLine(16)
 ? oObjet:getLine()
 ? oObjet:nCurrentLine
 ? oObjet:nHandle
return NIL 

class FLaccess
 method new()
 method readLines()
 method numberOfLines()
 method getLine()
 var nHandle READONLY
 var cSep READONLY
 var nCurrentLine READONLY
 var aPtLines READONLY
endclass

method new(cF,cS) class FLaccess
 ::nHandle:=fopen(cF,0)
 ::cSep:=if(cS==NIL,hb_OSNewLine(),cS)
 ::nCurrentLine:=0
 ::aPtLines:={}
 ::readLines()
return Self

method readLines() class FLaccess
 local cBuffer:=space(BUFLEN)
 local nAtcSep:=0
 local nOctetsLus:=0
 local nLencSep:=len(::cSep)
 aadd(::aPtLines,-nLencSep)
 while (nOctetsLus:=fread(::nHandle,@cBuffer,BUFLEN))>0
  nAtcSep:=at(::cSep,cBuffer) 
  if nAtcSep==0 .or. nAtcSep+nLencSep-1>nOctetsLus   
   if nOctetsLus<BUFLEN
    aadd(::aPtLines,fseek(::nHandle,0,1)) 
    exit
   endif
   fseek(::nHandle,1-nLencSep,1)            
  else                                    
   fseek(::nHandle,nAtcSep-nOctetsLus+nLencSep-1,1)
   aadd(::aPtLines,fseek(::nHandle,0,1)-nLencSep) 
   if nOctetsLus<BUFLEN .and. nAtcSep+nLencSep-1==nOctetsLus        
    exit
   endif
  endif
 end
return NIL

method numberOfLines() class FLaccess
return(len(::aPtLines))

method getLine(nLine) class FLaccess
 local cLine
 if nLine==NIL
  nLine:=::nCurrentLine+1
 endif
 ::nCurrentLine:=nLine
 cLine:=space(::aPtLines[nLine+1]-::aPtLines[nLine]+::aPtLines[1]) 
 fseek(::nHandle,::aPtLines[nLine]-::aPtLines[1],0)
 fread(::nHandle,@cLine,::aPtLines[nLine+1]-::aPtLines[nLine]+::aPtLines[1])
return(cLine)
From miguelangel at marchuet.net  Mon Mar 31 03:48:42 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Mar 31 03:47:28 2008
Subject: [Harbour] Important question about sockets
Message-ID: <47F0975A.6030106@marchuet.net>

compiler uses hardcoded

	#define HB_SENDRECV_BUFFER_SIZE         1400

instead of use

	getsockopt (Windows Sockets) to retrieve the value of socket option SO_MAX_MSG_SIZE


It makes very slow some transactions, for example FTP, Leto RDD, etc.


Any body knows why we are using hardcoded 1400 ?.


We can change this ?


best regards,
Miguel Angel marchuet
From sscc at mweb.co.za  Mon Mar 31 06:44:37 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Mar 31 06:44:56 2008
Subject: [Harbour] Accessing big text files with very long lines
In-Reply-To: <47F096C1.9020108@teledetection.fr>
References: <47F096C1.9020108@teledetection.fr>
Message-ID: <47F0C095.8080905@mweb.co.za>

Guy Roussin wrote:

> Now, i want to fclose() the text file when the object is destroyed.
> How can i do this with harbour ?

I do not think there are destructors in Harbour, call an exit/close 
method.

They do exist in xHarbour.

Regards
Alex
From druzus at acn.waw.pl  Mon Mar 31 08:00:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 31 08:00:27 2008
Subject: [Harbour] Accessing big text files with very long lines
In-Reply-To: <47F0C095.8080905@mweb.co.za>
References: <47F096C1.9020108@teledetection.fr> <47F0C095.8080905@mweb.co.za>
Message-ID: <20080331120018.GA1715@localhost.localdomain>

On Mon, 31 Mar 2008, Alex Strickland wrote:
> >Now, i want to fclose() the text file when the object is destroyed.
> >How can i do this with harbour ?
> I do not think there are destructors in Harbour, call an exit/close 
> method.
> They do exist in xHarbour.

You are wrong. Only Harbour have fully working destructors and
xHarbour doesn't. The xHarbour implementation is too buggy for
serious usage. 
Please read docs/destruct.txt and try test code in destruct.prg.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Mar 31 08:09:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 31 08:09:25 2008
Subject: [Harbour] What about the release?
In-Reply-To: <20080327120230.GA9959@localhost.localdomain>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<200803182229.44413.philb@philb.us>
	<20080325111346.GB9723@localhost.localdomain>
	<200803260331.59740.philb@philb.us>
	<20080327120230.GA9959@localhost.localdomain>
Message-ID: <20080331120918.GB1715@localhost.localdomain>

On Thu, 27 Mar 2008, Przemyslaw Czerpak wrote:
> > Can someone work on the what's new? Just a recap of the big things would be 
> > great.
> I'll try in this weekend.

Phil, I'm really sorry but it will have to wait for next weekend :-(
I have too much of other jobs to work on it.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Mar 31 08:15:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 31 08:15:24 2008
Subject: [Harbour] Encrypt DBF tables
In-Reply-To: <47F08FD8.4000709@libero.it>
References: <704f34940803270521l33405365o99b6c219f3240a8f@mail.gmail.com>
	<704f34940803270646l9733b66m5dd277880ca73215@mail.gmail.com>
	<20080327154128.GB10535@localhost.localdomain>
	<47F08FD8.4000709@libero.it>
Message-ID: <20080331121519.GC1715@localhost.localdomain>

On Mon, 31 Mar 2008, Maurilio Longo wrote:
> I think encryption of indexes (even loosing compatibility) should be done,
> otherwise encrypted data can be seen inside them.

Yes, just like memo encryption should be done in different way then in
SIX3. When I'll find time for it I'll add such encryption as alternative
form but know we are talking about SIX3 compatible encryption which can
be used for data shared between Clipper and SIX3.

best regards,
Przemek
From philb at philb.us  Mon Mar 31 08:22:47 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Mar 31 08:22:57 2008
Subject: [Harbour] What about the release?
In-Reply-To: <20080331120918.GB1715@localhost.localdomain>
References: <9257026e0803170758u62d90769jb84a086c951226e2@mail.gmail.com>
	<20080327120230.GA9959@localhost.localdomain>
	<20080331120918.GB1715@localhost.localdomain>
Message-ID: <200803310822.48091.philb@philb.us>

On Monday 31 March 2008 08:09:18 am Przemyslaw Czerpak wrote:
> On Thu, 27 Mar 2008, Przemyslaw Czerpak wrote:
> > > Can someone work on the what's new? Just a recap of the big things
> > > would be great.
> >
> > I'll try in this weekend.
>
> Phil, I'm really sorry but it will have to wait for next weekend :-(
> I have too much of other jobs to work on it.

No problem. I start my vacation period on the 5th, which will give me more 
time.  That works for me.

-- 
In order to ensure a safe police state; the right of the people to keep and 
bear arms must be infringed.
From druzus at acn.waw.pl  Mon Mar 31 08:23:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 31 08:23:18 2008
Subject: [Harbour] Fwd: Encrypt DBF tables
In-Reply-To: <704f34940803271000v7900c1d6rc13a1c44c64d3754@mail.gmail.com>
References: <704f34940803270521l33405365o99b6c219f3240a8f@mail.gmail.com>
	<704f34940803271000v7900c1d6rc13a1c44c64d3754@mail.gmail.com>
Message-ID: <20080331122313.GD1715@localhost.localdomain>

On Thu, 27 Mar 2008, Carlos Viola wrote:
> I do not need to encrypt memo fields. Encrypting only the table would be enough.

So for your own use you can hack current dbf1.c code and disable protection
code. You will have to change:

line 640:
       fEncrypt ? !pArea->fTableEncrypted && !pArea->fHasMemo :
to:
       fEncrypt ? !pArea->fTableEncrypted :

line 1701:
   pArea->fEncrypted = pArea->pCryptKey != NULL && !pArea->fHasMemo;
to:
   pArea->fEncrypted = pArea->pCryptKey != NULL;

line 2208:
         if( pArea->bCryptType == DB_CRYPT_SIX && !pArea->fHasMemo )
to:
         if( pArea->bCryptType == DB_CRYPT_SIX )

and remove line 2193:
         if( !pArea->fHasMemo )

But please remember to keep such hacked RDD in the future because
you will need it to decode data when I'll add SIX3 compatible
memo encryption. Otherwise you will not be able to decode your memo
data.

best regards,
Przemek
From carlosjviola at gmail.com  Mon Mar 31 09:57:37 2008
From: carlosjviola at gmail.com (Carlos Viola)
Date: Mon Mar 31 09:57:44 2008
Subject: [Harbour] FW: Encrypt DBF data
Message-ID: <704f34940803310657l241a2702j3c30ce45b2037cfc@mail.gmail.com>

Thank you very much Przemek.

This works great for me now !! It solved my problem.

Thank you again.

Best regards,

Carlos.



>So for your own use you can hack current dbf1.c code and disable protection
>code. You will have to change:

>line 640:
>       fEncrypt ? !pArea->fTableEncrypted && !pArea->fHasMemo :
>to:
>       fEncrypt ? !pArea->fTableEncrypted :
>
>line 1701:
>   pArea->fEncrypted = pArea->pCryptKey != NULL && !pArea->fHasMemo;
>to:
>   pArea->fEncrypted = pArea->pCryptKey != NULL;
>
>line 2208:
>         if( pArea->bCryptType == DB_CRYPT_SIX && !pArea->fHasMemo )
>to:
>         if( pArea->bCryptType == DB_CRYPT_SIX )
>
>and remove line 2193:
>         if( !pArea->fHasMemo )
>
>But please remember to keep such hacked RDD in the future because
>you will need it to decode data when I'll add SIX3 compatible
>memo encryption. Otherwise you will not be able to decode your memo
>data.
>
>best regards,
>Przemek
From guy.roussin at teledetection.fr  Mon Mar 31 13:12:38 2008
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon Mar 31 13:12:44 2008
Subject: [Harbour] Accessing big text files with very long lines
In-Reply-To: <20080331120018.GA1715@localhost.localdomain>
References: <47F096C1.9020108@teledetection.fr> <47F0C095.8080905@mweb.co.za>
	<20080331120018.GA1715@localhost.localdomain>
Message-ID: <47F11B86.1060701@teledetection.fr>

Przemyslaw Czerpak a ?crit :
> On Mon, 31 Mar 2008, Alex Strickland wrote:
>>> Now, i want to fclose() the text file when the object is destroyed.
>>> How can i do this with harbour ?
>> I do not think there are destructors in Harbour, call an exit/close 
>> method.
>> They do exist in xHarbour.
> 
> You are wrong. Only Harbour have fully working destructors and
> xHarbour doesn't. The xHarbour implementation is too buggy for
> serious usage. 
> Please read docs/destruct.txt and try test code in destruct.prg.

Fine thank you, i only need to add this to my code :

class FLaccess
  ...
  destructor close
  ...
endclass

...

method close() class FLaccess
fclose(::nHandle)
return NIL

-- 
Guy
From druzus at acn.waw.pl  Mon Mar 31 14:37:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Mar 31 14:37:50 2008
Subject: [Harbour] Accessing big text files with very long lines
In-Reply-To: <47F11B86.1060701@teledetection.fr>
References: <47F096C1.9020108@teledetection.fr> <47F0C095.8080905@mweb.co.za>
	<20080331120018.GA1715@localhost.localdomain>
	<47F11B86.1060701@teledetection.fr>
Message-ID: <20080331183724.GA3099@localhost.localdomain>

On Mon, 31 Mar 2008, Guy Roussin wrote:
> >You are wrong. Only Harbour have fully working destructors and
> >xHarbour doesn't. The xHarbour implementation is too buggy for
> >serious usage. 
> >Please read docs/destruct.txt and try test code in destruct.prg.
> Fine thank you, i only need to add this to my code :
> class FLaccess
>  ...
>  destructor close
>  ...
> endclass
> ...
> method close() class FLaccess
> fclose(::nHandle)
> return NIL

Such simple example are also safe in xHarbour.
But be careful when you will want to operate on complex data in
xHarbour destructors. The xHarbour's GC is not ready for destructor
.prg code which may change the reference counters in released blocks
or move some complex variables. In general you should try to not
touch any objects or arrays inside destructors in xHarbour.
The tests/destruct.prg code in Harbour SVN repository is also good
example which shows some wrong things which may happen in xHarbour.
Below I'm attaching log file from VALGRIND for destruct.prg compiled
by xHarbour. As you can see internal xHarbour memory structures becomes
corrupted by .prg destructors code. Please also note that xHarbour
can catch it immediately and XHVM still works using pointers to freed
memory blocks what may cause corruptions in other subsystem which
may allocate the same memory region.
Until it will not be fixed in xHarbour I suggest to to use xHarbour
destructors in complex applications because it may cause unpredicitble
errors. The destruct.prg code can be used for tests. If you do not have
VALGRIND then you can make similar test with CodeGuard from BCC.

best regards,
Przemek


==3235== Memcheck, a memory error detector for x86-linux.
==3235== Copyright (C) 2002-2004, and GNU GPL'd, by Julian Seward et al.
==3235== Using valgrind-2.2.0, a program supervision framework for x86-linux.
==3235== Copyright (C) 2000-2004, and GNU GPL'd, by Julian Seward et al.
==3235== Valgrind library directory: /usr/lib/valgrind
==3235== Command line
==3235==    ./destruct
==3235== Startup, with flags:
==3235==    --tool=memcheck
==3235==    --leak-check=yes
==3235==    --num-callers=16
==3235==    -v
==3235== Contents of /proc/version:
==3235==   Linux version 2.6.15 (root@localhost.localdomain) (gcc version 3.4.2 20041017 (Red Hat 3.4.2-6.fc3)) #8 PREEMPT Fri Jun 16 01:11:03 CEST 2006
==3235== Reading syms from /home/druzus/CVS/harbour/harbour/tests/destruct (0x8048000)
==3235==    object doesn't have a symbol table
==3235==    object doesn't have any debug info
==3235== Reading syms from /lib/ld-2.3.3.so (0x1B8E4000)
==3235==    object doesn't have any debug info
==3235== Reading syms from /usr/lib/valgrind/stage2 (0xB0000000)
==3235== Reading syms from /lib/ld-2.3.3.so (0xB1000000)
==3235==    object doesn't have any debug info
==3235== Reading syms from /usr/lib/valgrind/vgskin_memcheck.so (0xB7B9B000)
==3235== Reading syms from /lib/tls/libc-2.3.3.so (0xB7DC4000)
==3235==    object doesn't have any debug info
==3235== Reading syms from /lib/libdl-2.3.3.so (0xB7EEC000)
==3235==    object doesn't have any debug info
==3235== Reading suppressions file: /usr/lib/valgrind/default.supp
==3235== REDIRECT soname:libc.so.6(__GI___errno_location) to soname:libpthread.so.0(__errno_location)
==3235== REDIRECT soname:libc.so.6(__errno_location) to soname:libpthread.so.0(__errno_location)
==3235== REDIRECT soname:libc.so.6(__GI___h_errno_location) to soname:libpthread.so.0(__h_errno_location)
==3235== REDIRECT soname:libc.so.6(__h_errno_location) to soname:libpthread.so.0(__h_errno_location)
==3235== REDIRECT soname:libc.so.6(__GI___res_state) to soname:libpthread.so.0(__res_state)
==3235== REDIRECT soname:libc.so.6(__res_state) to soname:libpthread.so.0(__res_state)
==3235== REDIRECT soname:libc.so.6(stpcpy) to *vgpreload_memcheck.so*(stpcpy)
==3235== REDIRECT soname:libc.so.6(strnlen) to *vgpreload_memcheck.so*(strnlen)
==3235== REDIRECT soname:ld-linux.so.2(stpcpy) to *vgpreload_memcheck.so*(stpcpy)
==3235== REDIRECT soname:ld-linux.so.2(strchr) to *vgpreload_memcheck.so*(strchr)
==3235== 
==3235== Reading syms from /usr/lib/valgrind/vg_inject.so (0x1B8FC000)
==3235== Reading syms from /usr/lib/valgrind/vgpreload_memcheck.so (0x1B901000)
==3235== TRANSLATE: 0x1B8F5A50 redirected to 0x1B90420C
==3235== Reading syms from /home/druzus/CVS/xharbour/out/lib/libxharbour-1.1.0.so (0x1B923000)
==3235== Reading syms from /usr/X11R6/lib/libX11.so.6.2 (0x987000)
==3235==    object doesn't have a symbol table
==3235==    object doesn't have any debug info
==3235== Reading syms from /usr/lib/libncurses.so.5.4 (0x58D8000)
==3235== Reading syms from /usr/local/lib/libslang.so.2.0.5 (0x1BC64000)
==3235==    object doesn't have a symbol table
==3235==    object doesn't have any debug info
==3235== Reading syms from /lib/tls/libm-2.3.3.so (0x95C000)
==3235==    object doesn't have any debug info
==3235== Reading syms from /lib/libdl-2.3.3.so (0x981000)
==3235==    object doesn't have any debug info
==3235== Reading syms from /lib/tls/libc-2.3.3.so (0x833000)
==3235==    object doesn't have any debug info
==3235== TRANSLATE: 0x896160 redirected to 0x1B904A04
==3235== TRANSLATE: 0x896610 redirected to 0x1B905432
==3235== TRANSLATE: 0x1B8E47A0 redirected to 0x52BFF040
==3235== TRANSLATE: 0x894430 redirected to 0x1B904F30

First simple tests when object is not destroyed by GC
=====================================================

=> o := myClass():new( 0 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I do not store any references to self.
   It's a safe destructor.

=> o := myClass():new( 1 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in instance variable.
   Bad practice but safe in Harbour because it will be destroyed.

=> o := myClass():new( 2 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in class variable.
   It's programmer bug which should cause RT error.

=> o := myClass():new( 3 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in public variable.
   It's programmer bug which should cause RT error.

Now object will be destroyed by GC
==================================

=> o := myClass():new( 0 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> create corss reference: a := { o, nil }; a[2] := a; a := NIL
=> o := NIL
=> hb_gcAll()==3235== Invalid read of size 2
==3235==    at 0x1BA95197: hb_gcItemRef (garbage.c:488)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x1BD73ADA is 18 bytes inside a block of size 52 free'd
==3235==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==3235==    by 0x1BABDDA3: hb_arrayRelease (arrays.c:1487)
==3235==    by 0x1BA9E8B4: hb_itemClear (fastitem.c:242)
==3235==    by 0x1BA9E9E4: hb_itemForwardValue (fastitem.c:96)
==3235==    by 0x1BAB0E15: hb_vmPopLocal (hvm.c:9475)
==3235==    by 0x1BAA45BA: hb_vmExecute (hvm.c:3232)
==3235==    by 0x804898C: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235== 
==3235== Invalid read of size 4
==3235==    at 0x1BA95293: hb_gcItemRef (garbage.c:490)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x1BD73AE0 is 24 bytes inside a block of size 52 free'd
==3235==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==3235==    by 0x1BABDDA3: hb_arrayRelease (arrays.c:1487)
==3235==    by 0x1BA9E8B4: hb_itemClear (fastitem.c:242)
==3235==    by 0x1BA9E9E4: hb_itemForwardValue (fastitem.c:96)
==3235==    by 0x1BAB0E15: hb_vmPopLocal (hvm.c:9475)
==3235==    by 0x1BAA45BA: hb_vmExecute (hvm.c:3232)
==3235==    by 0x804898C: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235== 
==3235== Invalid write of size 2
==3235==    at 0x1BA95296: hb_gcItemRef (garbage.c:494)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x1BD73ADA is 18 bytes inside a block of size 52 free'd
==3235==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==3235==    by 0x1BABDDA3: hb_arrayRelease (arrays.c:1487)
==3235==    by 0x1BA9E8B4: hb_itemClear (fastitem.c:242)
==3235==    by 0x1BA9E9E4: hb_itemForwardValue (fastitem.c:96)
==3235==    by 0x1BAB0E15: hb_vmPopLocal (hvm.c:9475)
==3235==    by 0x1BAA45BA: hb_vmExecute (hvm.c:3232)
==3235==    by 0x804898C: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235== 
==3235== Invalid read of size 4
==3235==    at 0x1BA9529F: hb_gcItemRef (garbage.c:497)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x1BD73ADC is 20 bytes inside a block of size 52 free'd
==3235==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==3235==    by 0x1BABDDA3: hb_arrayRelease (arrays.c:1487)
==3235==    by 0x1BA9E8B4: hb_itemClear (fastitem.c:242)
==3235==    by 0x1BA9E9E4: hb_itemForwardValue (fastitem.c:96)
==3235==    by 0x1BAB0E15: hb_vmPopLocal (hvm.c:9475)
==3235==    by 0x1BAA45BA: hb_vmExecute (hvm.c:3232)
==3235==    by 0x804898C: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235== 
==3235== Invalid read of size 4
==3235==    at 0x1BA95144: hb_gcItemRef (garbage.c:476)
==3235==    by 0x1BA952AF: hb_gcItemRef (garbage.c:503)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==3235== 
==3235== Process terminating with default action of signal 11 (SIGSEGV)
==3235==  Access not within mapped region at address 0x0
==3235==    at 0x1BA95144: hb_gcItemRef (garbage.c:476)
==3235==    by 0x1BA952AF: hb_gcItemRef (garbage.c:503)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235== 
==3235== ERROR SUMMARY: 5 errors from 5 contexts (suppressed: 20 from 1)
==3235== 
==3235== 1 errors in context 1 of 5:
==3235== Invalid read of size 4
==3235==    at 0x1BA95144: hb_gcItemRef (garbage.c:476)
==3235==    by 0x1BA952AF: hb_gcItemRef (garbage.c:503)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==3235== 
==3235== 1 errors in context 2 of 5:
==3235== Invalid read of size 4
==3235==    at 0x1BA9529F: hb_gcItemRef (garbage.c:497)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x1BD73ADC is 20 bytes inside a block of size 52 free'd
==3235==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==3235==    by 0x1BABDDA3: hb_arrayRelease (arrays.c:1487)
==3235==    by 0x1BA9E8B4: hb_itemClear (fastitem.c:242)
==3235==    by 0x1BA9E9E4: hb_itemForwardValue (fastitem.c:96)
==3235==    by 0x1BAB0E15: hb_vmPopLocal (hvm.c:9475)
==3235==    by 0x1BAA45BA: hb_vmExecute (hvm.c:3232)
==3235==    by 0x804898C: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235== 
==3235== 1 errors in context 3 of 5:
==3235== Invalid write of size 2
==3235==    at 0x1BA95296: hb_gcItemRef (garbage.c:494)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x1BD73ADA is 18 bytes inside a block of size 52 free'd
==3235==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==3235==    by 0x1BABDDA3: hb_arrayRelease (arrays.c:1487)
==3235==    by 0x1BA9E8B4: hb_itemClear (fastitem.c:242)
==3235==    by 0x1BA9E9E4: hb_itemForwardValue (fastitem.c:96)
==3235==    by 0x1BAB0E15: hb_vmPopLocal (hvm.c:9475)
==3235==    by 0x1BAA45BA: hb_vmExecute (hvm.c:3232)
==3235==    by 0x804898C: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235== 
==3235== 1 errors in context 4 of 5:
==3235== Invalid read of size 4
==3235==    at 0x1BA95293: hb_gcItemRef (garbage.c:490)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x1BD73AE0 is 24 bytes inside a block of size 52 free'd
==3235==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==3235==    by 0x1BABDDA3: hb_arrayRelease (arrays.c:1487)
==3235==    by 0x1BA9E8B4: hb_itemClear (fastitem.c:242)
==3235==    by 0x1BA9E9E4: hb_itemForwardValue (fastitem.c:96)
==3235==    by 0x1BAB0E15: hb_vmPopLocal (hvm.c:9475)
==3235==    by 0x1BAA45BA: hb_vmExecute (hvm.c:3232)
==3235==    by 0x804898C: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235== 
==3235== 1 errors in context 5 of 5:
==3235== Invalid read of size 2
==3235==    at 0x1BA95197: hb_gcItemRef (garbage.c:488)
==3235==    by 0x1BA94BAF: hb_memvarsIsMemvarRef (memvars.c:2359)
==3235==    by 0x1BA95355: hb_gcCollectAll (garbage.c:662)
==3235==    by 0x1BA956D4: HB_FUN_HB_GCALL (garbage.c:940)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x80489AA: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
==3235==  Address 0x1BD73ADA is 18 bytes inside a block of size 52 free'd
==3235==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==3235==    by 0x1BABDDA3: hb_arrayRelease (arrays.c:1487)
==3235==    by 0x1BA9E8B4: hb_itemClear (fastitem.c:242)
==3235==    by 0x1BA9E9E4: hb_itemForwardValue (fastitem.c:96)
==3235==    by 0x1BAB0E15: hb_vmPopLocal (hvm.c:9475)
==3235==    by 0x1BAA45BA: hb_vmExecute (hvm.c:3232)
==3235==    by 0x804898C: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BAA372C: hb_vmExecute (hvm.c:1436)
==3235==    by 0x804896E: (within /home/druzus/CVS/harbour/harbour/tests/destruct)
==3235==    by 0x1BAB10A9: hb_vmDo (hvm.c:6988)
==3235==    by 0x1BABB8BA: main (mainstd.c:82)
--3235-- 
--3235-- supp:   20 Ugly strchr error in /lib/ld-2.3.3.so
==3235== 
==3235== IN SUMMARY: 5 errors from 5 contexts (suppressed: 20 from 1)
==3235== 
==3235== malloc/free: in use at exit: 195422 bytes in 3579 blocks.
==3235== malloc/free: 6308 allocs, 2729 frees, 14100808 bytes allocated.
==3235== 
==3235== searching for pointers to 3579 not-freed blocks.
==3235== checked 6959084 bytes.
==3235== 
==3235== LEAK SUMMARY:
==3235==    definitely lost: 0 bytes in 0 blocks.
==3235==    possibly lost:   0 bytes in 0 blocks.
==3235==    still reachable: 195422 bytes in 3579 blocks.
==3235==         suppressed: 0 bytes in 0 blocks.
==3235== Reachable blocks (those to which a pointer was found) are not shown.
==3235== To see them, rerun with: --show-reachable=yes
--3235--     TT/TC: 0 tc sectors discarded.
--3235--            6085 tt_fast misses.
--3235-- translate: new     5888 (98191 -> 1365943; ratio 139:10)
--3235--            discard 1 (23 -> 320; ratio 139:10).
--3235-- chainings: 4218 chainings, 2 unchainings.
--3235--  dispatch: 4352731 jumps (bb entries); of them 276952 (6%) unchained.
--3235--            358/12812 major/minor sched events.
--3235-- reg-alloc: 955 t-req-spill, 252679+6836 orig+spill uis,
--3235--            29997 total-reg-rank
--3235--    sanity: 264 cheap, 11 expensive checks.
--3235--    ccalls: 28827 C calls, 59% saves+restores avoided (101518 bytes)
--3235--            38258 args, avg 0.87 setup instrs each (9476 bytes)
--3235--            0% clear the stack (86337 bytes)
--3235--            9322 retvals, 29% of reg-reg movs avoided (5374 bytes)
