From philb at philb.us  Tue Jul  1 00:27:48 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Jul  1 00:27:53 2008
Subject: [Harbour] OT - E-Mail Address Verification
In-Reply-To: <005f01c8d821$171dabc0$7e00520a@euroherc.ba>
References: <18143143.post@talk.nabble.com>
	<005f01c8d821$171dabc0$7e00520a@euroherc.ba>
Message-ID: <200807010027.48735.philb@philb.us>

On Friday 27 June 2008 02:43:12 am gabor salai [intranet242] wrote:
> you may check everything [address forming, mail servers, ...], but the
> final test, is there a mail box named "alfa.beta" on domain "gama.delta",
> is not possible. as i remember [maybe phil wrote few years ago] there *is*
> a mail protocol query upon which the server should answer "yes, i have an
> inbox for that mail address", but for security [anti-spam] reason mail
> admins often [allways?] disable that response.
>
> so, sending coded message to tested address, and waiting for somebody
> response is the only way to test that address is real

The SMTP protocol REQUIRES that this exchange works, so it can't be disabled.

Yes, a brute force can figure out which mailboxes are real, but so can a mail 
run, so it's never done with brute force. Simply because the run that 
validates the email address could have been the run that delivered the mail, 
so the spammers never take twice as long as they need to.

The detection routine that I posted still works today.

-- 
Waiting for sunspots.
From philb at philb.us  Tue Jul  1 00:32:06 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Jul  1 00:32:09 2008
Subject: [Harbour] gnu Makefiles issue under Linux
In-Reply-To: <03042B33-287E-48CD-900D-822E49403DFE@syenar.hu>
References: <9257026e0806270407k57500654od58d5d93a7ba2bd5@mail.gmail.com>
	<9257026e0806270454h51b0b5f9u7d854d2e7220a42c@mail.gmail.com>
	<03042B33-287E-48CD-900D-822E49403DFE@syenar.hu>
Message-ID: <200807010032.06402.philb@philb.us>

On Friday 27 June 2008 08:17:12 am Szak?ts Viktor wrote:
> Any suggestions how to solve this in a way that all special
> inclusion logic is self-contained in local contrib Makefiles
> (contrib/*/Makefile), yet come out error-free from a 'make clean'?

I like the way perl does it with cpan.

Contribs are not built into the base.

They query the environment, each library has a requirements list and if the 
requirements are met, it is compiled for that target.

Its not an easy thing, but it sure works great.

-- 
Waiting for sunspots.
From druzus at acn.waw.pl  Tue Jul  1 05:14:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  1 05:14:16 2008
Subject: [Harbour] hbint.c build error under Linux
In-Reply-To: <48693934.4080706@marchuet.net>
References: <9257026e0806300337m31d2c81dqfd8356b10b65ac2e@mail.gmail.com>
	<C01D8289-1797-4456-B9BE-3CDC2F84AA61@syenar.hu>
	<9257026e0806300638y6d537648lbee79a203d33be83@mail.gmail.com>
	<20080630150028.GA11091@34-mo7-2.acn.waw.pl>
	<48693934.4080706@marchuet.net>
Message-ID: <20080701091410.GA5341@34-mo7-2.acn.waw.pl>

On Mon, 30 Jun 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> iRcvBufSize/oSndBufSize now contents the maximum buffer assigned by 
> system, we need to know this value
> saved at iRcvBufSize/oSndBufSize, because we can use only half of this 
> buffer for safe, almost

If the above is true then out upper level code (TIP) library
should be removed from SVN. I cannot imagine that we have
broken code which needs such tricks and I cannot accept that
lowlevel code is hacked to fix some bugs which are in other
places. Please fix the reasons or if you do not understand sth
then please ask someone who can help you. Anyhow manipulating
buffer size to fix bugs in upper level protocol implementation
(if any) is yet another thing (3-rd).

> meanwhile we work with synchronous buffers.
> IMPORTANT this buffers don't have a fix size almost at windows platform, 
> it depends of the free memory
> system, by default 8kb. Normally we can try to increase it as necessary. 
> for example we have good rates
> using 64kb bytes to transfer ftp and 16kb for http.
> for this reason we can't remove iRcvBufSize/oSndBufSize, we need to know 
> this values to not use more
> than half buffer to save.

We do not need these variables at all.
>From the begining you are mixing two different things: the internal
IP buffer size and fragmentation in read/write operation.
If you want to change IP buffer then please do it. That's your choice.

> Test using more size some time produce lost of data (windows platforms) 
> is possible that linux works better
> and is possible to use full system buffer size.
> You can say to me what is the default system buffer size at linux 
> platforms ?

It has nothing to the problem in the code which introduce additional
fragmentation. It makes it from begining. This fragmentation should
be removed. Instead of removing it you increased the peaces to the
size of IP buffer. It reduce the overhead but it does not resolve
the problem. It's enough to _FULLY_ eliminate unnecessary fragmentation.

best regards,
Przemek
From miguelangel at marchuet.net  Tue Jul  1 06:52:27 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Jul  1 06:48:07 2008
Subject: [Harbour] hbint.c build error under Linux
In-Reply-To: <20080701091410.GA5341@34-mo7-2.acn.waw.pl>
References: <9257026e0806300337m31d2c81dqfd8356b10b65ac2e@mail.gmail.com>	<C01D8289-1797-4456-B9BE-3CDC2F84AA61@syenar.hu>	<9257026e0806300638y6d537648lbee79a203d33be83@mail.gmail.com>	<20080630150028.GA11091@34-mo7-2.acn.waw.pl>	<48693934.4080706@marchuet.net>
	<20080701091410.GA5341@34-mo7-2.acn.waw.pl>
Message-ID: <486A0C6B.9020509@marchuet.net>


Is possible that i speak bad English.

but iRcvBufSize/iSndBufSize are imperatively needed without it
we will need to call every transfer to getsockopt to know the system buffer Snd and Rcv
to know his size.

If we use 1400 hard coded then the code can produce GPF. (now it is removed)

Now we remove this unneeded fragmentation increasing buffer as possible, using system default values
saved at iRcvBufSize/iSndBufSize.

Now you can too try to increase this values to to make packets bigger or lower. But never use
hard coded 1400 because the system can put a minor default buffer size. Or system can works
too slow to works with full buffer.

Now is corrected and we now use the correct buffer size.

You prefer to call every time to getsockopt to known the buffer size
or you prefer to use iRcvBufSize/iSndBufSize, technically is the same.

We need to know it to protect the transfer.

we now use this values (iRcvBufSize/iSndBufSize) to establish the buffer transfer
at the different protocols, than always will be lower than iRcvBufSize/iSndBufSize.

but you can't use another buffer size without a risk of GPF.

Actually code is tested at the last 4 months without GPF or other problems.

Of course, it can be better if at the future we can use MT to make asynchronous transfers
or use too multi socket transfers to accelerate it.

We had serious problems of transfer speed, and now is solved and without GPF or lost data.


Best regards,
Miguel Angel Marchuet


From druzus at acn.waw.pl  Tue Jul  1 08:20:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  1 08:20:32 2008
Subject: [Harbour] hbint.c build error under Linux
In-Reply-To: <486A0C6B.9020509@marchuet.net>
References: <9257026e0806300337m31d2c81dqfd8356b10b65ac2e@mail.gmail.com>
	<C01D8289-1797-4456-B9BE-3CDC2F84AA61@syenar.hu>
	<9257026e0806300638y6d537648lbee79a203d33be83@mail.gmail.com>
	<20080630150028.GA11091@34-mo7-2.acn.waw.pl>
	<48693934.4080706@marchuet.net>
	<20080701091410.GA5341@34-mo7-2.acn.waw.pl>
	<486A0C6B.9020509@marchuet.net>
Message-ID: <20080701122027.GA5724@34-mo7-2.acn.waw.pl>

On Tue, 01 Jul 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> Is possible that i speak bad English.
> but iRcvBufSize/iSndBufSize are imperatively needed without it
> we will need to call every transfer to getsockopt to know the system buffer 
> Snd and Rcv
> to know his size.

We do not need to know the system buffer at all so we do not need to
call this function. The OS will accept as much bytes as it will can
and as it will be optimal.

> If we use 1400 hard coded then the code can produce GPF. (now it is removed)

First: I do not want to reintorduce hardcoded 1400 bytes limit.
It was wrong just like now it's wrong the limit we have inside iRcvBufSize/
iSndBufSize. Thank you for removing the smaller limit but intorducing
new one only bigger is not necessary at all and may only reduce the
speed. It's also hardcoded limit because you do not know how
many free bytes is left in IO buffer. You do not even know what is
the real size of send/receive buffer because SO_RCVBUF/SO_SNDBUF
informs kernel only about _suggested_ buffer size and the real buffer
size can be different and it's out of normal user control. Usually
the internal buffer size is doubled so as long as you will use
iRcvBufSize/iSndBufSize to limit size of single read/write operation
then you will be reducing optimal transfer. We should remove all
such limits and allow the kernel to accept as much bytes as it like
and retrieve as much bytes as available.

Second: if it GPFs then the bug is in some other code (probably in TIP
library) and it has to be fixed or buggy code removed from SVN repository.
Adding workarounds for bugs in upper level code to lower level code
instead of fixing problem only increased it. In general adding workarounds
for GPFs instead of fixing real reasons is the worst possible thing because
bugs are not fixed and sooner or later will be exploited by some other code.
Additionally the code with unnecessary hacks is harder to understand and
fix.

> Now we remove this unneeded fragmentation increasing buffer as possible, 
> using system default values
> saved at iRcvBufSize/iSndBufSize.

Not removed but moved to the level hardcoded inside: iRcvBufSize/
iSndBufSize. I only want to really _FULLY_ remove it.

> Now you can too try to increase this values to to make packets bigger or 
> lower. But never use
> hard coded 1400 because the system can put a minor default buffer size. Or 
> system can works
> too slow to works with full buffer.

The 1400 bytes limit was wrong and it has to be eliminated.
But replacing one limit with another one just like in your modification
is not enough. Please also remove the limit we have now in iRcvBufSize/
iSndBufSize.

> Now is corrected and we now use the correct buffer size.

No, It isn't.

> You prefer to call every time to getsockopt to known the buffer size
> or you prefer to use iRcvBufSize/iSndBufSize, technically is the same.

No. I do not want to call getsockopt at all. I'll fix send/receive
code myself and please look at the final version because it looks
like you do not understand what I'm talking about. Sorry - it's probably
my fatal English.

> We need to know it to protect the transfer.

No. If the above is true for upper level protocol using TCP/IP then
it means that we have bugs in this upper level implementation.
Please try to locate and fix them.

> we now use this values (iRcvBufSize/iSndBufSize) to establish the buffer 
> transfer
> at the different protocols, than always will be lower than 
> iRcvBufSize/iSndBufSize.

Miguel, please read something about TCP/IP implementation and what
SO_RCVBUF/SO_SNDBUF because it really makes sth different then you
think it does.

> but you can't use another buffer size without a risk of GPF.

I can use any buffer size without risk of GPF in valid code.

> Actually code is tested at the last 4 months without GPF or other problems.

But it's not optimal and probably still buggy.

> Of course, it can be better if at the future we can use MT to make 
> asynchronous transfers
> or use too multi socket transfers to accelerate it.

Asynchronous transfer is different thing. Please do not mix it now.

> We had serious problems of transfer speed, and now is solved and without 
> GPF or lost data.

Again, valid code should not GPF. This modification does not fixed any
potential GPF and if it helps you then you only confirm that we still
have some buggy code which have to be fixed. This buggy code is probably
inside TIP library. I've never used this library because I have my own
one but maybe someone similar with it can locate the problem.
I'll check if hbinet.c does not have some bugs. I adopted this code from
xHarbour to Harbour but I've never made any serious cleanup. I'm leaving
it to the moment when I'll introduce public C level harbour API for
inet sockets and I'll remove the limit inside iRcvBufSize/iSndBufSize.
If it exploits GPFs then even better because it will be easier to
locate the real problem.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Jul  1 10:28:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  1 10:28:41 2008
Subject: [Harbour] 2008-07-01 16:28 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807011428.m61ESaER016835@31-mo5-4.acn.waw.pl>

2008-07-01 16:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour-ce-spec
  * harbour/harbour-w32-spec
    * define whole contrib library list for new contrib/Makefile
    + added header files to respect differences between platform
      native and Windows only headers

  * harbour/harbour.spec
    * define whole contrib library list for new contrib/Makefile
    * divided libraries which needs external references into
      separated packages
    ! removed unnecessary dependences in binaries rebuild in shared
      mode

  * harbour/contrib/hbodbc/odbc.c
    * pacified warnings
    % minor optimization

  * harbour/contrib/hbcurl/hbcurl.c
  * harbour/contrib/hbfbird/firebird.c
  * harbour/source/vm/extrap.c
    * casting to pacify warnings

  * harbour/contrib/gtwvg/gtwvg.c
    ! fixed pointer comparison - C uses different precedence for !
      operator then Clipper/xbase

  * harbour/source/rtl/hbinet.c
    ! fixed GPF HB_INET[GS]ET{SND,RCV}BUFSIZE() when wrong
      socket parameter is passed. Please remember that after
      RT error the control is returned to application.
    % removed any hardcoded limits for size of data passed in
      single read/write call during normal stream operations
    - removed iSndBufSize/iRcvBufSize

best regards
Przemek
From druzus at acn.waw.pl  Tue Jul  1 10:51:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  1 10:51:22 2008
Subject: [Harbour] make_rpm.sh not successful
In-Reply-To: <DD1BA536-B53B-4E11-82AF-1C47875D4C29@syenar.hu>
References: <200806301509.07713.tomaz.zupan@orpo.si>
	<5848A10E-5818-4EA4-A55C-076ABEFAF7EF@syenar.hu>
	<20080630135528.GA5829@34-mo7-2.acn.waw.pl>
	<DD1BA536-B53B-4E11-82AF-1C47875D4C29@syenar.hu>
Message-ID: <20080701145116.GA16876@34-mo7-2.acn.waw.pl>

On Mon, 30 Jun 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'd appreciate if you could help, as it's extremely
> difficult to oversee the .rpm creation.

Now it should build correctly. It will be necessary to
update also make_deb.sh and make_tgz.sh

> My changes seemed humble to me, most of them should
> have kept existing functionality (in regards to
> the include path stuff), the rest (header file
> installation) were clear bugs in previous revisions.
> I'm sorry if I'm messing up something, but this is
> exactly the part, where we need to work together.

I'm not agains the general idea and many thanks for
your work on contrib tree. Just simply some modifications
which makes the Windows users life easier for *nix users
create additional problem. Please note that we should keep
an easy way to chose all necessary/possible to build contrib
libraries from one place or adding new port will be very
hard. Sooner or later we will add some more or less limited
support for autoconf. It will be nice if we can keep only
one autoconf script instead of adding it to each contrib
directory. I understand why you want to move the environment
testing to each contrib library and in Windows it seems to be
even resonable for me. But when I will want to make some new
port in POSIX OS then I would like to have an easy way to
update only single file instead of 20. That's all.
Once again thank you for you work on Harbour contrib libraries.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jul  1 11:26:31 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 11:26:44 2008
Subject: [Harbour] 2008-07-01 17:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8db8e$Blat.v2.6.2$d6fc3130$2ca06e85d522@127.0.0.1>

2008-07-01 17:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbapollo/Makefile
   * contrib/hbcurl/Makefile
   * contrib/hbfbird/Makefile
   * contrib/hbfimage/Makefile
   * contrib/hbgd/Makefile
   * contrib/hbhpdf/Makefile
   * contrib/hbmysql/Makefile
   * contrib/hbpgsql/Makefile
   * contrib/rddads/Makefile
     ! Fixed a macro check to make autodetection really work.
       So the previous TOFIX (2008-06-30 19:20 UTC+0200) is 
       now cleared.

   * contrib/hbgf/hbgfgtk/Makefile
     + Added header detection. (default: /usr/include)

   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipcom.cpp
   * contrib/hbziparch/hbzipnew.cpp
     ! Pacified Linux warnings.
     * Some formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 11:27:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 11:28:09 2008
Subject: [Harbour] RC2 anything pending?
Message-ID: <0ECD6BAF-F618-4786-9DF3-0B1EFB2085BC@syenar.hu>

Hi all,

We're about to release RC2, is there anything pending?

Also, may I ask everyone to try build under different
platforms to see if there is still anything not building
cleanly?

Brgds,
Viktor

From miguelangel at marchuet.net  Tue Jul  1 11:43:23 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Jul  1 11:39:06 2008
Subject: [Harbour] hbint.c build error under Linux
In-Reply-To: <20080701122027.GA5724@34-mo7-2.acn.waw.pl>
References: <9257026e0806300337m31d2c81dqfd8356b10b65ac2e@mail.gmail.com>	<C01D8289-1797-4456-B9BE-3CDC2F84AA61@syenar.hu>	<9257026e0806300638y6d537648lbee79a203d33be83@mail.gmail.com>	<20080630150028.GA11091@34-mo7-2.acn.waw.pl>	<48693934.4080706@marchuet.net>	<20080701091410.GA5341@34-mo7-2.acn.waw.pl>	<486A0C6B.9020509@marchuet.net>
	<20080701122027.GA5724@34-mo7-2.acn.waw.pl>
Message-ID: <486A509B.8090706@marchuet.net>

More or less I'm agree with you now.

I know the actual problem, we reduce the problem using wait's
as needed at high level classes.

Almost at windows tested platforms if you write more than
getsockopt( Socket->com, SOL_SOCKET, SO_SNDBUF, (char *) &value, &len )
the data is lost or GPF. You has been removed this protection. Of course
is unneeded if the classes that uses it knows the problem.

Is possible Linux don't have this limitation.

The actual problem is than at the write loop we don't leave time
to system API to empty his buffer. (At the moment we use sysrefresh for it)
but this is a real LOTERIA.

we need to leave enough time to the system to empty its buffer, only then
we can return to write in this buffer.

Is possible a help the source code of FileZilla at sourceforge. (but it works asynchronous)

This is information that you can found at MSDN about buffers:

Remarks
The send function is used to write outgoing data on a connected socket. For message-oriented sockets, care must be taken not to 
exceed the maximum packet size of the underlying provider, which can be obtained by using getsockopt to retrieve the value of 
socket option SO_MAX_MSG_SIZE. If the data is too long to pass atomically through the underlying protocol, the error WSAEMSGSIZE 
is returned, and no data is transmitted.

The successful completion of a send does not indicate that the data was successfully delivered.

If no buffer space is available within the transport system to hold the data to be transmitted, send will block unless the 
socket has been placed in nonblocking mode. On nonblocking stream oriented sockets, the number of bytes written can be between 1 
and the requested length, depending on buffer availability on both client and server computers. The select, WSAAsyncSelect or 
WSAEventSelect functions can be used to determine when it is possible to send more data.

Calling send with a zero len parameter is permissible and will be treated by implementations as successful. In such cases, send 
will return zero as a valid value. For message-oriented sockets, a zero-length transport datagram is sent.

The flags parameter can be used to influence the behavior of the function beyond the options specified for the associated 
socket. The semantics of this function are determined by the socket options and the flags parameter. The latter is constructed 
by using the bitwise OR operator with any of the following values


Best regards,
Miguel Angel marchuet
From a.jurkiewicz at abix.info.pl  Tue Jul  1 11:54:32 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Tue Jul  1 11:54:38 2008
Subject: [Harbour] RC2 anything pending?
In-Reply-To: <0ECD6BAF-F618-4786-9DF3-0B1EFB2085BC@syenar.hu>
References: <0ECD6BAF-F618-4786-9DF3-0B1EFB2085BC@syenar.hu>
Message-ID: <200807011754.32805.a.jurkiewicz@abix.info.pl>

Dnia wtorek, 1 lipca 2008, Szak?ts Viktor napisa?:
> Hi all,
> Also, may I ask everyone to try build under different
> platforms to see if there is still anything not building
> cleanly?
On openSUSE 10.3 SVN 8863 compiles OK.

Adam


-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu | http://www.abix.info.pl
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: abix_adamj@jabster.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From harbour.01 at syenar.hu  Tue Jul  1 12:02:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 12:03:19 2008
Subject: [Harbour] BUG: LONG conflicting with external libs
Message-ID: <FF536D4A-B17C-4F64-B096-0448BDE3D1D2@syenar.hu>

Hi Przemek and all,

Our LONG type is conflicting with FreeImage.h, which
was possible to workaround under Windows, but in Linux
it seems to remain a problem.

We're taking namespaces very seriously, but we actually
break in the most obvious way: type names.

Some of these are needed for Clipper C API compatibility,
but none of them is necessary for Harbour core, or in fact
anywhere outside compatibility .api files.

This is the other reason why we can't easily include
<windows.h> freely anywhere in 3rd party code, besides
causing some other problem, like our types and sizes
unnecessarily tied to OS types.

I think this is something to solve after 1.0.

Please comment.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 12:32:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 12:32:28 2008
Subject: [Harbour] 2008-07-01 18:08 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8db98$Blat.v2.6.2$10450ab2$2dc0744d88ca@127.0.0.1>

2008-07-01 18:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * harbour-ce-spec
   * harbour-w32-spec
   * include/hbver.h
   * harbour.spec
     * RC1 -> RC2

   * contrib/hbziparch/hbziparc.c
     ! Fixed potential GPF in HBZIPCLEANUP().
     ! HBZIPCLEANUP() changed to be a HB_FUNC() (from HB_EXIT_FUNC()), 
       so now it has to be called manually, but at least it's 
       now doing something useful. (HB_EXIT_FUNC() in .c code 
       never gets executed by itself).
--
Brgds,
Viktor

From bedipritpal at hotmail.com  Tue Jul  1 12:32:41 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Jul  1 12:32:44 2008
Subject: [Harbour] A Concept to Put Bits-and-Pieces Together
Message-ID: <18220152.post@talk.nabble.com>


Hello Everybody

Here I am trying to pull and put bits-and-pieces together
which might ( I do not know at least for now ) happen to 
become a one-stop repository to Harbour/xHarbour world.

http://www.vouch.info/harbour

It is just an idea to expand and refined.
Please comment.

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/A-Concept-to-Put-Bits-and-Pieces-Together-tp18220152p18220152.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Jul  1 12:37:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  1 12:37:08 2008
Subject: [Harbour] hbint.c build error under Linux
In-Reply-To: <486A509B.8090706@marchuet.net>
References: <9257026e0806300337m31d2c81dqfd8356b10b65ac2e@mail.gmail.com>
	<C01D8289-1797-4456-B9BE-3CDC2F84AA61@syenar.hu>
	<9257026e0806300638y6d537648lbee79a203d33be83@mail.gmail.com>
	<20080630150028.GA11091@34-mo7-2.acn.waw.pl>
	<48693934.4080706@marchuet.net>
	<20080701091410.GA5341@34-mo7-2.acn.waw.pl>
	<486A0C6B.9020509@marchuet.net>
	<20080701122027.GA5724@34-mo7-2.acn.waw.pl>
	<486A509B.8090706@marchuet.net>
Message-ID: <20080701163703.GA24744@34-mo7-2.acn.waw.pl>

On Tue, 01 Jul 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> More or less I'm agree with you now.
> I know the actual problem, we reduce the problem using wait's
> as needed at high level classes.
> Almost at windows tested platforms if you write more than
> getsockopt( Socket->com, SOL_SOCKET, SO_SNDBUF, (char *) &value, &len )
> the data is lost or GPF. You has been removed this protection. Of course
> is unneeded if the classes that uses it knows the problem.
> Is possible Linux don't have this limitation.

I do not believe that such basic functionality does not work in
Windows for connected sockets. It will make TCP/IP unusable in this
system for slow connections.

> The actual problem is than at the write loop we don't leave time
> to system API to empty his buffer. (At the moment we use sysrefresh for it)
> but this is a real LOTERIA.
> we need to leave enough time to the system to empty its buffer, only then
> we can return to write in this buffer.

If the above is true then we should find the reason in our implementation
of upper level protocol (f.e. FTP) and fix it instead of reducing frequency
of errors by some hacks.

> Is possible a help the source code of FileZilla at sourceforge. (but it 
> works asynchronous)
> This is information that you can found at MSDN about buffers:
> 
> Remarks
> The send function is used to write outgoing data on a connected socket. For 
> message-oriented sockets, care must be taken not to exceed the maximum 
> packet size of the underlying provider, which can be obtained by using 
> getsockopt to retrieve the value of socket option SO_MAX_MSG_SIZE. If the 
> data is too long to pass atomically through the underlying protocol, the 
> error WSAEMSGSIZE is returned, and no data is transmitted.

TCP is not message oriented protocol. It's connected protocol and the
above is true only for UDP in IP networks. The modified functions inside
hbinet.c we are talking about are not used for datagram protocols at all.

> The successful completion of a send does not indicate that the data was 
> successfully delivered.

Yes but it's for UDP not TCP.

> If no buffer space is available within the transport system to hold the 
> data to be transmitted, send will block unless the socket has been placed 
> in nonblocking mode. On nonblocking stream oriented sockets, the number of 
> bytes written can be between 1 and the requested length, depending on 
> buffer availability on both client and server computers. The select, 
> WSAAsyncSelect or WSAEventSelect functions can be used to determine when it 
> is possible to send more data.

And we are using select() to determinate if any data can be written/read
to/from connected socket so for us it's unimportant if it's in blocked or
unblocked mode. The OS will accept/return as much bytes as possible without
blocking application and it will return exact number of bytes transfered
between application and its internal buffer. Upper level code has to only
check this value because not all bytes can send/received.

> Calling send with a zero len parameter is permissible and will be treated 
> by implementations as successful. In such cases, send will return zero as a 
> valid value. For message-oriented sockets, a zero-length transport datagram 
> is sent.
> The flags parameter can be used to influence the behavior of the function 
> beyond the options specified for the associated socket. The semantics of 
> this function are determined by the socket options and the flags parameter. 
> The latter is constructed by using the bitwise OR operator with any of the 
> following values

Exactly but I know this definition and it does not change anything for us.
We are talking about TCP not UDP.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jul  1 12:37:25 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 12:37:23 2008
Subject: [Harbour] 2008-07-01 18:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8db98$Blat.v2.6.2$be498da4$2b44bdd042d4@127.0.0.1>

2008-07-01 18:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
     ! Fixed version checking (pass 2).
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 13:06:39 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 13:06:36 2008
Subject: [Harbour] 2008-07-01 19:05 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8db9c$Blat.v2.6.2$d3c7ddb2$1328d7eab462@127.0.0.1>

2008-07-01 19:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/whatsnew.txt
     + Added RC2 changes.
     ; Please review.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 13:08:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 13:09:37 2008
Subject: [Harbour] RC2 changes
Message-ID: <971E2651-220A-49A3-BB23-0999913FFFA7@syenar.hu>

Please comment, review:

Version 1.0.0 RC2 (2008-07-01) tag: 1.0.0RC2

General
=============================
- SVN repository cleanup in /tags and /branches
- GNU and non-GNU make system configuration moved closer to each
   other.
- Reviewed and fixed platforms issues and compiler warnings
   for the contrib area in most part.
- Enhanced contrib 64bit Windows compatibility.

Core
=============================
- __HARBOUR__ macro will now contain value in 0xAABBCC form, where
   AA, BB and CC are the major, minor and revision numbers in hex.
   This is incompatible, as in previous version .c level __HARBOUR__
   did return 0xAABB, while on .prg level it had no value.
- Deprecated hb_itemPutCPtr(). Please use hb_itemPutCLPtr() instead.
- Deprecated hb_errFuncName public var. Please use HB_ERR_FUNCNAME  
macro instead.
- Added hb_itemPutCPtr2().
- GTWVT enhancements (mark&copy, resize with mouse, palette handling,
   some event callbacks, close button control)
- Changed SetCancel() interpretation in GTWVT.
- hbpp now uses the same engine as the Harbour compiler.
- Added Set( _SET_HBOUTLOG[, <cFileName>] ), Set( _SET_HBOUTLOGINFO[,  
<cInfo>] )
   to customize GPF and memory leak logging.
- Added better GPF dumps for Windows.
- Fixed clipboard handling on Windows under certain situations.
- Optimizations and minor fixes.

Contrib
=============================
- Reviewed and fixed bugs and potential security issues in contribs.
- hbziparch updated, bugs fixed and ZipArchive library
   updated to latest version.
- Added DLL call functionality to hbw32 contrib.
- Added HB_FREADLINE(), HB_CRYPT(), HB_DECRYPT() to xhb contrib.
- Added hbtip contrib tests.
- GTWVG contrib enhancements.
- Added SQL_SPRINTF() to hbmisc contrib.
- Enhanced STRFORMAT() in hbmisc contrib.
- Enabled hbgf contrib for all (Linux, OS/2, Windows) platforms.
- Due to fixing 64bit portability problems, some functions became
   incompatible, because numeric addresses have been converted to
   pointer types:
   - hbwhat32: wndproc/dlgproc parameters in related functions.
   - hbmysql: SQLCONNECT(), SQLSTORER(), SQLUSERES()
   - hbmsql: MSQLSTORER(), MSQLLISTFI()
- Removed function CEIL() from hbmisc. Please use CEILING() from hbct
   instead.
- Optimizations and minor fixes.
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 14:21:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 14:37:34 2008
Subject: [Harbour] make_rpm.sh not successful
In-Reply-To: <20080701145116.GA16876@34-mo7-2.acn.waw.pl>
References: <200806301509.07713.tomaz.zupan@orpo.si>
	<5848A10E-5818-4EA4-A55C-076ABEFAF7EF@syenar.hu>
	<20080630135528.GA5829@34-mo7-2.acn.waw.pl>
	<DD1BA536-B53B-4E11-82AF-1C47875D4C29@syenar.hu>
	<20080701145116.GA16876@34-mo7-2.acn.waw.pl>
Message-ID: <C1C9FED7-CDE5-453A-80B6-63529227857D@syenar.hu>

Hi Przemek,

Thanks for your fixes.

There are still some irregularities left in hbodbc,
other than that I've did some hopefully final fixes
to the Makefiles. These should fix some reported
problems, too.

>> I'd appreciate if you could help, as it's extremely
>> difficult to oversee the .rpm creation.
>
> Now it should build correctly. It will be necessary to
> update also make_deb.sh and make_tgz.sh
>
>> My changes seemed humble to me, most of them should
>> have kept existing functionality (in regards to
>> the include path stuff), the rest (header file
>> installation) were clear bugs in previous revisions.
>> I'm sorry if I'm messing up something, but this is
>> exactly the part, where we need to work together.
>
> I'm not agains the general idea and many thanks for
> your work on contrib tree. Just simply some modifications
> which makes the Windows users life easier for *nix users
> create additional problem. Please note that we should keep
> an easy way to chose all necessary/possible to build contrib
> libraries from one place or adding new port will be very
> hard. Sooner or later we will add some more or less limited
> support for autoconf. It will be nice if we can keep only
> one autoconf script instead of adding it to each contrib
> directory. I understand why you want to move the environment
> testing to each contrib library and in Windows it seems to be
> even resonable for me. But when I will want to make some new
> port in POSIX OS then I would like to have an easy way to
> update only single file instead of 20. That's all.
> Once again thank you for you work on Harbour contrib libraries.

The goal is to ease things for both Windows and Linux
users. I have more experience at this moment for Windows,
but Linux is just as important.

I'm a bit "afraid" of the autoconf stuff, as I find it
a large kludge from the really few things I know about it,
hopefully I'm totally wrong. It would be nice if - even with
autoconf - we could someone keep contrib specific logic local,
and leave the generic part in one file. If this is possible
somehow.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 15:05:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 15:05:28 2008
Subject: [Harbour] 2008-07-01 20:58 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbad$Blat.v2.6.2$6ff9e0b2$2db85fcdd40e@127.0.0.1>

2008-07-01 20:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/hbinet.c
     % Recently added code fixed to use HB_ERR_FUNCNAME.
     ! Quick fix to recently added code to compile with MSVC.
       Please review, it seem that get/setsockopt() 4th parameter 
       is void* in Linux but char* in Windows.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 15:27:03 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 15:26:58 2008
Subject: [Harbour] 2008-07-01 21:25 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbb0$Blat.v2.6.2$70ec2d74$236c542bf046@127.0.0.1>

2008-07-01 21:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/vm/extrap.c
     ! Excluded GPF dumping code for Win64 and WinCE.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 15:41:32 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 15:41:28 2008
Subject: [Harbour] 2008-07-01 21:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbb2$Blat.v2.6.2$76cb3670$34dcef548e74@127.0.0.1>

2008-07-01 21:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbwhat32/_winmmcap.c
     ! #include <hbapi.h> -> #include "hbapi.h"
       Harbour headers are not system headers.

   * contrib/gtwvg/gtwvg.c
     * Commented unused code to avoid warnings.

   * contrib/hbziparch/hbziparc.c
   * contrib/hbziparch/hbzipnew.cpp
     ! Fixed BCC 5.8 warning.
     ! Removed tabs.
     * Some formatting.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Tue Jul  1 16:40:53 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  1 16:41:06 2008
Subject: R: [Harbour] A Concept to Put Bits-and-Pieces Together
Message-ID: <000401c8dbba$c600345f$0400a8c0@deltain.net>

Better use (x)harbour when refered to either component?
Can we edit text using like google notebook?


----- Messaggio originale -----
Da: Pritpal Bedi <bedipritpal@hotmail.com>
Inviato: marted? 1 luglio 2008 18.33
A: harbour@harbour-project.org <harbour@harbour-project.org>
Oggetto: [Harbour] A Concept to Put Bits-and-Pieces Together


Hello Everybody

Here I am trying to pull and put bits-and-pieces together
which might ( I do not know at least for now ) happen to 
become a one-stop repository to Harbour/xHarbour world.

http://www.vouch.info/harbour

It is just an idea to expand and refined.
Please comment.

Regards
Pritpal Bedi, INDIA-USA
-- 
View this message in context: http://www.nabble.com/A-Concept-to-Put-Bits-and-Pieces-Together-tp18220152p18220152.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Tue Jul  1 14:50:00 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 16:53:28 2008
Subject: [Harbour] 2008-07-01 20:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbab$Blat.v2.6.2$43fec11e$2afc28147004@127.0.0.1>

2008-07-01 20:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/vm/extrap.c
     ! Fixed MSVC error in new code.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Tue Jul  1 17:17:44 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  1 17:17:53 2008
Subject: [Harbour] A Concept to Put Bits-and-Pieces Together
In-Reply-To: <18220152.post@talk.nabble.com>
References: <18220152.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDCC@SRV02.deltain.net>

I suggest for compose this documentation  use Google document
http://docs.google.com/ ,
http://www.google.com/a/help/intl/en/users/dands.html
You can share document
http://www.ccmv.net/html/how2/html/google_pub.html

fast, powerful and easy to use.

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi


Hello Everybody

Here I am trying to pull and put bits-and-pieces together
which might ( I do not know at least for now ) happen to 
become a one-stop repository to Harbour/xHarbour world.

http://www.vouch.info/harbour

It is just an idea to expand and refined.
Please comment.

From harbour.01 at syenar.hu  Tue Jul  1 18:19:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 18:20:08 2008
Subject: [Harbour] A Concept to Put Bits-and-Pieces Together
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EDCC@SRV02.deltain.net>
References: <18220152.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815EDCC@SRV02.deltain.net>
Message-ID: <ADD22F02-AB9B-46EF-AB37-87B26DAFFB32@syenar.hu>

Hi Pritpal, Massimo,

I've enabled the wiki section on our sf.net page
two weeks ago, I think should have a look.

Brgds,
Viktor

On 2008.07.01., at 23:17, Massimo Belgrano wrote:

> I suggest for compose this documentation  use Google document
> http://docs.google.com/ ,
> http://www.google.com/a/help/intl/en/users/dands.html
> You can share document
> http://www.ccmv.net/html/how2/html/google_pub.html
>
> fast, powerful and easy to use.
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
>
>
> Hello Everybody
>
> Here I am trying to pull and put bits-and-pieces together
> which might ( I do not know at least for now ) happen to
> become a one-stop repository to Harbour/xHarbour world.
>
> http://www.vouch.info/harbour
>
> It is just an idea to expand and refined.
> Please comment.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Jul  1 18:25:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 18:26:46 2008
Subject: [Harbour] BUG: Win64 in non-cpp mode fails
Message-ID: <3180AFB4-AF4C-45FE-9062-6C7F4DCFA0DA@syenar.hu>

Hi all,

It fails with:
'include/hbinit.h(218) : fatal error C1189: #error :  Unknown  
initialization method.'

Brgds,
Viktor

From mbelgrano at deltain.it  Tue Jul  1 18:31:40 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  1 18:31:47 2008
Subject: [Harbour] A Concept to Put Bits-and-Pieces Together
In-Reply-To: <ADD22F02-AB9B-46EF-AB37-87B26DAFFB32@syenar.hu>
References: <18220152.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815EDCC@SRV02.deltain.net>
	<ADD22F02-AB9B-46EF-AB37-87B26DAFFB32@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDCD@SRV02.deltain.net>

For me is good (also if very limited respect google dooc)
Pritpal?
http://harbour-project.wiki.sourceforge.net/


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Wednesday, July 02, 2008 12:19 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A Concept to Put Bits-and-Pieces Together

Hi Pritpal, Massimo,

I've enabled the wiki section on our sf.net page
two weeks ago, I think should have a look.

Brgds,
Viktor

On 2008.07.01., at 23:17, Massimo Belgrano wrote:

> I suggest for compose this documentation  use Google document
> http://docs.google.com/ ,
> http://www.google.com/a/help/intl/en/users/dands.html
> You can share document
> http://www.ccmv.net/html/how2/html/google_pub.html
>
> fast, powerful and easy to use.
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
>
>
> Hello Everybody
>
> Here I am trying to pull and put bits-and-pieces together
> which might ( I do not know at least for now ) happen to
> become a one-stop repository to Harbour/xHarbour world.
>
> http://www.vouch.info/harbour
>
> It is just an idea to expand and refined.
> Please comment.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Tue Jul  1 18:34:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 18:51:11 2008
Subject: [Harbour] BUG: HB_BUILD_DLL=yes and make_vc.bat fails (repost)
Message-ID: <4BC05281-F189-4D48-8C7E-7CD1C9627881@syenar.hu>

Hi Marek and all,

See as subject. It fails on the .dll building stage
(both MSVS2005 and 2008 in both cpp and non-cpp modes)
with this:

	link.exe @C:\DOCUME~1\vszakats\LOCALS~1\Temp\nm1370.tmp
mainstd.obj : error LNK2019: unresolved external symbol _hb_vmQuit  
referenced in function _main
mainstd.obj : error LNK2019: unresolved external symbol _hb_vmInit  
referenced in function _main
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_LANG_EN
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_FWRITE
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FWRITE
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_SUBSTR
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_SUBSTR
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_LEFT
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_LEFT
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_LEFT
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_ALLTRIM
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_ALLTRIM
rt_trans.obj : error LNK2001: unresolved external symbol _HB_FUN_VAL
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_VAL
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN_VAL
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_VAL
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_VAL
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_AADD
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_AADD
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_AT
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_AT
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_LEN
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_LEN
rt_class.obj : error LNK2001: unresolved external symbol _HB_FUN_LEN
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_LEN
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN_LEN
rt_date.obj : error LNK2019: unresolved external symbol _HB_FUN_LEN  
referenced in function _HB_FUN_init_RT_INITSTATICS
rt_stra.obj : error LNK2001: unresolved external symbol _HB_FUN_LEN
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_DTOS
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_DTOS
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_STRTRAN
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_STRTRAN
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN_ERRORLEVEL
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN_DBCLOSEAREA
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN_DBSELECTAREA
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_SPACE
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_SPACE
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN_SPACE
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_SPACE
rt_stra.obj : error LNK2001: unresolved external symbol _HB_FUN_SPACE
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_PROCLINE
rt_class.obj : error LNK2001: unresolved external symbol _HB_FUN_LTRIM
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_LTRIM
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_LTRIM
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_LTRIM
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_LTRIM
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_PROCNAME
rt_class.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
rt_stra.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_STR
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_BREAK
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN_ERRORBLOCK
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_ASCAN
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_ASCAN
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_VALTYPE
rt_hvm.obj : error LNK2001: unresolved external symbol _HB_FUN_VALTYPE
rt_class.obj : error LNK2001: unresolved external symbol _HB_FUN_VALTYPE
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_DBAPPEND
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_DBUSEAREA
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_DBCREATE
rt_array.obj : error LNK2001: unresolved external symbol  
_HB_FUN_ERRORNEW
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
rt_class.obj : error LNK2001: unresolved external symbol  
_HB_FUN_ERRORNEW
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
rt_stra.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
rt_trans.obj : error LNK2001: unresolved external symbol  
_HB_FUN_ERRORNEW
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
rt_hvm.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_ERRORNEW
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN___MVPUBLIC
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_PADR
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_PADR
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_PADR
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_TIME
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_TIME
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_DATE
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_DTOC
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_DTOC
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_OS
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_COMPILER
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_FERASE
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FERASE
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_FERASE
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN___SETCENTURY
rt_trans.obj : error LNK2001: unresolved external symbol  
_HB_FUN___SETCENTURY
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_SET
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_SET
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_SET
rt_hvm.obj : error LNK2001: unresolved external symbol _HB_FUN_SET
rt_stra.obj : error LNK2001: unresolved external symbol _HB_FUN_SET
rt_trans.obj : error LNK2001: unresolved external symbol _HB_FUN_SET
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_LANGSELECT
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_VERSION
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_EMPTY
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN_EMPTY
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN___MSAVE
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN___MRESTORE
hbtest.obj : error LNK2001: unresolved external symbol  
_HB_FUN_MEMVARBLOCK
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN_MEMVARBLOCK
hbtest.obj : error LNK2001: unresolved external symbol _HB_FUN_UPPER
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_UPPER
rt_array.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_file.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_misc.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_class.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_date.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_str.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_stra.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_trans.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
hbtest.obj : error LNK2019: unresolved external symbol  
_hb_vmProcessSymbolsEx referenced in function _hb_vm_SymbolInit_HBTEST
rt_hvm.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_hvma.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_math.obj : error LNK2001: unresolved external symbol  
_hb_vmProcessSymbolsEx
rt_array.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_file.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_misc.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_class.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_date.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_str.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_stra.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_trans.obj : error LNK2001: unresolved external symbol _hb_vmExecute
hbtest.obj : error LNK2019: unresolved external symbol _hb_vmExecute  
referenced in function _HB_FUN_MAIN
rt_hvm.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_hvma.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_math.obj : error LNK2001: unresolved external symbol _hb_vmExecute
rt_hvm.obj : error LNK2001: unresolved external symbol  
_HB_FUN_TBCOLUMNNEW
rt_hvm.obj : error LNK2001: unresolved external symbol _HB_FUN_TYPE
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN_EOF
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN___MVGET
rt_hvma.obj : error LNK2001: unresolved external symbol _HB_FUN_MONTH
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_MONTH
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_MONTH
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_MOD
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_MIN
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_MAX
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_INT
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_ROUND
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_EXP
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_YEAR
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_YEAR
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_YEAR
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_ABS
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_SQRT
rt_math.obj : error LNK2001: unresolved external symbol _HB_FUN_LOG
rt_math.obj : error LNK2001: unresolved external symbol  
_HB_FUN___MVPRIVATE
rt_class.obj : error LNK2001: unresolved external symbol  
_HB_FUN___MVPRIVATE
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_CTOD
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_CDOW
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_CMONTH
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_DOW
rt_date.obj : error LNK2001: unresolved external symbol _HB_FUN_DAY
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_DAY
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_STUFF
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_PADC
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_PADL
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_PAD
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_RIGHT
rt_stra.obj : error LNK2001: unresolved external symbol _HB_FUN_RIGHT
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_REPLICATE
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN_REPLICATE
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_RAT
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_LOWER
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_RTRIM
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_RTRIM
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_TRIM
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_ISLOWER
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_ISUPPER
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_ISALPHA
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_ISDIGIT
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_ASC
rt_str.obj : error LNK2001: unresolved external symbol _HB_FUN_CHR
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_CHR
rt_stra.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_STRSHRINK
rt_stra.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_VALTOSTR
rt_stra.obj : error LNK2001: unresolved external symbol _HB_FUN_STRZERO
rt_trans.obj : error LNK2001: unresolved external symbol  
_HB_FUN_TRANSFORM
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_ARRAY
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_ASIZE
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_ATAIL
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_AINS
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_ADEL
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_AFILL
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_ASORT
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_AEVAL
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_ACLONE
rt_array.obj : error LNK2001: unresolved external symbol _HB_FUN_ACOPY
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FILE
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FOPEN
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FRENAME
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FCLOSE
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_FCLOSE
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FREADSTR
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FREAD
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FSEEK
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FERROR
rt_file.obj : error LNK2001: unresolved external symbol _HB_FUN_FCREATE
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_FCREATE
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_FNAMEMERGE
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_FNAMESPLIT
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN___OBJHASMSG
rt_class.obj : error LNK2001: unresolved external symbol  
_HB_FUN___OBJHASMSG
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_HBCLASS
rt_class.obj : error LNK2001: unresolved external symbol _HB_FUN_HBCLASS
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_MLCTOPOS
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_MEMOREAD
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_MEMOWRIT
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_MEMOTRAN
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_HARDCR
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN___RUN
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN___COPYFILE
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_L2BIN
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_I2BIN
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_BIN2L
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_BIN2W
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_BIN2I
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_FKLABEL
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_FKMAX
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_COLORINDEX
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_DESCEND
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_HB_STOD
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN_ISNEGATIVE
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_ISAFFIRM
rt_misc.obj : error LNK2001: unresolved external symbol  
_HB_FUN_NATIONMSG
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_SOUNDEX
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_TSTRING
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_SECS
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_LENNUM
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_ELAPTIME
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_DAYS
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_AMPM
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN___GET
rt_misc.obj : error LNK2001: unresolved external symbol _HB_FUN_SETCOLOR
rt_miscc.obj : error LNK2019: unresolved external symbol _hb_retnl  
referenced in function _HB_FUN_R_PASSENL
rt_miscc.obj : error LNK2019: unresolved external symbol _hb_parnl  
referenced in function _HB_FUN_R_PASSENL
rt_class.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HBOBJECT
rt_class.obj : error LNK2001: unresolved external symbol  
_HB_FUN___CLS_CNTSHRDATA
rt_class.obj : error LNK2001: unresolved external symbol  
_HB_FUN___CLS_CNTCLSDATA
rt_class.obj : error LNK2001: unresolved external symbol  
_HB_FUN_HB_GCALL
bin\vc\hbtest-dll.exe : fatal error LNK1120: 147 unresolved externals


Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 19:02:50 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 19:02:45 2008
Subject: [Harbour] 2008-07-02 01:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbce$Blat.v2.6.2$95dee87e$1860b324d024@127.0.0.1>

2008-07-02 01:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/Makefile
   * contrib/hbziparch/common.mak
   - contrib/hbziparch/hbcomprs.c
   + contrib/hbziparch/hbxdirec.c
     ! Renamed to avoid collision with an xhb contrib file.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 19:15:18 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 19:15:12 2008
Subject: [Harbour] 2008-07-02 01:13 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbd0$Blat.v2.6.2$53aababc$2b004c8ba7a0@127.0.0.1>

2008-07-02 01:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/xhb/hbcomprs.c
   * contrib/xhb/hbcomprs.h
     % Stripped yet another copy of an old embedded ZLIB version 
       from Harbour. Now xhb compatibility compression functions 
       use Harbour hbzlib.lib, thus reducing binary size and 
       avoiding security problems with old ZLIB.
     ; Now the only copy of ZLIB in Harbour is in source/hbzlib.
     % Using HB_ERR_FUNCNAME.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 19:19:34 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 19:19:28 2008
Subject: [Harbour] 2008-07-02 01:17 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbd0$Blat.v2.6.2$ec4861ca$210ce50b52de@127.0.0.1>

2008-07-02 01:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/xhb/hbchksum.c
   * contrib/xhb/hbcomprs.c
   - contrib/xhb/hbcomprs.h
   + contrib/xhb/hbcomprs.ch
     - Removed unnecessary C header.
     + Added xhb compatibility .ch header.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 18:15:31 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 19:19:48 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>

2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbzipnew.cpp
     ! Fixed a potential GPFs. (GCC warnings)

   * contrib/hbpgsql/postgres.c
   * contrib/hbwhat32/_wininet.c
     ! Fixed two const casting warnings in MSVS non-CPP mode.

   - tests/run_test.bat
   + tests/run_prg_all.bat
   - tests/gnu_test.bat
   + tests/bld_gnu.bat
   - tests/bld4dll.bat
   + tests/bld_b32_dll.bat
     + Some renames in the hope they will be easier to 
       understand, and more standard.
     ! Fixed .dll reference.

   * contrib/hbziparch/Makefile
     ! Excluded from Darwin and OS/2 builds.

   ; NOTE: The Windows build I've tried are now building relatively 
           clearly, only with the 1) known warnings 2) warnings in 
           foreign code, plus 3) quite some in contrib/hbwhat32.

           Tested compilers:
             Win32
               BCC551 - OK
               BCC582 - OK
               MSVS2005 - OK (doesn't work with set HB_BUILD_DLL=yes)
               MSVS2005cpp - OK (doesn't work with set HB_BUILD_DLL=yes)
               MSVS2008 - OK (doesn't work with set HB_BUILD_DLL=yes)
               MSVS2008cpp - OK (doesn't work with set HB_BUILD_DLL=yes)
               MinGW412 - OK
               MinGW430
             Win64
               MSVS2008
                 Fails with:
                 'include\hbinit.h(218) : fatal error C1189: #error :  Unknown initialization method.
               MSVS2008cpp - OK (doesn't work with set HB_BUILD_DLL=yes)
             Linux-Ubuntu (7.10)
               GCC413 - OK (FreeImage f.e. fails.)
             Darwin (OS X Leopard 10.5.4)
               GCC401
                 Fails with a lot of:
                 'Wrong type of codeblock parameter, is: 1, should be: 8'
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 18:24:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 19:23:52 2008
Subject: [Harbour] BUG: Darwin build fails
Message-ID: <0245B4A6-C906-4EAC-BB73-F34CD24207CF@syenar.hu>

Hi Przemek,

For some reason the latest build (but I didn't try it
since a year), will generate tons of errors like this:
'Wrong type of codeblock parameter, is: 1, should be: 8'

One such file is source/rdd/dbstrux.prg. The message
is always exactly the same as above, and comes without
any line numbers of else. The exact number of these
errors is 628.

Some RT libs (like libhbrtl.a) won't get built because
of these.

Could you take a look at it? Or is it something
on my side? I've tried with: ./make_drw.sh

OS X Leopard 10.5.4 + GCC 4.0.1

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 19:49:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 20:03:45 2008
Subject: [Harbour] 2008-07-02 01:45 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbd5$Blat.v2.6.2$18684424$1c8cea1a2458@127.0.0.1>

2008-07-02 01:45 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/make_b32_all.bat
   * contrib/make_b32_vc.bat
     * Contribs sorted by alphabet.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  1 12:35:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  1 21:02:03 2008
Subject: [Harbour] 2008-07-01 18:34 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8db98$Blat.v2.6.2$7b87b5a4$2f2c1d497c3c@127.0.0.1>

2008-07-01 18:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
     ! Fixed version checking.
--
Brgds,
Viktor

From philb at philb.us  Tue Jul  1 21:32:07 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Jul  1 21:32:11 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>
Message-ID: <200807012132.07921.philb@philb.us>

On Tuesday 01 July 2008 06:15:31 pm Szak?ts Viktor wrote:
> 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>    * contrib/hbziparch/hbzipnew.cpp
>      ! Fixed a potential GPFs. (GCC warnings)
>
>    * contrib/hbpgsql/postgres.c
>    * contrib/hbwhat32/_wininet.c
>      ! Fixed two const casting warnings in MSVS non-CPP mode.
>
>    - tests/run_test.bat
>    + tests/run_prg_all.bat
>    - tests/gnu_test.bat
>    + tests/bld_gnu.bat
>    - tests/bld4dll.bat
>    + tests/bld_b32_dll.bat
>      + Some renames in the hope they will be easier to
>        understand, and more standard.
>      ! Fixed .dll reference.
>
>    * contrib/hbziparch/Makefile
>      ! Excluded from Darwin and OS/2 builds.
>
>    ; NOTE: The Windows build I've tried are now building relatively
>            clearly, only with the 1) known warnings 2) warnings in
>            foreign code, plus 3) quite some in contrib/hbwhat32.
>
>            Tested compilers:
>              Win32
>                BCC551 - OK
>                BCC582 - OK
>                MSVS2005 - OK (doesn't work with set HB_BUILD_DLL=yes)
>                MSVS2005cpp - OK (doesn't work with set HB_BUILD_DLL=yes)
>                MSVS2008 - OK (doesn't work with set HB_BUILD_DLL=yes)
>                MSVS2008cpp - OK (doesn't work with set HB_BUILD_DLL=yes)
>                MinGW412 - OK
>                MinGW430
>              Win64
>                MSVS2008
>                  Fails with:
>                  'include\hbinit.h(218) : fatal error C1189: #error : 
> Unknown initialization method. MSVS2008cpp - OK (doesn't work with set
> HB_BUILD_DLL=yes) Linux-Ubuntu (7.10)
>                GCC413 - OK (FreeImage f.e. fails.)
>              Darwin (OS X Leopard 10.5.4)
>                GCC401
>                  Fails with a lot of:
>                  'Wrong type of codeblock parameter, is: 1, should be: 8'
> --
> Brgds,
> Viktor

Very nice work, Viktor!

-- 
Waiting for sunspots.
From lorenzo.fiorini at gmail.com  Wed Jul  2 01:54:04 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul  2 01:54:13 2008
Subject: [Harbour] contrib/hbpgsql/Makefile issue
Message-ID: <9257026e0807012254v26e1c123x3d650281f48bdd18@mail.gmail.com>

I've built trunk at 2008-07-02 01:45 UTC+0200 Viktor Szakats
(harbour.01 syenar hu) under Fedora 9 and contrib/Makefile doesn't
find postgresql include files under /usr/include since /usr/include is
not in the include dir list.

Adding /usr/include to the list fixes it.

In the "old" Makefile it worked because /usr/include is used by
default by gcc now the build continue if the include files are found.

Not a problem just a report.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Jul  2 02:33:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 02:33:32 2008
Subject: [Harbour] 2008-07-02 08:31 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc0d$Blat.v2.6.2$88e2d042$37fc3979844e@127.0.0.1>

2008-07-02 08:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbpgsql/Makefile
     ! Added /usr/include to the default dir list.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 02:35:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 02:35:58 2008
Subject: [Harbour] contrib/hbpgsql/Makefile issue
In-Reply-To: <9257026e0807012254v26e1c123x3d650281f48bdd18@mail.gmail.com>
References: <9257026e0807012254v26e1c123x3d650281f48bdd18@mail.gmail.com>
Message-ID: <AF9960BB-91C7-40F4-8B54-30F7D4136208@syenar.hu>

Hi Lorenzo,

Thanks, I've committed the fix.

Can you confirm the Darwin build problem,
or does it work for you?

Brgds,
Viktor

On 2008.07.02., at 7:54, Lorenzo Fiorini wrote:

> I've built trunk at 2008-07-02 01:45 UTC+0200 Viktor Szakats
> (harbour.01 syenar hu) under Fedora 9 and contrib/Makefile doesn't
> find postgresql include files under /usr/include since /usr/include is
> not in the include dir list.
>
> Adding /usr/include to the list fixes it.
>
> In the "old" Makefile it worked because /usr/include is used by
> default by gcc now the build continue if the include files are found.
>
> Not a problem just a report.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dmacias at mail.udg.mx  Wed Jul  2 04:23:10 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  2 04:23:12 2008
Subject: [Harbour] Re: RC2 anything pending?
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486B3AEE.1050601@mail.udg.mx>

 >Hi all,

 >We're about to release RC2, is there anything pending?

 >Also, may I ask everyone to try build under different
 >platforms to see if there is still anything not building
 >cleanly?

I tested current Harbour with OS/2 and result many messages/errors:

a) There are many lines like this ( at least 14 )
make[2]: *** No rule to make target `first'.  Stop.

Seem to be libraries/systems which does not apply to OS/2
Some catched are:
  gtwvg, hbole, hbw32, hbw32ddr, hbwhat32, hbziparch

In make_gnu.log appear like this:
------------------------------------------
[E:\harbourprerc2\harbour\contrib]make -C gtwvg first
make[2]: Entering directory `/harbourprerc2/harbour/contrib/gtwvg'
make[2]: Leaving directory `/harbourprerc2/harbour/contrib/gtwvg'
------------------------------------------

Can be replaced with behaviour for example like this ?:
------------------------------------------
[E:\harbourprerc2\harbour\doc]make -C en first
make[2]: Entering directory `/harbourprerc2/harbour/doc/en'
make[2]: Nothing to be done for `first'.
make[2]: Leaving directory `/harbourprerc2/harbour/doc/en'
------------------------------------------


b) A long list of warnings
Seem to be related to sqlite
Look below for "B portion" catched from screen

c) Error compiling tpos2.c
Look below for "C portion" catched from screen

d) libraries created:
gtcgi.a
gtos2.a
gtpca.a
gtstd.a
hbbmcdx.a
hbbtree.a
hbclipsm.a
hbcommon.a
hbcpage.a
hbcplr.a
hbct.a
hbdebug.a
hbgfos2.a
hbgt.a
hbhsx.a
hblang.a
hbmacro.a
hbmisc.a
hbmsql.a
hbmzip.a
hbnf.a
hbnulrdd.a
hbodbc.a
hbpcre.a
hbpp.a
hbrdd.a
hbrtl.a
hbsix.a
hbsqlit2.a
hbsqlit3.a
hbtip.a
hbusrrdd.a
hbvm.a
hbvpdf.a
hbzlib.a
rddado.a
rddcdx.a
rddfpt.a
rddntx.a
xhb.a


David Macias




"B portion" ===============================
../../vdbe.c:3124: warning: `pCrsr' might be used uninitialized in this 
function

../../vdbeaux.c: In function `sqliteVdbeList':
../../vdbeaux.c:556: warning: comparison between signed and unsigned
../../vdbeaux.c: In function `sqliteVdbeReset':
../../vdbeaux.c:838: warning: comparison between signed and unsigned
../../vdbeaux.c: In function `sqliteVdbeFinalize':
../../vdbeaux.c:924: warning: comparison between signed and unsigned
../../vdbeaux.c: In function `sqlite_bind':
../../vdbeaux.c:950: warning: comparison between signed and unsigned
../../where.c: In function `getMask':
../../where.c:97: warning: comparison between signed and unsigned
../../where.c: In function `sqliteWhereBegin':
../../where.c:482: warning: comparison between signed and unsigned
../../where.c:739: warning: comparison between signed and unsigned
../../where.c:867: warning: comparison between signed and unsigned
../../where.c:393: warning: `haveKey' might be used uninitialized in 
this functi
on
../../where.c:951: warning: `leFlag' might be used uninitialized in this 
functio
n
../../where.c:951: warning: `geFlag' might be used uninitialized in this 
functio
n

../../sqlite3/sqlite3.c: In function `sqlite3RunVacuum':
../../sqlite3/sqlite3.c:69145: warning: comparison between signed and 
unsigned
../../sqlite3/sqlite3.c: In function `sqlite3VtabUnlock':
../../sqlite3/sqlite3.c:69286: warning: comparison between signed and 
unsigned
../../sqlite3/sqlite3.c: In function `bestVirtualIndex':
../../sqlite3/sqlite3.c:71291: warning: empty body in an if-statement
../../sqlite3/sqlite3.c:71341: warning: empty body in an if-statement
../../sqlite3/sqlite3.c: In function `bestIndex':
../../sqlite3/sqlite3.c:71679: warning: comparison between signed and 
unsigned
../../sqlite3/sqlite3.c: In function `sqlite3WhereBegin':
../../sqlite3/sqlite3.c:72043: warning: comparison between signed and 
unsigned
../../sqlite3/sqlite3.c:72292: warning: comparison between signed and 
unsigned
../../sqlite3/sqlite3.c: In function `yyStackOverflow':
../../sqlite3/sqlite3.c:74484: warning: unused parameter `yypMinor'
../../sqlite3/sqlite3.c: In function `yy_syntax_error':
../../sqlite3/sqlite3.c:75943: warning: unused parameter `yymajor'
In file included from ../../hbsqlit3.c:45:
../../sqlite3/sqlite3.c: In function `nocaseCollatingFunc':
../../sqlite3/sqlite3.c:77161: warning: unused parameter `NotUsed'
../../hbsqlit3.c: At top level:
../../sqlite3/sqlite3.c:6753: warning: `sqlite3BtreeHoldsMutex' declared 
`static
' but never defined
../../sqlite3/sqlite3.c:6758: warning: `sqlite3BtreeHoldsAllMutexes' 
declared `s
tatic' but never defined


"C portion" ===============================

../../tpos2.c:164: error: `rxqueue' undeclared (first use in this function)
../../tpos2.c: In function `HB_FUN_P_ISDCD':
../../tpos2.c:175: error: `IOCTL_ASYNC' undeclared (first use in this 
function)
../../tpos2.c:175: error: `ASYNC_GETMODEMINPUT' undeclared (first use in 
this fu
nction)
../../tpos2.c:177: error: `DCD_ON' undeclared (first use in this function)
../../tpos2.c: In function `HB_FUN_P_ISRI':
../../tpos2.c:186: error: `IOCTL_ASYNC' undeclared (first use in this 
function)
../../tpos2.c:186: error: `ASYNC_GETMODEMINPUT' undeclared (first use in 
this fu
nction)
../../tpos2.c:188: error: `RI_ON' undeclared (first use in this function)
../../tpos2.c: In function `HB_FUN_P_ISDSR':
../../tpos2.c:197: error: `IOCTL_ASYNC' undeclared (first use in this 
function)
../../tpos2.c:197: error: `ASYNC_GETMODEMINPUT' undeclared (first use in 
this fu
nction)
../../tpos2.c:199: error: `DSR_ON' undeclared (first use in this function)
../../tpos2.c: In function `HB_FUN_P_ISCTS':
../../tpos2.c:208: error: `IOCTL_ASYNC' undeclared (first use in this 
function)
../../tpos2.c:208: error: `ASYNC_GETMODEMINPUT' undeclared (first use in 
this fu
nction)
../../tpos2.c:210: error: `CTS_ON' undeclared (first use in this function)
make[3]: *** [tpos2.o] Error 1
make[2]: *** [descend] Error 2


From harbour.01 at syenar.hu  Wed Jul  2 04:39:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 04:44:42 2008
Subject: [Harbour] Re: RC2 anything pending?
In-Reply-To: <486B3AEE.1050601@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<486B3AEE.1050601@mail.udg.mx>
Message-ID: <0B5AE422-8420-4426-8823-B9B8A971B635@syenar.hu>

Hi David,

> I tested current Harbour with OS/2 and result many messages/errors:
>
> a) There are many lines like this ( at least 14 )
> make[2]: *** No rule to make target `first'.  Stop.
>
> Seem to be libraries/systems which does not apply to OS/2
> Some catched are:
> gtwvg, hbole, hbw32, hbw32ddr, hbwhat32, hbziparch
>
> In make_gnu.log appear like this:
> ------------------------------------------
> [E:\harbourprerc2\harbour\contrib]make -C gtwvg first
> make[2]: Entering directory `/harbourprerc2/harbour/contrib/gtwvg'
> make[2]: Leaving directory `/harbourprerc2/harbour/contrib/gtwvg'
> ------------------------------------------

This is normal.

> Can be replaced with behaviour for example like this ?:
> ------------------------------------------
> [E:\harbourprerc2\harbour\doc]make -C en first
> make[2]: Entering directory `/harbourprerc2/harbour/doc/en'
> make[2]: Nothing to be done for `first'.
> make[2]: Leaving directory `/harbourprerc2/harbour/doc/en'
> ------------------------------------------

Maybe, but I won't start experimenting with it,
since it's far from critical (rather cosmetic),
and the solution isn't very obvious, plus I would
need to retest and refix all platforms. Maybe
after 1.0, if someone has enough drive and
GNU-make experience for it.

> b) A long list of warnings
> Seem to be related to sqlite
> Look below for "B portion" catched from screen

Yes, unfortunately foreign code throws lots of
warnings.

You can try to suppress them with #pragma's
on your OS/2 C compiler. Look at the top of
contrib/hbsqlit3/hbsqlit3.c.

> c) Error compiling tpos2.c
> Look below for "C portion" catched from screen
>
> "C portion" ===============================
>
> ../../tpos2.c:164: error: `rxqueue' undeclared (first use in this  
> function)
> ../../tpos2.c: In function `HB_FUN_P_ISDCD':
> ../../tpos2.c:175: error: `IOCTL_ASYNC' undeclared (first use in  
> this function)
> ../../tpos2.c:175: error: `ASYNC_GETMODEMINPUT' undeclared (first  
> use in this fu
> nction)
> ../../tpos2.c:177: error: `DCD_ON' undeclared (first use in this  
> function)
> ../../tpos2.c: In function `HB_FUN_P_ISRI':
> ../../tpos2.c:186: error: `IOCTL_ASYNC' undeclared (first use in  
> this function)
> ../../tpos2.c:186: error: `ASYNC_GETMODEMINPUT' undeclared (first  
> use in this fu
> nction)
> ../../tpos2.c:188: error: `RI_ON' undeclared (first use in this  
> function)
> ../../tpos2.c: In function `HB_FUN_P_ISDSR':
> ../../tpos2.c:197: error: `IOCTL_ASYNC' undeclared (first use in  
> this function)
> ../../tpos2.c:197: error: `ASYNC_GETMODEMINPUT' undeclared (first  
> use in this fu
> nction)
> ../../tpos2.c:199: error: `DSR_ON' undeclared (first use in this  
> function)
> ../../tpos2.c: In function `HB_FUN_P_ISCTS':
> ../../tpos2.c:208: error: `IOCTL_ASYNC' undeclared (first use in  
> this function)
> ../../tpos2.c:208: error: `ASYNC_GETMODEMINPUT' undeclared (first  
> use in this fu
> nction)
> ../../tpos2.c:210: error: `CTS_ON' undeclared (first use in this  
> function)

Try to add '#define INCL_DOSDEVICES' to the top of the file
and see if it changes anything. If not, someone familiar with
OS/2 will have to fix it.

Brgds,
Viktor

From mpaliwoda at interia.pl  Wed Jul  2 04:47:52 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  2 04:47:56 2008
Subject: [Harbour] BUG: HB_BUILD_DLL=yes and make_vc.bat fails (repost)
Message-ID: <20080702084752.ADDFE386C44@f02.poczta.interia.pl>

> Hi Marek and all,
> 
> See as subject. It fails on the .dll building stage
> (both MSVS2005 and 2008 in both cpp and non-cpp modes)

It does EXACTLY what YOU TOLD it to do. You've broken
MSVC builds and now you're saying : "it does not work !".

Sorry, it's up to you to fix it, since I find it quite 
hard to cooperate with you. That's why I decided to lower 
my engagement in Harbour. The fix is quite easy. You're 
absoluty capable to find it yourself. 

In case you're not too capable - here is a hint : 
-DWIN32 in makefile, or better fix hbdefs.h instead.



----------------------------------------------------------------------
Pogoda na dzis.
Sprawdz >>> http://link.interia.pl/f1e42

From miguelangel at marchuet.net  Wed Jul  2 04:53:50 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 04:49:30 2008
Subject: [Harbour] 2008-07-02 10:52 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <486B421E.1070804@marchuet.net>

2008-07-02 10:52 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
    * contrib/hbziparch/hbziparc.c
      * corrected library name in comments.

Best regards,
Miguel Angel Marchuet
From harbour.01 at syenar.hu  Tue Jul  1 16:11:37 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 04:53:00 2008
Subject: [Harbour] 2008-07-01 22:10 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dbb6$Blat.v2.6.2$aaad1fa4$21ccd00641fe@127.0.0.1>

2008-07-01 22:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtwvt/gtwvt.c
   * contrib/gtwvg/gtwvg.c
     ! Fixed MSVC warnings.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 05:04:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 05:05:10 2008
Subject: [Harbour] BUG: HB_BUILD_DLL=yes and make_vc.bat fails (repost)
In-Reply-To: <20080702084752.ADDFE386C44@f02.poczta.interia.pl>
References: <20080702084752.ADDFE386C44@f02.poczta.interia.pl>
Message-ID: <3069E466-0A07-4DB8-88B2-F67D77559175@syenar.hu>

Hi Marek,

Yes, I know I do nothing else but breaking
things in Harbour, but nevertheless I'd
appreciate if you could help, just like I
used to do when I'm fixing loads of things
"broken" by other developers.

You bet that when I happen to break anything,
this is not my goal (neither is the goal of
anyone else doing mistakes), and it's definitely
not an attack against you, or your competence.

I've found 2008-05-27 04:15 where I've removed
WIN32, __WIN32__, __WINDOWS__ from *vc.mak files.

So, if you say we need WIN32 from this list,
I still wonder about the reason, could you tell
some words about it? Or how to fix this properly
in hbdefs.h?

BTW, I don't know what purpose does it serve
to insult me personally in your messages,
I don't think I've ever did that (rather the
contrary), in my messages towards you. [ If I
did, sorry, I certainly didn't mean it. ]

Nice to see you anyways, and we all miss your
contributions, I definitely do.

Brgds,
Viktor

On 2008.07.02., at 10:47, Marek Paliwoda wrote:

>> Hi Marek and all,
>>
>> See as subject. It fails on the .dll building stage
>> (both MSVS2005 and 2008 in both cpp and non-cpp modes)
>
> It does EXACTLY what YOU TOLD it to do. You've broken
> MSVC builds and now you're saying : "it does not work !".
>
> Sorry, it's up to you to fix it, since I find it quite
> hard to cooperate with you. That's why I decided to lower
> my engagement in Harbour. The fix is quite easy. You're
> absoluty capable to find it yourself.
>
> In case you're not too capable - here is a hint :
> -DWIN32 in makefile, or better fix hbdefs.h instead.
>
>
>
> ----------------------------------------------------------------------
> Pogoda na dzis.
> Sprawdz >>> http://link.interia.pl/f1e42
>

From miguelangel at marchuet.net  Wed Jul  2 05:13:07 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 05:08:50 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>
Message-ID: <486B46A3.20901@marchuet.net>

Sorry Szakats, I see that you removed EXIT function.

HB_FUNC_EXIT( HBZIPCLEANUP )

this function is called at XHARBOUR on exit application

Are you saying that harbour don't executes HB_FUNC_EXIT functions never ?

or I don't understand anything ?

Best regards,
Miguel Angel marchuet

From harbour.01 at syenar.hu  Wed Jul  2 05:19:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 05:20:07 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <486B46A3.20901@marchuet.net>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>
	<486B46A3.20901@marchuet.net>
Message-ID: <E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>

>
Hi Miguel,

> Sorry Szakats, I see that you removed EXIT function.
>
> HB_FUNC_EXIT( HBZIPCLEANUP )
>
> this function is called at XHARBOUR on exit application
>
> Are you saying that harbour don't executes HB_FUNC_EXIT functions  
> never ?
>
> or I don't understand anything ?

HB_EXIT_FUNC() is indeed used by the compiler to mark
EXIT PROC/FUNCs as such, but it's part of a broader logic.
Used like this - by itself -, it never gets executed.

It was actually reported by all compilers as unused static
function, which it was.

[ I wouldn't be surprised if HB_EXIT_FUNC() wouldn't be called
in xhb either, but I didn't check. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 05:23:47 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 05:23:56 2008
Subject: [Harbour] 2008-07-02 11:21 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc25$Blat.v2.6.2$54efe17c$2fc886b55492@127.0.0.1>

2008-07-02 11:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbdefs.h
     ! Fixed DLL creation for MSVC (and maybe compilers, too).
       Thanks to Marek Paliwoda for the hint.

   * contrib/hbtpathy/tpos2.c
     ! Blind attempt to fix OS/2 compile error.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  2 05:34:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 05:34:52 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>
	<486B46A3.20901@marchuet.net>
	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>
Message-ID: <20080702093447.GA5301@34-mo7-2.acn.waw.pl>

On Wed, 02 Jul 2008, Szak?ts Viktor wrote:
> HB_EXIT_FUNC() is indeed used by the compiler to mark
> EXIT PROC/FUNCs as such, but it's part of a broader logic.
> Used like this - by itself -, it never gets executed.
> It was actually reported by all compilers as unused static
> function, which it was.
> [ I wouldn't be surprised if HB_EXIT_FUNC() wouldn't be called
> in xhb either, but I didn't check. ]

Yes. Neither Harbour not xHarbour execute HB_EXIT_FUNC() and/or
HB_INIT_FUNC() automatically. HB_EXIT_FUNC/HB_INIT_FUNC are only
macros to define special unique names for compiler but they not
cause that anything will be executed.

The HB_EXIT_FUNC removed from hbziparch library from the beginning
was dummy code never executed in both project.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul  2 05:40:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 05:41:37 2008
Subject: [Harbour] RC2 checklist
Message-ID: <E95DB401-ED1A-43AE-84E3-D480E4F02659@syenar.hu>

Pending, critical:

- Darwin Harbour compiler problem.

Pending, non-critical:

- OS/2 hbtpathy.lib fails. (long-time problem)
- 64bit C-mode startup not implemented in hbinit.h.

Postponed:

- FreeImage under Linux fails.

Cleared:

- .dll creation with all MSVC compilers. Thanks Marek!

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  2 05:58:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 05:58:04 2008
Subject: [Harbour] 2008-07-02 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807020958.m629w0SL016066@31-mo5-4.acn.waw.pl>

2008-07-02 11:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/xhb/Makefile
  * harbour/contrib/xhb/common.mak
  - harbour/contrib/xhb/hbchksum.c
    * removed HB_CHECKSUM() code - it's not necessary

  * harbour/contrib/xhb/xhbfunc.c
    + redirected HB_CHECKSUM() to HB_ADLER32()

  * harbour/source/rtl/gtwvt/gtwvt.c
    ! fixed WINCE builds. It was only for MiGWCE which partially emulates
      GetSystemMenu() but probably other builds will report that this
      function is missing.
      If possible please test if current Harbour application can be
      executed in real WinCE environment.

  * harbour/make_deb.sh
    * updated contrib library list

  * harbour/contrib/hbmysql/mysql.c
    ! fixed compilation for older MYSQL versions

  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/gtwvg/wvgutils.c
    ! fixed UNICODE builds

  + harbour/config/none.cf
    + added dummy header file for GNU make to avoid errors on unsupported
      platforms

  * harbour/contrib/hbw32ddr/Makefile
  * harbour/contrib/hbmysql/Makefile
  * harbour/contrib/hbodbc/Makefile
  * harbour/contrib/hbwhat32/Makefile
  * harbour/contrib/hbtpathy/Makefile
  * harbour/contrib/hbw32/Makefile
  * harbour/contrib/hbole/Makefile
  * harbour/contrib/hbapollo/Makefile
  * harbour/contrib/hbfbird/Makefile
  * harbour/contrib/hbziparch/Makefile
  * harbour/contrib/hbcurl/Makefile
  * harbour/contrib/hbhpdf/Makefile
  * harbour/contrib/rddado/Makefile
  * harbour/contrib/gtwvg/Makefile
  * harbour/contrib/hbpgsql/Makefile
  * harbour/contrib/rddads/Makefile
  * harbour/contrib/hbfimage/Makefile
  * harbour/contrib/hbgd/Makefile
  * harbour/contrib/hbgf/hbgfw32/Makefile
  * harbour/contrib/hbgf/hbgfos2/Makefile
  * harbour/contrib/hbgf/hbgfgtk/Makefile
  * harbour/contrib/hbtip/Makefile
  * harbour/contrib/hbbmcdx/Makefile
    * updated to not generate errors for unsupported builds

best regards
Przemek
From miguelangel at marchuet.net  Wed Jul  2 06:08:44 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 06:04:22 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080702093447.GA5301@34-mo7-2.acn.waw.pl>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>	<486B46A3.20901@marchuet.net>	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>
	<20080702093447.GA5301@34-mo7-2.acn.waw.pl>
Message-ID: <486B53AC.4060505@marchuet.net>

Przemyslaw Czerpak escribi?:
> On Wed, 02 Jul 2008, Szak?ts Viktor wrote:
>> HB_EXIT_FUNC() is indeed used by the compiler to mark
>> EXIT PROC/FUNCs as such, but it's part of a broader logic.
>> Used like this - by itself -, it never gets executed.
>> It was actually reported by all compilers as unused static
>> function, which it was.
>> [ I wouldn't be surprised if HB_EXIT_FUNC() wouldn't be called
>> in xhb either, but I didn't check. ]
> 
> Yes. Neither Harbour not xHarbour execute HB_EXIT_FUNC() and/or
> HB_INIT_FUNC() automatically. HB_EXIT_FUNC/HB_INIT_FUNC are only
> macros to define special unique names for compiler but they not
> cause that anything will be executed.
> 
> The HB_EXIT_FUNC removed from hbziparch library from the beginning
> was dummy code never executed in both project.
> 


False i test it at xharbour with OutputDebugString and is executed at end of application

I this is because has the next lines:

#define __PRG_SOURCE__ (char*) "zip.c"
#ifdef HB_PCODE_VER
#  undef HB_PRG_PCODE_VER
#  define HB_PRG_PCODE_VER HB_PCODE_VER
#endif

HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
{ (char*) "HBZIPCLEANUP$", {HB_FS_EXIT | HB_FS_LOCAL}, {HB_EXIT_FUNCNAME( HBZIPCLEANUP )}, &ModuleFakeDyn }
HB_INIT_SYMBOLS_END( hbzip_CLEANUP )

#if defined(HB_PRAGMA_STARTUP)
    #pragma startup hbzip_CLEANUP
#elif defined(HB_MSC_STARTUP)
    #if _MSC_VER >= 1010
       #pragma data_seg( ".CRT$XIY" )
       #pragma comment( linker, "/Merge:.CRT=.data" )
    #else
       #pragma data_seg( "XIY" )
    #endif
    static HB_$INITSYM hb_vm_auto_SymbolInit_INIT = hbzip_CLEANUP;
    #pragma data_seg()
#endif

From harbour.01 at syenar.hu  Wed Jul  2 06:11:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 06:12:24 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <486B53AC.4060505@marchuet.net>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>	<486B46A3.20901@marchuet.net>	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>
	<20080702093447.GA5301@34-mo7-2.acn.waw.pl>
	<486B53AC.4060505@marchuet.net>
Message-ID: <7F16C59B-EB40-48D9-AB66-FE8002AA3450@syenar.hu>

Hi Miguel,

Yes, with the extra lines, the logic is complete,
and it should work.

The problem is that these lines were not added
to Harbour.

Brgds,
Viktor

On 2008.07.02., at 12:08, Miguel Angel Marchuet wrote:

> Przemyslaw Czerpak escribi?:
>> On Wed, 02 Jul 2008, Szak?ts Viktor wrote:
>>> HB_EXIT_FUNC() is indeed used by the compiler to mark
>>> EXIT PROC/FUNCs as such, but it's part of a broader logic.
>>> Used like this - by itself -, it never gets executed.
>>> It was actually reported by all compilers as unused static
>>> function, which it was.
>>> [ I wouldn't be surprised if HB_EXIT_FUNC() wouldn't be called
>>> in xhb either, but I didn't check. ]
>> Yes. Neither Harbour not xHarbour execute HB_EXIT_FUNC() and/or
>> HB_INIT_FUNC() automatically. HB_EXIT_FUNC/HB_INIT_FUNC are only
>> macros to define special unique names for compiler but they not
>> cause that anything will be executed.
>> The HB_EXIT_FUNC removed from hbziparch library from the beginning
>> was dummy code never executed in both project.
>
>
> False i test it at xharbour with OutputDebugString and is executed  
> at end of application
>
> I this is because has the next lines:
>
> #define __PRG_SOURCE__ (char*) "zip.c"
> #ifdef HB_PCODE_VER
> #  undef HB_PRG_PCODE_VER
> #  define HB_PRG_PCODE_VER HB_PCODE_VER
> #endif
>
> HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
> { (char*) "HBZIPCLEANUP$", {HB_FS_EXIT | HB_FS_LOCAL},  
> {HB_EXIT_FUNCNAME( HBZIPCLEANUP )}, &ModuleFakeDyn }
> HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
>
> #if defined(HB_PRAGMA_STARTUP)
>   #pragma startup hbzip_CLEANUP
> #elif defined(HB_MSC_STARTUP)
>   #if _MSC_VER >= 1010
>      #pragma data_seg( ".CRT$XIY" )
>      #pragma comment( linker, "/Merge:.CRT=.data" )
>   #else
>      #pragma data_seg( "XIY" )
>   #endif
>   static HB_$INITSYM hb_vm_auto_SymbolInit_INIT = hbzip_CLEANUP;
>   #pragma data_seg()
> #endif
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From miguelangel at marchuet.net  Wed Jul  2 06:21:25 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 06:17:00 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <7F16C59B-EB40-48D9-AB66-FE8002AA3450@syenar.hu>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>	<486B46A3.20901@marchuet.net>	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>	<20080702093447.GA5301@34-mo7-2.acn.waw.pl>	<486B53AC.4060505@marchuet.net>
	<7F16C59B-EB40-48D9-AB66-FE8002AA3450@syenar.hu>
Message-ID: <486B56A5.6020900@marchuet.net>

I prefer to add it and forgot to call manually to this function.


Can I add it ?

>>
>> #define __PRG_SOURCE__ (char*) "zip.c"
>> #ifdef HB_PCODE_VER
>> #  undef HB_PRG_PCODE_VER
>> #  define HB_PRG_PCODE_VER HB_PCODE_VER
>> #endif
>>
>> HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
>> { (char*) "HBZIPCLEANUP$", {HB_FS_EXIT | HB_FS_LOCAL}, 
>> {HB_EXIT_FUNCNAME( HBZIPCLEANUP )}, &ModuleFakeDyn }
>> HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
>>
>> #if defined(HB_PRAGMA_STARTUP)
>>   #pragma startup hbzip_CLEANUP
>> #elif defined(HB_MSC_STARTUP)
>>   #if _MSC_VER >= 1010
>>      #pragma data_seg( ".CRT$XIY" )
>>      #pragma comment( linker, "/Merge:.CRT=.data" )
>>   #else
>>      #pragma data_seg( "XIY" )
>>   #endif
>>   static HB_$INITSYM hb_vm_auto_SymbolInit_INIT = hbzip_CLEANUP;
>>   #pragma data_seg()
>> #endif
>>


Best regards,
Miguel Angel Marchuet
From harbour.01 at syenar.hu  Wed Jul  2 06:22:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 06:23:42 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <486B56A5.6020900@marchuet.net>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>	<486B46A3.20901@marchuet.net>	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>	<20080702093447.GA5301@34-mo7-2.acn.waw.pl>	<486B53AC.4060505@marchuet.net>
	<7F16C59B-EB40-48D9-AB66-FE8002AA3450@syenar.hu>
	<486B56A5.6020900@marchuet.net>
Message-ID: <B30F4F6E-5229-42DF-A038-F240A0A0072B@syenar.hu>

It looks a bit hackish, but if there is no other way to
solve this, I think you should commit it.

Brgds,
Viktor

On 2008.07.02., at 12:21, Miguel Angel Marchuet wrote:

> I prefer to add it and forgot to call manually to this function.
>
>
> Can I add it ?
>
>>>
>>> #define __PRG_SOURCE__ (char*) "zip.c"
>>> #ifdef HB_PCODE_VER
>>> #  undef HB_PRG_PCODE_VER
>>> #  define HB_PRG_PCODE_VER HB_PCODE_VER
>>> #endif
>>>
>>> HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
>>> { (char*) "HBZIPCLEANUP$", {HB_FS_EXIT | HB_FS_LOCAL},  
>>> {HB_EXIT_FUNCNAME( HBZIPCLEANUP )}, &ModuleFakeDyn }
>>> HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
>>>
>>> #if defined(HB_PRAGMA_STARTUP)
>>>  #pragma startup hbzip_CLEANUP
>>> #elif defined(HB_MSC_STARTUP)
>>>  #if _MSC_VER >= 1010
>>>     #pragma data_seg( ".CRT$XIY" )
>>>     #pragma comment( linker, "/Merge:.CRT=.data" )
>>>  #else
>>>     #pragma data_seg( "XIY" )
>>>  #endif
>>>  static HB_$INITSYM hb_vm_auto_SymbolInit_INIT = hbzip_CLEANUP;
>>>  #pragma data_seg()
>>> #endif
>>>
>
>
> Best regards,
> Miguel Angel Marchuet
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Wed Jul  2 06:25:38 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  2 06:26:29 2008
Subject: [Harbour] Re: BUG: HB_BUILD_DLL=yes and make_vc.bat fails (repost)
In-Reply-To: <3069E466-0A07-4DB8-88B2-F67D77559175@syenar.hu>
References: <20080702084752.ADDFE386C44@f02.poczta.interia.pl>
	<3069E466-0A07-4DB8-88B2-F67D77559175@syenar.hu>
Message-ID: <486B57A2.504@interia.pl>

Viktor,

[Quotes reordered]

 > BTW, I don't know what purpose does it serve
 > to insult me personally in your messages,
 > I don't think I've ever did that (rather the
 > contrary), in my messages towards you. [ If I
 > did, sorry, I certainly didn't mean it. ]

You are absolutly right. My post was a kind of
a personal attack and it was meant to be so :).
And after posting it I feel a lot better ;-).

To clarify things to all others - I *very much*
(and when I say "very much" I really mean "*very
much*") appreciate your contributions. In fact
whithout you - Harbour would be dead long ago.

But there are areas where I do not agree with
your solutions at all. And in those areas you
force your solutions without listening to any
(even resonable) arguments. That's why I find
it hard to contribute something usefull to
Harbour at a moment (besides others, much more
important, private healthy problems, which are
still valid unfortunately).

> Yes, I know I do nothing else but breaking
> things in Harbour, but nevertheless I'd
> appreciate if you could help, just like I
> used to do when I'm fixing loads of things
> "broken" by other developers.

See above.

> You bet that when I happen to break anything,
> this is not my goal (neither is the goal of
> anyone else doing mistakes), and it's definitely
> not an attack against you, or your competence.

I never had a feeling you want to impair my
competence. I rather had a feeling you want
to have a final word. That's a difference :).

> I've found 2008-05-27 04:15 where I've removed
> WIN32, __WIN32__, __WINDOWS__ from *vc.mak files.
> 
> So, if you say we need WIN32 from this list,
> I still wonder about the reason, could you tell
> some words about it? Or how to fix this properly
> in hbdefs.h?

"hbdefs.h" has the following :

#if defined( __EXPORT__ )
    #if defined( __RSXNT__ )
       /* RSXNT does not support any type of export keyword.
          Exported (i.e., public) names can be obtained via
          the emxexp utility and the output can be used for
          input to a module definition file. See emxdev.doc
          in the RSXNT doc/ directory for more information. */
       #define HB_EXPORT

    #elif defined( __GNUC__ ) && defined( HB_OS_WIN_32 )
       #define HB_EXPORT __attribute__ (( dllexport ))

    #elif defined( __GNUC__ ) && defined( HB_OS_LINUX )
       #define HB_EXPORT __attribute__ ((visibility ("default")))

    #elif defined( __BORLANDC__ )
       #define HB_EXPORT __declspec( dllexport )

    #elif defined( __WATCOMC__ )
       #define HB_EXPORT __declspec( dllexport )

    #elif defined( ASANLM ) || defined( ASANT )
       #define HB_EXPORT

    #elif defined( WIN32 )
       #define HB_EXPORT _declspec( dllexport )

    #else
       #define HB_EXPORT

    #endif
#else
    #define HB_EXPORT
#endif


As you can see MSVC is not explicitly listed in the above.
Instead it relies on #elif defined( WIN32 ) path.

AFAIK In MSVC WIN32 is not required to be always defined.
Only _WIN32 is guaraneed to be always defined (I may be
wrong here). Either way it is better to explicitly define
HB_EXPORT for MSVC in the above also.

-- 

Marek

From harbour.01 at syenar.hu  Wed Jul  2 06:30:39 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 06:30:43 2008
Subject: [Harbour] 2008-07-02 12:29 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc2e$Blat.v2.6.2$ac251e90$2facd9b8adce@127.0.0.1>

2008-07-02 12:29 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbapollo/make_b32.bat
   * contrib/hbapollo/make_vc.bat
   * contrib/hbcurl/make_b32.bat
   * contrib/hbcurl/make_vc.bat
   * contrib/hbfbird/make_b32.bat
   * contrib/hbfbird/make_vc.bat
   * contrib/hbfimage/make_b32.bat
   * contrib/hbfimage/make_vc.bat
   * contrib/hbgd/make_b32.bat
   * contrib/hbgd/make_vc.bat
   * contrib/hbhpdf/make_b32.bat
   * contrib/hbhpdf/make_vc.bat
   * contrib/hbmysql/make_b32.bat
   * contrib/hbmysql/make_vc.bat
   * contrib/hbpgsql/make_b32.bat
   * contrib/hbpgsql/make_vc.bat
   * contrib/rddads/make_b32.bat
   * contrib/rddads/make_vc.bat
     ! Fixed previous modification. More to come.
--
Brgds,
Viktor

From miguelangel at marchuet.net  Wed Jul  2 06:40:42 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 06:36:17 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <B30F4F6E-5229-42DF-A038-F240A0A0072B@syenar.hu>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>	<486B46A3.20901@marchuet.net>	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>	<20080702093447.GA5301@34-mo7-2.acn.waw.pl>	<486B53AC.4060505@marchuet.net>	<7F16C59B-EB40-48D9-AB66-FE8002AA3450@syenar.hu>	<486B56A5.6020900@marchuet.net>
	<B30F4F6E-5229-42DF-A038-F240A0A0072B@syenar.hu>
Message-ID: <486B5B2A.4000905@marchuet.net>

MORE OR LESS rdd uses the same system to add INIT functions

HB_INIT_SYMBOLS_BEGIN( dbfcdx1__InitSymbols )
{ "DBFCDX",              {HB_FS_PUBLIC|HB_FS_LOCAL}, {HB_FUNCNAME( DBFCDX )}, NULL },
{ "DBFCDX_GETFUNCTABLE", {HB_FS_PUBLIC|HB_FS_LOCAL}, {HB_FUNCNAME( DBFCDX_GETFUNCTABLE )}, NULL }
HB_INIT_SYMBOLS_END( dbfcdx1__InitSymbols )

HB_CALL_ON_STARTUP_BEGIN( _hb_dbfcdx_rdd_init_ )
    hb_vmAtInit( hb_dbfcdxRddInit, NULL );
HB_CALL_ON_STARTUP_END( _hb_dbfcdx_rdd_init_ )

#if defined(HB_PRAGMA_STARTUP)
#  pragma startup dbfcdx1__InitSymbols
#  pragma startup _hb_dbfcdx_rdd_init_
#elif defined(HB_MSC_STARTUP)
#  if _MSC_VER >= 1010
#     pragma data_seg( ".CRT$XIY" )
#     pragma comment( linker, "/Merge:.CRT=.data" )
#  else
#     pragma data_seg( "XIY" )
#  endif
    static HB_$INITSYM hb_vm_auto_dbfcdx1__InitSymbols = dbfcdx1__InitSymbols;
    static HB_$INITSYM hb_vm_auto_dbfcdx_rdd_init = _hb_dbfcdx_rdd_init_;
#  pragma data_seg()
#endif

Best regards,
Miguel Angel Marchuet


Szak?ts Viktor escribi?:
> It looks a bit hackish, but if there is no other way to
> solve this, I think you should commit it.
> 
> Brgds,
> Viktor
> 
> On 2008.07.02., at 12:21, Miguel Angel Marchuet wrote:
> 
>> I prefer to add it and forgot to call manually to this function.
>>
>>
>> Can I add it ?
>>
>>>>
>>>> #define __PRG_SOURCE__ (char*) "zip.c"
>>>> #ifdef HB_PCODE_VER
>>>> #  undef HB_PRG_PCODE_VER
>>>> #  define HB_PRG_PCODE_VER HB_PCODE_VER
>>>> #endif
>>>>
>>>> HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
>>>> { (char*) "HBZIPCLEANUP$", {HB_FS_EXIT | HB_FS_LOCAL}, 
>>>> {HB_EXIT_FUNCNAME( HBZIPCLEANUP )}, &ModuleFakeDyn }
>>>> HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
>>>>
>>>> #if defined(HB_PRAGMA_STARTUP)
>>>>  #pragma startup hbzip_CLEANUP
>>>> #elif defined(HB_MSC_STARTUP)
>>>>  #if _MSC_VER >= 1010
>>>>     #pragma data_seg( ".CRT$XIY" )
>>>>     #pragma comment( linker, "/Merge:.CRT=.data" )
>>>>  #else
>>>>     #pragma data_seg( "XIY" )
>>>>  #endif
>>>>  static HB_$INITSYM hb_vm_auto_SymbolInit_INIT = hbzip_CLEANUP;
>>>>  #pragma data_seg()
>>>> #endif
>>>>
>>
>>
>> Best regards,
>> Miguel Angel Marchuet
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From harbour.01 at syenar.hu  Wed Jul  2 06:38:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 06:39:40 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <486B5B2A.4000905@marchuet.net>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>	<486B46A3.20901@marchuet.net>	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>	<20080702093447.GA5301@34-mo7-2.acn.waw.pl>	<486B53AC.4060505@marchuet.net>	<7F16C59B-EB40-48D9-AB66-FE8002AA3450@syenar.hu>	<486B56A5.6020900@marchuet.net>
	<B30F4F6E-5229-42DF-A038-F240A0A0072B@syenar.hu>
	<486B5B2A.4000905@marchuet.net>
Message-ID: <0DB8F0B8-207C-4298-B4B6-BC07B62B01F4@syenar.hu>

Okay, this way it's perfect, because the PCODE version hack is missing.

Brgds,
Viktor

On 2008.07.02., at 12:40, Miguel Angel Marchuet wrote:

> MORE OR LESS rdd uses the same system to add INIT functions
>
> HB_INIT_SYMBOLS_BEGIN( dbfcdx1__InitSymbols )
> { "DBFCDX",              {HB_FS_PUBLIC|HB_FS_LOCAL},  
> {HB_FUNCNAME( DBFCDX )}, NULL },
> { "DBFCDX_GETFUNCTABLE", {HB_FS_PUBLIC|HB_FS_LOCAL},  
> {HB_FUNCNAME( DBFCDX_GETFUNCTABLE )}, NULL }
> HB_INIT_SYMBOLS_END( dbfcdx1__InitSymbols )
>
> HB_CALL_ON_STARTUP_BEGIN( _hb_dbfcdx_rdd_init_ )
>   hb_vmAtInit( hb_dbfcdxRddInit, NULL );
> HB_CALL_ON_STARTUP_END( _hb_dbfcdx_rdd_init_ )
>
> #if defined(HB_PRAGMA_STARTUP)
> #  pragma startup dbfcdx1__InitSymbols
> #  pragma startup _hb_dbfcdx_rdd_init_
> #elif defined(HB_MSC_STARTUP)
> #  if _MSC_VER >= 1010
> #     pragma data_seg( ".CRT$XIY" )
> #     pragma comment( linker, "/Merge:.CRT=.data" )
> #  else
> #     pragma data_seg( "XIY" )
> #  endif
>   static HB_$INITSYM hb_vm_auto_dbfcdx1__InitSymbols =  
> dbfcdx1__InitSymbols;
>   static HB_$INITSYM hb_vm_auto_dbfcdx_rdd_init =  
> _hb_dbfcdx_rdd_init_;
> #  pragma data_seg()
> #endif
>
> Best regards,
> Miguel Angel Marchuet
>
>
> Szak?ts Viktor escribi?:
>> It looks a bit hackish, but if there is no other way to
>> solve this, I think you should commit it.
>> Brgds,
>> Viktor
>> On 2008.07.02., at 12:21, Miguel Angel Marchuet wrote:
>>> I prefer to add it and forgot to call manually to this function.
>>>
>>>
>>> Can I add it ?
>>>
>>>>>
>>>>> #define __PRG_SOURCE__ (char*) "zip.c"
>>>>> #ifdef HB_PCODE_VER
>>>>> #  undef HB_PRG_PCODE_VER
>>>>> #  define HB_PRG_PCODE_VER HB_PCODE_VER
>>>>> #endif
>>>>>
>>>>> HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
>>>>> { (char*) "HBZIPCLEANUP$", {HB_FS_EXIT | HB_FS_LOCAL},  
>>>>> {HB_EXIT_FUNCNAME( HBZIPCLEANUP )}, &ModuleFakeDyn }
>>>>> HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
>>>>>
>>>>> #if defined(HB_PRAGMA_STARTUP)
>>>>> #pragma startup hbzip_CLEANUP
>>>>> #elif defined(HB_MSC_STARTUP)
>>>>> #if _MSC_VER >= 1010
>>>>>    #pragma data_seg( ".CRT$XIY" )
>>>>>    #pragma comment( linker, "/Merge:.CRT=.data" )
>>>>> #else
>>>>>    #pragma data_seg( "XIY" )
>>>>> #endif
>>>>> static HB_$INITSYM hb_vm_auto_SymbolInit_INIT = hbzip_CLEANUP;
>>>>> #pragma data_seg()
>>>>> #endif
>>>>>
>>>
>>>
>>> Best regards,
>>> Miguel Angel Marchuet
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Jul  2 06:47:35 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 06:47:41 2008
Subject: [Harbour] 2008-07-02 12:43 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc31$Blat.v2.6.2$09b0e128$36d846558ce6@127.0.0.1>

2008-07-02 12:43 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbapollo/make_b32.bat
   * contrib/hbapollo/make_vc.bat
   * contrib/hbcurl/make_b32.bat
   * contrib/hbcurl/make_vc.bat
   * contrib/hbfbird/make_b32.bat
   * contrib/hbfbird/make_vc.bat
   * contrib/hbfimage/make_b32.bat
   * contrib/hbfimage/make_vc.bat
   * contrib/hbgd/make_b32.bat
   * contrib/hbgd/make_vc.bat
   * contrib/hbhpdf/make_b32.bat
   * contrib/hbhpdf/make_vc.bat
   * contrib/hbmysql/make_b32.bat
   * contrib/hbmysql/make_vc.bat
   * contrib/hbpgsql/make_b32.bat
   * contrib/hbpgsql/make_vc.bat
   * contrib/rddads/make_b32.bat
   * contrib/rddads/make_vc.bat
     + Added possibility to use HB_INC_* envvars to 
       specify the header directories for external 
       packages. This way _all_ Harbour make systems 
       now able to use the same common logic to specify 
       external header dirs. (For GNU-make you can even 
       use a dir list).
       If HB_INC_* is used with the non-GNU make system, 
       the .dll to .lib generation _won't_ happen, which 
       is desirable for binary builds for distribution.
       HB_DIR_* envvars continue to work, in this case 
       .libs are copied/generated from the external .dlls, 
       and this is useful who build their Harbour from 
       source.
       For official Harbour binary distributions HB_INC_* 
       must be used.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 06:58:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 06:59:43 2008
Subject: [Harbour] 2008-07-02 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807020958.m629w0SL016066@31-mo5-4.acn.waw.pl>
References: <200807020958.m629w0SL016066@31-mo5-4.acn.waw.pl>
Message-ID: <03DC26DB-2DBA-4C6D-B1DA-4F754673A98E@syenar.hu>

Hi Przemek,

>  * harbour/source/rtl/gtwvt/gtwvt.c
>    ! fixed WINCE builds. It was only for MiGWCE which partially  
> emulates
>      GetSystemMenu() but probably other builds will report that this
>      function is missing.
>      If possible please test if current Harbour application can be
>      executed in real WinCE environment.

Can you please try attached gtwvt.c with WinCE?
I've restored a complete implementation of screen
selection, which doesn't use InvertRgn(). If it work,
we could use it for WinCE.

>  * harbour/contrib/hbw32ddr/Makefile
>  * harbour/contrib/hbmysql/Makefile
>  * harbour/contrib/hbodbc/Makefile
>  * harbour/contrib/hbwhat32/Makefile
>  * harbour/contrib/hbtpathy/Makefile
>  * harbour/contrib/hbw32/Makefile
>  * harbour/contrib/hbole/Makefile
>  * harbour/contrib/hbapollo/Makefile
>  * harbour/contrib/hbfbird/Makefile
>  * harbour/contrib/hbziparch/Makefile
>  * harbour/contrib/hbcurl/Makefile
>  * harbour/contrib/hbhpdf/Makefile
>  * harbour/contrib/rddado/Makefile
>  * harbour/contrib/gtwvg/Makefile
>  * harbour/contrib/hbpgsql/Makefile
>  * harbour/contrib/rddads/Makefile
>  * harbour/contrib/hbfimage/Makefile
>  * harbour/contrib/hbgd/Makefile
>  * harbour/contrib/hbgf/hbgfw32/Makefile
>  * harbour/contrib/hbgf/hbgfos2/Makefile
>  * harbour/contrib/hbgf/hbgfgtk/Makefile
>  * harbour/contrib/hbtip/Makefile
>  * harbour/contrib/hbbmcdx/Makefile
>    * updated to not generate errors for unsupported builds

Nice.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gtwvt.zip
Type: application/zip
Size: 18251 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080702/d332748f/gtwvt-0001.zip
-------------- next part --------------

From miguelangel at marchuet.net  Wed Jul  2 07:10:37 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 07:06:14 2008
Subject: [Harbour] 2008-07-02 13:06 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <486B622D.4020101@marchuet.net>

2008-07-02 13:06 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
    * contrib/hbziparch/hbziparc.c
      + Added HBZIPCLEANUP() as EXIT function to clean. It will be called
        automatically at end application.

Best regards,
Miguel Angel marchuet
From harbour.01 at syenar.hu  Wed Jul  2 07:14:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 07:14:58 2008
Subject: [Harbour] Re: BUG: HB_BUILD_DLL=yes and make_vc.bat fails (repost)
In-Reply-To: <486B57A2.504@interia.pl>
References: <20080702084752.ADDFE386C44@f02.poczta.interia.pl>
	<3069E466-0A07-4DB8-88B2-F67D77559175@syenar.hu>
	<486B57A2.504@interia.pl>
Message-ID: <E5C5DDE6-E06A-4692-B29A-843522A054EF@syenar.hu>

Hi Marek,

> You are absolutly right. My post was a kind of
> a personal attack and it was meant to be so :).
> And after posting it I feel a lot better ;-).

:) Okay, maybe I'm taking your comments too personal.
I surely don't think it makes you feel better, I just
wonder about the reasons behind, but maybe my threshold
is put to low in this regard.

> To clarify things to all others - I *very much*
> (and when I say "very much" I really mean "*very
> much*") appreciate your contributions. In fact
> whithout you - Harbour would be dead long ago.

Thanks.

> But there are areas where I do not agree with
> your solutions at all. And in those areas you
> force your solutions without listening to any
> (even resonable) arguments. That's why I find
> it hard to contribute something usefull to
> Harbour at a moment (besides others, much more
> important, private healthy problems, which are
> still valid unfortunately).

I wish you the best to recover from your health
problems, that's with no question more important
than anything else, especially any geeking around,
even if it's Harbour related. I hope you'll be in
perfect health ASAP.

..as for technical stuff, I know you had a big concern
regarding .dll -> .lib generation. I fully agree it
is a problem when doing binary builds for distribution,
so I hopefully fixed this with the last two commits.
Your comment are welcome.

The other issue I remember is merging libs. We can
get back to it after 1.0, or maybe even after MT
implementation, if there is enough interest. I'd
be definitely happier with less .libs to list in
my make files.

Was there anything else? :/

>> You bet that when I happen to break anything,
>> this is not my goal (neither is the goal of
>> anyone else doing mistakes), and it's definitely
>> not an attack against you, or your competence.
>
> I never had a feeling you want to impair my
> competence. I rather had a feeling you want
> to have a final word. That's a difference :).

Well, I think you're right. I'm far from perfect,
that goes without a question. I'll try to check
myself a bit more.

>>   #elif defined( WIN32 )
>      #define HB_EXPORT _declspec( dllexport )

Yes, I've found the same, based on your hint. The problem
was that WIN32 was used a sort of hidden communication
between the make files and this specific part of
Harbour internals. Since we have a sure way to detect
Win32 inside the core, I've used HB_OS_WIN_32 here,
it should be a safe default if any compiler specific
exceptions were checked before.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  2 07:17:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 07:17:29 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <486B53AC.4060505@marchuet.net>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>
	<486B46A3.20901@marchuet.net>
	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>
	<20080702093447.GA5301@34-mo7-2.acn.waw.pl>
	<486B53AC.4060505@marchuet.net>
Message-ID: <20080702111724.GA31069@34-mo7-2.acn.waw.pl>

On Wed, 02 Jul 2008, Miguel Angel Marchuet wrote:
> >Yes. Neither Harbour not xHarbour execute HB_EXIT_FUNC() and/or
> >HB_INIT_FUNC() automatically. HB_EXIT_FUNC/HB_INIT_FUNC are only
> >macros to define special unique names for compiler but they not
> >cause that anything will be executed.
> >The HB_EXIT_FUNC removed from hbziparch library from the beginning
> >was dummy code never executed in both project.
> False i test it at xharbour with OutputDebugString and is executed at end 
> of application

Miguel you used to check only part of problem and then create
very wide conclusions.
You are wrong. HB_EXIT_FUNC/HB_INIT_FUNC macros _does_not_ cause
any function execution and never did.

> I this is because has the next lines:
> #define __PRG_SOURCE__ (char*) "zip.c"
> #ifdef HB_PCODE_VER
> #  undef HB_PRG_PCODE_VER
> #  define HB_PRG_PCODE_VER HB_PCODE_VER
> #endif
> HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
> { (char*) "HBZIPCLEANUP$", {HB_FS_EXIT | HB_FS_LOCAL}, {HB_EXIT_FUNCNAME( 
> HBZIPCLEANUP )}, &ModuleFakeDyn }
> HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
> 
> #if defined(HB_PRAGMA_STARTUP)
>    #pragma startup hbzip_CLEANUP
> #elif defined(HB_MSC_STARTUP)
>    #if _MSC_VER >= 1010
>       #pragma data_seg( ".CRT$XIY" )
>       #pragma comment( linker, "/Merge:.CRT=.data" )
>    #else
>       #pragma data_seg( "XIY" )
>    #endif
>    static HB_$INITSYM hb_vm_auto_SymbolInit_INIT = hbzip_CLEANUP;
>    #pragma data_seg()
> #endif

This code causes that function HB_EXIT_FUNCNAME( HBZIPCLEANUP )
will be executed by HVM because it registers new symbol table
in HVM internal structure. But it's done by this additional code
not the HB_EXIT_FUNC() macro. You can change the function name
to any other one, f.e.:

   void my_func( void ) { doSomeThing(); }
   HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
      { "$", {HB_FS_EXIT | HB_FS_LOCAL}, { doSomeThing }, &ModuleFakeDyn }
   HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
   [...] // pragmas

and it will be executed too. HB_INIT_FUNC/HB_EXIT_FUNC macros are used
_ONLY_ for giving unique function name for .prg INIT/EXIT procedures
which will not cause conflict with other function/procedure names used
in the same module.
So far ZIPARCH cleanup function was dummy function from the beginning in
both projects because this additional code was missing.

Anyhow with additional code it will work but it's not efficient method for
C code. HB_INIT_SYMBOLS_BEGIN/HB_INIT_SYMBOLS_END should be used only for
.prg code or if you want to register some public symbols inside HVM.
It also has bad side effect because we are not able to control the order
of execution INIT/EXIT procedures so it can be executed before some other
.prg EXIT procedure which will try to access some ZIPARCH functions.
If you want to make it well and execute C function at HVM startup/cleanup
phase then use:
   void hb_vmAtInit( HB_INIT_FUNC pFunc, void * cargo );
   void hb_vmAtExit( HB_INIT_FUNC pFunc, void * cargo );
See in harbour/source/rtl/inkey.c how C exit function can
be registered and executed. If you need automatic registration of
init/exit functions at application startup then see end of file
harbour/source/rtl/gtwvt/gtwvt.c:
   HB_CALL_ON_STARTUP_BEGIN( file_unique_name )
      [...code_using hb_vmAtInit/hb_vmAtExit...]
   HB_CALL_ON_STARTUP_END( file_unique_name )
   [...pragmas...]

Functions registered in such way does not allocate unnecessary symbol
table in HVM and it's guarantied that INIT functions will be executed
just before .prg INIT procedures and exit functions just after all .prg
EXIT procedures.

best regards,
Przemek
From dmacias at mail.udg.mx  Wed Jul  2 07:19:27 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  2 07:19:28 2008
Subject: [Harbour] Re: RC2 anything pending?
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486B643F.2090907@mail.udg.mx>

With current code:

 >>a) There are many lines like this ( at least 14 )
 >>make[2]: *** No rule to make target `first'.  Stop.

Fixed with changes made by Przemek, thanks

 >>b) A long list of warnings
 >>Seem to be related to sqlite

 >Yes, unfortunately foreign code throws lots of
 >warnings.

OK
As I see it was not compiled under Harbour rc1, and now appear in rc2

These warnings appear in your tests too (Win, Linux, ...) ?

 >>c) Error compiling tpos2.c
 >>Look below for "C portion" catched from screen

 >#ifdef HB_OS_OS2

 >#define INCL_BASE
 >#define INCL_DOS
 >#define INCL_DOSERROR
 >#define INCL_DOSDEVICES

Same errors

David Macias


From harbour.01 at syenar.hu  Wed Jul  2 07:25:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 07:26:28 2008
Subject: [Harbour] Re: RC2 anything pending?
In-Reply-To: <486B643F.2090907@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<486B643F.2090907@mail.udg.mx>
Message-ID: <60CA6C75-D21A-412C-B17B-AD84E1FE1647@syenar.hu>

Hi David,

> >Yes, unfortunately foreign code throws lots of
> >warnings.
>
> OK
> As I see it was not compiled under Harbour rc1, and now appear in rc2
>
> These warnings appear in your tests too (Win, Linux, ...) ?

Yes. Most foreign code we have in the contrib will
generate all sorts of warnings in different compilers/platforms.

sqlite2, sqlite3, ZipArchive and some foreign headers. For
ZipArchive I've reported some of them to the author already.

We'll need to develop some #pragma ways to suppress these.

Harbour's standard warning level is seemingly much higher
than of other projects.

> >#define INCL_BASE
> >#define INCL_DOS
> >#define INCL_DOSERROR
> >#define INCL_DOSDEVICES
>
> Same errors

I have no idea then. This seems to be a long time problem
with this code, and the only reason it didn't come up earlier
is that it was also never included in OS/2 builds.

Brgds,
Viktor

From miguelangel at marchuet.net  Wed Jul  2 07:44:35 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 07:40:30 2008
Subject: [Harbour] 2008-07-01 22:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080702111724.GA31069@34-mo7-2.acn.waw.pl>
References: <01c8dbc7$Blat.v2.6.2$f9af80a4$26547c1375ae@127.0.0.1>	<486B46A3.20901@marchuet.net>	<E667DCA1-903E-470B-A98C-29D92D42DDA1@syenar.hu>	<20080702093447.GA5301@34-mo7-2.acn.waw.pl>	<486B53AC.4060505@marchuet.net>
	<20080702111724.GA31069@34-mo7-2.acn.waw.pl>
Message-ID: <486B6A23.106@marchuet.net>

Please can you do it necessary changes to ziparch

Best regards,
Miguel Angel Marchuet

Przemyslaw Czerpak escribi?:
> On Wed, 02 Jul 2008, Miguel Angel Marchuet wrote:
>>> Yes. Neither Harbour not xHarbour execute HB_EXIT_FUNC() and/or
>>> HB_INIT_FUNC() automatically. HB_EXIT_FUNC/HB_INIT_FUNC are only
>>> macros to define special unique names for compiler but they not
>>> cause that anything will be executed.
>>> The HB_EXIT_FUNC removed from hbziparch library from the beginning
>>> was dummy code never executed in both project.
>> False i test it at xharbour with OutputDebugString and is executed at end 
>> of application
> 
> Miguel you used to check only part of problem and then create
> very wide conclusions.
> You are wrong. HB_EXIT_FUNC/HB_INIT_FUNC macros _does_not_ cause
> any function execution and never did.
> 
>> I this is because has the next lines:
>> #define __PRG_SOURCE__ (char*) "zip.c"
>> #ifdef HB_PCODE_VER
>> #  undef HB_PRG_PCODE_VER
>> #  define HB_PRG_PCODE_VER HB_PCODE_VER
>> #endif
>> HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
>> { (char*) "HBZIPCLEANUP$", {HB_FS_EXIT | HB_FS_LOCAL}, {HB_EXIT_FUNCNAME( 
>> HBZIPCLEANUP )}, &ModuleFakeDyn }
>> HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
>>
>> #if defined(HB_PRAGMA_STARTUP)
>>    #pragma startup hbzip_CLEANUP
>> #elif defined(HB_MSC_STARTUP)
>>    #if _MSC_VER >= 1010
>>       #pragma data_seg( ".CRT$XIY" )
>>       #pragma comment( linker, "/Merge:.CRT=.data" )
>>    #else
>>       #pragma data_seg( "XIY" )
>>    #endif
>>    static HB_$INITSYM hb_vm_auto_SymbolInit_INIT = hbzip_CLEANUP;
>>    #pragma data_seg()
>> #endif
> 
> This code causes that function HB_EXIT_FUNCNAME( HBZIPCLEANUP )
> will be executed by HVM because it registers new symbol table
> in HVM internal structure. But it's done by this additional code
> not the HB_EXIT_FUNC() macro. You can change the function name
> to any other one, f.e.:
> 
>    void my_func( void ) { doSomeThing(); }
>    HB_INIT_SYMBOLS_BEGIN( hbzip_CLEANUP )
>       { "$", {HB_FS_EXIT | HB_FS_LOCAL}, { doSomeThing }, &ModuleFakeDyn }
>    HB_INIT_SYMBOLS_END( hbzip_CLEANUP )
>    [...] // pragmas
> 
> and it will be executed too. HB_INIT_FUNC/HB_EXIT_FUNC macros are used
> _ONLY_ for giving unique function name for .prg INIT/EXIT procedures
> which will not cause conflict with other function/procedure names used
> in the same module.
> So far ZIPARCH cleanup function was dummy function from the beginning in
> both projects because this additional code was missing.
> 
> Anyhow with additional code it will work but it's not efficient method for
> C code. HB_INIT_SYMBOLS_BEGIN/HB_INIT_SYMBOLS_END should be used only for
> .prg code or if you want to register some public symbols inside HVM.
> It also has bad side effect because we are not able to control the order
> of execution INIT/EXIT procedures so it can be executed before some other
> .prg EXIT procedure which will try to access some ZIPARCH functions.
> If you want to make it well and execute C function at HVM startup/cleanup
> phase then use:
>    void hb_vmAtInit( HB_INIT_FUNC pFunc, void * cargo );
>    void hb_vmAtExit( HB_INIT_FUNC pFunc, void * cargo );
> See in harbour/source/rtl/inkey.c how C exit function can
> be registered and executed. If you need automatic registration of
> init/exit functions at application startup then see end of file
> harbour/source/rtl/gtwvt/gtwvt.c:
>    HB_CALL_ON_STARTUP_BEGIN( file_unique_name )
>       [...code_using hb_vmAtInit/hb_vmAtExit...]
>    HB_CALL_ON_STARTUP_END( file_unique_name )
>    [...pragmas...]
> 
> Functions registered in such way does not allocate unnecessary symbol
> table in HVM and it's guarantied that INIT functions will be executed
> just before .prg INIT procedures and exit functions just after all .prg
> EXIT procedures.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From f.eichelhardt at web.de  Wed Jul  2 13:01:35 2008
From: f.eichelhardt at web.de (Fritz Eichelhardt)
Date: Wed Jul  2 07:52:10 2008
Subject: [Harbour] Re: BUG: HB_BUILD_DLL=yes and make_vc.bat fails (repost)
In-Reply-To: <E5C5DDE6-E06A-4692-B29A-843522A054EF@syenar.hu>
References: <20080702084752.ADDFE386C44@f02.poczta.interia.pl>
	<486B57A2.504@interia.pl>
	<E5C5DDE6-E06A-4692-B29A-843522A054EF@syenar.hu>
Message-ID: <200807021901.35691.f.eichelhardt@web.de>

Marek:
> > And after posting it I feel a lot better ;-).

fine



Viktor:
> I'll try to check 
> myself a bit more.

fine



puuuuuuuuuuuuuuuh, all problems solved!!!!!!

perfect precondition to continue this marvellous project.

-- 
Mit freundlichen Gr??en

Fritz Eichelhardt
Br?ckenstr. 1
53545 Linz
Tel.: 02644 - 3784
Fax/UMS: 01212 - 517045068
From druzus at acn.waw.pl  Wed Jul  2 08:09:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 08:10:00 2008
Subject: [Harbour] 2008-07-02 14:09 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807021209.m62C9tgQ004613@31-mo5-4.acn.waw.pl>

2008-07-02 14:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbtpathy/tpos2.c
    * moved INCL_* definitions before harbour header files

best regards
Przemek
From druzus at acn.waw.pl  Wed Jul  2 09:34:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 09:34:58 2008
Subject: [Harbour] 2008-07-02 15:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807021334.m62DYrGH005133@31-mo5-4.acn.waw.pl>

2008-07-02 15:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbziparch/hbziparc.c
    - removed HB_FUNC_EXIT( HBZIPCLEANUP )
  * harbour/contrib/hbziparch/hbzipnew.cpp
    + added automatic callback destructor registered by hb_vmAtExit()
      at 1-st callback set

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul  2 10:13:34 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 10:14:39 2008
Subject: [Harbour] RC2 checklist update #2
Message-ID: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>

Pending, critical:
- Darwin Harbour compiler problem.
   Lorenzo, any feedback from you as a Darwin user?

Pending, non-critical:
- 64bit C-mode startup not implemented in hbinit.h.
- WinCE compatible screen selection code in gtwvt.c.

Postponed:
- FreeImage under Linux fails.

Cleared:
- OS/2 hbtpathy.lib fails. Thanks Przemek!
- .dll creation with all MSVC compilers. Thanks Marek!
- HB_ZIPARCHCLEAN() issue. Thanks Przemek and Miguel.
- To not build .dll .libs for binary distros.

Cleared platforms:
- Win32
- OS/2

Brgds,
Viktor

From bedipritpal at hotmail.com  Wed Jul  2 10:15:34 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Jul  2 10:15:40 2008
Subject: [Harbour] BUG: HB_BUILD_DLL=yes and make_vc.bat fails (repost)
In-Reply-To: <486B57A2.504@interia.pl>
References: <4BC05281-F189-4D48-8C7E-7CD1C9627881@syenar.hu>
	<20080702084752.ADDFE386C44@f02.poczta.interia.pl>
	<3069E466-0A07-4DB8-88B2-F67D77559175@syenar.hu>
	<486B57A2.504@interia.pl>
Message-ID: <18238460.post@talk.nabble.com>


Marek

<<<
That's why I find
it hard to contribute something usefull to
Harbour at a moment (besides others, much more
important, private healthy problems, which are
still valid unfortunately).
>>>

May LORD bless you with robust health, we pray.
Certainly Harbour MISSES you a lot.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/BUG%3A-HB_BUILD_DLL%3Dyes-and-make_vc.bat-fails-%28repost%29-tp18226979p18238460.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Jul  2 10:50:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 10:50:30 2008
Subject: [Harbour] RC2 checklist update #2
In-Reply-To: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>
References: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>
Message-ID: <20080702145025.GB7908@34-mo7-2.acn.waw.pl>

On Wed, 02 Jul 2008, Szak?ts Viktor wrote:
> - Darwin Harbour compiler problem.
>   Lorenzo, any feedback from you as a Darwin user?

This looks really critical and for sure the problem has to be
located and fixed. Unfortunately I do not have MacOSX to make
test myself.

> Pending, non-critical:
> - 64bit C-mode startup not implemented in hbinit.h.
    Only for MSVC. I do not know if it supports startup
    code for C mode at all. GCC uses constructor attribute
    and it works well. See in MSVC64 documentation if it's
    possible to mark function as executed at startup.

> - WinCE compatible screen selection code in gtwvt.c.
> Postponed:
> - FreeImage under Linux fails.

- The hbsqlit2 and hbsqlit3 produce a lot of warnings and cannot
  be compiled in C++ mode so they will not work for any compilers
  we are using in C++ mode (f.e. OpenWatcom, G++). They need serious
  cleanup for C++ which probably can be joined with warning cleanup.

- HBZipArch still produce a lot of warnings and it cannot be compiled
  in pure C mode. It's mostly C++ code which needs C++ compiler.
  If core harbour code was compiled in C mode the final application
  will need two sets of RTL libraries: CRTL and C++RTL what strongly
  increased binaries size.

For the above I think that these three libraries should be excluded
from default RC2 builds.

Later I'll make tests with DOS and HPUX builds.
I'm still looking for someone who can make tests with SunOS.
Maybe some of you knows some free shell hosts where such tests
can be done. SF compile farm is down.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul  2 11:02:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 11:03:04 2008
Subject: [Harbour] RC2 checklist update #2
In-Reply-To: <20080702145025.GB7908@34-mo7-2.acn.waw.pl>
References: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>
	<20080702145025.GB7908@34-mo7-2.acn.waw.pl>
Message-ID: <F2C0FA2B-0388-45CB-98E5-9F5E6E12A6A8@syenar.hu>

>>
Hi Przemek,

>> - Darwin Harbour compiler problem.
>>  Lorenzo, any feedback from you as a Darwin user?
>
> This looks really critical and for sure the problem has to be
> located and fixed. Unfortunately I do not have MacOSX to make
> test myself.

Okay. What bothers me, is that there is no
line number or anything in the error message.

>> Pending, non-critical:
>> - 64bit C-mode startup not implemented in hbinit.h.
>    Only for MSVC. I do not know if it supports startup
>    code for C mode at all. GCC uses constructor attribute
>    and it works well. See in MSVC64 documentation if it's
>    possible to mark function as executed at startup.

I won't have time for that now (not to mention I have
no 64 bit XP/Vista running anywhere). So lets leave it
for later, it's not critical.

>> - WinCE compatible screen selection code in gtwvt.c.
>> Postponed:
>> - FreeImage under Linux fails.
>
> - The hbsqlit2 and hbsqlit3 produce a lot of warnings and cannot
>  be compiled in C++ mode so they will not work for any compilers
>  we are using in C++ mode (f.e. OpenWatcom, G++). They need serious
>  cleanup for C++ which probably can be joined with warning cleanup.
>
> - HBZipArch still produce a lot of warnings and it cannot be compiled
>  in pure C mode. It's mostly C++ code which needs C++ compiler.
>  If core harbour code was compiled in C mode the final application
>  will need two sets of RTL libraries: CRTL and C++RTL what strongly
>  increased binaries size.
>
> For the above I think that these three libraries should be excluded
> from default RC2 builds.

Also hbw32ddr is affected, although I have a version which can
be compiled as .c. I'm not sure it'd be wise to change it
in RC2, maybe in RC3 or final.

Let's make this more granular. For the builds I've tried,
both hbsqlit-s work okay, so I see no reason to exclude them as is.
Same goes for hbziparch, which worked for me under Win32/BCC.

Other than that I fully agree to tame somehow these, or
exclude them where they really don't work.

> Later I'll make tests with DOS and HPUX builds.
> I'm still looking for someone who can make tests with SunOS.
> Maybe some of you knows some free shell hosts where such tests
> can be done. SF compile farm is down.

Thanks a lot.

Unfortunately I don't, I only have Darwin. BTW, if you need
an account on either of my Macs (one PPC, one Core2), I can
set it up for you for SSH access. Just tell.

Brgds,
Viktor

From mbelgrano at deltain.it  Wed Jul  2 11:09:39 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul  2 11:16:28 2008
Subject: [Harbour] RC2 checklist update #2
In-Reply-To: <20080702145025.GB7908@34-mo7-2.acn.waw.pl>
References: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>
	<20080702145025.GB7908@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDDA@SRV02.deltain.net>


If you do not have MacOSX can use a emulator
Try with pearpc http://pearpc.sourceforge.net/ as describet at http://www.windowsdevcenter.com/pub/a/windows/2005/01/18/PearPC.html


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Wednesday, July 02, 2008 4:50 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] RC2 checklist update #2

On Wed, 02 Jul 2008, Szak?ts Viktor wrote:
> - Darwin Harbour compiler problem.
>   Lorenzo, any feedback from you as a Darwin user?

This looks really critical and for sure the problem has to be
located and fixed. Unfortunately I do not have MacOSX to make
test myself.


From miguelangel at marchuet.net  Wed Jul  2 11:22:10 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 11:17:57 2008
Subject: [Harbour] Question about hbziparch
Message-ID: <486B9D22.1080408@marchuet.net>

At line 318 of hbzipnew.cpp there is this comment

             // bAdded = true;

I think that was uncorrected comment.

	
Isn't it?

Best regards,
Miguel Angel marchuet
From rportnoff at spendmap.com  Wed Jul  2 11:21:50 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Wed Jul  2 11:20:35 2008
Subject: [Harbour] Trapping recurrsion
Message-ID: <B0081668031@ms1.3peaks.com>

Hi all,

Similar to the way Harbour now traps GPF's (and logs some info in a 
text file), can it also detect  race conditions and log that as well? 
I am referring to situations where recursion occurs repeatedly which 
causes the app to just exit (ie. vanish). Ideally, a runtime error 
would be best.

For example, this causes the app to vanish.

func main()
SomeFunc()
return nil

func SomeFunc()
Main()
return nil

Regards,
Randy.


From harbour.01 at syenar.hu  Wed Jul  2 11:26:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 11:27:40 2008
Subject: [Harbour] Question about hbziparch
In-Reply-To: <486B9D22.1080408@marchuet.net>
References: <486B9D22.1080408@marchuet.net>
Message-ID: <FDEF5390-E015-4ED6-A3DB-D85F47F2D341@syenar.hu>

Hi Miguel,

You're right. I'll commmit it ASAP.

Brgds,
Viktor

On 2008.07.02., at 17:22, Miguel Angel Marchuet wrote:

> At line 318 of hbzipnew.cpp there is this comment
>
>            // bAdded = true;
>
> I think that was uncorrected comment.
>
> 	
> Isn't it?
>
> Best regards,
> Miguel Angel marchuet
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Jul  2 11:31:36 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 11:32:30 2008
Subject: [Harbour] Trapping recurrsion
In-Reply-To: <B0081668031@ms1.3peaks.com>
References: <B0081668031@ms1.3peaks.com>
Message-ID: <690FB313-47DA-4A3C-85D0-3733CAFB3934@syenar.hu>

Hi Randy,

This is a good idea, as I've already met such situation
in real life, and it's really annoying to see the
screen just "vanish" with no trace.

Maybe the general answer to this, is that we may
redirect all internal errors to a file, because
internal errors are currently inherently lost in
most full screen apps. (Recursive errors are
generating internal errors already IIRC).

Brgds,
Viktor

On 2008.07.02., at 17:21, Randy Portnoff wrote:

> Hi all,
>
> Similar to the way Harbour now traps GPF's (and logs some info in a  
> text file), can it also detect  race conditions and log that as  
> well? I am referring to situations where recursion occurs repeatedly  
> which causes the app to just exit (ie. vanish). Ideally, a runtime  
> error would be best.
>
> For example, this causes the app to vanish.
>
> func main()
> SomeFunc()
> return nil
>
> func SomeFunc()
> Main()
> return nil
>
> Regards,
> Randy.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From miguelangel at marchuet.net  Wed Jul  2 11:50:23 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul  2 11:45:57 2008
Subject: [Harbour] Question about hbziparch
In-Reply-To: <FDEF5390-E015-4ED6-A3DB-D85F47F2D341@syenar.hu>
References: <486B9D22.1080408@marchuet.net>
	<FDEF5390-E015-4ED6-A3DB-D85F47F2D341@syenar.hu>
Message-ID: <486BA3BF.9020805@marchuet.net>

I think it will be completely removed too in hbzipcom.cpp

Best regards,
Miguel Angel marchuet

Szak?ts Viktor escribi?:
> Hi Miguel,
> 
> You're right. I'll commmit it ASAP.
> 
> Brgds,
> Viktor
> 
> On 2008.07.02., at 17:22, Miguel Angel Marchuet wrote:
> 
>> At line 318 of hbzipnew.cpp there is this comment
>>
>>            // bAdded = true;
>>
>> I think that was uncorrected comment.
>>
>>     
>> Isn't it?
>>
>> Best regards,
>> Miguel Angel marchuet
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From harbour.01 at syenar.hu  Wed Jul  2 12:35:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 12:36:38 2008
Subject: [Harbour] 2008-07-02 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <03DC26DB-2DBA-4C6D-B1DA-4F754673A98E@syenar.hu>
References: <200807020958.m629w0SL016066@31-mo5-4.acn.waw.pl>
	<03DC26DB-2DBA-4C6D-B1DA-4F754673A98E@syenar.hu>
Message-ID: <0EFE042A-30B6-4599-B50B-509AE278705C@syenar.hu>

Hi Przemek,

>>   ! fixed WINCE builds. It was only for MiGWCE which partially  
>> emulates
>>     GetSystemMenu() but probably other builds will report that this
>>     function is missing.
>>     If possible please test if current Harbour application can be
>>     executed in real WinCE environment.
>
> Can you please try attached gtwvt.c with WinCE?
> I've restored a complete implementation of screen
> selection, which doesn't use InvertRgn(). If it work,
> we could use it for WinCE.

I've tried now, and it won't work because the
selection logic above has changed. Otherwise
InvertRect() also doesn't exist in WinCE, but
PatBlt() can be used as an equivalent.

I'll leave this for now.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  2 12:39:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 12:44:42 2008
Subject: [Harbour] 2008-07-02 18:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807021639.m62GdvSY013002@31-mo5-4.acn.waw.pl>

2008-07-02 18:39 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbodbc/Makefile
    * added test for header files in non W32 builds
      ODBC is not standard system part in other then MS-Window platforms

  * harbour/contrib/hbgf/hbgfgtk/Makefile
    * updated path check for GTK header files
      In fact it still can give wrong results in different
      Linux or other *nixes distributions. The real path to GTK
      header files is unknown and should be always tested by
      pkg-config

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul  2 12:53:16 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 12:53:34 2008
Subject: [Harbour] 2008-07-02 18:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc64$Blat.v2.6.2$1fc76472$1c589a3d5422@127.0.0.1>

2008-07-02 18:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbzipcom.cpp
   * contrib/hbziparch/hbzipnew.cpp
     ! Two lines commented by mistake now reenabled.
       Thanks Miguel.

   * source/rtl/gtwvt/gtwvt.c
     * Minor naming, formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 12:56:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 12:57:22 2008
Subject: [Harbour] 2008-07-02 18:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807021639.m62GdvSY013002@31-mo5-4.acn.waw.pl>
References: <200807021639.m62GdvSY013002@31-mo5-4.acn.waw.pl>
Message-ID: <56735807-0FBD-4785-B1DE-6CA3500AB28E@syenar.hu>

Hi Przemek,

I think #include should be updated in odbc.c Linux branch,
as they are now trying to access with a hardcoded path.

Brgds,
Viktor

On 2008.07.02., at 18:39, Przemyslaw Czerpak wrote:

> 2008-07-02 18:39 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/contrib/hbodbc/Makefile
>    * added test for header files in non W32 builds
>      ODBC is not standard system part in other then MS-Window  
> platforms
>
>  * harbour/contrib/hbgf/hbgfgtk/Makefile
>    * updated path check for GTK header files
>      In fact it still can give wrong results in different
>      Linux or other *nixes distributions. The real path to GTK
>      header files is unknown and should be always tested by
>      pkg-config
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Jul  2 13:10:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 13:10:13 2008
Subject: [Harbour] 2008-07-02 18:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <56735807-0FBD-4785-B1DE-6CA3500AB28E@syenar.hu>
References: <200807021639.m62GdvSY013002@31-mo5-4.acn.waw.pl>
	<56735807-0FBD-4785-B1DE-6CA3500AB28E@syenar.hu>
Message-ID: <20080702171001.GA17625@34-mo7-2.acn.waw.pl>

On Wed, 02 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I think #include should be updated in odbc.c Linux branch,
> as they are now trying to access with a hardcoded path.

Only for OpenWatcom builds. It's old temporary hack. I'll remove it.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Jul  2 13:13:21 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul  2 13:13:28 2008
Subject: [Harbour] RC2 checklist update #2
In-Reply-To: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>
References: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>
Message-ID: <9257026e0807021013q1dddf330v682dc1b2f15869b8@mail.gmail.com>

On Wed, Jul 2, 2008 at 4:13 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Pending, critical:
> - Darwin Harbour compiler problem.
>  Lorenzo, any feedback from you as a Darwin user?

Sorry I'm a bit busy and often out of office until Friday.

I'll do my best.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Jul  2 13:24:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 13:25:59 2008
Subject: [Harbour] RC2 checklist update #3
Message-ID: <6CC74995-9471-4C4D-BA51-723AE5F0235D@syenar.hu>

Pending, critical:
- Darwin Harbour compiler problem.

Postponed:
- FreeImage under Linux fails.
- 64bit C-mode startup not implemented in hbinit.h.
- WinCE compatible screen selection code in gtwvt.c.

Cleared:
- OS/2 hbtpathy.lib fails. Thanks Przemek!
- .dll creation with all MSVC compilers. Thanks Marek!
- HB_ZIPARCHCLEAN() issue. Thanks Przemek and Miguel.
- To not build .dll .libs for binary distros.
- ODBC/HBGFGTK issues.

Cleared platforms:
- Win32
- OS/2
- Linux

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  2 13:57:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 13:59:02 2008
Subject: [Harbour] RC2 checklist update #3
In-Reply-To: <6CC74995-9471-4C4D-BA51-723AE5F0235D@syenar.hu>
References: <6CC74995-9471-4C4D-BA51-723AE5F0235D@syenar.hu>
Message-ID: <20080702175747.GA19847@34-mo7-2.acn.waw.pl>

On Wed, 02 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Pending, critical:
> - Darwin Harbour compiler problem.

I've just made HPUX on BSD builds and except hbzpiarch, hbsqlit2 and
hbsqlit3 all is build cleanly. The problem you noticed with darwin
is probably local to your configuration. Please be sure that you made
clean build and old/new harbour header files are not mixed. It's also
possible that it's caused by setting some include dirs which change
system header order precedence.
Just like I've just check that I cannot remove the OpenWatcom hack
from Linux builds because OpenWatcom uses it's own set of header
files and setting /usr/include as include directory breaks it.
So for OpenWatcom build I even have to remove C_USR+=-D/usr/include

> Postponed:
> - FreeImage under Linux fails.

It' snot compiled when FrreImage is not installed. It's not
standard linux library so it's not a problem.

> - 64bit C-mode startup not implemented in hbinit.h.

Not 64-bit mode but only MSVC64.

> - WinCE compatible screen selection code in gtwvt.c.

Can be ignored but we have to test if final Harbour GTWVT application
can be executed in PocketPC. It's possible that C RTL supports some
functions which does not exist in real installation. If someone has
PocketPC and can make test then it will be nice.

> - ODBC/HBGFGTK issues.

The dir autodection and setting it in C_USR is problem for *nix builds
where header C files are part of system and non system C compilers comes
with their own set of headers.

BTW I do not know if HBGF is usable. Does any one uses it?

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jul  2 14:00:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 14:00:42 2008
Subject: [Harbour] 2008-07-02 20:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807021800.m62I0Soi019999@31-mo5-4.acn.waw.pl>

2008-07-02 20:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbgf/Makefile
    * do not include dir.cf when there is no platform dependent
      hbgf* library

best regards
Przemek
From druzus at acn.waw.pl  Wed Jul  2 14:14:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 14:14:31 2008
Subject: [Harbour] RC2 checklist update #2
In-Reply-To: <F2C0FA2B-0388-45CB-98E5-9F5E6E12A6A8@syenar.hu>
References: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>
	<20080702145025.GB7908@34-mo7-2.acn.waw.pl>
	<F2C0FA2B-0388-45CB-98E5-9F5E6E12A6A8@syenar.hu>
Message-ID: <20080702181410.GB19847@34-mo7-2.acn.waw.pl>

On Wed, 02 Jul 2008, Szak?ts Viktor wrote:
> Let's make this more granular. For the builds I've tried,
> both hbsqlit-s work okay, so I see no reason to exclude them as is.
> Same goes for hbziparch, which worked for me under Win32/BCC.

Then please include them when you will make BCC binaries.
I only want to exclude from contrib/Makefile libraries
which cannot be cleanly compiled so by default:
   make install
should make clean build without any warnings or errors.
If you want to create additional libraries which cannot
be cleanly compiled if will be enough to set HB_CONTRIBLIBS
or execute
   make install
in given contrib library directory.

> Other than that I fully agree to tame somehow these, or
> exclude them where they really don't work.

And they don't for some compilers. hbsqlit* cannot be compiled
by any C++ compiler and hbziparch cannot be compiled by any C
compiler which does not also support C++ mode. So they work only
for chosen builds and only for such builds should be enabled.
If we clean hbsqlit* then IMHO they should be included.
The hbziparch is different problem. IMHO instead of investing
time in this library we should extend hbmzip and add missing
functionality.

> Unfortunately I don't, I only have Darwin. BTW, if you need
> an account on either of my Macs (one PPC, one Core2), I can
> set it up for you for SSH access. Just tell.

If you will still have the problem with MacOSX builds then I will
have to ask you about it.
But first please try to redirect stderr to file, f.e.
   ./make_gnu.sh 2> log_drw.err; set >> log_drw.err
and send it to me. Maybe it will have some warnings which
tell us what is wrong.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul  2 14:17:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 14:18:24 2008
Subject: [Harbour] RC2 checklist update #3
In-Reply-To: <20080702175747.GA19847@34-mo7-2.acn.waw.pl>
References: <6CC74995-9471-4C4D-BA51-723AE5F0235D@syenar.hu>
	<20080702175747.GA19847@34-mo7-2.acn.waw.pl>
Message-ID: <4CF01A4F-50A5-41D0-8152-0D3C8A99B1DA@syenar.hu>

>
Hi Przemek,

> Hi Viktor,
>
>> Pending, critical:
>> - Darwin Harbour compiler problem.
>
> I've just made HPUX on BSD builds and except hbzpiarch, hbsqlit2 and
> hbsqlit3 all is build cleanly. The problem you noticed with darwin
> is probably local to your configuration. Please be sure that you made
> clean build and old/new harbour header files are not mixed. It's also
> possible that it's caused by setting some include dirs which change
> system header order precedence.

Thanks. You might well be right. I didn't check
the most obvious... I indeed just did an update and
a build. Not even a clean. Arrggh.

Will redo ASAP.

> Just like I've just check that I cannot remove the OpenWatcom hack
> from Linux builds because OpenWatcom uses it's own set of header
> files and setting /usr/include as include directory breaks it.
> So for OpenWatcom build I even have to remove C_USR+=-D/usr/include

Okay.

>> Postponed:
>> - FreeImage under Linux fails.
>
> It' snot compiled when FrreImage is not installed. It's not
> standard linux library so it's not a problem.

Okay. Let's solve this later.

>> - 64bit C-mode startup not implemented in hbinit.h.
>
> Not 64-bit mode but only MSVC64.

Yes of course, that's what I meant.

>> - WinCE compatible screen selection code in gtwvt.c.
>
> Can be ignored but we have to test if final Harbour GTWVT application
> can be executed in PocketPC. It's possible that C RTL supports some
> functions which does not exist in real installation. If someone has
> PocketPC and can make test then it will be nice.

I don't have any. I generally hate WinCE, which got
even worse when I had to deal with "industrial strength"
PocketPC machines as part of work. Other than that it
could be useful from a business POV, companies (and even
ppl) like it anyway for some reason.

>> - ODBC/HBGFGTK issues.
>
> The dir autodection and setting it in C_USR is problem for *nix builds
> where header C files are part of system and non system C compilers  
> comes
> with their own set of headers.

Yes. I had something like your solution in mind.

> BTW I do not know if HBGF is usable. Does any one uses it?

I doubt. It's an interesting initiative, but since
it was not a trivial thing to even compile it, it
was dead for a long time. non-GNU make system still
'all' option still doesn't compile it.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 14:37:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 14:38:16 2008
Subject: [Harbour] RC2 checklist update #2
In-Reply-To: <20080702181410.GB19847@34-mo7-2.acn.waw.pl>
References: <F270AB9D-6935-4EDC-925C-B7A8BFF7C168@syenar.hu>
	<20080702145025.GB7908@34-mo7-2.acn.waw.pl>
	<F2C0FA2B-0388-45CB-98E5-9F5E6E12A6A8@syenar.hu>
	<20080702181410.GB19847@34-mo7-2.acn.waw.pl>
Message-ID: <C68336E9-A9DA-498F-88EB-A5BEBB15BE83@syenar.hu>

>
Hi Przemek,

> On Wed, 02 Jul 2008, Szak?ts Viktor wrote:
>> Let's make this more granular. For the builds I've tried,
>> both hbsqlit-s work okay, so I see no reason to exclude them as is.
>> Same goes for hbziparch, which worked for me under Win32/BCC.
>
> Then please include them when you will make BCC binaries.
> I only want to exclude from contrib/Makefile libraries
> which cannot be cleanly compiled so by default:
>   make install
> should make clean build without any warnings or errors.
> If you want to create additional libraries which cannot
> be cleanly compiled if will be enough to set HB_CONTRIBLIBS
> or execute
>   make install
> in given contrib library directory.

Can we please do this after RC2? Or cannot we add some
hacks to exclude it locally?

I simply don't want to retest the whole build process
and start to mess with manual contrib override, because
of this modification.

This problem was obvious since months, so if we want
to change it let's give it some more though and let's
do it with the less impact this close to RC2.

>> And they don't for some compilers. hbsqlit* cannot be compiled
> by any C++ compiler and hbziparch cannot be compiled by any C
> compiler which does not also support C++ mode. So they work only
> for chosen builds and only for such builds should be enabled.
> If we clean hbsqlit* then IMHO they should be included.
> The hbziparch is different problem. IMHO instead of investing
> time in this library we should extend hbmzip and add missing
> functionality.

I don't personally care about hbziparch, I don't use it,
and don't plan to use it, it's probably the ugliest code
in whole Harbour. I use hbmzip, too. Yet it seems to be
a popular contrib.

I don't know, let the group decide.

In any case, you can disable it for additional platforms,
compilers as you wish.

>> Unfortunately I don't, I only have Darwin. BTW, if you need
>> an account on either of my Macs (one PPC, one Core2), I can
>> set it up for you for SSH access. Just tell.
>
> If you will still have the problem with MacOSX builds then I will
> have to ask you about it.
> But first please try to redirect stderr to file, f.e.
>   ./make_gnu.sh 2> log_drw.err; set >> log_drw.err
> and send it to me. Maybe it will have some warnings which
> tell us what is wrong.

I got that part okay.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 14:39:41 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 14:40:47 2008
Subject: [Harbour] BUG: hb_errInternal() -> abnormal app close
Message-ID: <C1ED7523-6A40-4889-BE9A-FDC294CDF37E@syenar.hu>

Hi Przemek and all,

I've just run into a very important problem with Harbour.

An internal error will close the apps window, but the
app will continue to run eithout a window, with all the
files locked, etc, until I kill the process from Task
Manager.

I've tested with with Windows / GTWVT, so your milage
may vary.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 14:45:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 14:46:20 2008
Subject: [Harbour] Trapping recurrsion
In-Reply-To: <B0081668031@ms1.3peaks.com>
References: <B0081668031@ms1.3peaks.com>
Message-ID: <1B3761B0-CBE4-4847-A851-3065B4395BA1@syenar.hu>

Hi Randy,

Here is the internal error logging implemented.
Copy the file to source/rtl/ and recompile.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: errorint.c
Type: application/octet-stream
Size: 5121 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080702/34dc6bb8/errorint.obj
-------------- next part --------------



On 2008.07.02., at 17:21, Randy Portnoff wrote:

> Hi all,
>
> Similar to the way Harbour now traps GPF's (and logs some info in a  
> text file), can it also detect  race conditions and log that as  
> well? I am referring to situations where recursion occurs repeatedly  
> which causes the app to just exit (ie. vanish). Ideally, a runtime  
> error would be best.
>
> For example, this causes the app to vanish.
>
> func main()
> SomeFunc()
> return nil
>
> func SomeFunc()
> Main()
> return nil
>
> Regards,
> Randy.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Jul  2 14:58:43 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 14:59:10 2008
Subject: [Harbour] 2008-07-02 20:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc75$Blat.v2.6.2$a5fa72bc$20403325d932@127.0.0.1>

2008-07-02 20:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_gcc.sh
   * make_gnu.sh
     + Added Darwin to architecure autodetection.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 15:23:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 15:24:53 2008
Subject: [Harbour] RC2 checklist update #4
Message-ID: <A364EDCB-81D0-451C-B1D0-C0CAB108AD71@syenar.hu>

Pending:
- hb_errInternal() problem: not terminating app (with GTWVT).
   anyhow the exit() call looks a bit suspicious there by now.
- Excluding unclean libs:
     Linux/HPUX/BSD: hbsqlit2, hbsqlit3, hbziparch
     Windows: hbwhat32
   I suggest to use some Makefile local method for this,
   or some other temp hacks.
- SunOS to be tested.

Postponed:
- FreeImage (if available) under Linux fails.
- Win64 C-mode startup not implemented in hbinit.h.
- WinCE compatible screen selection code in gtwvt.c.

Cleared:
- Darwin problem turned out to be a build mistake.
- OS/2 hbtpathy.lib fails. Thanks Przemek!
- .dll creation with all MSVC compilers. Thanks Marek!
- HB_ZIPARCHCLEAN() issue. Thanks Przemek and Miguel.
- To not build .dll .libs for binary distros.
- ODBC/HBGFGTK issues.

Cleared platforms:
- Win32
- Win64
- OS/2
- Linux
- Darwin PPC
- Darwin Unibin
- HPUX
- BSD

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  2 15:26:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  2 15:27:23 2008
Subject: [Harbour] 2008-07-02 21:26 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807021926.m62JQsLG020632@31-mo5-4.acn.waw.pl>

2008-07-02 21:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_xmingwce.sh
  * harbour/bin/hb-mkslib.sh
  * harbour/make_tgz.sh
    + added Darwin and OS2 to architecure autodetection.

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul  2 16:21:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 16:22:27 2008
Subject: [Harbour] RC2 checklist update #5
Message-ID: <87704DCA-F3F0-43D9-AA8E-25B2683A7DF4@syenar.hu>

Pending:
- hb_errInternal() problem: not terminating app (with GTWVT).
  anyhow the exit() call looks a bit suspicious there by now.
- Excluding unclean libs:
    Linux/HPUX/BSD: hbsqlit2, hbsqlit3, hbziparch
    GCC: hbsqlit2, hbsqlit3 (just noticed error in Windows)
    Windows: hbwhat32
  I suggest to use some Makefile local method for this,
  or some other temp hacks.
- SunOS to be tested.
- DOS32/DJGPP 4.2.3 warnings:
../../spd.c: In function 'SCItm':
../../spd.c:80: warning: unused parameter 'ulMaxBuf'
../../hbmzip.c: In function 'hb_zipStoreFile':
../../hbmzip.c:545: warning: unused variable 'TODO'
../../hbmzip.c: In function 'hb_unzipExtractCurrentFile':
../../hbmzip.c:760: warning: unused variable 'TODO'

Postponed:
- FreeImage (if available) under Linux fails.
- Win64 C-mode startup not implemented in hbinit.h.
- WinCE compatible screen selection code in gtwvt.c.

Cleared:
- Darwin problem turned out to be a build mistake.
- OS/2 hbtpathy.lib fails. Thanks Przemek!
- .dll creation with all MSVC compilers. Thanks Marek!
- HB_ZIPARCHCLEAN() issue. Thanks Przemek and Miguel.
- To not build .dll .libs for binary distros.
- ODBC/HBGFGTK issues.
- hbsqlit2, hbsqlit3 excluded from DOS builds.

Cleared platforms:
- Win32
- Win64
- OS/2
- Linux
- Darwin PPC
- Darwin Unibin
- HPUX
- BSD
- DOS32 (DJGPP 4.2.3) (with few contrib warnings)

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 16:30:40 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 16:30:46 2008
Subject: [Harbour] 2008-07-02 22:27 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc82$Blat.v2.6.2$7e64fe4a$365469537d6a@127.0.0.1>

2008-07-02 22:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbsqlit2/Makefile
   * contrib/hbsqlit3/Makefile
     ! Excluded from DOS builds.

   * contrib/Makefile
     - Commented following contribs from GNU-make default builds 
       until different platform/compiler issues and excessive 
       warnings are resolved:
       hbsqlit2, hbsqlit3, hbw32ddr, hbwhat32, hbziparch
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 16:31:24 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 16:32:22 2008
Subject: [Harbour] RC2 checklist update #6
Message-ID: <B9D86033-80C1-4505-89D1-3D4F5BE6E315@syenar.hu>

Pending:
- hb_errInternal() problem: not terminating app (with GTWVT).
   anyhow the exit() call looks a bit suspicious there by now.
- SunOS to be tested.
- DOS32/DJGPP 4.2.3 warnings:
../../spd.c: In function 'SCItm':
../../spd.c:80: warning: unused parameter 'ulMaxBuf'
../../hbmzip.c: In function 'hb_zipStoreFile':
../../hbmzip.c:545: warning: unused variable 'TODO'
../../hbmzip.c: In function 'hb_unzipExtractCurrentFile':
../../hbmzip.c:760: warning: unused variable 'TODO'

Cleared:
- Exlcuded unclean contribs from GNU-make system.

Cleared platforms:
- Win32
- Win64
- OS/2
- Linux
- Darwin PPC
- Darwin Unibin
- HPUX
- BSD
- DOS32 (DJGPP 4.2.3) (with few contrib warnings)

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 16:45:47 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 16:45:58 2008
Subject: [Harbour] 2008-07-02 22:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc84$Blat.v2.6.2$9affd370$2834dcce3f2@127.0.0.1>

2008-07-02 22:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbsqlit3/Makefile
   * contrib/Makefile
     + Reenabled hbsqlit3 for w32 platform.
--
Brgds,
Viktor

From bedipritpal at hotmail.com  Wed Jul  2 17:38:49 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Jul  2 17:38:52 2008
Subject: [Harbour] 2008-07-02 14:35 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <18247414.post@talk.nabble.com>


2008-07-02 14:35 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/gtwvg.c
  * source/rtl/gtwvt/gtwvt.c
    ! Changed the wat EXIT procedure works.
    ; The change is provided by Ron Pinkas so I have implemented as is.
      Before also I was not finding any problems on Harbour but 
      appln was GPFing on Exit with GTWVG.
    ; TOCHECK: Viktor see if it resolves the EXIT problem you are reporting 

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-07-02-14%3A35-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp18247414p18247414.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed Jul  2 17:45:31 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 17:45:38 2008
Subject: [Harbour] 2008-07-02 23:44 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc8c$Blat.v2.6.2$f33f9824$1a9c1cad2d6a@127.0.0.1>

2008-07-02 23:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtwvt/gtwvt.c
     ! Removed unused variable.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 17:45:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 17:46:48 2008
Subject: [Harbour] 2008-07-02 14:35 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <18247414.post@talk.nabble.com>
References: <18247414.post@talk.nabble.com>
Message-ID: <678FB085-EA7C-4807-80EA-925FC4524045@syenar.hu>

Thanks a lot Pritpal (and also to Ron), it does resolve
the problem for me.

Brgds,
Viktor

On 2008.07.02., at 23:38, Pritpal Bedi wrote:

>
> 2008-07-02 14:35 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * contrib/gtwvg/gtwvg.c
>  * source/rtl/gtwvt/gtwvt.c
>    ! Changed the wat EXIT procedure works.
>    ; The change is provided by Ron Pinkas so I have implemented as is.
>      Before also I was not finding any problems on Harbour but
>      appln was GPFing on Exit with GTWVG.
>    ; TOCHECK: Viktor see if it resolves the EXIT problem you are  
> reporting
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/2008-07-02-14%3A35-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp18247414p18247414.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Jul  2 17:48:24 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 17:49:17 2008
Subject: [Harbour] RC2 checklist update #7
Message-ID: <C50AD4C7-BE7C-4D7D-BE72-61E6B6F744A6@syenar.hu>

Pending:
- SunOS to be tested.
- DOS32/DJGPP 4.2.3 warnings:
../../spd.c: In function 'SCItm':
../../spd.c:80: warning: unused parameter 'ulMaxBuf'
I'd suggest to postpone these two, as these are signs
for missing implementations:
../../hbmzip.c: In function 'hb_zipStoreFile':
../../hbmzip.c:545: warning: unused variable 'TODO'
../../hbmzip.c: In function 'hb_unzipExtractCurrentFile':
../../hbmzip.c:760: warning: unused variable 'TODO'

Cleared:
- Exlcuded unclean contribs from GNU-make system.
- hb_errInternal() problem: not terminating app (with GTWVT/GTWVG).
   (Thanks Ron and Pritpal)

Cleared platforms:
- Win32
- Win64
- OS/2
- Linux
- Darwin PPC
- Darwin Unibin
- HPUX
- BSD
- DOS32 (DJGPP 4.2.3) (with few contrib warnings)

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  2 18:02:48 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 18:02:54 2008
Subject: [Harbour] 2008-07-02 23:44 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dc8f$Blat.v2.6.2$5d18dd26$2ffcfb8fab0e@127.0.0.1>

2008-07-02 23:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtwvt/gtwvt.c
     ! Removed unused variable.
--
Brgds,
Viktor

From bedipritpal at hotmail.com  Wed Jul  2 20:18:15 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Jul  2 20:18:22 2008
Subject: [Harbour] Harbour Online Help # 2
Message-ID: <18249507.post@talk.nabble.com>


Hello Everybody

Please approve new layout of Harbour Online Help Manual at

http://www.voych.info/harbour

Please click harbour/contrib/gtwvg

Rest pages will be uploaded within a day or two.

Your comment/suggesions are highly appreciated.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---2-tp18249507p18249507.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From philb at philb.us  Wed Jul  2 20:30:04 2008
From: philb at philb.us (Phil Barnett)
Date: Wed Jul  2 20:30:12 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <18249507.post@talk.nabble.com>
References: <18249507.post@talk.nabble.com>
Message-ID: <200807022030.04331.philb@philb.us>

On Wednesday 02 July 2008 08:18:15 pm Pritpal Bedi wrote:
> Hello Everybody
>
> Please approve new layout of Harbour Online Help Manual at
>
> http://www.voych.info/harbour

I get unknown host on that web address.

-- 
Waiting for sunspots.
From bedipritpal at hotmail.com  Wed Jul  2 20:40:28 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Jul  2 20:40:37 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <200807022030.04331.philb@philb.us>
References: <18249507.post@talk.nabble.com> <200807022030.04331.philb@philb.us>
Message-ID: <18249693.post@talk.nabble.com>


Phil

Check the message agian. Edited typo mistake.

http://www.vouch.info/harbour

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---2-tp18249507p18249693.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed Jul  2 18:13:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  2 22:27:33 2008
Subject: [Harbour] Internal errors to hb_out.log
Message-ID: <F79BABFE-CF6D-48C9-A2DF-232AE33EA940@syenar.hu>

Hi all,

Find attached hb_errInternal() function which
writes internal error details, along with the
stack, to hb_out.log (by default).

The code looks quite humble, tested okay under
BCC, logic is similar to the logging we use in
fm.c and extrap.c.

Please comment, if we should include this before
RC2. I personally think it's extremely useful,
especially to gather possible RC2 problems.

[ Credits to Randy Portnoff for the idea. ]

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: errorint.c
Type: application/octet-stream
Size: 5096 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080703/0458c3ac/errorint-0001.obj
-------------- next part --------------

From philb at philb.us  Thu Jul  3 01:12:17 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Jul  3 01:12:23 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <18249693.post@talk.nabble.com>
References: <18249507.post@talk.nabble.com> <200807022030.04331.philb@philb.us>
	<18249693.post@talk.nabble.com>
Message-ID: <200807030112.18225.philb@philb.us>

On Wednesday 02 July 2008 08:40:28 pm Pritpal Bedi wrote:
> Phil
>
> Check the message agian. Edited typo mistake.
>
> http://www.vouch.info/harbour
>
> Regards
> Pritpal Bedi

Who can add items and data to it?

-- 
Waiting for sunspots.
From dmacias at mail.udg.mx  Thu Jul  3 01:42:12 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jul  3 01:42:11 2008
Subject: [Harbour] Re: RC2 anything pending?
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486C66B4.2070001@mail.udg.mx>

With current Harbour code under OS/2 build fine with just "well known" 
messages:

-------------------------------------------------
[E:\harbourprerc2\harbour]make -r           1>make_gnu.log
../../gtstd.c: In function `hb_gt_std_ReadKey':
../../gtstd.c:389: warning: unused variable `TODO'
../../hbmzip.c: In function `hb_zipStoreFile':
../../hbmzip.c:545: warning: unused variable `TODO'
../../hbmzip.c: In function `hb_unzipExtractCurrentFile':
../../hbmzip.c:760: warning: unused variable `TODO'
-------------------------------------------------

Testing hbtpathy it build hbtpathy.a with these messages:
-------------------------------------------------
../../tpos2.c: In function `HB_FUN_P_INITPORTSPEED':
../../tpos2.c:72: warning: unused variable `rc'
../../tpos2.c: In function `HB_FUN_P_WRITEPORT':
../../tpos2.c:157: warning: signed and unsigned type in conditional 
expression
../../tpos2.c: In function `HB_FUN_P_OUTFREE':
../../tpos2.c:163: warning: missing initializer
../../tpos2.c:163: warning: (near initialization for `rxqueue.cb')
-------------------------------------------------

Based in results and maybe fixes, can be hbtpathy included in standard 
build again ?

David Macias


From myorg63 at mail.ru  Thu Jul  3 02:45:08 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Jul  3 02:45:12 2008
Subject: [Harbour] RC2 anything pending?
In-Reply-To: <0B5AE422-8420-4426-8823-B9B8A971B635@syenar.hu>
References: <0ECD6BAF-F618-4786-9DF3-0B1EFB2085BC@syenar.hu>
	<486B3AEE.1050601@mail.udg.mx>
	<0B5AE422-8420-4426-8823-B9B8A971B635@syenar.hu>
Message-ID: <18252685.post@talk.nabble.com>




Szak?ts Viktor wrote:
> 
> 
>> b) A long list of warnings
>> Seem to be related to sqlite
>> Look below for "B portion" catched from screen
> 
> Yes, unfortunately foreign code throws lots of
> warnings.
> 
> 


>From SQLite FAQ

(17) I get hundreds of compiler warnings when I compile SQLite. Isn't this a
problem? Doesn't it indicate poor code quality?

    Quality assurance in SQLite is done using full-coverage testing, not by
compiler warnings or other static code analysis tools. In other words, we
verify that SQLite actually gets the correct answer, not that it merely
satisfies stylistic constraints. Over two-thirds of the SQLite code base is
devoted purely to testing. The SQLite test suite runs many thousands of
separate test cases and many of those test cases are parameterized so that
hundreds of thousands of tests involving millions of SQL statements are run
and evaluated for correctness prior to every release. The developers use
code coverage tools to verify that all paths through the code are tested.
Whenever a bug is found in SQLite, new test cases are written to exhibit the
bug so that the bug cannot recur undetected in the future.

    During testing, the SQLite library is compiled with special
instrumentation that allows the test scripts to simulate a wide variety of
failures in order to verify that SQLite recovers correctly. Memory
allocation is carefully tracked and no memory leaks occur, even following
memory allocation failures. A custom VFS layer is used to simulate operating
system crashes and power failures in order to insure that transactions are
atomic across these events. A mechanism for deliberately injecting I/O
errors shows that SQLite is resilient to such malfunctions. (As an
experiment, try inducing these kinds of errors on other SQL database engines
and see what happens!)

    We also run SQLite using _valgrind_ on Linux and verify that it detects
no problems.

    Some people say that we should eliminate all warnings because benign
warnings mask real warnings that might arise in future changes. This is true
enough. But in reply, the developers observe that all warnings have already
been fixed in the compilers used for SQLite development (various versions of
GCC). Compiler warnings only arise from compilers that the developers do not
have access to.


Regards,
Petr






-- 
View this message in context: http://www.nabble.com/RC2-anything-pending--tp18218739p18252685.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Jul  3 02:50:04 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 02:50:09 2008
Subject: [Harbour] 2008-07-03 08:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dcd9$Blat.v2.6.2$05dfbea4$2f601fef22be@127.0.0.1>

2008-07-03 08:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbtpathy/tpos2.c
     ! Blind fix for three OS/2 warnings. David please test.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 02:57:46 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 02:57:49 2008
Subject: [Harbour] 2008-07-03 08:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dcda$Blat.v2.6.2$193f59a4$3720134ac712@127.0.0.1>

2008-07-03 08:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbsqlit3/Makefile
     * Changed so that only failing BSD and HPUX platforms 
       are excluded.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 02:57:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 02:58:40 2008
Subject: [Harbour] RC2 anything pending?
In-Reply-To: <18252685.post@talk.nabble.com>
References: <0ECD6BAF-F618-4786-9DF3-0B1EFB2085BC@syenar.hu>
	<486B3AEE.1050601@mail.udg.mx>
	<0B5AE422-8420-4426-8823-B9B8A971B635@syenar.hu>
	<18252685.post@talk.nabble.com>
Message-ID: <E97D902B-7673-4545-8FE7-D95E74FE84A7@syenar.hu>

Thanks Petr. I'm personally confident that the SQLite is a very
mature and well tested product. These lines confirmed it.

>>    Some people say that we should eliminate all warnings because  
>> benign
> warnings mask real warnings that might arise in future changes. This  
> is true
> enough. But in reply, the developers observe that all warnings have  
> already
> been fixed in the compilers used for SQLite development (various  
> versions of
> GCC). Compiler warnings only arise from compilers that the  
> developers do not
> have access to.

With SQLite3, I could see no problem either, but the number of warnings
is still high. We're probably using some higher level that them.

I've adjusted its Makefile to only exclude BSD and HPUX, which
were reported as failing platforms by Przemek.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 02:59:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 03:00:40 2008
Subject: [Harbour] Re: RC2 anything pending?
In-Reply-To: <486C66B4.2070001@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<486C66B4.2070001@mail.udg.mx>
Message-ID: <AC39D0FC-CDFE-4FBD-A1DD-6AEF897CF6A4@syenar.hu>

>
Hi David,

> ------------------------------------------------- ...
> ../../hbmzip.c: In function `hb_unzipExtractCurrentFile':
> ../../hbmzip.c:760: warning: unused variable `TODO'
> -------------------------------------------------
>
> Testing hbtpathy it build hbtpathy.a with these messages:
> -------------------------------------------------
> ../../tpos2.c: In function `HB_FUN_P_INITPORTSPEED':
> ../../tpos2.c:72: warning: unused variable `rc'
> ../../tpos2.c: In function `HB_FUN_P_WRITEPORT':
> ../../tpos2.c:157: warning: signed and unsigned type in conditional  
> expression
> ../../tpos2.c: In function `HB_FUN_P_OUTFREE':
> ../../tpos2.c:163: warning: missing initializer
> ../../tpos2.c:163: warning: (near initialization for `rxqueue.cb')
> -------------------------------------------------
>
> Based in results and maybe fixes, can be hbtpathy included in  
> standard build again ?

Thanks.

I've attempted to fix these warnings in hbtpathy.
Could you pls retest?

Of course you can include hbtpathy in the standard build.
This was the goal :)

Brgds,
Viktor

From bedipritpal at hotmail.com  Thu Jul  3 03:44:28 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Jul  3 03:44:31 2008
Subject: [Harbour] Harbour Online Help # 3
Message-ID: <18253505.post@talk.nabble.com>


Hello Everybody 

http://www.vouch.info/harbour

NOTE: This help manual can be made available in these formats: 

1) Compiled HTML format ( .chm ) 
2) PDF Document ( .pdf ) 
3) Classic WinHelp ( .hlp ) ( All Windows Versions ) 
4) MS Help 2.0 for Visual Studio Components 
5) Richtext Format ( .rtf ) ( MS Word Compatible ) 
6) eBook ( .exe ) 
7) XML ( .xml ) 

contribs are now documented per function prototypes.

Can someone tell me how I can format a table programatically 
to have uniform width - table as well as columns.

I use this code:

   FWrite(::hHtml, '<CENTER>' + CRLF)

   FWrite( ::hHtml, '<TABLE '                           )
   FWrite( ::hHtml, 'BGCOLOR="'+ ::SetColorTable + '" ' )
   FWrite( ::hHtml, 'BORDER='+NTRIM( ::nBorder )+' '    )
   FWrite( ::hHtml, 'FRAME=ALL '                        )
   FWrite( ::hHtml, 'CellPadding='+NTRIM( ::nCellPadding )+' ' )
   FWrite( ::hHtml, 'CellSpacing='+NTRIM( ::nCellSpacing )+' ' )
   FWrite( ::hHtml, 'COLS=' + NTRIM( ::nCols )          )
   FWrite( ::hHtml, 'WIDTH="90%" '                      )
   FWrite( ::hHtml, '>'+CRLF                            )

   if !Empty( ::cTitle )
       FWrite( ::hHtml, '<CAPTION ALIGN=TOP>' + ::cTitle+'\'+cModule +
'</CAPTION>' )
       FWrite( ::hHtml, CRLF )
   endif

   FWrite( ::hHtml, "<TR>" )
   for i := 1 TO ::nCols
       cCell := ::aColumns[ i,COL_HEADING ]
       cCell := StrTran( cCell, ";", "<BR>" )
       FWrite( ::hHtml, "<TH COLSPAN=1 VALIGN=BOTTOM>"+cCell )
   next
   FWrite( ::hHtml, CRLF )


Regards 
Pritpal Bedi 


-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---3-tp18253505p18253505.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Thu Jul  3 03:53:29 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Jul  3 03:53:32 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <200807030112.18225.philb@philb.us>
References: <18249507.post@talk.nabble.com> <200807022030.04331.philb@philb.us>
	<18249693.post@talk.nabble.com> <200807030112.18225.philb@philb.us>
Message-ID: <18253677.post@talk.nabble.com>


Phil

>Who can add items and data to it?

I am using "Help And Manual" to generate this manual. And it is 
licensed per author. 

I do not know what strategy we should adopt. For the time being
I am trying to devise a basic structure of what Harbour help 
should look like. 

As I am comfortable with this tool, I do not know the other 
alternatives useful for group sharing. Massimo has pointed to
Google Docs but it requires a lot more plus is not what I am
visualizing, MSDN approach. Viktor points to wiki section on SF.
I tried but I could not create even the first page.

May be you have better ideas.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---2-tp18249507p18253677.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Jul  3 03:59:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 03:59:58 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <18253677.post@talk.nabble.com>
References: <18249507.post@talk.nabble.com> <200807022030.04331.philb@philb.us>
	<18249693.post@talk.nabble.com> <200807030112.18225.philb@philb.us>
	<18253677.post@talk.nabble.com>
Message-ID: <5CE6D98A-18B5-488F-A468-A3C1F97A208D@syenar.hu>

Hi Phil,

Do you think it's possible to have MediaWiki on
our Harbour homepage?

MediaWiki is the quasi standard for Wiki pages
(used by wikipedia), the source format is very
easy to grasp (text), yet powerful.

It's not the ultimate tool to write professional,
multiformat documentation, but it's the best one
which allows collaboration, easy linking and the
output is also very familiar, standard .html.

MediaWiki needs MySQL and PHP on the server side.

Brgds,
Viktor

On 2008.07.03., at 9:53, Pritpal Bedi wrote:

>
> Phil
>
>> Who can add items and data to it?
>
> I am using "Help And Manual" to generate this manual. And it is
> licensed per author.
>
> I do not know what strategy we should adopt. For the time being
> I am trying to devise a basic structure of what Harbour help
> should look like.
>
> As I am comfortable with this tool, I do not know the other
> alternatives useful for group sharing. Massimo has pointed to
> Google Docs but it requires a lot more plus is not what I am
> visualizing, MSDN approach. Viktor points to wiki section on SF.
> I tried but I could not create even the first page.
>
> May be you have better ideas.
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/Harbour-Online-Help---2-tp18249507p18253677.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Thu Jul  3 03:59:38 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Jul  3 04:00:21 2008
Subject: [Harbour] Small chmod problems with few *.sh scripts in contrib/*
	directories
Message-ID: <g4i0u4$gff$1@ger.gmane.org>

Hi all,

Downloading a fresh copy of Harbour indicates
that few directories in contrib does not have
proper attributes (executable). This includes :

contrib/hbcurl/make_hcc.sh
contrib/hbgd/tests/make_hcc.sh
contrib/hbhpdf/make_hcc.sh
contrib/hbsqlit2/make_hcc.sh
contrib/hbsqlit3/make_hcc.sh
contrib/hbvpdf/make_hcc.sh

I am not familiar with svn enough to fix these
myself unfortunately, so any help is (much :))
appreciated.

-- 

Marek

From dmacias at mail.udg.mx  Thu Jul  3 04:04:27 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jul  3 04:04:29 2008
Subject: [Harbour] Re: RC2 anything pending?
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486C880B.4060402@mail.udg.mx>

Viktor, thanks

 >I've attempted to fix these warnings in hbtpathy.
 >Could you pls retest?

Zero warnings/errors
hbtpathy.a are created fine

Now you can include hbtpathy in the standard build, at least in OS/2  :-)

David Macias


From mbelgrano at deltain.it  Thu Jul  3 04:04:38 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jul  3 04:04:50 2008
Subject: R: Re: [Harbour] Harbour Online Help # 2
Message-ID: <000601c8dce3$3d5400db$0400a8c0@deltain.net>

Your tool can be good
Can you add other author?
Can you set multilingual so will start a translation?
Is covered from same licence of harbour?
Can we use doxygen for extract documentation from source? 
Google doc require a gmail account, is a office like and work also offline!


----- Messaggio originale -----
Da: Pritpal Bedi <bedipritpal@hotmail.com>
Inviato: gioved? 3 luglio 2008 9.52
A: harbour@harbour-project.org <harbour@harbour-project.org>
Oggetto: Re: [Harbour] Harbour Online Help # 2


Phil

>Who can add items and data to it?

I am using "Help And Manual" to generate this manual. And it is 
licensed per author. 

I do not know what strategy we should adopt. For the time being
I am trying to devise a basic structure of what Harbour help 
should look like. 

As I am comfortable with this tool, I do not know the other 
alternatives useful for group sharing. Massimo has pointed to
Google Docs but it requires a lot more plus is not what I am
visualizing, MSDN approach. Viktor points to wiki section on SF.
I tried but I could not create even the first page.

May be you have better ideas.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---2-tp18249507p18253677.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Thu Jul  3 03:50:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 04:05:33 2008
Subject: [Harbour] Harbour Online Help # 3
In-Reply-To: <18253505.post@talk.nabble.com>
References: <18253505.post@talk.nabble.com>
Message-ID: <C1A0DCEA-92C6-4F9F-B42C-C0633D2E40FB@syenar.hu>

Yes, but the source format is proprietary and needs
a commercial product for the conversions.

Brgds,
Viktor

On 2008.07.03., at 9:44, Pritpal Bedi wrote:

>
> Hello Everybody
>
> http://www.vouch.info/harbour
>
> NOTE: This help manual can be made available in these formats:
>
> 1) Compiled HTML format ( .chm )
> 2) PDF Document ( .pdf )
> 3) Classic WinHelp ( .hlp ) ( All Windows Versions )
> 4) MS Help 2.0 for Visual Studio Components
> 5) Richtext Format ( .rtf ) ( MS Word Compatible )
> 6) eBook ( .exe )
> 7) XML ( .xml )
>
> contribs are now documented per function prototypes.
>
> Can someone tell me how I can format a table programatically
> to have uniform width - table as well as columns.
>
> I use this code:
>
>   FWrite(::hHtml, '<CENTER>' + CRLF)
>
>   FWrite( ::hHtml, '<TABLE '                           )
>   FWrite( ::hHtml, 'BGCOLOR="'+ ::SetColorTable + '" ' )
>   FWrite( ::hHtml, 'BORDER='+NTRIM( ::nBorder )+' '    )
>   FWrite( ::hHtml, 'FRAME=ALL '                        )
>   FWrite( ::hHtml, 'CellPadding='+NTRIM( ::nCellPadding )+' ' )
>   FWrite( ::hHtml, 'CellSpacing='+NTRIM( ::nCellSpacing )+' ' )
>   FWrite( ::hHtml, 'COLS=' + NTRIM( ::nCols )          )
>   FWrite( ::hHtml, 'WIDTH="90%" '                      )
>   FWrite( ::hHtml, '>'+CRLF                            )
>
>   if !Empty( ::cTitle )
>       FWrite( ::hHtml, '<CAPTION ALIGN=TOP>' + ::cTitle+'\'+cModule +
> '</CAPTION>' )
>       FWrite( ::hHtml, CRLF )
>   endif
>
>   FWrite( ::hHtml, "<TR>" )
>   for i := 1 TO ::nCols
>       cCell := ::aColumns[ i,COL_HEADING ]
>       cCell := StrTran( cCell, ";", "<BR>" )
>       FWrite( ::hHtml, "<TH COLSPAN=1 VALIGN=BOTTOM>"+cCell )
>   next
>   FWrite( ::hHtml, CRLF )
>
>
> Regards
> Pritpal Bedi
>
>
> -- 
> View this message in context: http://www.nabble.com/Harbour-Online-Help---3-tp18253505p18253505.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Thu Jul  3 04:12:05 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jul  3 04:12:17 2008
Subject: R: Re: [Harbour] Harbour Online Help # 2
Message-ID: <000701c8dce4$47e2d29b$0400a8c0@deltain.net>

I agree about mediawiki but the problem is not wich tools.
Tomorrow we can export easy via rtf

----- Messaggio originale -----
Da: Szak?ts Viktor <harbour.01@syenar.hu>
Inviato: gioved? 3 luglio 2008 9.58
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: [Harbour] Harbour Online Help # 2

Hi Phil,

Do you think it's possible to have MediaWiki on
our Harbour homepage?

MediaWiki is the quasi standard for Wiki pages
(used by wikipedia), the source format is very
easy to grasp (text), yet powerful.

It's not the ultimate tool to write professional,
multiformat documentation, but it's the best one
which allows collaboration, easy linking and the
output is also very familiar, standard .html.

MediaWiki needs MySQL and PHP on the server side.

Brgds,
Viktor

On 2008.07.03., at 9:53, Pritpal Bedi wrote:

>
> Phil
>
>> Who can add items and data to it?
>
> I am using "Help And Manual" to generate this manual. And it is
> licensed per author.
>
> I do not know what strategy we should adopt. For the time being
> I am trying to devise a basic structure of what Harbour help
> should look like.
>
> As I am comfortable with this tool, I do not know the other
> alternatives useful for group sharing. Massimo has pointed to
> Google Docs but it requires a lot more plus is not what I am
> visualizing, MSDN approach. Viktor points to wiki section on SF.
> I tried but I could not create even the first page.
>
> May be you have better ideas.
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/Harbour-Online-Help---2-tp18249507p18253677.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From niki at synel.co.il  Thu Jul  3 04:37:49 2008
From: niki at synel.co.il (Chen Kedem)
Date: Thu Jul  3 04:37:08 2008
Subject: [Harbour] Harbour-users  Archive does not show sender name
Message-ID: <1A07FEDC778C3E4AA417F089511F859C031BA306C8@Mail-yoq.SYNEL-COMPANY.LTD>

Phil,

On the Archive page http://lists.harbour-project.org/pipermail/harbour-users/2008-June/date.html
all senders name are shown as "harbour-users at harbour-project.org" instead of the actual name
(I know the user email should be hidden but not the name). In the dev list it is shown Ok
( http://lists.harbour-project.org/pipermail/harbour/2008-July/date.html ).


  Chen.
From M.Horodyski at pzuzycie.com.pl  Thu Jul  3 05:07:54 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Jul  3 05:08:02 2008
Subject: [Harbour] RE: Harbour Digest, Vol 21, Issue 14
In-Reply-To: <NLB01FEYCT4aJ6pkNzP00005383@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95010189FC@PINK.zycie.pzu>

>Date: Thu, 3 Jul 2008 09:59:07 +0200
>From: Szak?ts Viktor <harbour.01@syenar.hu>
>Subject: Re: [Harbour] Harbour Online Help # 2
>To: "Harbour Project Main Developer List."

[ ... ]

>output is also very familiar, standard .html.
>
>MediaWiki needs MySQL and PHP on the server side.

Who know, when programmers can write http servers in Harbour ( not in
PHP ) ?

Regards,
Marek Horodyski
From dmacias at mail.udg.mx  Thu Jul  3 05:11:16 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jul  3 05:11:16 2008
Subject: [Harbour] Printing in OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486C97B4.8050200@mail.udg.mx>

Harbour under OS/2 does not output to printer

Notice: I never tried to print with Harbour under OS/2 due I use it in 
server side, which does not need to print, so this was a surprise

I use an old and complex system made in Clipper 5.3 in DOS session under 
OS/2 and it print as usual
Now I ported it to Harbour under OS/2 and does not print

- Testing with harbour\tests\output.prg does not show output in printer

- This small code work (print) fine with Clipper but does not print with 
Harbour
---------------
func main

SET PRINTER ON
? "Printing to default"
SET PRINTER OFF

SET PRINTER TO PRN
SET PRINTER ON
? "Printing to default (PRN)"
SET PRINTER OFF
SET PRINTER TO

SET PRINTER TO LPT1
SET PRINTER ON
? "Printing to LPT1"
SET PRINTER OFF
SET PRINTER TO

RETURN NIL
---------------

- Tested with older Harbour releases show the same: does not print

- From command line these output to printer as usual
   COPY test.txt LPT1:
   COPY test.txt PRN:

- harbour\source\rtl\set.c contain this code:
-----------------------------
#if defined(HB_OS_UNIX)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "|lpr" );
#elif defined(HB_OS_DOS)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "PRN" );
#elif defined(HB_OS_WIN_32)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "LPT1" );
#else
    hb_set.HB_SET_PRINTFILE = hb_strdup( "PRN" ); /* TOFIX */
#endif
-----------------------------

so OS/2 is using PRN as default, which work under command line

- These lines show correct values:
  QOUT( SET( _SET_PRINTER ) )     .F. / .T.
  QOUT( SET( _SET_PRINTFILE ) )   "PRN", "LPT1"


Any hints ?


David Macias


From harbour.01 at syenar.hu  Thu Jul  3 04:08:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 05:13:43 2008
Subject: [Harbour] Re: RC2 anything pending?
In-Reply-To: <486C880B.4060402@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<486C880B.4060402@mail.udg.mx>
Message-ID: <8D51AFC3-117C-465C-900F-0487D36B0B98@syenar.hu>

>
> >I've attempted to fix these warnings in hbtpathy.
> >Could you pls retest?
>
> Zero warnings/errors
> hbtpathy.a are created fine

Thanks David.

> Now you can include hbtpathy in the standard build, at least in OS/ 
> 2  :-)

It's already there :)

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Thu Jul  3 05:14:39 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jul  3 05:14:42 2008
Subject: [Harbour] Mac OS X builds ok
Message-ID: <9257026e0807030214sa0adf12xa2a4a7af0f447f41@mail.gmail.com>

I've just done a clean build of changelog 2008-07-03 09:15 UTC+0100
Marek Paliwoda (mpaliwoda at interia pl)
under a Mac OS X 10.5.4 (9E17) fully updated and I got no problems or
warnings using
HB_CONTRIBLIBS="hbct hbzlib hbgd hbpgsql hblog hbxml hbtip"

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Jul  3 05:28:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 05:29:11 2008
Subject: [Harbour] Mac OS X builds ok
In-Reply-To: <9257026e0807030214sa0adf12xa2a4a7af0f447f41@mail.gmail.com>
References: <9257026e0807030214sa0adf12xa2a4a7af0f447f41@mail.gmail.com>
Message-ID: <4A00961E-FF51-4153-A76A-02BB4FDA35F8@syenar.hu>

Thanks Lorenzo.

I did a blatant mistake when building mine first time,
so I can also report success now after a proper retry,
with the default contrib list. I'm only getting the "usual"
warnings with hbsqlit3, and hbcurl is complaining about
too old libcurl version, which is right.

I think this means a green flag for OSX.

[ Yet, I'll commit some guards for further hbcurl errors. ]

Brgds,
Viktor

On 2008.07.03., at 11:14, Lorenzo Fiorini wrote:

> I've just done a clean build of changelog 2008-07-03 09:15 UTC+0100
> Marek Paliwoda (mpaliwoda at interia pl)
> under a Mac OS X 10.5.4 (9E17) fully updated and I got no problems or
> warnings using
> HB_CONTRIBLIBS="hbct hbzlib hbgd hbpgsql hblog hbxml hbtip"
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jul  3 05:39:54 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 06:00:10 2008
Subject: [Harbour] 2008-07-03 11:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dcf0$Blat.v2.6.2$bfb09382$3410f61448c6@127.0.0.1>

2008-07-03 11:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/Makefile
   - contrib/hbziparch/hbzipcom.cpp
   * contrib/hbziparch/hbzipnew.cpp
   * contrib/hbziparch/common.mak
     * Merged source module hbzipcom.cpp into hbzipnew.cpp.
     + Using hb_fsSize() Harbour API instead of implementing 
       this functionality locally and only for a limited 
       number of platforms/compilers.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 05:57:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 06:03:35 2008
Subject: [Harbour] 2008-07-03 11:55 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dcf3$Blat.v2.6.2$3c27d54a$2ba4b6f5824a@127.0.0.1>

2008-07-03 11:55 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
     ! Fixed compile errors when compiled with some (but not all 
       possible) older libcurl versions.
     ; It still requires libcurl 7.17.0 in order to work properly though.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 04:02:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 06:18:06 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <18253677.post@talk.nabble.com>
References: <18249507.post@talk.nabble.com> <200807022030.04331.philb@philb.us>
	<18249693.post@talk.nabble.com> <200807030112.18225.philb@philb.us>
	<18253677.post@talk.nabble.com>
Message-ID: <3439C36B-DEDC-4179-856A-D649870C34FF@syenar.hu>

> As I am comfortable with this tool, I do not know the other
> alternatives useful for group sharing. Massimo has pointed to
> Google Docs but it requires a lot more plus is not what I am
> visualizing, MSDN approach. Viktor points to wiki section on SF.
> I tried but I could not create even the first page.

Wiki on sf.net seems completely broken. Now I wanted to
turn it off, and it fails with a "function call" error
(it did the same when I first wanted to enable it).

It could be good if it worked, but it doesn't.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 06:26:34 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 06:27:26 2008
Subject: [Harbour] RC2 checklist update #8
Message-ID: <C422FEAE-4BFC-4910-ABCF-0F37EFB03BE2@syenar.hu>

Hi all,

Anybody has any objections, comments or pending stuff before
tagging RC2? I plan do tag RC2 today (CET) evening time.

Proposed to postpone to Final release:
- OS/2 printing problem.
- hb_errInternal() logging functionality.
- SunOS testing.
- DOS32/DJGPP 4.2.3 warnings:
   ../../spd.c: In function 'SCItm':
   ../../spd.c:80: warning: unused parameter 'ulMaxBuf'
- OS/2 / DOS: 'TODO' warnings.

Cleared platforms:
- Win32
- Win64
- OS/2
- Linux
- Darwin PPC
- Darwin Unibin
- HPUX
- BSD
- DOS32 (DJGPP 4.2.3)

Brgds,
Viktor

From jarabal at ya.com  Thu Jul  3 08:03:14 2008
From: jarabal at ya.com (Javier)
Date: Thu Jul  3 08:03:41 2008
Subject: [Harbour] RC2 checklist update #8
In-Reply-To: <C422FEAE-4BFC-4910-ABCF-0F37EFB03BE2@syenar.hu>
References: <C422FEAE-4BFC-4910-ABCF-0F37EFB03BE2@syenar.hu>
Message-ID: <486CC002.6040105@ya.com>

Thanks Viktor,

  * cleaned warnings DOS32/DJGPP 4.2.3

Szak?ts Viktor escribi?:
> - DOS32/DJGPP 4.2.3 warnings:
>   ../../spd.c: In function 'SCItm':
>   ../../spd.c:80: warning: unused parameter 'ulMaxBuf'
>
I take out "Remove C ESC sequences and converts them to Clipper chars in 
cRes.", I think that this incumbent upon the preprocesador like in C.
Please, could you update the repository, thank you so much Viktor.

Best regards.
Xavi
-------------- next part --------------
/*
 * Harbour Project source code:
 * SQL_SPRINTF() _SPD() functions
 *
 * Copyright 2008 Xavi <jarabal/at/gmail.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status of such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */

#include "hbapi.h"
#include "hbapiitm.h"
#include "hbapierr.h"
#include "hbdate.h"
#include "hbset.h"

static void STAItm( PHB_ITEM pItmPar )
{
   ULONG i, ulItmPar = hb_itemGetCLen( pItmPar );
   char *cRes, *c, *cItmPar = hb_itemGetCPtr( pItmPar );

   for( i = 3, c = cItmPar; *c; c++ ){
      if( *c == '\'' ) i++;   /* Count ' Tokens */
   }
   cRes = (char *)hb_xgrab( ulItmPar + i * sizeof(char) );
   i = 0; c = cItmPar; cRes[i++] = '\'';
   while( *c ){
      if( *c == '\'' ) cRes[i++] = '\'';
      cRes[i++] = *c++;
   }
   cRes[i++] = '\''; /* cRes[i] = '\0'; */
#ifdef __XHARBOUR__
   hb_itemPutCPtr( pItmPar, cRes, i );
#else
   hb_itemPutCLPtr( pItmPar, cRes, i );
#endif
}

static ULONG SCItm( char *cBuffer, ULONG ulMaxBuf, char *cParFrm, int iCOut, int IsIndW, int iIndWidth, int IsIndP, int iIndPrec, PHB_ITEM pItmPar )
{
   ULONG s;

   if( IsIndW && IsIndP ){
      switch( iCOut ){
      case 'p':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, iIndWidth, iIndPrec, hb_itemGetPtr( pItmPar ) );
         break;
      case 's': case 'S':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, iIndWidth, iIndPrec, hb_itemGetCPtr( pItmPar ) );
         break;
      case 'e': case 'E': case 'f': case 'g': case 'G': case 'a': case 'A':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, iIndWidth, iIndPrec, hb_itemGetND( pItmPar ) );
         break;
      /* case 'c': case 'C': case 'd': case 'i': case 'o': case 'u': case 'x': case 'X': */
      default:
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, iIndWidth, iIndPrec, (HB_IS_LONG( pItmPar ) ? hb_itemGetNL( pItmPar ) : hb_itemGetNI( pItmPar )) );
      }
   }else if( IsIndW || IsIndP ){
      int iInd = (IsIndW ? iIndWidth : iIndPrec);

      switch( iCOut ){
      case 'p':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, iInd, hb_itemGetPtr( pItmPar ) );
         break;
      case 's': case 'S':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, iInd, hb_itemGetCPtr( pItmPar ) );
         break;
      case 'e': case 'E': case 'f': case 'g': case 'G': case 'a': case 'A':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, iInd, hb_itemGetND( pItmPar ) );
         break;
      /* case 'c': case 'C': case 'd': case 'i': case 'o': case 'u': case 'x': case 'X': */
      default:
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, iInd, (HB_IS_LONG( pItmPar ) ? hb_itemGetNL( pItmPar ) : hb_itemGetNI( pItmPar )) );
      }
   }else{
      switch( iCOut ){
      case 'p':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, hb_itemGetPtr( pItmPar ) );
         break;
      case 's': case 'S':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, hb_itemGetCPtr( pItmPar ) );
         break;
      case 'e': case 'E': case 'f': case 'g': case 'G': case 'a': case 'A':
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, hb_itemGetND( pItmPar ) );
         break;
      /* case 'c': case 'C': case 'd': case 'i': case 'o': case 'u': case 'x': case 'X': */
      default:
         s = snprintf( cBuffer, ulMaxBuf, cParFrm, (HB_IS_LONG( pItmPar ) ? hb_itemGetNL( pItmPar ) : hb_itemGetNI( pItmPar )) );
      }
   }
   return s;
}

/*******************************************************************************
* ANSI C sprintf() for ANSI SQL with DATE, DATETIME, LOGICAL, NIL, NUMERIC
* ------------------------------------------------------------------------
*       cRes := Sql_sprintf( cFrm, ... ) or cRes := _Spd( cFrm, ... )
*
* Full compatible ANSI C99 formats with C,S converters wchar_t (UNICODE)
* Integer & Floating point converters with Width and Precision for NUMERIC & STRING
* a,A converters Hexadecimal floating point format. Thanks Rafa.
*  ? Sql_sprintf( "Phi = %A", (1 + 5**0.5) / 2 ) // Phi = 0X1,9E3779B97F4A8P+0
* %m$,*m$ Index & Indirect arguments C99. Thanks Viktor.
*  ? Sql_sprintf( "Phi = %2$0*3$.*1$f", 4, (1 + 5**0.5) / 2, 7 ) // Phi = 01.6180
*
* s converter for format Harbour data types.
*    NUMERIC with FIXED DECIMALS = n | n.d   STRING = String's ANSI C
*    DATE = HB_SET_DATEFORMAT      DATETIME = HB_SET_DATEFORMAT hh:mm:ss
*     New Internal Modifier {}. Thanks Mindaugas.
*     Date and Time Format separate by first space {DD/MM/YYYY hh:mm:ss.ccc pm}
*     {DD/MM/YYYY} = Only Date | { hh:mm:ss.ccc pm} = Only Time
*        ? Sql_sprintf( "%s", Date() )                // 16/06/08
*        ? Sql_sprintf( "%s", DateTime() )            // 16/06/08 04:11:21
*        ? Sql_sprintf( "%{YYYYMMDD}s", DateTime() )  // 20080616
*        ? Sql_sprintf( "%{ hh:mm pm}s", DateTime() ) // 04:11 AM
*    LOGICAL = TRUE | FALSE        %d converter for LOGICAL = 1 | 0
*     Accepts Internal Modifier TRUE and FALSE Format separate by first comma
*     {T .T.,F .F.} = TRUE & FALSE | {ON} = Only TRUE | {,OFF} = Only FALSE
*        ? Sql_sprintf( "%{VERDADERO,FALSO}s", .F. ) // FALSO
*        ? Sql_sprintf( "%{ONLY IF TRUE}s", .T. ) // ONLY IF TRUE
*
* New t converter for format ANSI SQL types.
*    NUMERIC with FIXED DECIMALS = n | n.d   STRING = 'String''s ANSI SQL'
*    DATE = 'YYYY-MM-DD' DATETIME = 'YYYY-MM-DD HH:MM:SS'
*     Accepts Internal Modifier like s converter {DD/MM/YYYY hh:mm:ss.ccc pm}
*    LOGICAL = TRUE | FALSE        Accepts Internal Modifier like s {ON,OFF}
*
* Print NULL if the parameter is NIL or HB_IT_NULL
* Processing %% and n converter Position.
* Accepts conversion inside if variable is passed by reference.
*  Local xDate := Date(); Sql_sprintf('%s', @xDate) => xDate == '2008-05-19'
*******************************************************************************/

#define DK_INCRES 1024
#define DK_INCBUF 512
#define DK_BLKBUF HB_MAX_DOUBLE_LENGTH   /* Expense of DK_INCBUF */

#if defined( __XHARBOUR__ ) && ! defined( HB_ERR_FUNCNAME )
   #define HB_ERR_FUNCNAME "SQL_SPRINTF"
#endif

HB_FUNC( _SPD )
{
   ULONG ulItmFrm;
   char *cRes, *cItmFrm;
   int argc = hb_pcount() - 1;
   PHB_ITEM pItmFrm = hb_param( 1, HB_IT_STRING );

   if( !pItmFrm || (cItmFrm = hb_itemGetCPtr( pItmFrm )) == NULL ){
      hb_errRT_BASE_SubstR( EG_ARG, 3012, NULL, HB_ERR_FUNCNAME, 1, hb_paramError( 1 ) );
   }else if( !(ulItmFrm = hb_itemGetCLen( pItmFrm )) ){
      hb_retc( NULL );
   }else if( !argc ){
      cRes = (char *)hb_xgrab( ulItmFrm + sizeof(char) );
      memcpy( cRes, cItmFrm, ulItmFrm + sizeof(char) );
      hb_retclen_buffer( cRes, ulItmFrm );
   }else{
      PHB_ITEM pItmPar;
      char *cIntMod, *cBuffer, *cParFrm, *c;
      int p, arg, iCOut, IsType, IsIndW, IsIndP, iIndWidth, iIndPrec, iErrorPar = 0;
      ULONG s, f, i, ulWidth, ulParPos = 0, ulResPos = 0, ulMaxBuf = DK_INCBUF, ulMaxRes = DK_INCRES;
      static char cToken[] = "stcdiouxXaAeEfgGpnSC";

      cIntMod = NULL;
      cRes = (char *)hb_xgrab( ulMaxRes );
      cBuffer = (char *)hb_xgrab( ulMaxBuf );
      cParFrm = (char *)hb_xgrab( ulItmFrm + sizeof(char) );

      for( p = 0; p < argc; /* Not p++ by support index & indirect arguments */ ){

         c = cItmFrm + ulParPos;
         s = f = i = ulWidth = arg = iCOut = IsType = IsIndW = iIndWidth = IsIndP = iIndPrec = 0;
         do{   /* Get Par Format */
            cParFrm[i++] = *c;
            if( f && *c == '%' ){
               f = ulWidth = IsIndW = IsIndP = 0;
            }else if( f && !ulWidth && *c >= '0' && *c <= '9' ){
               ulWidth = atol( c );
            }else if( f && *c == '.' ){
               if( f++ == 2 ) iErrorPar = 1;
            }else if( f && *c == '*' ){
               if( f == 2 ){
                  if( IsIndP ){
                     f = 3; iErrorPar = 1;
                  }else{
                     IsIndP = 1;
                  }
               }else if( !IsIndW ){
                  IsIndW = 1;
               }else{
                  f = 3; iErrorPar = 1;
               }
            }else if( f && *c == '$' ){
               if( ulWidth && IsIndP && !iIndPrec ){
                  iIndPrec = ulWidth;
                  iCOut = '*';
               }else if( ulWidth && IsIndW && !iIndWidth ){
                  iIndWidth = ulWidth;
                  ulWidth = 0; iCOut = '*';
               }else if( ulWidth && !arg ){
                  arg = ulWidth;
                  ulWidth = 0; iCOut = '%';
               }else{
                  f = 3; iErrorPar = 1;
               }
               while( i && cParFrm[--i] != iCOut );
               ++i; iCOut = 0;
            }else if( f && *c == '{' ){
               if( s ){
                  f = 3; iErrorPar = 1;
               }else{   /* Remove Internal Modifier */
                  if( cIntMod == NULL ){
                     cIntMod = (char *)hb_xgrab( ulItmFrm + sizeof(char) );
                  }
                  while( *c++ && *c != '}' ) cIntMod[s++] = *c;
                  --i; cIntMod[s] = '\0';
                  if( *(c - 1) == '\0' ){
                     f = 3; iErrorPar = 1;
                  }
               }
            }else if( f && strchr(cToken, *c) ){
               f = 3; iCOut = *c;
            }else if( *c == '%' ){
               f = 1;
            }
            c++;
         }while( f < 3 && *c ); cParFrm[f = i] = '\0';
         if( iErrorPar ) break;

         if( iCOut == 't' ){
            if( cParFrm[f - 2] == '%' ){
               IsType = 1; iCOut = cParFrm[f - 1] = 's';
            }else{
               iErrorPar = 1; break;
            }
         }

         if( IsIndW  ){ /* Get Par Indirectly Width Item */
            pItmPar = hb_param( (iIndWidth ? iIndWidth + 1 :  p++ + 2), HB_IT_INTEGER );
            if( pItmPar ){
               if( (iIndWidth = hb_itemGetNI( pItmPar )) < 0 ){
                  ulWidth = -iIndWidth;
               }else{
                  ulWidth = iIndWidth;
               }
            }else{
               iErrorPar = 1; break;
            }
         }

         if( IsIndP ){  /* Get Par Indirectly Precision Item */
            pItmPar = hb_param( (iIndPrec ? iIndPrec + 1 :  p++ + 2), HB_IT_INTEGER );
            if( pItmPar ){
               iIndPrec = hb_itemGetNI( pItmPar );
            }else{
               iErrorPar = 1; break;
            }
         }

         if( !arg && *c && p == argc - 1 ){ /* No more Par Items */
            do{ cParFrm[i++] = *c; }while( *c++ ); i--;
         }  /* i == strlen(cParFrm) */

         pItmPar = hb_param( (arg ? arg + 1 :  p++ + 2), HB_IT_ANY );   /* Get Par Item */
         if( !pItmPar ){
            iErrorPar = 1; break;
         }

         if( !iCOut || iCOut == 'n' ){ /* Par Text Out */

            for( f = i, i = 0; i < f; i++ ){ /* Change %% with % */
               if( cParFrm[i] == '%' && cParFrm[i + 1] == '%' ){
                  memcpy( cParFrm + i, cParFrm + i + 1, f - i );
                  f--;
               }
            }  /* i == strlen(cParFrm) */
            if( iCOut ){
               for( f = 0; f < i; f++ ){  /* Erase %n */
                  if( cParFrm[f] == '%' && cParFrm[f + 1] == 'n' ){
                     memcpy( cParFrm + f, cParFrm + f + 2, i - f - 1 );
                     break;
                  }
               }  /* f == Index % of n */
               if( f < i ){
                  i -= 2;  /* i == strlen(cParFrm) */
                  hb_itemPutNL( pItmPar, ulResPos + f );
               }else{
                  iErrorPar = 1; break;
               }
            }
            if( (f = i + sizeof(char)) > ulMaxBuf ){
               ulMaxBuf += f + DK_INCBUF;
               cBuffer = (char *)hb_xrealloc( cBuffer, ulMaxBuf );
            }
            strcpy( cBuffer, cParFrm ); s = i;

         }else{   /* Par Item sprintf() Out */

#        ifdef HB_IT_NULL
            if( (HB_IS_NIL( pItmPar ) || HB_IS_NULL( pItmPar )) ){
#        else
            if( HB_IS_NIL( pItmPar ) ){
#        endif
               ulWidth = f; IsIndW = IsIndP = 0;
               while( cParFrm[--f] != '%' );
               iCOut = cParFrm[f + 1] = 's'; /* Change format with %s */
               memcpy( cParFrm + f + 2, cParFrm + ulWidth, i - ulWidth + 1 );
               i -= ulWidth - f - 2;   /* i == strlen(cParFrm) */
               if( (f = i + 5) > ulMaxBuf ){ /* size of "NULL" == 5 */
                  ulMaxBuf += f + DK_INCBUF;
                  cBuffer = (char *)hb_xrealloc( cBuffer, ulMaxBuf );
               }
               hb_itemPutCL( pItmPar, "NULL", 4 );
               s = SCItm( cBuffer, ulMaxBuf, cParFrm, iCOut, IsIndW, iIndWidth, IsIndP, iIndPrec, pItmPar );

            }else if( HB_IS_STRING( pItmPar ) && (iCOut == 's' || iCOut == 'S') ){
               if( IsType ) STAItm( pItmPar );
               f = hb_itemGetCLen( pItmPar );
               if( (f = i + HB_MAX(ulWidth, f)) > ulMaxBuf ){
                  ulMaxBuf += f + DK_INCBUF;
                  cBuffer = (char *)hb_xrealloc( cBuffer, ulMaxBuf );
               }
               s = SCItm( cBuffer, ulMaxBuf, cParFrm, iCOut, IsIndW, iIndWidth, IsIndP, iIndPrec, pItmPar );

            }else if( HB_IS_DATE( pItmPar ) && iCOut == 's' ){
               char cDTBuf[ 19 ], cDTFrm[ 28 ]; /* 26 + 2 if %t and change format time */

               if( s ){ /* Internal Modifier */
                  for( f = 0; cIntMod[f] && cIntMod[f] != ' '; f++ );
                  if( f != s ) cIntMod[f++] = '\0';   /* Date & Time */
               }

#           ifdef __XHARBOUR__
               if( HB_IS_DATETIME( pItmPar ) ){
                  hb_datetimeFormat( hb_itemGetDTS( pItmPar, cDTBuf ), cDTFrm,
                                       (s ? cIntMod : (IsType ? "YYYY-MM-DD" : hb_set.HB_SET_DATEFORMAT)),
                                       (s ? cIntMod + f : "HH:MM:SS") );
                  if( s ){
                     if( !cIntMod[0] ){
                        memcpy( cDTFrm, cDTFrm + 1, 27 );   /* LTrim 1 space if only Time */
                     }else if( cDTFrm[s] == ' ' ){
                        cDTFrm[s] = '\0'; /* RTrim 1 space if only Date */
                     }
                  }
               }else
#           endif
                  hb_dateFormat( hb_itemGetDS( pItmPar, cDTBuf ), cDTFrm,
                                    (s ? cIntMod : (IsType ? "YYYY-MM-DD" : hb_set.HB_SET_DATEFORMAT)) );

               if( (f = i + HB_MAX(ulWidth, 28)) > ulMaxBuf ){
                  ulMaxBuf += f + DK_INCBUF;
                  cBuffer = (char *)hb_xrealloc( cBuffer, ulMaxBuf );
               }
               hb_itemPutC( pItmPar, cDTFrm );
               if( IsType ) STAItm( pItmPar );
               s = SCItm( cBuffer, ulMaxBuf, cParFrm, iCOut, IsIndW, iIndWidth, IsIndP, iIndPrec, pItmPar );

            }else if( HB_IS_LOGICAL( pItmPar ) ){

               if( s ){ /* Internal Modifier */
                  for( f = 0; cIntMod[f] && cIntMod[f] != ','; f++ );
                  if( f != s ) cIntMod[f++] = '\0';   /* TRUE & FALSE */
               }
               if( iCOut == 's' ){
                  hb_itemPutC( pItmPar, (hb_itemGetL( pItmPar ) ? (s ? cIntMod : "TRUE") : (s ? cIntMod + f : "FALSE")) );
               }
               if( (f = i + (iCOut == 's' ? HB_MAX(ulWidth, (s ? s : 6)) : HB_MAX(ulWidth, DK_BLKBUF))) > ulMaxBuf ){
                  ulMaxBuf += f + DK_INCBUF;   /* size of "FALSE" == 6 */
                  cBuffer = (char *)hb_xrealloc( cBuffer, ulMaxBuf );
               }
               s = SCItm( cBuffer, ulMaxBuf, cParFrm, iCOut, IsIndW, iIndWidth, IsIndP, iIndPrec, pItmPar );

            }else if( iCOut == 's' ){
               char *cTrimStr, *cStr = hb_itemStr( pItmPar, NULL, NULL );

               if( cStr ){
                  f = strlen( cStr ); cTrimStr = hb_strLTrim( cStr, &f );
                  if( (f = i + HB_MAX(ulWidth, f)) > ulMaxBuf ){
                     ulMaxBuf += f + DK_INCBUF;
                     cBuffer = (char *)hb_xrealloc( cBuffer, ulMaxBuf );
                  }
                  hb_itemPutCL( pItmPar, cTrimStr, f );
                  s = SCItm( cBuffer, ulMaxBuf, cParFrm, iCOut, IsIndW, iIndWidth, IsIndP, iIndPrec, pItmPar );
                  hb_xfree( cStr );
               }else{
                  iErrorPar = p + 2; break;
               }

            }else if( HB_IS_NUMERIC( pItmPar ) || HB_IS_POINTER( pItmPar ) ){
               if( (f = i + HB_MAX(ulWidth, DK_BLKBUF)) > ulMaxBuf ){
                  ulMaxBuf += f + DK_INCBUF;
                  cBuffer = (char *)hb_xrealloc( cBuffer, ulMaxBuf );
               }
               s = SCItm( cBuffer, ulMaxBuf, cParFrm, iCOut, IsIndW, iIndWidth, IsIndP, iIndPrec, pItmPar );

            }else{
               iErrorPar = p + 2; break;
            }
         }

         if( (f = s + ulResPos + sizeof(char)) > ulMaxRes ){
            ulMaxRes += f + DK_INCRES;
            cRes = (char *)hb_xrealloc( cRes, ulMaxRes );
         }
         strcpy( cRes + ulResPos, cBuffer ); ulResPos += s;

         if( (ulParPos = c - cItmFrm) >= ulItmFrm ){
            break;   /* No more Par Format */
         }
      }
      if( cIntMod ) hb_xfree( cIntMod );
      hb_xfree( cParFrm ); hb_xfree( cBuffer );
      if( iErrorPar ){
         hb_xfree( cRes );
         if( iErrorPar > 1 ){
            hb_errRT_BASE_SubstR( EG_ARG, 3012, NULL, HB_ERR_FUNCNAME, 2, hb_paramError( 1 ), hb_paramError( iErrorPar ) );
         }else{
            hb_errRT_BASE_SubstR( EG_ARG, 3012, NULL, HB_ERR_FUNCNAME, 1, hb_paramError( 1 ) );
         }
      }else{
         hb_retclen_buffer( cRes, ulResPos );
      }
   }
}
HB_FUNC( SQL_SPRINTF ) { HB_FUNC_EXEC( _SPD ); }
/* END */
From rportnoff at spendmap.com  Thu Jul  3 08:07:08 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Thu Jul  3 08:05:53 2008
Subject: [Harbour] Trapping recurrsion
In-Reply-To: <1B3761B0-CBE4-4847-A851-3065B4395BA1@syenar.hu>
References: <B0081668031@ms1.3peaks.com>
	<1B3761B0-CBE4-4847-A851-3065B4395BA1@syenar.hu>
Message-ID: <B0081687230@ms1.3peaks.com>

Thanks Viktor, but this does not build with my Harbour version - I 
will test it with the next release...

At 02:45 PM 7/2/2008, you wrote:
>Hi Randy,
>
>Here is the internal error logging implemented.
>Copy the file to source/rtl/ and recompile.
>
>Brgds,
>Viktor
>
>
>
>
>
>
>
>On 2008.07.02., at 17:21, Randy Portnoff wrote:
>
>>Hi all,
>>
>>Similar to the way Harbour now traps GPF's (and logs some info in a
>>text file), can it also detect  race conditions and log that as
>>well? I am referring to situations where recursion occurs repeatedly
>>which causes the app to just exit (ie. vanish). Ideally, a runtime
>>error would be best.
>>
>>For example, this causes the app to vanish.
>>
>>func main()
>>SomeFunc()
>>return nil
>>
>>func SomeFunc()
>>Main()
>>return nil
>>
>>Regards,
>>Randy.
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From mpaliwoda at interia.pl  Thu Jul  3 07:16:21 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Jul  3 08:11:37 2008
Subject: [Harbour] Re: RC2 checklist
In-Reply-To: <E95DB401-ED1A-43AE-84E3-D480E4F02659@syenar.hu>
References: <E95DB401-ED1A-43AE-84E3-D480E4F02659@syenar.hu>
Message-ID: <486CB505.1020701@interia.pl>

Hi Viktor,

> Pending, non-critical:
[...]
> - 64bit C-mode startup not implemented in hbinit.h.

It's due to :

#if defined(_MSC_VER) && !defined(_WIN64) && \

in hbinit.h ( please note : !defined(_WIN64) )

If you remove it Harbour compiles OK here
(crosscompilation). I do not know however
if it works because I do not have Win64 OS
at hand at this moment. I'll verify later
today if it works ...

-- 

Marek

From lorenzo.fiorini at gmail.com  Thu Jul  3 07:30:14 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Jul  3 08:28:53 2008
Subject: [Harbour] RC2 checklist update #8
In-Reply-To: <C422FEAE-4BFC-4910-ABCF-0F37EFB03BE2@syenar.hu>
References: <C422FEAE-4BFC-4910-ABCF-0F37EFB03BE2@syenar.hu>
Message-ID: <9257026e0807030430q6f3bc5faj5e174a4fa452f90a@mail.gmail.com>

On Thu, Jul 3, 2008 at 12:26 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Anybody has any objections, comments or pending stuff before
> tagging RC2? I plan do tag RC2 today (CET) evening time.

I've also successfully done a msys/mingw 3.4.5 build so for me it's ok.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Jul  3 04:12:30 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 08:34:09 2008
Subject: [Harbour] 2008-07-03 10:09 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dce4$Blat.v2.6.2$8a080fdc$16b09e4a9c92@127.0.0.1>

2008-07-03 10:09 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/make_gcc.sh
   * contrib/hbgd/tests/bld.sh
   * contrib/hbhpdf/make_gcc.sh
   * contrib/hbsqlit2/make_gcc.sh
   * contrib/hbsqlit3/make_gcc.sh
   * contrib/hbvpdf/make_gcc.sh
     + svn propset svn:executable ON *
     ; Thanks Marek. I'm updating my local files to avoid 
       this in the future.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Jul  3 07:16:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul  3 08:41:29 2008
Subject: [Harbour] 2008-07-03 13:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807031116.m63BGX8V016255@31-mo5-4.acn.waw.pl>

2008-07-03 13:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmsql/msql.h
    * updated for [Open]Watcom builds. Now DOS OpenWatcom builds
      works fine except hbbmcdx which needs special trick for long
      file names. Question: Should we change filenames in this library
      to 8.3 standard?

  * harbour/config/none.cf
    ! fixed to work with DOS and pure command.com

best regards
Przemek
From druzus at acn.waw.pl  Thu Jul  3 07:39:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul  3 08:41:31 2008
Subject: [Harbour] BUG: LONG conflicting with external libs
In-Reply-To: <FF536D4A-B17C-4F64-B096-0448BDE3D1D2@syenar.hu>
References: <FF536D4A-B17C-4F64-B096-0448BDE3D1D2@syenar.hu>
Message-ID: <20080703113910.GA21205@34-mo7-2.acn.waw.pl>

On Tue, 01 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Our LONG type is conflicting with FreeImage.h, which
> was possible to workaround under Windows, but in Linux
> it seems to remain a problem.
> We're taking namespaces very seriously, but we actually
> break in the most obvious way: type names.
> Some of these are needed for Clipper C API compatibility,
> but none of them is necessary for Harbour core, or in fact
> anywhere outside compatibility .api files.
> This is the other reason why we can't easily include
> <windows.h> freely anywhere in 3rd party code, besides
> causing some other problem, like our types and sizes
> unnecessarily tied to OS types.
> I think this is something to solve after 1.0.

I agree but before we begin to change it we should create
list of necessary types we will want to use instead of current
one and new ones we will have to introduce to resolve problems
with some limitations.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul  3 08:50:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 08:52:19 2008
Subject: [Harbour] Changelogs
Message-ID: <B77191AC-6974-4C59-ADB9-E9457036B273@syenar.hu>

2008-07-03 14:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    * contrib/hbbmcdx/Makefile
    * contrib/hbbmcdx/common.mak
    - contrib/hbbmcdx/bmsixcdx1.c
    + contrib/hbbmcdx/bmsixcdx.c
    - contrib/hbbmcdx/bmdbfcdx1.c
    + contrib/hbbmcdx/bmdbfcdx.c
    - contrib/hbbmcdx/hbrddbmcdx.h
    + contrib/hbbmcdx/hbbmcdx.h
      ! Removed long filename.

2008-07-03 14:11 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    * contrib/hbmisc/spd.c
      ! DOS/GCC warning fixed, plus another update from Xavi.
      ; Sorry I've removed the old function name as IMO there is
        not much point in keeping compatibility with a name which
        was never used by Harbour. That can be easily done outside
        Harbour though for those who need it nevertheless.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 06:42:05 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 08:59:59 2008
Subject: [Harbour] 2008-07-03 12:40 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dcf9$Blat.v2.6.2$6f689e16$245ca34a4e6a@127.0.0.1>

2008-07-03 12:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/Makefile
   * contrib/hbfimage/Makefile
   * contrib/hbhpdf/Makefile
   * contrib/rddads/Makefile
     ! Excluded from DOS builds.
--
Brgds,
Viktor

From rportnoff at spendmap.com  Thu Jul  3 09:09:37 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Thu Jul  3 09:08:23 2008
Subject: [Harbour] Trapping recurrsion
Message-ID: <B0081688436@ms1.3peaks.com>

Hi Viktor,

Are the only error logs created by Harbour HB_EX.LOG and HB_OUT.LOG 
or are there others?

IMO, I think only one filename should be used for _all_ logs and new 
errors should be appended to the existing log if it exists.

Regards,
Randy.

At 02:45 PM 7/2/2008, you wrote:
>Hi Randy,
>
>Here is the internal error logging implemented.
>Copy the file to source/rtl/ and recompile.
>
>Brgds,
>Viktor
>
>
>
>
>
>
>
>On 2008.07.02., at 17:21, Randy Portnoff wrote:
>
>>Hi all,
>>
>>Similar to the way Harbour now traps GPF's (and logs some info in a
>>text file), can it also detect  race conditions and log that as
>>well? I am referring to situations where recursion occurs repeatedly
>>which causes the app to just exit (ie. vanish). Ideally, a runtime
>>error would be best.
>>
>>For example, this causes the app to vanish.
>>
>>func main()
>>SomeFunc()
>>return nil
>>
>>func SomeFunc()
>>Main()
>>return nil
>>
>>Regards,
>>Randy.
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Thu Jul  3 09:12:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 09:13:41 2008
Subject: [Harbour] Trapping recurrsion
In-Reply-To: <B0081688436@ms1.3peaks.com>
References: <B0081688436@ms1.3peaks.com>
Message-ID: <0F626E36-08A4-4170-AA1C-7BA3022FD76F@syenar.hu>

Hi Randy,

Since some week there is one common filename used.

You can control this filename using Set( _SET_HBOUTLOG, <cFileName> ).

You can also add custom information (one line) to all the
log entries generated by Harbour using Set( _SET_HBOUTLOGINFO,  
<cFileName ).

Brgds,
Viktor

On 2008.07.03., at 15:09, Randy Portnoff wrote:

> Hi Viktor,
>
> Are the only error logs created by Harbour HB_EX.LOG and HB_OUT.LOG  
> or are there others?
>
> IMO, I think only one filename should be used for _all_ logs and new  
> errors should be appended to the existing log if it exists.
>
> Regards,
> Randy.
>
> At 02:45 PM 7/2/2008, you wrote:
>> Hi Randy,
>>
>> Here is the internal error logging implemented.
>> Copy the file to source/rtl/ and recompile.
>>
>> Brgds,
>> Viktor
>>
>>
>>
>>
>>
>>
>>
>> On 2008.07.02., at 17:21, Randy Portnoff wrote:
>>
>>> Hi all,
>>>
>>> Similar to the way Harbour now traps GPF's (and logs some info in a
>>> text file), can it also detect  race conditions and log that as
>>> well? I am referring to situations where recursion occurs repeatedly
>>> which causes the app to just exit (ie. vanish). Ideally, a runtime
>>> error would be best.
>>>
>>> For example, this causes the app to vanish.
>>>
>>> func main()
>>> SomeFunc()
>>> return nil
>>>
>>> func SomeFunc()
>>> Main()
>>> return nil
>>>
>>> Regards,
>>> Randy.
>>>
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jul  3 03:10:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 09:28:14 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <18249693.post@talk.nabble.com>
References: <18249507.post@talk.nabble.com> <200807022030.04331.philb@philb.us>
	<18249693.post@talk.nabble.com>
Message-ID: <7F6B241A-615B-42D8-A6D5-3CEC8A068A6B@syenar.hu>

Hi all,

Anything that is documentation is just good,
but I'd think that if we invest into some less
proprietary and free solution, it's just even
better.

Such would be a "standard" MediaWiki based
engine on our own homepage.

[ The sf.net wiki page doesn't seem to work
for me neither in Safari not in Firefox 3. ]

Brgds,
Viktor

On 2008.07.03., at 2:40, Pritpal Bedi wrote:

>
> Phil
>
> Check the message agian. Edited typo mistake.
>
> http://www.vouch.info/harbour
>
> Regards
> Pritpal Bedi
>
>
> -- 
> View this message in context: http://www.nabble.com/Harbour-Online-Help---2-tp18249507p18249693.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jul  3 07:06:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 09:32:57 2008
Subject: [Harbour] BUG: DOS / make install and long filenames
Message-ID: <29B5D25A-4B8E-4276-9CB6-889619E17599@syenar.hu>

Hi all,

Sorry, but there is still a problem with DOS.

'make install' won't install those libs which
have long names.

Otherwise everything is built fine, and linked
fine (under XP). HBTEST.EXE, HBDOT.EXE and the
rest all work.

I have no idea how to resolve this. (given we
don't want to resort to using three effective
letters max for every libs we have in Harbour.)

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 05:24:14 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 09:35:07 2008
Subject: [Harbour] 2008-07-03 11:21 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dcee$Blat.v2.6.2$8f57450c$344c506de642@127.0.0.1>

2008-07-03 11:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * hbziparch/hbziparc.c
   * hbziparch/hbziparc.h
   * hbziparch/hbzipcom.cpp
   * hbziparch/hbzipnew.cpp
     ! Fixed reintroduced warnings. Sorry Miguel, but the 
       latest fix was not needed, since bAdded was reinited 
       to FALSE in each iteration of the loop.
     ! sprintf() -> snprintf()
     % Optimizations.
     * Formatting, cleanups.
     ; Tested with BCC55, MSVC9 and MinGW.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Thu Jul  3 09:33:31 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Jul  3 09:35:31 2008
Subject: [Harbour] ChangeLog 2008-07-03 16:30 UTC+0300 Mindaugas Kavaliauskas
Message-ID: <486CD52B.8060009@dbtopas.lt>

2008-07-03 16:30 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * contrib/hbmzip/hbmzip.c
     + implemented file get attributes and file set attributes for DOS 
and OS2
     ; I've not even tried to compile the code. I have no required OS and
       compile enviroment. DOS implementation is written using docs from
       http://www.delorie.com/djgpp/doc/libc-2.02/, OS2 implementation
       is just guess... Please test, I hope adding some #include <xxx.h>
       will make this code usable.
From guy.roussin at teledetection.fr  Thu Jul  3 09:54:03 2008
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Thu Jul  3 09:54:19 2008
Subject: [Harbour] Debian package 1.0.0.RC2
Message-ID: <486CD9FB.1050507@teledetection.fr>

Hi,

I made a patch against 8918
$ svn diff -r 8918

This patch affect 2 files (debian/changelog and make_deb.sh)

Somebody ca review this patch. Works fine for me
with debian etch and sid.

Notice that hbcurl can't be compiled on etch
(the version of libcurl3-dev is too old).
And i get lot of warnings with hbsqlit2 and hbsqlit3.

-- 
Guy Roussin


-------------- next part --------------
A non-text attachment was scrubbed...
Name: patchGR.diff
Type: patch
Size: 1522 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080703/e050cfad/patchGR.pl
From harbour.01 at syenar.hu  Thu Jul  3 10:03:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 10:04:54 2008
Subject: [Harbour] ChangeLogs 2008-07-03 14:00-16:00
Message-ID: <A728DBF4-A46E-4C72-9B5F-5A47587815C7@syenar.hu>

[ Sorry by my gmail no longer seems to work with blat.
so I'm posting these manually. ]

2008-07-03 15:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    - contrib/hbmysql/dbf2mysql.prg
    + contrib/hbmysql/dbf2mysq.prg
    * contrib/hbfbird/common.mak
    * contrib/hbfbird/Makefile
    - contrib/hbfbird/tfirebird.prg
    + contrib/hbfbird/tfirebrd.prg
    * contrib/hbfimage/tests/fitest.prg
    + contrib/hbfimage/tests/imgs_out
    - contrib/hbfimage/tests/images_out
      * Some more long filenames removed.
      ; TOFIX?: freeimage.ch is still long.

    * contrib/hbfimage/fi_winfu.c
    * contrib/hbfimage/fi_wrp.c
      % Using HB_ERR_FUNCNAME

2008-07-03 15:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    - contrib/hbgd/tests/imgs_in/gdlogobig.png
    - contrib/hbgd/tests/imgs_in/conv_test.jpg
    - contrib/hbgd/tests/imgs_in/theclipper.gif
    + contrib/hbgd/tests/imgs_in/harbour.gif
    + contrib/hbgd/tests/imgs_in/gdlogo.png
    + contrib/hbgd/tests/imgs_in/conv_tst.jpg
    * contrib/hbgd/tests/gdtest.prg
    * contrib/hbgd/tests/tostring.prg
    * contrib/hbgd/tests/gdtestcl.prg
      * Removing long filenames in hbgd (part 3/3)

2008-07-03 15:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    - contrib/hbgd/tests/images_in
    - contrib/hbgd/tests/images_out
    + contrib/hbgd/tests/imgs_in
    + contrib/hbgd/tests/imgs_out
    * contrib/hbgd/tests/gdtest.prg
    * contrib/hbgd/tests/bartest.prg
    * contrib/hbgd/tests/barms.prg
    * contrib/hbgd/tests/test_out.prg
    * contrib/hbgd/tests/tostring.prg
    * contrib/hbgd/tests/gdtestcl.prg
    * contrib/hbgd/tests/animgif.prg
    * contrib/hbgd/tests/testdpi.prg
    * contrib/hbgd/tests/counter.prg
    * contrib/hbgd/tests/antialia.prg
      * Removing long filenames in hbgd (part 2/3)
      ! Added SVN headers.
      ! Fixed to not use hbcompat.ch.

2008-07-03 14:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    * contrib/hbgd/Makefile
    * contrib/hbgd/common.mak
    - contrib/hbgd/gdexternal.ch
    + contrib/hbgd/gdextern.ch
    - contrib/hbgd/tests/gdtestcls.prg
    + contrib/hbgd/tests/gdtestcl.prg
    - contrib/hbgd/tests/antialiased.prg
    + contrib/hbgd/tests/antialia.prg
      ! Removing long filenames in hbgd (part 1/3)
--
Brgds,
Viktor

From miguelangel at marchuet.net  Thu Jul  3 10:17:02 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Jul  3 10:12:40 2008
Subject: [Harbour] 2008-07-03 11:21 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c8dcee$Blat.v2.6.2$8f57450c$344c506de642@127.0.0.1>
References: <01c8dcee$Blat.v2.6.2$8f57450c$344c506de642@127.0.0.1>
Message-ID: <486CDF5E.3040906@marchuet.net>

I refer to eliminate completely, because is unused var

;)

Best regards,
Miguel Angel marchuet

Szak?ts Viktor escribi?:
> 2008-07-03 11:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>    * hbziparch/hbziparc.c
>    * hbziparch/hbziparc.h
>    * hbziparch/hbzipcom.cpp
>    * hbziparch/hbzipnew.cpp
>      ! Fixed reintroduced warnings. Sorry Miguel, but the 
>        latest fix was not needed, since bAdded was reinited 
>        to FALSE in each iteration of the loop.
>      ! sprintf() -> snprintf()
>      % Optimizations.
>      * Formatting, cleanups.
>      ; Tested with BCC55, MSVC9 and MinGW.
> --
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From harbour.01 at syenar.hu  Thu Jul  3 10:17:39 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 10:19:03 2008
Subject: [Harbour] 2008-07-03 11:21 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <486CDF5E.3040906@marchuet.net>
References: <01c8dcee$Blat.v2.6.2$8f57450c$344c506de642@127.0.0.1>
	<486CDF5E.3040906@marchuet.net>
Message-ID: <E35EE6CD-3048-49ED-802A-F4501F327E0D@syenar.hu>

Ops, I have misunderstood you then. I hope all is good now :)

Brgds,
Viktor

On 2008.07.03., at 16:17, Miguel Angel Marchuet wrote:

> I refer to eliminate completely, because is unused var
>
> ;)
>
> Best regards,
> Miguel Angel marchuet
>
> Szak?ts Viktor escribi?:
>> 2008-07-03 11:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>   * hbziparch/hbziparc.c
>>   * hbziparch/hbziparc.h
>>   * hbziparch/hbzipcom.cpp
>>   * hbziparch/hbzipnew.cpp
>>     ! Fixed reintroduced warnings. Sorry Miguel, but the         
>> latest fix was not needed, since bAdded was reinited        to  
>> FALSE in each iteration of the loop.
>>     ! sprintf() -> snprintf()
>>     % Optimizations.
>>     * Formatting, cleanups.
>>     ; Tested with BCC55, MSVC9 and MinGW.
>> --
>> Brgds,
>> Viktor
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From harbour.01 at syenar.hu  Thu Jul  3 10:53:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 10:55:17 2008
Subject: [Harbour] 2008-07-03 16:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <CC1CD7CD-4DCE-46A4-BFD6-DDAA4CB9CFAB@syenar.hu>

2008-07-03 16:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    * contrib/hbmzip/hbmzip.c
      + Added ".cmd" to the (commented) list of OS/2 executable
        extensions.
      + Added headers for DOS/GCC line.
      + Guarded new DOS section with GCC guards, added dummy
        branch for other DOS compilers.
      ! Fixed embedded comment.
      ; TOFIX:
        ../../hbmzip.c:563: error: 'FILE_ATTRIBUTE_READONLY'  
undeclared (first use in this function)
        ../../hbmzip.c:568: error: 'FILE_ATTRIBUTE_DIRECTORY'  
undeclared (first use in this function)

    * contrib/hbmisc/spd.c
      - Removed two __XHARBOUR__ guards, because these feature
        have since been implemented in xhb.
      ! Fixed DJGPP warning. The problem is that DJGPP will preprocess
        snprintf() to sprintf() (not very safe), which makes ulMaxBuf
        var unused.
--
Brgds,
Viktor

From jarabal at ya.com  Thu Jul  3 11:28:36 2008
From: jarabal at ya.com (Javier)
Date: Thu Jul  3 11:29:06 2008
Subject: [Harbour] 2008-07-03 16:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <CC1CD7CD-4DCE-46A4-BFD6-DDAA4CB9CFAB@syenar.hu>
References: <CC1CD7CD-4DCE-46A4-BFD6-DDAA4CB9CFAB@syenar.hu>
Message-ID: <486CF024.1070107@ya.com>

Ok, Viktor. Thank you very much.
--
Well, I don't like the name "Sql_sprintf()" because applying the same 
reasoning of Mindaugas to Transform() it should be called 
Fox_transform(): we have the picture @L. :)
 
Szak?ts Viktor escribi?:
> 2008-07-03 16:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>    * contrib/hbmzip/hbmzip.c
>      + Added ".cmd" to the (commented) list of OS/2 executable
>        extensions.
>      + Added headers for DOS/GCC line.
>      + Guarded new DOS section with GCC guards, added dummy
>        branch for other DOS compilers.
>      ! Fixed embedded comment.
>      ; TOFIX:
>        ../../hbmzip.c:563: error: 'FILE_ATTRIBUTE_READONLY' undeclared 
> (first use in this function)
>        ../../hbmzip.c:568: error: 'FILE_ATTRIBUTE_DIRECTORY' 
> undeclared (first use in this function)
>
>    * contrib/hbmisc/spd.c
>      - Removed two __XHARBOUR__ guards, because these feature
>        have since been implemented in xhb.
>      ! Fixed DJGPP warning. The problem is that DJGPP will preprocess
>        snprintf() to sprintf() (not very safe), which makes ulMaxBuf
>        var unused.
> -- 
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Thu Jul  3 12:02:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 12:03:26 2008
Subject: [Harbour] 2008-07-03 18:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <55ABE0C2-4A23-4223-B950-3E038303FD95@syenar.hu>

2008-07-03 18:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    * contrib/hbmzip/hbmzip.c
      ! Fixed previous TOFIX for DOS.
      ! Fixed warning.
      ! Fixed mistake in previous commit.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Thu Jul  3 12:15:26 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Jul  3 12:17:22 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <7F6B241A-615B-42D8-A6D5-3CEC8A068A6B@syenar.hu>
References: <18249507.post@talk.nabble.com>
	<200807022030.04331.philb@philb.us>	<18249693.post@talk.nabble.com>
	<7F6B241A-615B-42D8-A6D5-3CEC8A068A6B@syenar.hu>
Message-ID: <486CFB1E.6020307@dbtopas.lt>

Hi,


I would prefer some free solution giving opportunity to keep 
documentation inside source files. I've never used such systems, so I 
can not do a good proposal, but I think it will be great if source code 
and docs will be in the same place. It would be less chance to forget 
update/create docs for extended/new functions.


Best regards,
Mindaugas



Szak?ts Viktor wrote:
> Hi all,
> 
> Anything that is documentation is just good,
> but I'd think that if we invest into some less
> proprietary and free solution, it's just even
> better.
> 
> Such would be a "standard" MediaWiki based
> engine on our own homepage.
> 
> [ The sf.net wiki page doesn't seem to work
> for me neither in Safari not in Firefox 3. ]
> 
> Brgds,
> Viktor
> 
> On 2008.07.03., at 2:40, Pritpal Bedi wrote:
>> Phil
>>
>> Check the message agian. Edited typo mistake.
>>
>> http://www.vouch.info/harbour
>>
>> Regards
>> Pritpal Bedi
From harbour.01 at syenar.hu  Thu Jul  3 12:37:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 12:38:44 2008
Subject: [Harbour] 2008-07-03 18:35 UTC+0200 Viktor Szakats (harbour.01
	syenar hu) 
Message-ID: <008B36AE-8F23-456B-A43B-D7494BC49B77@syenar.hu>

2008-07-03 18:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    * contrib/hbbmcdx/bmdbfcdx.c
    * contrib/hbbtree/hb_btree.c
    * contrib/hbgd/gdwrp.c
    * contrib/hbsqlit3/hbsqlit3.c
    * contrib/hbtip/encmthd.c
    * contrib/hbtip/utils.c
    * contrib/xhb/cstructc.c
    * contrib/xhb/xhbwith.c
      % Using HB_ERR_FUNCNAME
--
Brgds,
Viktor

From jarabal at ya.com  Thu Jul  3 12:46:04 2008
From: jarabal at ya.com (Javier)
Date: Thu Jul  3 12:46:27 2008
Subject: [Harbour] 2008-07-03 16:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <CC1CD7CD-4DCE-46A4-BFD6-DDAA4CB9CFAB@syenar.hu>
References: <CC1CD7CD-4DCE-46A4-BFD6-DDAA4CB9CFAB@syenar.hu>
Message-ID: <486D024C.4070804@ya.com>

Szak?ts Viktor escribi?:
>      ! Fixed DJGPP warning. The problem is that DJGPP will preprocess
>        snprintf() to sprintf() (not very safe), which makes ulMaxBuf
>        var unused.
>
Viktor,

Don't worry about this because the cBuffer is always dimensioning 
keeping in mind the width, so it could work safe only with sprintf.
Of course, it's very safe with snprintf and it is in C99.

Best regards.
Xavi

From druzus at acn.waw.pl  Thu Jul  3 13:29:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul  3 13:29:21 2008
Subject: [Harbour] 2008-07-03 19:28 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807031729.m63HTHHr009933@31-mo5-4.acn.waw.pl>

2008-07-03 19:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/debian/changelog
  * harbour/make_deb.sh
    * added modifications by Guy Roussin - thanks

  * harbour/contrib/gtwvg/gtwvg.c
    ! fixed pointer comparison - C uses different precedence for !
      operator then Clipper/xbase
      I thought that I've already fixed it once :-o

best regards
Przemek
From harbour.01 at syenar.hu  Thu Jul  3 14:20:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 14:21:40 2008
Subject: [Harbour] RC2 checklist update #9
Message-ID: <4EC3B148-2EC8-423D-BB3C-5F6B4CD6BFDE@syenar.hu>

Hi all,

Pending:
- Win64 startup issue/fix result feedback from Marek.
- hbmzip and OS/2 compilation feedback from David.
- DOS 'make install' won't install libs with long
   filenames, and also almost none of the headers.
   Can be worked around easily by some manual copying
   before release though.

Proposed to postpone to Final release:
- OS/2 printing problem.
- hb_errInternal() logging functionality.
- SunOS testing.

Cleared platforms:
- Win32
- Win64
- OS/2
- Linux
- Darwin PPC
- Darwin Unibin
- HPUX
- BSD
- DOS32 (DJGPP 4.2.3)

Brgds,
Viktor

From mpaliwoda at interia.pl  Thu Jul  3 15:04:34 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Jul  3 15:04:41 2008
Subject: [Harbour] Re: RC2 checklist
In-Reply-To: <486CB505.1020701@interia.pl>
References: <E95DB401-ED1A-43AE-84E3-D480E4F02659@syenar.hu>
	<486CB505.1020701@interia.pl>
Message-ID: <486D22C2.1050404@interia.pl>

>> Pending, non-critical:
> [...]
>> - 64bit C-mode startup not implemented in hbinit.h.
> 
> It's due to :
> 
> #if defined(_MSC_VER) && !defined(_WIN64) && \
> 
> in hbinit.h ( please note : !defined(_WIN64) )
> 
> If you remove it Harbour compiles OK here
> (crosscompilation). I do not know however
> if it works because I do not have Win64 OS
> at hand at this moment. I'll verify later
> today if it works ...

After testing the final executables under WinXP64
it appears that they are not working OK. C Static
initialisation fails and is not performend. It might
have something to do with "warning LNK4078" generated
by current C static init code for MSVC.
I am not sure if a solution found by Paul Tacker
will work for Win64 (it seems to work OK for Win32).
As I mentioned some time ago I postponed implementing
this solution after the release (if nobody does it
quicker :)), so for RC2 I guess it is better to assume
that we build Win64 binaries in CPP mode only. I don't
think it's worth checking Paul's solution now if it
is not going to be implemented at this moment.
If anyone has a different opinion regarding implementing
Paul's solution "now" vs "after the release" - please
speak now :).

-- 

Marek

----------------------------------------------------------------------
Wyjezdzasz? Sprawdz, co mozesz ciekawego obejrzec!
Przewodniki >>> http://link.interia.pl/f1e5f

From harbour.01 at syenar.hu  Thu Jul  3 15:11:41 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 15:12:27 2008
Subject: [Harbour] 2008-07-03 21:08 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dd40$Blat.v2.6.2$a04d42c4$23b8ae6b4b72@127.0.0.1>

2008-07-03 21:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   - contrib/hbmysql/difer.txt
   - contrib/hbmysql/diffeng.txt
   + contrib/hbmysql/diff-en.txt
   + contrib/hbmysql/diff-es.txt
   * contrib/hbmysql/tmysql.prg
   - contrib/hbmysql/dbf2mysq.prg
   + contrib/hbmysql/utils
   + contrib/hbmysql/utils/bld_b32.bat
   + contrib/hbmysql/utils/dbf2mysq.prg
   + contrib/hbmysql/utils/bld_vc.bat
     * Some dir cleanup.
     * Created separate dir for standalone utility.
     ! SVN headers and props added.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 15:28:23 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 15:28:56 2008
Subject: [Harbour] 2008-07-03 21:26 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dd42$Blat.v2.6.2$f561cbca$29a088ed39a2@127.0.0.1>

2008-07-03 21:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbmzip/hbmzip.c
     * Temply disabled new OS/2 code to go on with the RC2 release.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 15:40:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 15:42:03 2008
Subject: [Harbour] Re: RC2 checklist
In-Reply-To: <486D22C2.1050404@interia.pl>
References: <E95DB401-ED1A-43AE-84E3-D480E4F02659@syenar.hu>
	<486CB505.1020701@interia.pl> <486D22C2.1050404@interia.pl>
Message-ID: <A366E797-FCC8-41A2-A0C4-EBA40BCE78D5@syenar.hu>

Hi Marek,

Thx for the feedback.

I'd say let's go with RC2 now. I'll even comment
the untested OS/2 parts in hbmzip, so that it
doesn't hold back the release. Right after we have
the tag, you can continue working on this with Paul.

I wonder what is his solution.

Brgds,
Viktor

On 2008.07.03., at 21:04, Marek Paliwoda wrote:

>>> Pending, non-critical:
>> [...]
>>> - 64bit C-mode startup not implemented in hbinit.h.
>> It's due to :
>> #if defined(_MSC_VER) && !defined(_WIN64) && \
>> in hbinit.h ( please note : !defined(_WIN64) )
>> If you remove it Harbour compiles OK here
>> (crosscompilation). I do not know however
>> if it works because I do not have Win64 OS
>> at hand at this moment. I'll verify later
>> today if it works ...
>
> After testing the final executables under WinXP64
> it appears that they are not working OK. C Static
> initialisation fails and is not performend. It might
> have something to do with "warning LNK4078" generated
> by current C static init code for MSVC.
> I am not sure if a solution found by Paul Tacker
> will work for Win64 (it seems to work OK for Win32).
> As I mentioned some time ago I postponed implementing
> this solution after the release (if nobody does it
> quicker :)), so for RC2 I guess it is better to assume
> that we build Win64 binaries in CPP mode only. I don't
> think it's worth checking Paul's solution now if it
> is not going to be implemented at this moment.
> If anyone has a different opinion regarding implementing
> Paul's solution "now" vs "after the release" - please
> speak now :).
>
> -- 
>
> Marek
>
> ----------------------------------------------------------------------
> Wyjezdzasz? Sprawdz, co mozesz ciekawego obejrzec!
> Przewodniki >>> http://link.interia.pl/f1e5f
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Thu Jul  3 15:45:02 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Jul  3 15:45:10 2008
Subject: [Harbour] WinCE MSVC build problems
Message-ID: <486D2C3E.2020501@interia.pl>

Hi,

Long time passed since I built Harbour for WinCE OS
successfully last time. Today I tried to verify it
still builds OK, but unfortunately it fails. Here is
a log :

-------------------------------------------
source\common\hbver.c(225) : error C2065: 'OSVERSIONINFOEXA' : undeclared 
identifier
source\common\hbver.c(225) : error C2146: syntax error : missing ';' before 
identifier 'osVerEx'
source\common\hbver.c(225) : error C2065: 'osVerEx' : undeclared identifier
source\common\hbver.c(227) : error C2224: left of '.dwOSVersionInfoSize' 
must have struct/union type
source\common\hbver.c(231) : error C2224: left of '.wProductType' must have 
struct/union type
source\common\hbver.c(231) : error C2065: 'VER_NT_WORKSTATION' : undeclared 
identifier
hbwince.c
source\common\hbwince.c(520) : error C2065: 'DRIVE_UNKNOWN' : undeclared 
identifier
-------------------------------------------

OSVERSIONINFOEXA seems to be unknown in WinCE.

-- 

Marek

----------------------------------------------------------------------
Wyjezdzasz? Sprawdz, co mozesz ciekawego obejrzec!
Przewodniki >>> http://link.interia.pl/f1e5f

From philb at philb.us  Thu Jul  3 15:51:39 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Jul  3 15:51:46 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <5CE6D98A-18B5-488F-A468-A3C1F97A208D@syenar.hu>
References: <18249507.post@talk.nabble.com> <18253677.post@talk.nabble.com>
	<5CE6D98A-18B5-488F-A468-A3C1F97A208D@syenar.hu>
Message-ID: <200807031551.39897.philb@philb.us>

On Thursday 03 July 2008 03:59:07 am Szak?ts Viktor wrote:
> Hi Phil,
>
> Do you think it's possible to have MediaWiki on
> our Harbour homepage?
>
> MediaWiki is the quasi standard for Wiki pages
> (used by wikipedia), the source format is very
> easy to grasp (text), yet powerful.
>
> It's not the ultimate tool to write professional,
> multiformat documentation, but it's the best one
> which allows collaboration, easy linking and the
> output is also very familiar, standard .html.
>
> MediaWiki needs MySQL and PHP on the server side.

I agree with the wiki approach.

Let me look into installing it on the server. We do have both requirements but 
I'll have to check to see if we have a high enough version. We are not 
running PHP5, which is required a lot now. To get that, I'll have to do an 
O/S upgrade.

-- 
Waiting for sunspots.
From philb at philb.us  Thu Jul  3 15:56:06 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Jul  3 15:56:09 2008
Subject: [Harbour] RE: Harbour Digest, Vol 21, Issue 14
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95010189FC@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95010189FC@PINK.zycie.pzu>
Message-ID: <200807031556.06127.philb@philb.us>

On Thursday 03 July 2008 05:07:54 am Horodyski Marek (PZUZ) wrote:
> Who know, when programmers can write http servers in Harbour ( not in
> PHP ) ?

Of course we can, but do we want to use an already created program to help us 
get to the end, or do we want to create everything and wait years to get what 
we can have for free today?

Does that go for C compilers too?

I say we use already created tools where we can now and be agile enough to use 
something different in the future.

-- 
Waiting for sunspots.
From harbour.01 at syenar.hu  Thu Jul  3 15:55:03 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 15:56:24 2008
Subject: [Harbour] 2008-07-03 21:53 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dd46$Blat.v2.6.2$af538ffc$19d8e31f1fde@127.0.0.1>

2008-07-03 21:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/common/hbver.c
     ! Fixed version detection to not break when compiling for WinCE.
     ; Marek, thanks a lot.
--
Brgds,
Viktor

From mpaliwoda at interia.pl  Thu Jul  3 16:09:37 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Jul  3 16:10:35 2008
Subject: [Harbour] More WInCE and MSVC problems ...
Message-ID: <486D3201.9050105@interia.pl>

There are problems with gtwvt in WinCE. Here is a log :

source\rtl\gtwvt\gtwvt.c(1442) : error C2065: 'WM_ENTERSIZEMOVE' : 
undeclared identifier
source\rtl\gtwvt\gtwvt.c(1442) : error C2051: case expression not constant
source\rtl\gtwvt\gtwvt.c(1448) : warning C4013: 'SetWindowLongPtr' 
undefined; assuming extern returning int
source\rtl\gtwvt\gtwvt.c(1450) : error C2065: 'SWP_DEFERERASE' : undeclared 
identifier
source\rtl\gtwvt\gtwvt.c(1452) : error C2065: 'SW_NORMAL' : undeclared 
identifier
source\rtl\gtwvt\gtwvt.c(1456) : error C2065: 'WM_EXITSIZEMOVE' : undeclared 
identifier
source\rtl\gtwvt\gtwvt.c(1456) : error C2051: case expression not constant
source\rtl\gtwvt\gtwvt.c(1467) : error C2065: 'SC_MAXIMIZE' : undeclared 
identifier
source\rtl\gtwvt\gtwvt.c(1467) : error C2051: case expression not constant

I guess that required constans can be added to gtwvt directly,
protected by #if defined( HB_WINCE ). "SetWindowLongPtr" is
a different story and I am not sure how should it be fixed.

-- 

Marek

----------------------------------------------------------------------
W kosciele tez zdarzaja sie wpadki!
Smieszny filmik >>> http://link.interia.pl/f1e61

From druzus at acn.waw.pl  Thu Jul  3 16:20:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul  3 16:20:59 2008
Subject: [Harbour] More WInCE and MSVC problems ...
In-Reply-To: <486D3201.9050105@interia.pl>
References: <486D3201.9050105@interia.pl>
Message-ID: <20080703202055.GA14201@34-mo7-2.acn.waw.pl>

On Thu, 03 Jul 2008, Marek Paliwoda wrote:

Hi Marek,

> There are problems with gtwvt in WinCE. Here is a log :
> source\rtl\gtwvt\gtwvt.c(1442) : error C2065: 'WM_ENTERSIZEMOVE' : 
> undeclared identifier
> source\rtl\gtwvt\gtwvt.c(1442) : error C2051: case expression not constant
> source\rtl\gtwvt\gtwvt.c(1448) : warning C4013: 'SetWindowLongPtr' 
> undefined; assuming extern returning int
> source\rtl\gtwvt\gtwvt.c(1450) : error C2065: 'SWP_DEFERERASE' : undeclared 
> identifier
> source\rtl\gtwvt\gtwvt.c(1452) : error C2065: 'SW_NORMAL' : undeclared 
> identifier
> source\rtl\gtwvt\gtwvt.c(1456) : error C2065: 'WM_EXITSIZEMOVE' : 
> undeclared identifier
> source\rtl\gtwvt\gtwvt.c(1456) : error C2051: case expression not constant
> source\rtl\gtwvt\gtwvt.c(1467) : error C2065: 'SC_MAXIMIZE' : undeclared 
> identifier
> source\rtl\gtwvt\gtwvt.c(1467) : error C2051: case expression not constant
> 
> I guess that required constans can be added to gtwvt directly,
> protected by #if defined( HB_WINCE ). "SetWindowLongPtr" is
> a different story and I am not sure how should it be fixed.

Some of them just like the OSVERSIONINFOEXA are supported by MinGWCE
so probably we should use also #indef ...

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul  3 16:22:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 16:23:56 2008
Subject: [Harbour] More WInCE and MSVC problems ...
In-Reply-To: <486D3201.9050105@interia.pl>
References: <486D3201.9050105@interia.pl>
Message-ID: <228A55B9-75EF-4A31-899B-0C4D8E84FCA2@syenar.hu>

Hi Marek,

Sorry, but I'm afraid we have to leave the fixes for this
after RC2 :(

I could start to guard out stuff, but it's be better to do
directly, since I cannot fully oversee the exact causes of
WinCE problems (f.e. something worked for Przemek, some
stuff may be missing from headers, some other may be
really missing, etc).

Pls keep on testing, and we will include everything in final/RC3,
and/or we can also merge these changes with RC2 to create
a special RC2 WinCE build.

Brgds,
Viktor

On 2008.07.03., at 22:09, Marek Paliwoda wrote:

> There are problems with gtwvt in WinCE. Here is a log :
>
> source\rtl\gtwvt\gtwvt.c(1442) : error C2065: 'WM_ENTERSIZEMOVE' :  
> undeclared identifier
> source\rtl\gtwvt\gtwvt.c(1442) : error C2051: case expression not  
> constant
> source\rtl\gtwvt\gtwvt.c(1448) : warning C4013: 'SetWindowLongPtr'  
> undefined; assuming extern returning int
> source\rtl\gtwvt\gtwvt.c(1450) : error C2065: 'SWP_DEFERERASE' :  
> undeclared identifier
> source\rtl\gtwvt\gtwvt.c(1452) : error C2065: 'SW_NORMAL' :  
> undeclared identifier
> source\rtl\gtwvt\gtwvt.c(1456) : error C2065: 'WM_EXITSIZEMOVE' :  
> undeclared identifier
> source\rtl\gtwvt\gtwvt.c(1456) : error C2051: case expression not  
> constant
> source\rtl\gtwvt\gtwvt.c(1467) : error C2065: 'SC_MAXIMIZE' :  
> undeclared identifier
> source\rtl\gtwvt\gtwvt.c(1467) : error C2051: case expression not  
> constant
>
> I guess that required constans can be added to gtwvt directly,
> protected by #if defined( HB_WINCE ). "SetWindowLongPtr" is
> a different story and I am not sure how should it be fixed.
>
> -- 
>
> Marek
>
> ----------------------------------------------------------------------
> W kosciele tez zdarzaja sie wpadki!
> Smieszny filmik >>> http://link.interia.pl/f1e61
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jul  3 16:29:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 16:30:38 2008
Subject: [Harbour] RC2 TAG (aka. RC2 checklist update #10 FINAL) [typos]
Message-ID: <7F663FC5-A26D-49CC-A929-EF997D7DF35D@syenar.hu>

Hi gents,

[after typo correction]

RC2 tag is created, you can checkout using this command:
svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/harbour-1.0.0RC2

NOTE1: tags are technically the same as branches in SVN,
but we have a group agreement to handle tags as such, so
they are _read-only_. Nothing should be committed there. If
any show stoppers happens to be found, let's discuss what
to do.

NOTE2: Until we decide to split development paths into
1.1 and 1.0, the main SVN branch is the _1.0.0FINAL_
branch, so please don't commit anything "grave" until
the final release or a branch split is made.

NOTE3: In other words, after this tag, everyone is
encouraged to fix all remaining post-RC2 pending stuff,
in the main branch. See some of those below.

NOTE4: Those who wish to build binary or source releases,
can start now.

--------------
Final release pending targets:
- hbmzip and OS/2 compilation feedback/fix from David.
  new code disabled for the time being.
- Win64 startup fix by Marek & Paul.
- OS/2 printing problem.
- hb_errInternal() logging functionality.
- SunOS testing.
- DOS 'make install' won't install libs with long
filenames, and also almost none of the headers.
Can be worked around easily by some manual copying
before release though. Will solve it manually for the
time being.
- Last minute: WinCE / MSVC problems.

Cleared platforms:
- Win32
- Win64
- WinCE (MinGW)
- OS/2
- Linux
- Darwin PPC
- Darwin Unibin
- HPUX
- BSD
- DOS32 (DJGPP 4.2.3)

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 16:24:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 16:32:02 2008
Subject: [Harbour] RC2 TAG (aka. RC2 checklist update #10 FINAL)
Message-ID: <79F47350-3794-4293-85FB-2E93BFC8AB09@syenar.hu>

Hi gents,

RC2 tag is created, you can checkout using this command:
svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/tags/harbour-1.0.0RC2

NOTE1: tags are technically the same as branches in SVN,
but have a group agreement to handle tags as such, so they
are _read-only_. Nothing should be committed there. If
there any showstopped happens to be found, let's discuss
what to do.

NOTE2: Until we decide to split development paths into
1.1.0 and 1.0.0, the main SVN branch is the _1.0.0FINAL_
branch, so please don't commit anything "grave" until
the final release or a branch split is made.

NOTE3: In other words, after this tag, everyone is
encouraged to fix all remaining post-RC2 pending stuff,
in the main branch. See some of those below.

NOTE4: Those who wish to build binary or source releases,
can start now.

--------------
Final release pending targets:
- hbmzip and OS/2 compilation feedback/fix from David.
   new code disabled for the time being.
- Win64 startup fix by Marek & Paul.
- OS/2 printing problem.
- hb_errInternal() logging functionality.
- SunOS testing.
- DOS 'make install' won't install libs with long
  filenames, and also almost none of the headers.
  Can be worked around easily by some manual copying
  before release though. Will solve it manually for the
  time being.
- Last minute: WinCE / MSVC problems.

Cleared platforms:
- Win32
- Win64
- WinCE (MinGW)
- OS/2
- Linux
- Darwin PPC
- Darwin Unibin
- HPUX
- BSD
- DOS32 (DJGPP 4.2.3)

Brgds,
Viktor

From mbelgrano at deltain.it  Thu Jul  3 16:32:34 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jul  3 16:32:48 2008
Subject: [Harbour] Mingw installer
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDE0@SRV02.deltain.net>

Minigw windows have an installer who request wich compiler
Mingw,g++,g77,ada,java,objective c
And download only module selected
http://max.berger.name/howto/cdt/Mingw5_2.png
Can be added also harbour to this list?

Massimo Belgrano

From harbour.01 at syenar.hu  Thu Jul  3 16:44:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 16:45:41 2008
Subject: [Harbour] Harbour Online Help # 2
In-Reply-To: <200807031551.39897.philb@philb.us>
References: <18249507.post@talk.nabble.com> <18253677.post@talk.nabble.com>
	<5CE6D98A-18B5-488F-A468-A3C1F97A208D@syenar.hu>
	<200807031551.39897.philb@philb.us>
Message-ID: <2F4DE263-372F-411B-B1F3-40EC0979EEBC@syenar.hu>

>> MediaWiki needs MySQL and PHP on the server side.
>
> I agree with the wiki approach.
>
> Let me look into installing it on the server. We do have both  
> requirements but
> I'll have to check to see if we have a high enough version. We are not
> running PHP5, which is required a lot now. To get that, I'll have to  
> do an
> O/S upgrade.

Thanks Phil.

MediaWiki could serve as a good platform for the
full homepage, too IMO. A "native" one might
be more professional as a homepage, but until someone
wants to invest in such, anything is better than
the current state.

As for the docs I agree with Mindaugas that the
Harbour docs should ideally be in the SVN, but
until we agree on the format, at least anyone
interested (even without SVN R/W access) can start
to work on the content. Later on this content
can be extracted from MediaWiki in plaintext-ish,
format.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 16:49:25 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 16:49:57 2008
Subject: [Harbour] 2008-07-03 22:45 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dd4e$Blat.v2.6.2$472ed21c$2d54b32930e@127.0.0.1>

2008-07-03 22:45 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/errorint.c
     + Internal error are now logged to hb_out.log (by default).
     ; This addition looks quite humble, yet very useful, please 
       test and comment it.
       Credits to Randy Portnoff for the idea.
     ; First post-RC2, RC3/FINAL modification.

2008-07-03 22:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   ; Tagged: /tags/harbour-1.0.0RC2
--
Brgds,
Viktor

From bedipritpal at hotmail.com  Thu Jul  3 18:13:47 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Jul  3 18:13:51 2008
Subject: [Harbour] Harbour Online Help # 4
Message-ID: <18269238.post@talk.nabble.com>


Hello All

! Included Functions prototypes in trees:
   harbour/contrib
   harbour/source 
! Changed the look and feel of tables.
! Included complete text search.

Download .chm for local views:
http://www.nabble.com/file/p18269238/harbour.chm harbour.chm 

;TODO: Create Index Entries
           Add harbour/doc/en/*.*
           If possible, create links for retrieval of function body 
              when clicking on the function prototype.
           Write operational guidelines for various components,
           e.g., GT, RDD, SOCKETS, etc.
           And more as thoughts may be coming up...

/*
http://www.vouch.info/harbour

NOTE: This help manual can be made available in these formats: 

1) Compiled HTML format ( .chm ) 
2) PDF Document ( .pdf ) 
3) Classic WinHelp ( .hlp ) ( All Windows Versions ) 
4) MS Help 2.0 for Visual Studio Components 
5) Richtext Format ( .rtf ) ( MS Word Compatible ) 
6) eBook ( .exe ) 
7) XML ( .xml ) 
*/
Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---4-tp18269238p18269238.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From gvarona at ec-red.com  Thu Jul  3 18:42:18 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Thu Jul  3 18:42:26 2008
Subject: [Harbour] How can get date of creation the a folder in Windows?
Message-ID: <486D55CA.5000401@ec-red.com>

Hi:
How can get the date of creation the folder in Windows?
DIRECTORY () returns me to change the date of the folder.

Best Regards
GVS

From mbelgrano at deltain.it  Thu Jul  3 19:15:33 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jul  3 19:15:41 2008
Subject: [Harbour] Harbour Online Help # 4
In-Reply-To: <18269238.post@talk.nabble.com>
References: <18269238.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDE2@SRV02.deltain.net>

What do you want made now?
If Possible direct download HTML,pdf,rtf,xml,ecc from websiste


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Friday, July 04, 2008 12:14 AM
To: harbour@harbour-project.org
Subject: [Harbour] Harbour Online Help # 4


Hello All

! Included Functions prototypes in trees:
   harbour/contrib
   harbour/source 
! Changed the look and feel of tables.
! Included complete text search.

Download .chm for local views:
http://www.nabble.com/file/p18269238/harbour.chm harbour.chm 

;TODO: Create Index Entries
           Add harbour/doc/en/*.*
           If possible, create links for retrieval of function body 
              when clicking on the function prototype.
           Write operational guidelines for various components,
           e.g., GT, RDD, SOCKETS, etc.
           And more as thoughts may be coming up...

/*
http://www.vouch.info/harbour

NOTE: This help manual can be made available in these formats: 

1) Compiled HTML format ( .chm ) 
2) PDF Document ( .pdf ) 
3) Classic WinHelp ( .hlp ) ( All Windows Versions ) 
4) MS Help 2.0 for Visual Studio Components 
5) Richtext Format ( .rtf ) ( MS Word Compatible ) 
6) eBook ( .exe ) 
7) XML ( .xml ) 
*/
Regards
Pritpal Bedi
-- 
View this message in context:
http://www.nabble.com/Harbour-Online-Help---4-tp18269238p18269238.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Thu Jul  3 21:09:56 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 21:10:30 2008
Subject: [Harbour] 2008-07-04 03:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dd72$Blat.v2.6.2$ac29704a$26fc538946e6@127.0.0.1>

2008-07-04 03:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/Makefile
     ! Removed hbwmain.c from the header list to be installed.
       (Przemek please verify me)
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul  3 22:31:08 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul  3 22:31:50 2008
Subject: [Harbour] 2008-07-04 04:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dd7e$Blat.v2.6.2$04127d3c$1930fd4bfd32@127.0.0.1>

2008-07-04 04:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbmzip/hbmzip.c
     + Reenabled new OS/2 code.
     ! Fixed defines in OS/2 part. Requested definitions.
       Fixed one potential error. Pls review and test, all 
       this was done blindly.
--
Brgds,
Viktor

From mpaliwoda at interia.pl  Fri Jul  4 00:04:01 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Jul  4 00:04:11 2008
Subject: [Harbour] More WInCE and MSVC problems ...
Message-ID: <20080704040403.1E7946FC4B6@f01.poczta.interia.pl>

Hi Viktor,

> Sorry, but I'm afraid we have to leave 
> the fixes for this after RC2 :(

Absolutly no problem with this :). 
It is not a showstopper for RC2
at all, so go ahead !

BTW, Congratulations to the *whole group*, 
and to *you and Przemek* specificaly, for 
an outstanding work done for Harbour, which
brought this project to the current state !

-- 

Marek


----------------------------------------------------------------------
Wyjezdzasz? Sprawdz, co mozesz ciekawego obejrzec!
Przewodniki >>> http://link.interia.pl/f1e5f

From mpaliwoda at interia.pl  Fri Jul  4 00:07:04 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Jul  4 00:07:08 2008
Subject: [Harbour] More WInCE and MSVC problems ...
Message-ID: <20080704040704.5D5896D597@f09.poczta.interia.pl>

Hi Przemek,

[...]
> Some of them just like the OSVERSIONINFOEXA are supported by MinGWCE
> so probably we should use also #indef ...

Absolutly :)

-- 

Marek

----------------------------------------------------------------------
Wyjezdzasz? Sprawdz, co mozesz ciekawego obejrzec!
Przewodniki >>> http://link.interia.pl/f1e5f

From tomaz.zupan at orpo.si  Fri Jul  4 03:54:52 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Jul  4 03:54:58 2008
Subject: [Harbour] RC2 TAG (aka. RC2 checklist update #10 FINAL) [typos]
In-Reply-To: <7F663FC5-A26D-49CC-A929-EF997D7DF35D@syenar.hu>
References: <7F663FC5-A26D-49CC-A929-EF997D7DF35D@syenar.hu>
Message-ID: <200807040954.52475.tomaz.zupan@orpo.si>

Dne ?etrtek 3. julija 2008 je Szak?ts Viktor napisal(a):
> NOTE4: Those who wish to build binary or source releases,
> can start now.

I have just uploaded mandriva rpms via sftp, they need to be moved to proper 
place.

LP, Toma?
From harbour.01 at syenar.hu  Fri Jul  4 04:09:43 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 04:11:09 2008
Subject: [Harbour] RC2 TAG (aka. RC2 checklist update #10 FINAL) [typos]
In-Reply-To: <200807040954.52475.tomaz.zupan@orpo.si>
References: <7F663FC5-A26D-49CC-A929-EF997D7DF35D@syenar.hu>
	<200807040954.52475.tomaz.zupan@orpo.si>
Message-ID: <8FFC77FA-DF76-40F2-A74E-F96FD84D91D1@syenar.hu>

Hi Tomaz,

Recently sf.net changed the way releases are managed,
so now you'll need to add the uploaded files to the file
release area.

Brgds,
Viktor

On 2008.07.04., at 9:54, Toma? Zupan wrote:

> Dne ?etrtek 3. julija 2008 je Szak?ts Viktor napisal(a):
>> NOTE4: Those who wish to build binary or source releases,
>> can start now.
>
> I have just uploaded mandriva rpms via sftp, they need to be moved  
> to proper
> place.
>
> LP, Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Fri Jul  4 06:51:13 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul  4 06:51:21 2008
Subject: [Harbour] Harbour rc2 days!
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDF2@SRV02.deltain.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 3559 bytes
Desc: image001.gif
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080704/e9f18f37/attachment-0001.gif
From mbelgrano at deltain.it  Fri Jul  4 06:52:29 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul  4 06:52:34 2008
Subject: R: [Harbour] Harbour rc2 days!
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EDF2@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EDF2@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDF3@SRV02.deltain.net>

Sorry for firm

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080704/b00a00be/attachment.html
From mbelgrano at deltain.it  Fri Jul  4 06:53:32 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul  4 06:53:37 2008
Subject: [Harbour] Request of assistence routed to user list
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDF4@SRV02.deltain.net>

Will request of assistance routed to user list?

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080704/0aa78ad4/attachment.html
From hwgui at altervista.org  Fri Jul  4 07:23:44 2008
From: hwgui at altervista.org (HwGUI support)
Date: Fri Jul  4 07:23:48 2008
Subject: [Harbour] HwGUI bug tracker and new release
Message-ID: <ba6e20570807040423r2aebafe3xfc5072210f03181b@mail.gmail.com>

A new service started on HwGUI wiki site ( http://hwgui.altervista.org )
aiming to raise the HwGUI lib to new stable version.
A group of active developers is using a bug and enhancement request tracker
trying to correct most of the problems that the users and developers of
HwGUI will signal.
The hope is to release a 2.2.RC1 before the 15th of the current month and a
2.2 stable before the end of August.
During this period the developers will privilege the bug correction and,
thus, the enhancement request will be taken in count in a second stage.
We'll much appreciate any contribution in HwGUI enhancement and any
suggestion for better tuning this new starting service.
Any developer interested to partecipate this job will be added to the group
after a request sent to address hwgui@altervista.org.
To send your tickets to HwGUI developers link to:
http://hwgui.altervista.org/codetrack or to wiki page "Bugs and
enhancements"
and login with account:
Username : guest
Password : guest

TIA for your collaboration.

The HwGUI developers group.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080704/077b9a94/attachment.html
From mbelgrano at deltain.it  Fri Jul  4 07:51:02 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul  4 07:51:07 2008
Subject: R: [Harbour] Harbour Online Help # 4
In-Reply-To: <18269238.post@talk.nabble.com>
References: <18269238.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDFA@SRV02.deltain.net>

A new service started on HwGUI wiki site ( http://hwgui.altervista.org ) aiming to raise the HwGUI lib to new stable version.
A group of active developers is using a bug and enhancement request tracker trying to correct most of the problems that the users and developers of HwGUI will signal.
The hope is to release a 2.2.RC1 before the 15th of the current month and a 2.2 stable before the end of August.
During this period the developers will privilege the bug correction and, thus, the enhancement request will be taken in count in a second stage.
We'll much appreciate any contribution in HwGUI enhancement and any suggestion for better tuning this new starting service.
Any developer interested to partecipate this job will be added to the group after a request sent to address hwgui@altervista.org.
To send your tickets to HwGUI developers link to:
http://hwgui.altervista.org/codetrack or to wiki page "Bugs and enhancements"
and login with account:
Username : guest
Password : guest

TIA for your collaboration.

The HwGUI developers group.


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Pritpal Bedi
Inviato: venerd? 4 luglio 2008 0.14
A: harbour@harbour-project.org
Oggetto: [Harbour] Harbour Online Help # 4


Hello All

! Included Functions prototypes in trees:
   harbour/contrib
   harbour/source 
! Changed the look and feel of tables.
! Included complete text search.

Download .chm for local views:
http://www.nabble.com/file/p18269238/harbour.chm harbour.chm 

;TODO: Create Index Entries
           Add harbour/doc/en/*.*
           If possible, create links for retrieval of function body 
              when clicking on the function prototype.
           Write operational guidelines for various components,
           e.g., GT, RDD, SOCKETS, etc.
           And more as thoughts may be coming up...

/*
http://www.vouch.info/harbour

NOTE: This help manual can be made available in these formats: 

1) Compiled HTML format ( .chm ) 
2) PDF Document ( .pdf ) 
3) Classic WinHelp ( .hlp ) ( All Windows Versions ) 
4) MS Help 2.0 for Visual Studio Components 
5) Richtext Format ( .rtf ) ( MS Word Compatible ) 
6) eBook ( .exe ) 
7) XML ( .xml ) 
*/
Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---4-tp18269238p18269238.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From rportnoff at spendmap.com  Fri Jul  4 08:59:03 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Jul  4 08:57:49 2008
Subject: [Harbour] Harbour rc2 days!
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EDF2@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EDF2@SRV02.deltain.net>
Message-ID: <B0081712837@ms1.3peaks.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: f228e.gif
Type: image/gif
Size: 3559 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080704/3c3b3e49/f228e-0001.gif
From harbour.01 at syenar.hu  Fri Jul  4 10:34:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 10:35:43 2008
Subject: [Harbour] Harbour rc2 days!
In-Reply-To: <B0081712837@ms1.3peaks.com>
References: <AFB948164110ED43B5EB849E8DEEF03815EDF2@SRV02.deltain.net>
	<B0081712837@ms1.3peaks.com>
Message-ID: <9D82F519-4037-468A-85E3-5F70D50086E0@syenar.hu>

>
Hi Randy,

> If RC2 was just released (yesterday?), why does the source download  
> at Sourceforge show a date of June 21, 2008?

That's when I've added the RC2 source release label to
the sf.net release system.

Brgds,
Viktor

>
>
> Regards,
> Randy.
>
> At 06:51 AM 7/4/2008, you wrote:
>> Content-class: urn:content-classes:message
>> Content-Type: multipart/related; type="multipart/alternative";
>>          boundary="----_=_NextPart_001_01C8DDC3.E0FC515D"
>>
>> Harbour RC2 is very reliable version so you can download and test  
>> with
>> any clipper source from http://sourceforge.net/project/showfiles.php?group_id=681
>>
>> whatsnew here:
>> http://harbour-project.svn.sourceforge.net/viewvc/harbour-project/ 
>> tag...
>>
>> you can subscribe maling list for assistance from here:
>> http://lists.harbour-project.org/mailman/listinfo/harbour-users
>>
>> Harbour have this supported platforms:
>> - Win32
>> - Win64
>> - OS/2
>> - Linux
>> - Darwin PPC
>> - Darwin Unibin
>> - HPUX
>> - BSD
>>
>>
>> Massimo Belgrano
>> Albo Nazionale Informatici Professionisti n? 2620
>> Socio n? 2843 Associazione Informatici Professionisti
>> <f228e.gif>
>> Analisi e sviluppo software per Lan e Web
>> Consulenza informatica - Formazione
>> Delta Informatica S.r.l.  http://www.deltain.it
>> Via Torelli , 31 - 28100 Novara - Tel: 0321/30281
>>
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Jul  4 11:34:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 11:35:40 2008
Subject: [Harbour] BUG: -gc3 switch and 'var - -1'
Message-ID: <922E3932-4A28-4729-A371-A09B32287D5B@syenar.hu>

Hi Przemek,

This .prg code:
---
PROC Main()
    LOCAL var := 10
    ? var - -1
    RETURN
---

will generate such .c source when compiled with -gc3:
if( hb_xvmAddInt( --1 ) ) break;

BCC says: 'Lvalue required in function ...'

Brgds,
Viktor

From philb at philb.us  Fri Jul  4 11:37:13 2008
From: philb at philb.us (Phil Barnett)
Date: Fri Jul  4 11:37:18 2008
Subject: [Harbour] Request of assistence routed to user list
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EDF4@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EDF4@SRV02.deltain.net>
Message-ID: <200807041137.13866.philb@philb.us>

On Friday 04 July 2008 06:53:32 am Massimo Belgrano wrote:
> Will request of assistance routed to user list?

after the release of 1.0.0, users can talk about it there. For now, the 
release process needs to be responded to on this list.

-- 
Waiting for sunspots.
From rportnoff at spendmap.com  Fri Jul  4 11:43:10 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Jul  4 11:41:55 2008
Subject: [Harbour] Class creation broken in RC2
Message-ID: <B0081716655@ms1.3peaks.com>

Hi all,

I can no longer compile PRG code which contains class definitions 
(via Clip4Win32's topclass.ch) - I get the following errors:

PPBROWSE.prg(97) Error E0030  Syntax error: "syntax error at 'INIT'"
PPBROWSE.prg(99) Error E0030  Syntax error: "syntax error at '__SUBWNDPROC'"
PPBROWSE.prg(101) Error E0030  Syntax error: "syntax error at 'ADDCOLUMN'"
PPBROWSE.prg(102) Error E0030  Syntax error: "syntax error at 
'_CLASS_DECLARATION_'"
.
.
.

However, this worked fine in: Harbour devel build 1.1-1 Intl. (Rev. 8567)

Regards,
Randy.


From mbelgrano at deltain.it  Fri Jul  4 11:49:40 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul  4 11:49:45 2008
Subject: R: [Harbour] Request of assistence routed to user list
In-Reply-To: <200807041137.13866.philb@philb.us>
References: <AFB948164110ED43B5EB849E8DEEF03815EDF4@SRV02.deltain.net>
	<200807041137.13866.philb@philb.us>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDFD@SRV02.deltain.net>

Well
Thanks for clarification

Massimo Belgrano
Albo Nazionale Informatici Professionisti n? 2620
Socio n? 2843 Associazione Informatici Professionisti

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.? http://www.deltain.it 
Via Torelli , 31 - 28100 Novara - Tel: 0321/30281

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Phil Barnett
Inviato: venerd? 4 luglio 2008 17.37
A: harbour@harbour-project.org
Oggetto: Re: [Harbour] Request of assistence routed to user list

On Friday 04 July 2008 06:53:32 am Massimo Belgrano wrote:
> Will request of assistance routed to user list?

after the release of 1.0.0, users can talk about it there. For now, the 
release process needs to be responded to on this list.

-- 
Waiting for sunspots.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From rportnoff at spendmap.com  Fri Jul  4 11:57:13 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Jul  4 11:55:58 2008
Subject: [Harbour] Trapping recurrsion
In-Reply-To: <0F626E36-08A4-4170-AA1C-7BA3022FD76F@syenar.hu>
References: <B0081688436@ms1.3peaks.com>
	<0F626E36-08A4-4170-AA1C-7BA3022FD76F@syenar.hu>
Message-ID: <B0081716962@ms1.3peaks.com>

Hi Viktor,

I tried the most recent errorint.c that you sent with the current 
Harbour build but it is not creating the log file.

Regards,
Randy.


At 09:12 AM 7/3/2008, you wrote:
>Hi Randy,
>
>Since some week there is one common filename used.
>
>You can control this filename using Set( _SET_HBOUTLOG, <cFileName> ).
>
>You can also add custom information (one line) to all the
>log entries generated by Harbour using Set( _SET_HBOUTLOGINFO,
><cFileName ).
>
>Brgds,
>Viktor
>
>On 2008.07.03., at 15:09, Randy Portnoff wrote:
>
>>Hi Viktor,
>>
>>Are the only error logs created by Harbour HB_EX.LOG and HB_OUT.LOG
>>or are there others?
>>
>>IMO, I think only one filename should be used for _all_ logs and new
>>errors should be appended to the existing log if it exists.
>>
>>Regards,
>>Randy.
>>
>>At 02:45 PM 7/2/2008, you wrote:
>>>Hi Randy,
>>>
>>>Here is the internal error logging implemented.
>>>Copy the file to source/rtl/ and recompile.
>>>
>>>Brgds,
>>>Viktor
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>On 2008.07.02., at 17:21, Randy Portnoff wrote:
>>>
>>>>Hi all,
>>>>
>>>>Similar to the way Harbour now traps GPF's (and logs some info in a
>>>>text file), can it also detect  race conditions and log that as
>>>>well? I am referring to situations where recursion occurs repeatedly
>>>>which causes the app to just exit (ie. vanish). Ideally, a runtime
>>>>error would be best.
>>>>
>>>>For example, this causes the app to vanish.
>>>>
>>>>func main()
>>>>SomeFunc()
>>>>return nil
>>>>
>>>>func SomeFunc()
>>>>Main()
>>>>return nil
>>>>
>>>>Regards,
>>>>Randy.
>>>>
>>>>
>>>>_______________________________________________
>>>>Harbour mailing list
>>>>Harbour@harbour-project.org
>>>>http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>>
>>>
>>>_______________________________________________
>>>Harbour mailing list
>>>Harbour@harbour-project.org
>>>http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Fri Jul  4 11:59:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 12:00:54 2008
Subject: [Harbour] Trapping recurrsion
In-Reply-To: <B0081716962@ms1.3peaks.com>
References: <B0081688436@ms1.3peaks.com>
	<0F626E36-08A4-4170-AA1C-7BA3022FD76F@syenar.hu>
	<B0081716962@ms1.3peaks.com>
Message-ID: <07B66BC0-F570-4E2F-9159-5D4802E83C89@syenar.hu>

Hi Randy,

Please try with the latest SVN.

For me this simple test program works:
--- test.prg
PROC Main()
    ErrorInHandler() // to force an internal error
    RETURN
---
->
--- hb_out.log
Application Internal Error - ...
Terminated at: ...
Unrecoverable error 9001: Error recovery failure
Called from ...
Called from ...
---

Brgds,
Viktor

On 2008.07.04., at 17:57, Randy Portnoff wrote:

> Hi Viktor,
>
> I tried the most recent errorint.c that you sent with the current  
> Harbour build but it is not creating the log file.
>
> Regards,
> Randy.
>
>
> At 09:12 AM 7/3/2008, you wrote:
>> Hi Randy,
>>
>> Since some week there is one common filename used.
>>
>> You can control this filename using Set( _SET_HBOUTLOG,  
>> <cFileName> ).
>>
>> You can also add custom information (one line) to all the
>> log entries generated by Harbour using Set( _SET_HBOUTLOGINFO,
>> <cFileName ).
>>
>> Brgds,
>> Viktor
>>
>> On 2008.07.03., at 15:09, Randy Portnoff wrote:
>>
>>> Hi Viktor,
>>>
>>> Are the only error logs created by Harbour HB_EX.LOG and HB_OUT.LOG
>>> or are there others?
>>>
>>> IMO, I think only one filename should be used for _all_ logs and new
>>> errors should be appended to the existing log if it exists.
>>>
>>> Regards,
>>> Randy.
>>>
>>> At 02:45 PM 7/2/2008, you wrote:
>>>> Hi Randy,
>>>>
>>>> Here is the internal error logging implemented.
>>>> Copy the file to source/rtl/ and recompile.
>>>>
>>>> Brgds,
>>>> Viktor
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> On 2008.07.02., at 17:21, Randy Portnoff wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> Similar to the way Harbour now traps GPF's (and logs some info  
>>>>> in a
>>>>> text file), can it also detect  race conditions and log that as
>>>>> well? I am referring to situations where recursion occurs  
>>>>> repeatedly
>>>>> which causes the app to just exit (ie. vanish). Ideally, a runtime
>>>>> error would be best.
>>>>>
>>>>> For example, this causes the app to vanish.
>>>>>
>>>>> func main()
>>>>> SomeFunc()
>>>>> return nil
>>>>>
>>>>> func SomeFunc()
>>>>> Main()
>>>>> return nil
>>>>>
>>>>> Regards,
>>>>> Randy.
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Harbour mailing list
>>>>> Harbour@harbour-project.org
>>>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> Harbour mailing list
>>>> Harbour@harbour-project.org
>>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rportnoff at spendmap.com  Fri Jul  4 12:08:16 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Jul  4 12:07:03 2008
Subject: [Harbour] Trapping recurrsion
In-Reply-To: <07B66BC0-F570-4E2F-9159-5D4802E83C89@syenar.hu>
References: <B0081688436@ms1.3peaks.com>
	<0F626E36-08A4-4170-AA1C-7BA3022FD76F@syenar.hu>
	<B0081716962@ms1.3peaks.com>
	<07B66BC0-F570-4E2F-9159-5D4802E83C89@syenar.hu>
Message-ID: <B0081717234@ms1.3peaks.com>

Hi Viktor,

I am using: Harbour 1.0.0RC2 Intl. (Rev. 8928)

My test is:

func test()
test2()
return nil

func test2()
test()
return nil

I replaced the errorint.c in source\rtl, deleted errorint.obj and 
hbrtl.lib and rebuilt Harbour.

Regards,
Randy.

At 11:59 AM 7/4/2008, you wrote:
>Hi Randy,
>
>Please try with the latest SVN.
>
>For me this simple test program works:
>--- test.prg
>PROC Main()
>    ErrorInHandler() // to force an internal error
>    RETURN
>---
>->
>--- hb_out.log
>Application Internal Error - ...
>Terminated at: ...
>Unrecoverable error 9001: Error recovery failure
>Called from ...
>Called from ...
>---
>
>Brgds,
>Viktor
>
>On 2008.07.04., at 17:57, Randy Portnoff wrote:
>
>>Hi Viktor,
>>
>>I tried the most recent errorint.c that you sent with the current
>>Harbour build but it is not creating the log file.
>>
>>Regards,
>>Randy.
>>
>>
>>At 09:12 AM 7/3/2008, you wrote:
>>>Hi Randy,
>>>
>>>Since some week there is one common filename used.
>>>
>>>You can control this filename using Set( _SET_HBOUTLOG,
>>><cFileName> ).
>>>
>>>You can also add custom information (one line) to all the
>>>log entries generated by Harbour using Set( _SET_HBOUTLOGINFO,
>>><cFileName ).
>>>
>>>Brgds,
>>>Viktor
>>>
>>>On 2008.07.03., at 15:09, Randy Portnoff wrote:
>>>
>>>>Hi Viktor,
>>>>
>>>>Are the only error logs created by Harbour HB_EX.LOG and HB_OUT.LOG
>>>>or are there others?
>>>>
>>>>IMO, I think only one filename should be used for _all_ logs and new
>>>>errors should be appended to the existing log if it exists.
>>>>
>>>>Regards,
>>>>Randy.
>>>>
>>>>At 02:45 PM 7/2/2008, you wrote:
>>>>>Hi Randy,
>>>>>
>>>>>Here is the internal error logging implemented.
>>>>>Copy the file to source/rtl/ and recompile.
>>>>>
>>>>>Brgds,
>>>>>Viktor
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>On 2008.07.02., at 17:21, Randy Portnoff wrote:
>>>>>
>>>>>>Hi all,
>>>>>>
>>>>>>Similar to the way Harbour now traps GPF's (and logs some info
>>>>>>in a
>>>>>>text file), can it also detect  race conditions and log that as
>>>>>>well? I am referring to situations where recursion occurs
>>>>>>repeatedly
>>>>>>which causes the app to just exit (ie. vanish). Ideally, a runtime
>>>>>>error would be best.
>>>>>>
>>>>>>For example, this causes the app to vanish.
>>>>>>
>>>>>>func main()
>>>>>>SomeFunc()
>>>>>>return nil
>>>>>>
>>>>>>func SomeFunc()
>>>>>>Main()
>>>>>>return nil
>>>>>>
>>>>>>Regards,
>>>>>>Randy.
>>>>>>
>>>>>>
>>>>>>_______________________________________________
>>>>>>Harbour mailing list
>>>>>>Harbour@harbour-project.org
>>>>>>http://lists.harbour-project.org/mailman/listinfo/harbour
>>>>>
>>>>>
>>>>>
>>>>>_______________________________________________
>>>>>Harbour mailing list
>>>>>Harbour@harbour-project.org
>>>>>http://lists.harbour-project.org/mailman/listinfo/harbour
>>>>
>>>>
>>>>_______________________________________________
>>>>Harbour mailing list
>>>>Harbour@harbour-project.org
>>>>http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>>_______________________________________________
>>>Harbour mailing list
>>>Harbour@harbour-project.org
>>>http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Fri Jul  4 12:23:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 12:24:19 2008
Subject: [Harbour] Trapping recurrsion
In-Reply-To: <B0081717234@ms1.3peaks.com>
References: <B0081688436@ms1.3peaks.com>
	<0F626E36-08A4-4170-AA1C-7BA3022FD76F@syenar.hu>
	<B0081716962@ms1.3peaks.com>
	<07B66BC0-F570-4E2F-9159-5D4802E83C89@syenar.hu>
	<B0081717234@ms1.3peaks.com>
Message-ID: <3C1CF432-C541-4B5B-AC0C-A9BFEC695290@syenar.hu>

> func test()
> test2()
> return nil
>
> func test2()
> test()
> return nil
>
> I replaced the errorint.c in source\rtl, deleted errorint.obj and  
> hbrtl.lib and rebuilt Harbour.

Well, my change targeted solely to log internal errors,
of of those is internals errors in too deeply recursive
error handler calls.

What you try here is a regular program recursion. I don't
see any solution for that on the HVM level. Sometimes
recursion is actually a feature, so even if the HVM would
detect it (pbly with some runtime penalty), how would it
know if it's intended or it is a result of a mistake?

So, I'd think this is something you need to take care of
on the application level, f.e. by using semaphores.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  4 13:04:59 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 13:05:00 2008
Subject: [Harbour] 2008-07-04 19:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ddf8$Blat.v2.6.2$176e1a7e$2c841a230f66@127.0.0.1>

2008-07-04 19:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/Makefile
     ! Fixed commented file in file list.
     ; This may fix some GNU-make problems regarding hbziparch.
     ; hbziparch may not work in RC2 GNU-make builds for this 
       reason.

   * harbour-ce-spec
   * harbour-w32-spec
   * doc/whatsnew.txt
   * include/hbver.h
   * harbour.spec
     * RC2 -> rc2
     ; We should use lowercase for 'RC' in the future, for consistency 
       with 'alpha', 'beta' (and with other projects too). It looks 
       smoother too.

   * source/rtl/errorint.c
     ! hb_setGetCPtr( HB_SET_HBOUTLOG ) checked for NULL value.
       I'm not sure if this is required in real life, so this may 
       be unnecessary safety.

   * utils/Makefile
     * Formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  4 14:34:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 14:35:22 2008
Subject: [Harbour] Q: Ubuntu 8.04.1, make_deb.sh, gttrm and mouse detection
Message-ID: <DF3C8046-3A7A-4362-8BE3-799A43B0BA3B@syenar.hu>

Hi folks,

I'm trying to create a .deb package under Ubuntu 8.04.1,
and it's going fine for the most part, but gttrm lib doesn't
get created when I'm trying make_deb.sh, while if I try
with make_gnu.sh, it does.

The reason of the failure is that with make_deb.sh, gttrm.c
(and gtcrs.c, mousesln.c) are attempted to be built with
mouse support, but gpm.h is not found.

This may be cause because of the way mousing is detected in
make_deb.sh:
---
vszakats@orange:~$ dpkg -l "libgpmg1-dev"
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Installed/Config-f/Unpacked/Failed-cfg/Half-inst/t-aWait/ 
T-pend
|/ Err?=(none)/Hold/Reinst-required/X=both-problems (Status,Err:  
uppercase=bad)
||/ Name                           Version                         
Description
+++-==============================-==============================- 
= 
= 
= 
= 
========================================================================
pn  libgpmg1-dev                   <none>                         (no  
description available)
---

Which tricks make_deb.sh into thinking the package is there, while
it isn't.

Could we add header detection similar to contribs, to the
GT Makefiles, too?

Brgds,
Viktor

From mpaliwoda at interia.pl  Fri Jul  4 14:46:40 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Jul  4 14:46:47 2008
Subject: [Harbour] CHANGELOG: 2008-07-04 20:45 UTC+0100 Marek Paliwoda
 (mpaliwoda at interia pl)
Message-ID: <486E7010.2020405@interia.pl>

2008-07-04 20:45 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
    * make_vcce.mak
      ! Fixes required by an old eVC4 compiler,
        Better synchronization with make_vc.mak.

-- 

     Marek Paliwoda
mpaliwoda at interia pl

----------------------------------------------------------------------
Najciekawsze miejsca w Polsce i na swiecie!
Zobacz >>> http://link.interia.pl/f1e60

From myorg63 at mail.ru  Fri Jul  4 15:32:49 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Fri Jul  4 15:32:52 2008
Subject: [Harbour] Warning W8065 .\hbcurl.c 602: Call to function 'hb_free'
	with no prototype
Message-ID: <18284956.post@talk.nabble.com>


MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
	bcc32.exe -c -q -d -w -w-sig- -O2 -I..\..\include  -I"e:\curl\include"  
-o..\..\obj\b32\hbcurl.obj .\hbcurl.c
.\hbcurl.c:

Warning W8065 .\hbcurl.c 602: Call to function 'hb_free' with no prototype
in function HB_FUN_CURL_EASY_RECV


Regards,
Petr
-- 
View this message in context: http://www.nabble.com/Warning-W8065-.%5Chbcurl.c-602%3A-Call-to-function-%27hb_free%27-with-no-prototype-tp18284956p18284956.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dmacias at mail.udg.mx  Fri Jul  4 16:33:10 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Jul  4 16:33:09 2008
Subject: [Harbour] Re: RC2 TAG (aka. RC2 checklist update #10 FINAL) [typos]
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486E8906.70207@mail.udg.mx>

>RC2 tag is created, ...

Someone can update Harbour News/Latest stable build in Harbour site to
show new release ? Thanks

David Macias



From dmacias at mail.udg.mx  Fri Jul  4 16:33:42 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Jul  4 16:33:38 2008
Subject: [Harbour] RC2 binaries for OS/2-eCS
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486E8926.8050305@mail.udg.mx>

Harbour RC2 binaries file for OS/2-eComStation are available in Harbour
download page

as harbour-1.0.0rc2.bin-os2.gcc.zip

Include Harbour libraries for:
- MySQL 5.1.23 ( hbmysql.a )
- Postgres 8.1.4 ( hbpgsql.a )
- cUrl 7.18.1 ( hbcurl.a )

All packages from Paul Smedley site:
http://www.smedley.info/os2ports/index.php

David Macias


From dmacias at mail.udg.mx  Fri Jul  4 16:34:13 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Jul  4 16:34:11 2008
Subject: [Harbour] Re: 2008-07-04 04:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486E8945.7080203@mail.udg.mx>

Viktor:

>2008-07-04 04:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/hbmzip/hbmzip.c
>     + Reenabled new OS/2 code.
>     ! Fixed defines in OS/2 part. Requested definitions.
>       Fixed one potential error. Pls review and test, all
>       this was done blindly.

hbmzip.a is created without warnings/errors

but testing with contrib\hbmzip\tests\myzip.prg, myunzip.prg produce a
lot of errors, some of them included below
hbzlib.a is included in list of libraries

David Macias


\harbour807\harbour\lib/hbmzip.a(unzip.o): Undefined symbol
_inflateInit2_ refer
enced from text segment
\harbour807\harbour\lib/hbmzip.a(unzip.o): Undefined symbol _crc32
referenced fr
om text segment
\harbour807\harbour\lib/hbmzip.a(unzip.o): Undefined symbol _inflate
referenced
from text segment
\harbour807\harbour\lib/hbmzip.a(unzip.o): Undefined symbol _crc32
referenced fr
om text segment
\harbour807\harbour\lib/hbmzip.a(unzip.o): Undefined symbol _inflateEnd
referenc
ed from text segment
\harbour807\harbour\lib/hbmzip.a(zip.o): Undefined symbol _get_crc_table
referen
ced from text segment
\harbour807\harbour\lib/hbmzip.a(zip.o): Undefined symbol _deflateInit2_
referen
ced from text segment
\harbour807\harbour\lib/hbmzip.a(zip.o): Undefined symbol _crc32
referenced from
  text segment
\harbour807\harbour\lib/hbmzip.a(zip.o): Undefined symbol _deflate
referenced fr
om text segment
\harbour807\harbour\lib/hbmzip.a(zip.o): Undefined symbol _deflateEnd
referenced
  from text segment
\harbour807\harbour\lib/hbmzip.a(zip.o): Undefined symbol _deflate
referenced fr
om text segment





From rportnoff at spendmap.com  Fri Jul  4 16:37:00 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Jul  4 16:35:45 2008
Subject: [Harbour] Class creation broken in RC2 (RESOLVED?)
Message-ID: <B0081722893@ms1.3peaks.com>

I seems I now have to define __HARBOUR__ for it to compile and use 
topclass.ch properly - I did not have to do this before.

<<<Original message>>>

Hi all,

I can no longer compile PRG code which contains class definitions 
(via Clip4Win32's topclass.ch) - I get the following errors:

PPBROWSE.prg(97) Error E0030  Syntax error: "syntax error at 'INIT'"
PPBROWSE.prg(99) Error E0030  Syntax error: "syntax error at '__SUBWNDPROC'"
PPBROWSE.prg(101) Error E0030  Syntax error: "syntax error at 'ADDCOLUMN'"
PPBROWSE.prg(102) Error E0030  Syntax error: "syntax error at 
'_CLASS_DECLARATION_'"
.
.
.

However, this worked fine in: Harbour devel build 1.1-1 Intl. (Rev. 8567)

Regards,
Randy.


From mbelgrano at deltain.it  Fri Jul  4 16:45:39 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul  4 16:45:54 2008
Subject: R: [Harbour] Re: RC2 TAG (aka. RC2 checklist update #10 FINAL) [typos]
Message-ID: <000001c8de16$f0e7f23d$0400a8c0@deltain.net>

Yes 
I try

----- Messaggio originale -----
Da: David Arturo Macias Corona <dmacias@mail.udg.mx>
Inviato: venerd? 4 luglio 2008 22.33
A: harbour@harbour-project.org <harbour@harbour-project.org>
Oggetto: [Harbour] Re: RC2 TAG (aka. RC2 checklist update #10 FINAL) [typos]

>RC2 tag is created, ...

Someone can update Harbour News/Latest stable build in Harbour site to
show new release ? Thanks

David Macias



_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Fri Jul  4 19:47:53 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 19:47:54 2008
Subject: [Harbour] 2008-07-05 01:46 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8de30$Blat.v2.6.2$604db140$20948ec45d2e@127.0.0.1>

2008-07-05 01:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
     ! Typo: hb_free() -> hb_xfree()
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  4 19:51:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 19:51:58 2008
Subject: [Harbour] Re: 2008-07-04 04:06 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
In-Reply-To: <486E8945.7080203@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<486E8945.7080203@mail.udg.mx>
Message-ID: <C979D8D8-C577-456D-A946-A2273A968F7A@syenar.hu>

>
Hi David,

>> 2008-07-04 04:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * contrib/hbmzip/hbmzip.c
>>    + Reenabled new OS/2 code.
>>    ! Fixed defines in OS/2 part. Requested definitions.
>>      Fixed one potential error. Pls review and test, all
>>      this was done blindly.
>
> hbmzip.a is created without warnings/errors
>
> but testing with contrib\hbmzip\tests\myzip.prg, myunzip.prg produce a
> lot of errors, some of them included below
> hbzlib.a is included in list of libraries

If hbzlib is linked, I have to pass this one.

(maybe hbzlib is not complete, or there is a link
order problem, or hbzlib is not properly configured
for OS/2, or else)

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  4 20:00:48 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 20:00:48 2008
Subject: [Harbour] 2008-07-05 01:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8de32$Blat.v2.6.2$2e33c558$2fe477b4e81e@127.0.0.1>

2008-07-05 01:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbver.h
     ! Typo in comment.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  4 20:09:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 20:09:58 2008
Subject: [Harbour] Class creation broken in RC2 (RESOLVED?)
In-Reply-To: <B0081722893@ms1.3peaks.com>
References: <B0081722893@ms1.3peaks.com>
Message-ID: <A63FB518-48E5-4455-A0FA-C15DD63EDC5E@syenar.hu>

Hi Randy,

Okay, thanks I'll fix this. You seem to be using /u switch with
Harbour, which got broken lately in this respect.

Brgds,
Viktor

On 2008.07.04., at 22:37, Randy Portnoff wrote:

> I seems I now have to define __HARBOUR__ for it to compile and use  
> topclass.ch properly - I did not have to do this before.
>
> <<<Original message>>>
>
> Hi all,
>
> I can no longer compile PRG code which contains class definitions  
> (via Clip4Win32's topclass.ch) - I get the following errors:
>
> PPBROWSE.prg(97) Error E0030  Syntax error: "syntax error at 'INIT'"
> PPBROWSE.prg(99) Error E0030  Syntax error: "syntax error at  
> '__SUBWNDPROC'"
> PPBROWSE.prg(101) Error E0030  Syntax error: "syntax error at  
> 'ADDCOLUMN'"
> PPBROWSE.prg(102) Error E0030  Syntax error: "syntax error at  
> '_CLASS_DECLARATION_'"
> .
> .
> .
>
> However, this worked fine in: Harbour devel build 1.1-1 Intl. (Rev.  
> 8567)
>
> Regards,
> Randy.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Jul  4 20:25:39 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 20:25:39 2008
Subject: [Harbour] 2008-07-05 02:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8de35$Blat.v2.6.2$a6e38c24$232cbbaa67fe@127.0.0.1>

2008-07-05 02:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/pp/hbpp.c
   * source/pp/ppcore.c
   * source/pp/pplib.c
     ! Fixed bug introduced in r8836, so that now __HARBOUR__ 
       will again be #defined when 'harbour /u' switch is used.
       Thanks Randy.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  4 20:35:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 20:36:04 2008
Subject: [Harbour] SITE: https://www.harbour-project.org
Message-ID: <F6CAA51A-E55A-46D0-93B0-02E167B81152@syenar.hu>

Hi Phil,

The above URL will lead to a Plesk default page,
while IMO it should present the same content as
with plain http.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  4 20:43:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 20:44:47 2008
Subject: [Harbour] SITE: content problems
Message-ID: <B9D4DB00-1C6F-4951-9DA8-E25249773C1C@syenar.hu>

Hi Massimo,

A few problems with the site:
- http://www.harbour-project.org/whatsnew.txt is an old (alpha) version.
- rc2 missing from news.
- rc2 missing from latest stable build (on the right).
- "latest changelog" link leads to an old CVS link not working anymore.
- "Sample apps" has one sample, leading to a broken link.
- "Sample apps" show 3 samples on the right, yet there is only one.
- Old sf.net logos on sub-pages (like "Sample apps").

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul  4 20:49:22 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 20:49:24 2008
Subject: [Harbour] 2008-07-05 02:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8de38$Blat.v2.6.2$f720ce1a$332c1fd725a@127.0.0.1>

2008-07-05 02:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/Makefile
     ! Removed non-existing genhtm.cmd
     ! howtocvs.txt -> howtosvn.txt
--
Brgds,
Viktor

From jarabal at ya.com  Fri Jul  4 20:58:10 2008
From: jarabal at ya.com (Javier)
Date: Fri Jul  4 20:58:36 2008
Subject: [Harbour] Transform() PICTURE @R compatible Clipper 5.1 and VFP.
In-Reply-To: <47FB5568.2000207@ya.com>
References: <47FB5568.2000207@ya.com>
Message-ID: <486EC722.3040808@ya.com>

Viktor,

 * Transform() PICTURE @R compatible Clipper 5.01 and VFP.

Please, could you update the repository, thank you so much Viktor.

Best regards.
Xavi

Javier escribi?:
> In Clipper 5.1, FoxPro, VFP, ..., the result is adjusts to length of 
> entry data for types character.
> This does more easy the application of a accountant mask, for example .-
>
> Local cAccount := "12345"
>
> ? '[' + Transform( cAccount, '@R 999.99.99.9999' ) + ']'  // [123.45]
>
> In Clipper 5.2 y Harbour it's adjusts to length of mask, "PICTURE".
>
> ? '[' + Transform( cAccount, '@R 999.99.99.9999' ) + ']'  // [123.45.  
> .    ]
>
> Would it be possible to find a solution compatible style @L?
>
> Thanks in advance
> Xavi
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
/*
 * $Id: transfrm.c 8681 2008-06-10 09:13:33Z vszakats $
 */

/*
 * Harbour Project source code:
 * TRANSFORM() function
 *
 * Copyright 1999 Eddie Runia <eddie@runia.com>
 * www - http://www.harbour-project.org
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status of such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */

/*
 * The following parts are Copyright of the individual authors.
 * www - http://www.harbour-project.org
 *
 * Copyright 1999 Matthew Hamilton <mhamilton@bunge.com.au>
 *    String handling
 *
 * See doc/license.txt for licensing terms.
 *
 */

#include <ctype.h>

#include "hbapi.h"
#include "hbapiitm.h"
#include "hbapierr.h"
#include "hbdate.h"
#include "hbset.h"
#include "hbapicdp.h"

/* Picture function flags */
#define PF_LEFT       0x0001   /* @B */
#define PF_CREDIT     0x0002   /* @C */
#define PF_DEBIT      0x0004   /* @X */
#define PF_PADL       0x0008   /* @L */ /* NOTE: This is a FoxPro/XPP extension [vszakats] */
#define PF_PARNEG     0x0010   /* @( */
#define PF_REMAIN     0x0020   /* @R */
#define PF_UPPER      0x0040   /* @! */
#define PF_DATE       0x0080   /* @D */
#define PF_BRITISH    0x0100   /* @E */
#define PF_EXCHANG    0x0100   /* @E. Also means exchange . and , */
#define PF_EMPTY      0x0200   /* @Z */
#define PF_WIDTH      0x0400   /* @S */
#define PF_PARNEGWOS  0x0800   /* @) Similar to PF_PARNEG but without leading spaces */

HB_FUNC( TRANSFORM )
{
   PHB_ITEM pValue = hb_param( 1, HB_IT_ANY ); /* Input parameter */
   PHB_ITEM pPic = hb_param( 2, HB_IT_STRING ); /* Picture string */

   BOOL bError = FALSE;

   if( pPic && hb_itemGetCLen( pPic ) > 0 )
   {
      char szPicDate[ 11 ];
      char * szPic = hb_itemGetCPtr( pPic );
      ULONG  ulPicLen = hb_itemGetCLen( pPic );
      USHORT uiPicFlags; /* Function flags */

      ULONG  ulParamS = 0; /* To avoid GCC -O2 warning */
      BYTE   byParamL = '\0'; /* To avoid GCC -O2 warning */

      char * szResult;
      ULONG  ulResultPos;

      ULONG  ulOffset = 0;

      /* ======================================================= */
      /* Analyze picture functions                               */
      /* ======================================================= */

      uiPicFlags = 0;

      /* If an "@" char is at the first pos, we have picture function */

      if( *szPic == '@' )
      {
         BOOL bDone = FALSE;

         /* Skip the "@" char */

         szPic++;
         ulPicLen--;

         /* Go through all function chars, until the end of the picture string
            or any whitespace found. */

         while( ulPicLen && ! bDone )
         {
            switch( hb_charUpper( *szPic ) )
            {
               case HB_CHAR_HT:
               case ' ':
                  bDone = TRUE;     /* End of function string */
                  break;
               case '!':
                  uiPicFlags |= PF_UPPER;
                  break;
               case '(':
                  uiPicFlags |= PF_PARNEG;
                  break;
               case ')':
                  uiPicFlags |= PF_PARNEGWOS;
                  break;
#if defined(HB_COMPAT_XPP) || defined(HB_COMPAT_FOXPRO)
               case 'L':
               case '0':
                  uiPicFlags |= PF_PADL;  /* FoxPro/XPP extension */
                  byParamL = '0';
                  break;
#endif
               case 'B':
                  uiPicFlags |= PF_LEFT;
                  break;
               case 'C':
                  uiPicFlags |= PF_CREDIT;
                  break;
               case 'D':
                  uiPicFlags |= PF_DATE;
                  break;
               case 'E':
                  uiPicFlags |= PF_BRITISH;
                  break;
               case 'R':
                  uiPicFlags |= PF_REMAIN;
                  break;
               case 'S':
                  uiPicFlags |= PF_WIDTH;
                  ulParamS = 0;
                  while( ulPicLen > 1 && *( szPic + 1 ) >= '0' && *( szPic + 1 ) <= '9' )
                  {
                     szPic++;
                     ulPicLen--;
                     ulParamS = ( ulParamS * 10 ) + ( ( ULONG ) ( *szPic - '0' ) );
                  }
                  break;
               case 'X':
                  uiPicFlags |= PF_DEBIT;
                  break;
               case 'Z':
                  uiPicFlags |= PF_EMPTY;
                  break;
            }

            szPic++;
            ulPicLen--;
         }
      }

      /* ======================================================= */
      /* Handle STRING values                                    */
      /* ======================================================= */

      if( HB_IS_STRING( pValue ) )
      {
         char * szExp = hb_itemGetCPtr( pValue );
         ULONG  ulExpLen = hb_itemGetCLen( pValue );
         ULONG  ulExpPos = 0;
         BOOL bAnyPic = FALSE;
         BOOL bFound  = FALSE;

         /* Grab enough */

         /* Support date function for strings */
         if( uiPicFlags & ( PF_DATE | PF_BRITISH ) )
         {
            hb_dateFormat( "XXXXXXXX", szPicDate, hb_set.HB_SET_DATEFORMAT );
            szPic = szPicDate;
            ulPicLen = strlen( szPicDate );
         }

         szResult = ( char * ) hb_xgrab( ulExpLen + ulPicLen + 1 );
         ulResultPos = 0;

         /* Template string */
         if( ulPicLen )
         {
            while( ulPicLen )                        /* Analyze picture mask */
            {
               if( ulExpPos < ulExpLen )
               {
                  switch( *szPic )
                  {
                     /* Upper */
                     case '!':
                     {
                        szResult[ ulResultPos++ ] = hb_charUpper( szExp[ ulExpPos ] );
                        ulExpPos++;
                        bAnyPic = TRUE;
                        break;
                     }

                     /* Out the character */
                     case '#':
                     case '9':
                     case 'a':
                     case 'A':
                     case 'l':
                     case 'L':
                     case 'n':
                     case 'N':
                     case 'x':
                     case 'X':
                     {
                        szResult[ ulResultPos++ ] = ( uiPicFlags & PF_UPPER ) ? hb_charUpper( szExp[ ulExpPos ] ) : szExp[ ulExpPos ];
                        ulExpPos++;
                        bAnyPic = TRUE;
                        break;
                     }

                     /* Logical */
                     case 'y':
                     case 'Y':
                     {
                        szResult[ ulResultPos++ ] = ( szExp[ ulExpPos ] == 't' ||
                                                      szExp[ ulExpPos ] == 'T' ||
                                                      szExp[ ulExpPos ] == 'y' ||
                                                      szExp[ ulExpPos ] == 'Y' ) ? ( char ) 'Y' : ( char ) 'N';
                        ulExpPos++;
                        bAnyPic = TRUE;
                        break;
                     }

                     /* Other choices */
                     default:
                     {
                        szResult[ ulResultPos++ ] = *szPic;

                        if( !( uiPicFlags & PF_REMAIN ) )
                           ulExpPos++;
                     }
                  }
               }
               else if( !( uiPicFlags & PF_REMAIN ) )
                  break;

               else
               {
/* NOTE: This is a FoxPro compatible [jarabal] */
#if defined(HB_COMPAT_FOXPRO)
                  ulPicLen = 0;
                  break;
#else
                  switch( *szPic )
                  {
                     case '!':
                     case '#':
                     case '9':
                     case 'a':
                     case 'A':
                     case 'l':
                     case 'L':
                     case 'n':
                     case 'N':
                     case 'x':
                     case 'X':
                     case 'y':
                     case 'Y':
                     {
                        szResult[ ulResultPos++ ] = ' ';
                        break;
                     }

                     default:
                        szResult[ ulResultPos++ ] = *szPic;
                  }
#endif                  
               }

               szPic++;
               ulPicLen--;
            }
         }
         else
         {
            while( ulExpPos++ < ulExpLen )
            {
               if( uiPicFlags & PF_EXCHANG )
               {
                  switch( *szExp )
                  {
                     case ',':
                     {
                        szResult[ ulResultPos++ ] = '.';
                        break;
                     }
                     case '.':
                     {
                        if( !bFound && ulResultPos )
                        {
                           szResult[ ulResultPos++ ] = ',';
                           bFound = TRUE;
                        }

                        break;
                     }
                     default:
                        szResult[ ulResultPos++ ] = ( uiPicFlags & PF_UPPER ) ? hb_charUpper( *szExp ) : *szExp;
                  }
               }
               else
               {
                  szResult[ ulResultPos++ ] = ( uiPicFlags & PF_UPPER ) ? hb_charUpper( *szExp ) : *szExp;
               }
               szExp++;
            }
         }

         if( ( uiPicFlags & PF_REMAIN ) && ! bAnyPic )
         {
            while( ulExpPos++ < ulExpLen )
            {
               szResult[ ulResultPos++ ] = ( uiPicFlags & PF_UPPER ) ? hb_charUpper( *szExp ) : *szExp;
               szExp++;
            }
         }

         /* Any chars left ? */
         if( ( uiPicFlags & PF_REMAIN ) && ulPicLen )
         {
            /* Export remainder */
            while( ulPicLen-- )
               szResult[ ulResultPos++ ] = ' ';
         }

         if( uiPicFlags & PF_BRITISH )
         {
            /* CA-Cl*pper do not check result size and always exchanges
             * bytes 1-2 with bytes 4-5. It's buffer overflow bug and I do
             * not want to replicate it. It also causes that the results of
             * @E conversion used for strings smaller then 5 bytes behaves
             * randomly.
             * In fact precise tests can show that it's not random behavior
             * but CA-Cl*pper uses static buffer for result and when current
             * one is smaller then 5 bytes then first two bytes are exchanged
             * with 4-5 bytes from previous result which was length enough,
             * f.e.:
             *          ? transform( "0123456789", "" )
             *          ? transform( "AB", "@E" )
             *          ? transform( "ab", "@E" )
             * [druzus]
             */
            if( ulResultPos >= 5 )
            {
               szPicDate[ 0 ] = szResult[ 0 ];
               szPicDate[ 1 ] = szResult[ 1 ];
               szResult[ 0 ] = szResult[ 3 ];
               szResult[ 1 ] = szResult[ 4 ];
               szResult[ 3 ] = szPicDate[ 0 ];
               szResult[ 4 ] = szPicDate[ 1 ];
            }
         }
      }

      /* ======================================================= */
      /* Handle NUMERIC values                                   */
      /* ======================================================= */

      else if( HB_IS_NUMERIC( pValue ) )
      {
         int      iWidth;                             /* Width of string          */
         int      iDec;                               /* Number of decimals       */
         int      iCount;
         ULONG    i;
         char     cPic;
         PHB_ITEM pNumber = NULL;

         double dValue = hb_itemGetND( pValue );

         /* Support date function for numbers */
         if( uiPicFlags & PF_DATE )
         {
            hb_dateFormat( "99999999", szPicDate, hb_set.HB_SET_DATEFORMAT );
            szPic = szPicDate;
            ulPicLen = strlen( szPicDate );
         }

         for( i = iWidth = iDec = 0; i < ulPicLen; i++ )
         {
            if( szPic[ i ] == '.' )
            {
               while( ++i < ulPicLen )
               {
                  if( szPic[ i ] == '9' || szPic[ i ] == '#' ||
                      szPic[ i ] == '$' || szPic[ i ] == '*' )
                  {
                     iWidth++;
                     iDec++;
                  }
               }
               if( iDec )
                  iWidth++;
               break;
            }
            else if( szPic[ i ] == '9' || szPic[ i ] == '#' ||
                     szPic[ i ] == '$' || szPic[ i ] == '*' )
               iWidth++;
         }

         iCount = 0;
         if( iWidth == 0 )                             /* Width calculated ??      */
         {
            hb_itemGetNLen( pValue, &iWidth, &iDec );
            if( hb_set.HB_SET_FIXED )
            {
               if( HB_IS_NUMINT( pValue ) )
                  iWidth += 2 + ( hb_set.HB_SET_DECIMALS << 1 );
               else
                  iDec = hb_set.HB_SET_DECIMALS;
            }
            if( iDec )
               iWidth += iDec + 1;
         }
         else if( iDec > 0 && iWidth - iDec == 1 )
         {
            iCount = 1;
            iWidth++;
         }

         if( ( uiPicFlags & ( PF_DEBIT | PF_PARNEG | PF_PARNEGWOS ) ) && dValue < 0 )
         {
            /* Always convert absolute val */
            if( HB_IS_NUMINT( pValue ) ) /* workaround for 64bit integer conversion */
               pNumber = hb_itemPutNInt( NULL, - hb_itemGetNInt( pValue ) );
            else
               pNumber = hb_itemPutND( NULL, -dValue );
            pValue = pNumber;
         }

         if( dValue != 0 )
            /* Don't empty the result if the number is not zero */
            uiPicFlags &= ~PF_EMPTY;

         /* allocate 4 additional bytes for possible ") CR" or ") DB" suffix */
         szResult = ( char * ) hb_xgrab( iWidth + 5 );
         hb_itemStrBuf( szResult, pValue, iWidth, iDec );
         if( pNumber )
            hb_itemRelease( pNumber );

         if( iCount )
         {
            iWidth--;
            if( *szResult != '0' )
            {
               memset( szResult + 1, '*', iWidth );
               *szResult = '.';
            }
            else
               memmove( szResult, szResult + 1, iWidth );
            szResult[ iWidth ] = '\0';
         }

         /* Pad with padding char */
         if( uiPicFlags & PF_PADL )
         {
            for( i = 0; szResult[ i ] == ' '; i++ )
               szResult[ i ] = byParamL;

            /* please test it with FoxPro and xbase++ to check
             * if they made the same [druzus]
             */
            if( i && szResult[ i ] == '-' )
            {
               szResult[ 0 ] = '-';
               szResult[ i ] = byParamL;
            }
         }

         if( ulPicLen == 0 )
         {
            if( uiPicFlags & PF_EXCHANG )
            {
               for( i = 0; i < ( ULONG ) iWidth; ++i )
               {
                  if( szResult[ i ] == '.' )
                  {
                     szResult[ i ] = ',';
                     break;
                  }
               }
            }
            i = iWidth;
         }
         else
         {
            char * szStr = szResult;

            /* allocate 4 additional bytes for possible ") CR" or ") DB" suffix */
            szResult = ( char * ) hb_xgrab( ulPicLen + 5 );

            for( i = iCount = 0; i < ulPicLen; i++ )
            {
               cPic = szPic[ i ];
               if( cPic == '9' || cPic == '#' )
               {
                  szResult[ i ] = iCount < iWidth ? szStr[ iCount++ ] : ' ';
               }
               else if( cPic == '$' || cPic == '*' )
               {
                  if( iCount < iWidth )
                  {
                     szResult[ i ] = szStr[ iCount ] == ' ' ? cPic : szStr[ iCount ];
                     iCount++;
                  }
                  else
                     szResult[ i ] = ' ';
               }
               else if( cPic == '.' && iCount < iWidth )
               {
                  szResult[ i ] = ( uiPicFlags & PF_EXCHANG ) ? ',' : '.';
                  iCount++;
               }
               else if( cPic == ',' && i && iCount < iWidth )
               {
                  if( isdigit( ( UCHAR ) szResult[ i - 1 ] ) )
                     szResult[ i ] = ( uiPicFlags & PF_EXCHANG ) ? '.' : ',';
                  else
                  {
                     szResult[ i ] = szResult[ i - 1 ];
                     if( szResult[ i - 1 ] == '-' )
                     {
                        szResult[ i - 1 ] = i > 1 && szResult[ i - 2 ] != '$' ?
                                            szResult[ i - 2 ] : ' ';
                     }
                  }
               }
               else
                  szResult[ i ] = cPic;
            }
            hb_xfree( szStr );
         }

         if( dValue < 0 )
         {
            /* PF_PARNEGWOS has higher priority then PF_PARNEG */
            if( ( uiPicFlags & PF_PARNEGWOS ) )
            {
               iCount = 0;
               if( ulPicLen && i > 1 )
               {
                  if( *szPic == *szResult && ( *szPic == '*' || *szPic == '$' ) &&
                      szResult[ 1 ] == ' ' )
                     ++iCount;
               }
               while( ( ULONG ) iCount + 1 < i && szResult[ iCount + 1 ] == ' ' )
                  ++iCount;

#ifndef HB_C52_STRICT
               /* This is not Clipper compatible */
               if( szResult[ iCount ] >= '1' && szResult[ iCount ] <= '9' &&
                   ( ulPicLen == 0 || szPic[ iCount ] == '9' ||
                     szPic[ iCount ] != szResult[ iCount ] ) )
               {
                  szResult[ iCount ] = '(';
                  for( ++iCount; ( ULONG ) iCount < i; iCount++ )
                  {
                     if( szResult[ iCount ] >= '0' && szResult[ iCount ] <= '9' &&
                         ( ulPicLen == 0 || szPic[ iCount ] == '9' ||
                           szPic[ iCount ] != szResult[ iCount ] ) )
                        szResult[ iCount ] = '*';
                  }
               }
               else
#endif
                  szResult[ iCount ] = '(';
               szResult[ i++ ] = ')';
            }
            else if( ( uiPicFlags & PF_PARNEG ) )
            {
#ifndef HB_C52_STRICT
               /* This is not Clipper compatible */
               if( *szResult >= '1' && *szResult <= '9' &&
                   ( ulPicLen == 0 || *szPic == '9' || *szPic != *szResult ) )
               {
                  for( iCount = 1; ( ULONG ) iCount < i; iCount++ )
                  {
                     if( szResult[ iCount ] >= '0' && szResult[ iCount ] <= '9' &&
                         ( ulPicLen == 0 || szPic[ iCount ] == '9' ||
                           szPic[ iCount ] != szResult[ iCount ] ) )
                        szResult[ iCount ] = '*';
                  }
               }
#endif
               *szResult       = '(';
               szResult[ i++ ] = ')';
               ulOffset = 1;
            }

            if( ( uiPicFlags & PF_DEBIT ) )
            {
               szResult[ i++ ] = ' ';
               szResult[ i++ ] = 'D';
               szResult[ i++ ] = 'B';
            }
         }
         else if( ( uiPicFlags & PF_CREDIT ) && dValue > 0 )
         {
            szResult[ i++ ] = ' ';
            szResult[ i++ ] = 'C';
            szResult[ i++ ] = 'R';
         }

         ulResultPos = i;
         szResult[ i ] = '\0';
      }

      /* ======================================================= */
      /* Handle DATE values                                      */
      /* ======================================================= */

      else if( HB_IS_DATE( pValue ) )
      {
         char szDate[ 9 ];
         char * szDateFormat;
         char szNewFormat[ 11 ];
         UINT nFor;

         szResult = ( char * ) hb_xgrab( 13 );
         szDateFormat = hb_set.HB_SET_DATEFORMAT;

#ifndef HB_C52_STRICT
         if( uiPicFlags & PF_BRITISH )
         {
            /* When @E is used CA-Cl*pper do not update date format
             * pattern but wrongly moves 4-th and 5-th bytes of
             * formatted date to the beginning (see below). It causes
             * that date formats formats different then MM?DD?YY[YY]
             * are wrongly translated. The code below is not CA-Cl*pper
             * compatible but it tries to respect user date format
             * [druzus]
             */
            const char * szBritish = hb_set.hb_set_century ?
                                     "DDMMYYYY" : "DDMMYY";
            char cLast = 'x';

            for( nFor = 0; nFor < 10; nFor++ )
            {
               if( *szBritish == cLast )
               {
                  szNewFormat[ nFor ] = cLast;
                  szBritish++;
               }
               else if( ! *szDateFormat )
                  break;
               else if( *szBritish &&
                        ( *szDateFormat == 'Y' || *szDateFormat == 'y' ||
                          *szDateFormat == 'D' || *szDateFormat == 'd' ||
                          *szDateFormat == 'M' || *szDateFormat == 'm' ) )
               {
                  szNewFormat[ nFor ] = cLast = *szBritish++;
                  do
                     szDateFormat++;
                  while( szDateFormat[ -1 ] == szDateFormat[ 0 ] );
               }
               else
                  szNewFormat[ nFor ] = *szDateFormat++;
            }
            szNewFormat[ nFor ] = '\0';
            szDateFormat = szNewFormat;
         }
#endif

         hb_dateFormat( hb_itemGetDS( pValue, szDate ), szResult, szDateFormat );
         ulResultPos = strlen( szResult );

#ifdef HB_C52_STRICT
         if( uiPicFlags & PF_BRITISH )
         {
            /* replicated wrong Clipper behavior, see note above.
             * It's not exact CA-Cl*pper behavior because it does
             * not check for size of results and can extract data
             * from static memory buffer used in previous conversions
             * (see my note for @E in string conversion above)
             * but this is buffer overflow and I do not plan to
             * replicated it too [druzus]
             */
            if( ulResultPos >= 5 )
            {
               szNewFormat[ 0 ] = szResult[ 0 ];
               szNewFormat[ 1 ] = szResult[ 1 ];
               szResult[ 0 ] = szResult[ 3 ];
               szResult[ 1 ] = szResult[ 4 ];
               szResult[ 3 ] = szNewFormat[ 0 ];
               szResult[ 4 ] = szNewFormat[ 1 ];
            }
         }
#endif
         if( uiPicFlags & PF_REMAIN )
         {
            /* Here we also respect the date format modified for @E [druzus]
             */
            hb_dateFormat( "99999999", szPicDate, szDateFormat );
            ulPicLen = strlen( szPicDate );

            for( nFor = 0; nFor < ulPicLen; nFor++ )
            {
               if( szPicDate[ nFor ] != '9' )
               {
                  memmove( szResult + nFor + 1, szResult + nFor, 12 - nFor );
                  szResult[ nFor ] = szPicDate[ nFor ];
                  ulResultPos++;
               }
            }
         }
      }

      /* ======================================================= */
      /* Handle LOGICAL values                                   */
      /* ======================================================= */

      else if( HB_IS_LOGICAL( pValue ) )
      {
         BOOL bDone = FALSE;
         BOOL bExit = FALSE;
         char cPic;

         if( uiPicFlags & ( PF_DATE | PF_BRITISH ) )
         {
            hb_dateFormat( "99999999", szPicDate, hb_set.HB_SET_DATEFORMAT );
            szPic = szPicDate;
            ulPicLen = strlen( szPicDate );
         }

         ulResultPos = 0;
         szResult = ( char * ) hb_xgrab( ulPicLen + 2 );

         for( ; ( ulPicLen || !bDone ) && !bExit ; ulResultPos++, szPic++, ulPicLen-- )
         {
            if( ulPicLen )
               cPic = *szPic;
            else
            {
               cPic  = 'L';
               bExit = TRUE;
            }

            switch( cPic )
            {
               case 'y':                     /* Yes/No                   */
               case 'Y':                     /* Yes/No                   */
               {
                  if( !bDone )
                  {
                     szResult[ ulResultPos ] = hb_itemGetL( pValue ) ? 'Y' : 'N';
                     bDone = TRUE;           /* Logical written          */
                  }
                  else
                     szResult[ ulResultPos ] = ' ';

                  break;
               }

               case '#':
               case 'l':                     /* True/False               */
               case 'L':                     /* True/False               */
               {
                  if( !bDone )
                  {
                     szResult[ ulResultPos ] = hb_itemGetL( pValue ) ? 'T' : 'F';
                     bDone = TRUE;
                  }
                  else
                     szResult[ ulResultPos ] = ' ';

                  break;
               }

               default:
                  szResult[ ulResultPos ] = cPic;
            }

            if( !( uiPicFlags & PF_REMAIN ) )
               bExit = TRUE;
         }
      }

      /* ======================================================= */

      else
      {
         szResult = NULL; /* To avoid GCC -O2 warning */
         ulResultPos = 0; /* To avoid GCC -O2 warning */
         bError = TRUE;
      }

      if( ! bError )
      {
         if( uiPicFlags & PF_EMPTY )
            memset( szResult, ' ', ulResultPos );
         else if( uiPicFlags & PF_LEFT )
         {
            /* Trim left and pad with spaces */
            ULONG ulFirstChar = ulOffset;

            while( ulFirstChar < ulResultPos && szResult[ ulFirstChar ] == ' ' )
               ulFirstChar++;

            if( ulFirstChar > ulOffset && ulFirstChar < ulResultPos )
            {
               memmove( szResult + ulOffset, szResult + ulFirstChar, ulResultPos - ulFirstChar );
               memset( szResult + ulOffset + ulResultPos - ulFirstChar, ' ', ulFirstChar - ulOffset );
            }
         }

         hb_retclen_buffer( szResult, ( ulParamS && ulResultPos > ulParamS ) ? ulParamS : ulResultPos );
      }
   }
   else if( pPic || ISNIL( 2 ) ) /* Picture is an empty string or NIL */
   {
      if( HB_IS_STRING( pValue ) )
      {
         hb_itemReturn( pValue );
      }
      else if( HB_IS_NUMERIC( pValue ) )
      {
         char * szStr;

         if( HB_IS_NUMINT( pValue ) && hb_set.HB_SET_FIXED )
         {
            int iWidth, iDec;
            hb_itemGetNLen( pValue, &iWidth, &iDec );
            iWidth += 2 + ( hb_set.HB_SET_DECIMALS << 1 );
            szStr = ( char * ) hb_xgrab( iWidth + 1 );
            hb_itemStrBuf( szStr, pValue, iWidth, iDec );
            hb_retclen_buffer( szStr, iWidth );
         }
         else
         {
            ULONG ulLen;
            BOOL bFreeReq;

            szStr = hb_itemString( pValue, &ulLen, &bFreeReq );
            if( bFreeReq )
               hb_retclen_buffer( szStr, ulLen );
            else
               hb_retclen( szStr, ulLen );
         }
      }
      else if( HB_IS_DATE( pValue ) )
      {
         char szDate[ 9 ];
         char szResult[ 11 ];

         hb_retc( hb_dateFormat( hb_itemGetDS( pValue, szDate ), szResult, hb_set.HB_SET_DATEFORMAT ) );
      }
      else if( HB_IS_LOGICAL( pValue ) )
      {
         hb_retc( hb_itemGetL( pValue ) ? "T" : "F" );
      }
      else
         bError = TRUE;
   }
   else
      bError = TRUE;

   /* If there was any parameter error, launch a runtime error */

   if( bError )
      hb_errRT_BASE_SubstR( EG_ARG, 1122, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

From mbelgrano at deltain.it  Fri Jul  4 21:01:42 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul  4 21:01:54 2008
Subject: [Harbour] SITE: content problems
In-Reply-To: <B9D4DB00-1C6F-4951-9DA8-E25249773C1C@syenar.hu>
References: <B9D4DB00-1C6F-4951-9DA8-E25249773C1C@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDFE@SRV02.deltain.net>

A few problems with the site:
> http://www.harbour-project.org/whatsnew.txt is an old (alpha) version.
done

> rc2 missing from news.
done

> rc2 missing from latest stable build (on the right).
done

> "latest changelog" link leads to an old CVS link not working anymore.
yes

> "Sample apps" has one sample, leading to a broken link.
> "Sample apps" show 3 samples on the right, yet there is only one.
What can post in sample?

- Old sf.net logos on sub-pages (like "Sample apps").
Yes


From harbour.01 at syenar.hu  Fri Jul  4 21:29:41 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul  4 21:29:41 2008
Subject: [Harbour] 2008-07-05 03:28 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8de3e$Blat.v2.6.2$98e63924$14308db4a50e@127.0.0.1>

2008-07-05 03:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/transfrm.c
     + Added patch by Javier. This will make @R picture 
       compatible with Clipper 5.01 and VFP if HB_COMPAT_FOXPRO 
       is enabled.
--
Brgds,
Viktor

From philb at philb.us  Fri Jul  4 23:41:34 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Jul  5 00:01:13 2008
Subject: [Harbour] SITE: https://www.harbour-project.org
In-Reply-To: <F6CAA51A-E55A-46D0-93B0-02E167B81152@syenar.hu>
References: <F6CAA51A-E55A-46D0-93B0-02E167B81152@syenar.hu>
Message-ID: <200807042341.34656.philb@philb.us>

On Friday 04 July 2008 08:35:11 pm Szak?ts Viktor wrote:
> Hi Phil,
>
> The above URL will lead to a Plesk default page,
> while IMO it should present the same content as
> with plain http.

I'll put up a redirect.

-- 
Waiting for sunspots.
From harbour.01 at syenar.hu  Sat Jul  5 02:49:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul  5 02:50:38 2008
Subject: [Harbour] SITE: content problems
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EDFE@SRV02.deltain.net>
References: <B9D4DB00-1C6F-4951-9DA8-E25249773C1C@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EDFE@SRV02.deltain.net>
Message-ID: <220206F5-764C-46C9-8C19-5E62AA8F0174@syenar.hu>

>
Hi Massimo,

> A few problems with the site:
>> http://www.harbour-project.org/whatsnew.txt is an old (alpha)  
>> version.
> done
>
>> rc2 missing from news.
> done

Thanks.

Can you pls change
'Release of Beta 2 ( 1.0.0.1 )' to 'Release of 1.0.0rc2' and
'Release of Beta 1 ( 1.0.0.1 )' to 'Release of 1.0.0rc1'

Also there are lots of typos in the new header text, and
the news entries are very badly formatted now, and it's
also difficult to see because because you have to scroll
for it. Maybe the header text is too large.

>> rc2 missing from latest stable build (on the right).
> done

Just some minor correction please:
' Version(1.0.0) RC2- 2008-07-01-' to
'Version 1.0.0rc2 (2008-07-01)'

>> "latest changelog" link leads to an old CVS link not working anymore.
> yes

It still lead to the same place. Can you change to:
http://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/harbour/ChangeLog?view=log

>> "Sample apps" has one sample, leading to a broken link.
>> "Sample apps" show 3 samples on the right, yet there is only one.
> What can post in sample?

I don't know the purpose of this page.
But I think the dead link should be deleted.

> - Old sf.net logos on sub-pages (like "Sample apps").
> Yes

Can you pls change to the new one? (Seen on the main page)

Brgds,
Viktor

From dmacias at mail.udg.mx  Sat Jul  5 04:16:21 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Jul  5 04:16:27 2008
Subject: [Harbour] Re: 2008-07-04 04:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <486F2DD5.3070603@mail.udg.mx>

Viktor, Mindaugas:

 >If hbzlib is linked, I have to pass this one.

 >(maybe hbzlib is not complete, or there is a link
 >order problem, or hbzlib is not properly configured
 >for OS/2, or else)

Was a link order problem. Setting hbmzip in first place solve problem

But date/time continue empty as shown below

This is related to changes of Mindaugas, but failure is not solved

Any hints / tests ?

-------------------------------------------
2008-07-03 16:30 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * contrib/hbmzip/hbmzip.c
     + implemented file get attributes and file set attributes for DOS 
and OS2
     ; I've not even tried to compile the code. I have no required OS and
       compile enviroment. DOS implementation is written using docs from
       http://www.delorie.com/djgpp/doc/libc-2.02/, OS2 implementation
       is just guess... Please test, I hope adding some #include <xxx.h>
       will make this code usable.
-------------------------------------------

David Macias


[E:\harbour807\harbour\tests]
[E:\harbour807\harbour\tests]myzip.exe pba myzip.exe

Archive file: pba.zip
Adding myzip.exe
[E:\harbour807\harbour\tests]unzip -l pba.zip
Archive:  pba.zip
   Length     EAs   ACLs    Date   Time    Name
  --------    ---   ----    ----   ----    ----
   1199071      0      0  00-01-80 00:00   myzip.exe
  --------  -----  -----                   -------
   1199071      0      0                   1 file

[E:\harbour807\harbour\tests] myunzip pba.zip myzip.exe

Archive file: pba.zip

Filename                         Date     Time          Size Compressed 
  Action
--------------------------------------------------------------------------------
-
myzip.exe                        /  /   00:00:00    1199071     361254 
Extracting
From mbelgrano at deltain.it  Sat Jul  5 04:29:15 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul  5 04:29:23 2008
Subject: [Harbour] SITE: content problems
In-Reply-To: <220206F5-764C-46C9-8C19-5E62AA8F0174@syenar.hu>
References: <B9D4DB00-1C6F-4951-9DA8-E25249773C1C@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815EDFE@SRV02.deltain.net>
	<220206F5-764C-46C9-8C19-5E62AA8F0174@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EDFF@SRV02.deltain.net>

Something done

I need materials to publish Can copy from here?
http://www.ibm.com/developerworks/opensource/library/os-harbour3.html


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Saturday, July 05, 2008 8:50 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] SITE: content problems

>
Hi Massimo,

> A few problems with the site:
>> http://www.harbour-project.org/whatsnew.txt is an old (alpha)  
>> version.
> done
>
>> rc2 missing from news.
> done

Thanks.

Can you pls change
'Release of Beta 2 ( 1.0.0.1 )' to 'Release of 1.0.0rc2' and
'Release of Beta 1 ( 1.0.0.1 )' to 'Release of 1.0.0rc1'

Also there are lots of typos in the new header text, and
the news entries are very badly formatted now, and it's
also difficult to see because because you have to scroll
for it. Maybe the header text is too large.

>> rc2 missing from latest stable build (on the right).
> done

Just some minor correction please:
' Version(1.0.0) RC2- 2008-07-01-' to
'Version 1.0.0rc2 (2008-07-01)'

>> "latest changelog" link leads to an old CVS link not working anymore.
> yes

It still lead to the same place. Can you change to:
http://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/harbour/ChangeLog?view=log

>> "Sample apps" has one sample, leading to a broken link.
>> "Sample apps" show 3 samples on the right, yet there is only one.
> What can post in sample?

I don't know the purpose of this page.
But I think the dead link should be deleted.

> - Old sf.net logos on sub-pages (like "Sample apps").
> Yes

Can you pls change to the new one? (Seen on the main page)

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From philb at philb.us  Sat Jul  5 10:33:59 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Jul  5 10:34:04 2008
Subject: [Harbour] SITE: content problems
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EDFF@SRV02.deltain.net>
References: <B9D4DB00-1C6F-4951-9DA8-E25249773C1C@syenar.hu>
	<220206F5-764C-46C9-8C19-5E62AA8F0174@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EDFF@SRV02.deltain.net>
Message-ID: <200807051033.59799.philb@philb.us>

On Saturday 05 July 2008 04:29:15 am Massimo Belgrano wrote:
> I need materials to publish Can copy from here?
> http://www.ibm.com/developerworks/opensource/library/os-harbour3.html

You can if you get permission from the author of the text, David Mertz.

His email address is on that page.

-- 
Waiting for sunspots.
From mbelgrano at deltain.it  Sat Jul  5 13:23:04 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul  5 13:23:10 2008
Subject: [Harbour] Harbour Online Help # 4
In-Reply-To: <18269238.post@talk.nabble.com>
References: <18269238.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE01@SRV02.deltain.net>

in minigui package is a very usefull manual of harbour 
in \minigui\harbour\doc\(x)harbour.chm by Janus 
very very good
http://www.oohg.org/manual/harbour/(x)harbour.html



-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Friday, July 04, 2008 12:14 AM
To: harbour@harbour-project.org
Subject: [Harbour] Harbour Online Help # 4


Hello All

! Included Functions prototypes in trees:
   harbour/contrib
   harbour/source 
! Changed the look and feel of tables.
! Included complete text search.

Download .chm for local views:
http://www.nabble.com/file/p18269238/harbour.chm harbour.chm 

;TODO: Create Index Entries
           Add harbour/doc/en/*.*
           If possible, create links for retrieval of function body 
              when clicking on the function prototype.
           Write operational guidelines for various components,
           e.g., GT, RDD, SOCKETS, etc.
           And more as thoughts may be coming up...

/*
http://www.vouch.info/harbour

NOTE: This help manual can be made available in these formats: 

1) Compiled HTML format ( .chm ) 
2) PDF Document ( .pdf ) 
3) Classic WinHelp ( .hlp ) ( All Windows Versions ) 
4) MS Help 2.0 for Visual Studio Components 
5) Richtext Format ( .rtf ) ( MS Word Compatible ) 
6) eBook ( .exe ) 
7) XML ( .xml ) 
*/
Regards
Pritpal Bedi
-- 
View this message in context:
http://www.nabble.com/Harbour-Online-Help---4-tp18269238p18269238.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From bedipritpal at hotmail.com  Sat Jul  5 14:04:46 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Jul  5 14:04:49 2008
Subject: [Harbour] Harbour Online Help # 4
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE01@SRV02.deltain.net>
References: <18269238.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815EE01@SRV02.deltain.net>
Message-ID: <18294775.post@talk.nabble.com>


Massimo


Massimo Belgrano-3 wrote:
> 
> very very good
> http://www.oohg.org/manual/harbour/(x)harbour.html
> 

This is fine. 

But my approach is entirely different. I am concerned with 
end users of Harbour as binary compiler. I am targetting the developers.
In the past whenever I needed a reference to inside of a compiler function,
I had to spend a lot of time just to figure out where it is,

Next few days which show up more info on this help manual.

Regards
Pritpal Bedi
 

-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---4-tp18269238p18294775.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Sat Jul  5 14:14:18 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul  5 14:14:24 2008
Subject: [Harbour] Harbour Online Help # 4
In-Reply-To: <18294775.post@talk.nabble.com>
References: <18269238.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815EE01@SRV02.deltain.net>
	<18294775.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE02@SRV02.deltain.net>

I am using xharbour reference guide inside xmate and is a good solution

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Saturday, July 05, 2008 8:05 PM
To: harbour@harbour-project.org
Subject: RE: [Harbour] Harbour Online Help # 4


Massimo


Massimo Belgrano-3 wrote:
> 
> very very good
> http://www.oohg.org/manual/harbour/(x)harbour.html
> 

This is fine. 

But my approach is entirely different. I am concerned with 
end users of Harbour as binary compiler. I am targetting the developers.
In the past whenever I needed a reference to inside of a compiler
function,
I had to spend a lot of time just to figure out where it is,

Next few days which show up more info on this help manual.

Regards
Pritpal Bedi
 

-- 
View this message in context:
http://www.nabble.com/Harbour-Online-Help---4-tp18269238p18294775.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From xccs-project at tar.hu  Sun Jul  6 02:07:27 2008
From: xccs-project at tar.hu (Xccs-project)
Date: Sun Jul  6 02:07:34 2008
Subject: [Harbour] decoding base64
Message-ID: <001801c8df2e$914a6280$b48f7a56@compika>

Hy to All!

I have a problem, it is big me:
I made an e-mailclient, i use tpop3, tsmtp and tdecode classes.
In the tdecode class found a method to encoding base64, it is the encode64, but the decode64 method doesn't exists. How can i decoding a base64 text?
Have the decode method of tdecode class some parameter, witch cann define the coding method, base64 or quoted printable?
Or in the constructor method can i set it?
It is verry inportant for me, also, if somebodi knows the answer, please write to me, and if have an example, please write to me too!
S.O.S.

Many thanks for the help!

Have everybody a nice day!

                Peti

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080706/c759a766/attachment.html
From mbelgrano at deltain.it  Sun Jul  6 05:42:13 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Jul  6 05:42:19 2008
Subject: [Harbour] decoding base64
In-Reply-To: <001801c8df2e$914a6280$b48f7a56@compika>
References: <001801c8df2e$914a6280$b48f7a56@compika>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE03@SRV02.deltain.net>

libb64 is a library of ANSI C routines for fast encoding/decoding data
into and from a base64-encoded format. C++ wrappers are included, as
well as the source code
<http://nixbit.com/cat/programming/libraries/libb64/>  for standalone
encoding and decoding executables.

http://nixbit.com/cat/programming/libraries/libb64/

 

 

From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Xccs-project
Sent: Sunday, July 06, 2008 8:07 AM
To: harbour@harbour-project.org
Subject: [Harbour] decoding base64

 

Hy to All!

 

I have a problem, it is big me:

I made an e-mailclient, i use tpop3, tsmtp and tdecode classes.

In the tdecode class found a method to encoding base64, it is the
encode64, but the decode64 method doesn't exists. How can i decoding a
base64 text?

Have the decode method of tdecode class some parameter, witch cann
define the coding method, base64 or quoted printable?

Or in the constructor method can i set it?

It is verry inportant for me, also, if somebodi knows the answer, please
write to me, and if have an example, please write to me too!

S.O.S.

 

Many thanks for the help!

 

Have everybody a nice day!

 

                Peti

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080706/339ebf88/attachment.html
From mbelgrano at deltain.it  Sun Jul  6 06:02:35 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Jul  6 06:02:47 2008
Subject: [Harbour] (no subject)
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE05@SRV02.deltain.net>

Can i add to Harbour.doc?
http://hmgs-minigui.cvs.sourceforge.net/*checkout*/hmgs-minigui/minigui/Harbour/doc/%28x%29harbour.chm


Massimo Belgrano
?

From xccs-project at tar.hu  Sun Jul  6 06:53:54 2008
From: xccs-project at tar.hu (Xccs-project)
Date: Sun Jul  6 06:53:59 2008
Subject: [Harbour] decoding base64
References: <001801c8df2e$914a6280$b48f7a56@compika>
	<AFB948164110ED43B5EB849E8DEEF03815EE03@SRV02.deltain.net>
Message-ID: <001f01c8df56$954de230$b48f7a56@compika>

Hy Massimo!

Many thanks, but i don't download the library, the page has been opened, but when i click on the download link, then generate error.
Can you send the pack, or the sourcecode send me in mail?
I use harbour width minigui under win32 and gcc compiler.
Thanks!


                    Peti


  ----- Original Message ----- 
  From: Massimo Belgrano 
  To: Harbour Project Main Developer List. 
  Sent: Sunday, July 06, 2008 11:42 AM
  Subject: RE: [Harbour] decoding base64


  libb64 is a library of ANSI C routines for fast encoding/decoding data into and from a base64-encoded format. C++ wrappers are included, as well as the source code for standalone encoding and decoding executables.

  http://nixbit.com/cat/programming/libraries/libb64/

   

   

  From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Xccs-project
  Sent: Sunday, July 06, 2008 8:07 AM
  To: harbour@harbour-project.org
  Subject: [Harbour] decoding base64

   

  Hy to All!

   

  I have a problem, it is big me:

  I made an e-mailclient, i use tpop3, tsmtp and tdecode classes.

  In the tdecode class found a method to encoding base64, it is the encode64, but the decode64 method doesn't exists. How can i decoding a base64 text?

  Have the decode method of tdecode class some parameter, witch cann define the coding method, base64 or quoted printable?

  Or in the constructor method can i set it?

  It is verry inportant for me, also, if somebodi knows the answer, please write to me, and if have an example, please write to me too!

  S.O.S.

   

  Many thanks for the help!

   

  Have everybody a nice day!

   

                  Peti

   

   



------------------------------------------------------------------------------


  _______________________________________________
  Harbour mailing list
  Harbour@harbour-project.org
  http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080706/4dfc1458/attachment-0001.html
From jarabal at ya.com  Sun Jul  6 09:08:36 2008
From: jarabal at ya.com (Javier)
Date: Sun Jul  6 09:09:02 2008
Subject: [Harbour] Change in runner.c __HRBLOAD()
Message-ID: <4870C3D4.4010302@ya.com>

Hi folks,

Sorry for my wrong explanation, my problem is that I costs less program it that write this post. :'(
Please, see my Test() function if there is error in the init functions of hrb, __hrbLoad() returns a wrong pointer (normally 
nil) disabling the discharge of the hrb and memmory leaks.
The problem is that __hrbLoad() return the pointer of hrb in the stack return not in the stack parameter frame.-

//------------------------------------------------------------------------------

#include "..\contrib\xhb\hbcompat.ch"

Procedure Test()
    Local cCode, pHrb, cHrb

#pragma __cstream|cCode:=%s
*************************************
* CODE HRB
*************************************
static s_cName

INIT PROCEDURE MkInit( cName )
    // ERROR: INIT PROCEDURE MkInit( cName ) bad pHrb
    s_cName := cNombre   // VAR It's cName
return

Procedure MkP()
    ? "Ok, Result:", s_cName
return

EXIT PROCEDURE MkExit()
    s_cName := nil
return
*************************************
* END CODE
*************************************
#pragma __endtext

    ? "Script cCode .-"
    ? cCode

    if( nil != (cHrb := HB_COMPILEFROMBUF(cCode, '-n')) )

       TRY
          pHrb := __hrbLoad( cHrb, 'It may be large Code' )
          TRY
             __hrbDo( pHrb )

          CATCH
             ? "ERROR: MkP() but pHrb it's Ok try again."
          END

       CATCH
          ? "ERROR: INIT PROCEDURE MkInit( cName ) bad pHrb"
       END

       ? Sql_sprintf( "Pointer pHrb == %p", pHrb )

       if( Empty(pHrb) )
          ? "CODE HRB still Load"
       else
          __hrbUnLoad( pHrb )
          ? "CODE HRB UnLoad Ok try again."
       endif

    else
       ? "Syntax error try again."
    endif

    Wait
return

//------------------------------------------------------------------------------

Test function with the change in __HRBLOAD() of runner.c .-

//------------------------------------------------------------------------------

#include "..\contrib\xhb\hbcompat.ch"

Procedure Test()
    Local cCode, pHrb, cHrb

#pragma __cstream|cCode:=%s
*************************************
* CODE HRB
*************************************
static s_cName

INIT PROCEDURE MkInit( cName )
    // ERROR: INIT PROCEDURE MkInit( cName ) bad pHrb
    s_cName := cNombre   // VAR It's cName
return

Procedure MkP()
    ? "Ok, Result:", s_cName
return

EXIT PROCEDURE MkExit()
    s_cName := nil
return
*************************************
* END CODE
*************************************
#pragma __endtext

    ? "Script cCode .-"
    ? cCode

    if( nil != (cHrb := HB_COMPILEFROMBUF(cCode, '-n')) )

       TRY
          __hrbLoad( @pHrb, cHrb, 'It may be large Code' )
          TRY
             __hrbDo( pHrb )

          CATCH
             ? "ERROR: MkP() but pHrb it's Ok try again."
          END

       CATCH
          ? "ERROR: INIT PROCEDURE MkInit( cName ) pHrb it's Ok try again."
       END

       ? Sql_sprintf( "Pointer pHrb == %p", pHrb )

       if( !Empty(pHrb) )
          __hrbUnLoad( pHrb )
          ? "CODE HRB UnLoad Ok try again."
       endif

    else
       ? "Syntax error try again."
    endif

    Wait
return

//------------------------------------------------------------------------------

Best regards.
Xavi
-------------- next part --------------
/*
 * $Id: runner.c 8681 2008-06-10 09:13:33Z vszakats $
 */

/*
 * Harbour Project source code:
 * Harbour Portable Object (.hrb) file runner
 *
 * Copyright 1999 Eddie Runia <eddie@runia.com>
 * www - http://www.harbour-project.org
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status of such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */
/*
 * The following functions are added Feb 01,2002 by
 *       Alexander Kresin <alex@belacy.belgorod.su>
 *
 *  __HRBLOAD()
 *  __HRBDO()
 *  __HRBUNLOAD()
 *  __HRBGETFU()
 *  __HRBDOFU()
 */

#include "hbvmopt.h"
#include "hbapi.h"
#include "hbstack.h"
#include "hbapiitm.h"
#include "hbapierr.h"
#include "hbapifs.h"
#include "hbvm.h"
#include "hbpcode.h"
#include "hbset.h"
#include "hb_io.h"

typedef struct
{
   char *         szName;                       /* Name of the function     */
   PHB_PCODEFUNC  pCodeFunc;                    /* Dynamic function info    */
   BYTE *         pCode;                        /* P-code                   */
} HB_DYNF, * PHB_DYNF;

typedef struct
{
   ULONG          ulSymbols;                    /* Number of symbols        */
   ULONG          ulFuncs;                      /* Number of functions      */
   BOOL           fInit;                        /* should be INIT functions executed */
   BOOL           fExit;                        /* should be EXIT functions executed */
   LONG           lSymStart;                    /* Startup Symbol           */
   PHB_SYMB       pSymRead;                     /* Symbols read             */
   PHB_DYNF       pDynFunc;                     /* Functions read           */
   PHB_SYMBOLS    pModuleSymbols;
} HRB_BODY, * PHRB_BODY;

static const BYTE szHead[] = { 192,'H','R','B' };


#define SYM_NOLINK   0              /* symbol does not have to be linked */
#define SYM_FUNC     1              /* function defined in this module   */
#define SYM_EXTERN   2              /* function defined in other module  */
#define SYM_DEFERRED 3              /* lately bound function             */
#define SYM_NOT_FOUND 0xFFFFFFFFUL  /* Symbol not found.                 */

static int hb_hrbReadHead( char * szBody, ULONG ulBodySize, ULONG * pulBodyOffset )
{
   char * pVersion;

   HB_TRACE(HB_TR_DEBUG, ("hb_hrbReadHead(%p,%lu,%p)", szBody, ulBodySize, pulBodyOffset ));

   if( ulBodySize < 6 || memcmp( szHead, szBody, 4 ) )
      return 0;

   pVersion = szBody + 4;
   *pulBodyOffset += 6;

   return HB_PCODE_MKSHORT( pVersion );
}

static BOOL hb_hrbReadValue( char * szBody, ULONG ulBodySize, ULONG * pulBodyOffset, ULONG * pulValue )
{
   HB_TRACE(HB_TR_DEBUG, ("hb_hrbReadValue(%p,%lu,%p,%p)", szBody, ulBodySize, pulBodyOffset, pulValue));

   if( *pulBodyOffset + 4 < ulBodySize )
   {
      *pulValue = HB_PCODE_MKLONG( szBody + *pulBodyOffset );
      *pulBodyOffset += 4;

      if( *pulValue <= 0x00FFFFFFUL )
      {
         return TRUE;
      }
   }

   return FALSE;
}

/* ReadId
   Read the next (zero terminated) identifier */
static char * hb_hrbReadId( char * szBody, ULONG ulBodySize, ULONG * ulBodyOffset )
{
   char * szIdx;

   HB_TRACE(HB_TR_DEBUG, ("hb_hrbReadId(%p,%lu,%p)", szBody, ulBodySize, ulBodyOffset));

   szIdx = &szBody[ *ulBodyOffset ];

   do
   {
      if( *ulBodyOffset > ulBodySize )
         return NULL;
   }
   while( szBody[ ( *ulBodyOffset )++ ] );

   return hb_strdup( szIdx );
}

static ULONG hb_hrbFindSymbol( const char * szName, PHB_DYNF pDynFunc, ULONG ulLoaded )
{
   ULONG ulRet;

   HB_TRACE(HB_TR_DEBUG, ("hb_hrbFindSymbol(%s, %p, %lu)", szName, pDynFunc, ulLoaded));

   for( ulRet = 0; ulRet < ulLoaded; ++ulRet )
   {
      if( ! strcmp( szName, pDynFunc[ ulRet ].szName ) )
         return ulRet;
   }

   return SYM_NOT_FOUND;
}

static void hb_hrbFreeSymbols( PHB_SYMB pSymbols, ULONG ulSymbols )
{
   ULONG ul;

   for( ul = 0; ul < ulSymbols; ul++ )
   {
      if( pSymbols[ ul ].szName )
         hb_xfree( ( void * ) pSymbols[ ul ].szName );
   }
   hb_xfree( pSymbols );
}

static void hb_hrbInitStatic( PHRB_BODY pHrbBody )
{
   if( ! pHrbBody->fInit && ! pHrbBody->fExit )
   {
      ULONG ul;

      pHrbBody->fInit = TRUE;
      /* Initialize static variables first */
      for( ul = 0; ul < pHrbBody->ulSymbols; ul++ )    /* Check _INITSTATICS functions */
      {
         if( ( pHrbBody->pSymRead[ ul ].scope.value & HB_FS_INITEXIT ) == HB_FS_INITEXIT )
         {
            /* call (_INITSTATICS) function. This function assigns
             * literal values to static variables only. There is no need
             * to pass any parameters to this function because they
             * cannot be used to initialize static variable.
             */

            /* changed to call VM execution instead of direct function address call
             * pHrbBody->pSymRead[ ul ].value.pFunPtr();
             * [MLombardo]
             */

            hb_vmPushSymbol( &(pHrbBody->pSymRead[ ul ]) );
            hb_vmPushNil();
            hb_vmDo( 0 );

         }
      }
   }
}

static void hb_hrbInit( PHRB_BODY pHrbBody, int argc, char * argv[] )
{
   if( pHrbBody->fInit )
   {
      ULONG ul;
      int i;

      pHrbBody->fInit = FALSE;
      pHrbBody->fExit = TRUE;

      for( ul = 0; ul < pHrbBody->ulSymbols; ul++ )    /* Check INIT functions */
      {
         if( ( pHrbBody->pSymRead[ ul ].scope.value & HB_FS_INITEXIT ) == HB_FS_INIT )
         {
            hb_vmPushSymbol( pHrbBody->pSymRead + ul );
            hb_vmPushNil();
            for( i = 0; i < argc; i++ ) /* Push other cmdline params*/
               hb_vmPushString( argv[i], strlen( argv[i] ) );

            hb_vmDo( argc );            /* Run init function        */
         }
      }
   }
}

static void hb_hrbExit( PHRB_BODY pHrbBody )
{
   if( pHrbBody->fExit )
   {
      ULONG ul;

      pHrbBody->fExit = FALSE;
      pHrbBody->fInit = TRUE;

      for( ul = 0; ul < pHrbBody->ulSymbols; ul++ )
      {
         if( ( pHrbBody->pSymRead[ ul ].scope.value & HB_FS_INITEXIT ) == HB_FS_EXIT )
         {
            hb_vmPushSymbol( pHrbBody->pSymRead + ul );
            hb_vmPushNil();
            hb_vmDo( 0 );
         }
      }
   }
}

static void hb_hrbUnLoad( PHRB_BODY pHrbBody )
{
   ULONG ul;

   hb_hrbExit( pHrbBody );

   if( pHrbBody->pModuleSymbols )
   {
      hb_vmFreeSymbols( pHrbBody->pModuleSymbols );
   }

   if( pHrbBody->pDynFunc )
   {
      for( ul = 0; ul < pHrbBody->ulFuncs; ul++ )
      {
         PHB_DYNS pDyn;

         if( pHrbBody->pDynFunc[ ul ].szName &&
             pHrbBody->pDynFunc[ ul ].pCodeFunc )
         {
            pDyn = hb_dynsymFind( pHrbBody->pDynFunc[ ul ].szName );
            if( pDyn && pDyn->pSymbol->value.pCodeFunc ==
                        pHrbBody->pDynFunc[ ul ].pCodeFunc )
            {
               pDyn->pSymbol->value.pCodeFunc = NULL;
            }
         }
         if( pHrbBody->pDynFunc[ ul ].pCodeFunc )
            hb_xfree( pHrbBody->pDynFunc[ ul ].pCodeFunc );
         if( pHrbBody->pDynFunc[ ul ].pCode )
            hb_xfree( pHrbBody->pDynFunc[ ul ].pCode );
         if( pHrbBody->pDynFunc[ ul ].szName )
            hb_xfree( pHrbBody->pDynFunc[ ul ].szName );
      }

      hb_xfree( pHrbBody->pDynFunc );
   }

   hb_xfree( pHrbBody );
}

static PHRB_BODY hb_hrbLoad( char* szHrbBody, ULONG ulBodySize )
{
   PHRB_BODY pHrbBody = NULL;

   if( szHrbBody )
   {
      ULONG ulBodyOffset = 0;
      ULONG ulSize;                                /* Size of function */
      ULONG ul, ulPos;

      PHB_SYMB pSymRead;                           /* Symbols read     */
      PHB_DYNF pDynFunc;                           /* Functions read   */
      PHB_DYNS pDynSym;

      int iVersion = hb_hrbReadHead( szHrbBody, ulBodySize, &ulBodyOffset );

      if( iVersion == 0 )
      {
         hb_errRT_BASE( EG_CORRUPTION, 9995, NULL, HB_ERR_FUNCNAME, 0 );
         return NULL;
      }

      pHrbBody = ( PHRB_BODY ) hb_xgrab( sizeof( HRB_BODY ) );

      pHrbBody->fInit = FALSE;
      pHrbBody->fExit = FALSE;
      pHrbBody->lSymStart = -1;
      pHrbBody->ulFuncs = 0;
      pHrbBody->pSymRead = NULL;
      pHrbBody->pDynFunc = NULL;
      pHrbBody->pModuleSymbols = NULL;
      if( ! hb_hrbReadValue( szHrbBody, ulBodySize, &ulBodyOffset, &pHrbBody->ulSymbols ) ||
            pHrbBody->ulSymbols == 0 )
      {
         hb_hrbUnLoad( pHrbBody );
         hb_errRT_BASE( EG_CORRUPTION, 9996, NULL, HB_ERR_FUNCNAME, 0 );
         return NULL;
      }

      pSymRead = ( PHB_SYMB ) hb_xgrab( pHrbBody->ulSymbols * sizeof( HB_SYMB ) );

      for( ul = 0; ul < pHrbBody->ulSymbols; ul++ )  /* Read symbols in .hrb */
      {
         pSymRead[ ul ].szName = hb_hrbReadId( szHrbBody, ulBodySize, &ulBodyOffset );
         if( pSymRead[ ul ].szName == NULL || ulBodyOffset + 2 > ulBodySize )
            break;
         pSymRead[ ul ].scope.value = ( BYTE ) szHrbBody[ ulBodyOffset++ ];
         pSymRead[ ul ].value.pCodeFunc = ( PHB_PCODEFUNC ) ( HB_PTRDIFF ) szHrbBody[ ulBodyOffset++ ];
         pSymRead[ ul ].pDynSym = NULL;

         if( pHrbBody->lSymStart == -1 &&
             ( pSymRead[ ul ].scope.value & HB_FS_FIRST ) != 0 &&
             ( pSymRead[ ul ].scope.value & HB_FS_INITEXIT ) == 0 )
         {
            pHrbBody->lSymStart = ul;
         }
      }

      if( ul < pHrbBody->ulSymbols ||
          /* Read number of functions */
          ! hb_hrbReadValue( szHrbBody, ulBodySize, &ulBodyOffset, &pHrbBody->ulFuncs ) )
      {
         hb_hrbFreeSymbols( pSymRead, ul );
         hb_hrbUnLoad( pHrbBody );
         hb_errRT_BASE( EG_CORRUPTION, 9997, NULL, HB_ERR_FUNCNAME, 0 );
         return NULL;
      }

      pHrbBody->pSymRead = pSymRead;

      if( pHrbBody->ulFuncs )
      {
         pDynFunc = ( PHB_DYNF ) hb_xgrab( pHrbBody->ulFuncs * sizeof( HB_DYNF ) );
         memset( pDynFunc, 0, pHrbBody->ulFuncs * sizeof( HB_DYNF ) );
         pHrbBody->pDynFunc = pDynFunc;

         for( ul = 0; ul < pHrbBody->ulFuncs; ul++ )
         {
            /* Read name of function */
            pDynFunc[ ul ].szName = hb_hrbReadId( szHrbBody, ulBodySize, &ulBodyOffset );
            if( pDynFunc[ ul ].szName == NULL )
               break;

            /* Read size of function */
            if( ! hb_hrbReadValue( szHrbBody, ulBodySize, &ulBodyOffset, &ulSize ) ||
                ulBodyOffset + ulSize > ulBodySize )
               break;

            /* Copy function body */
            pDynFunc[ ul ].pCode = ( BYTE * ) hb_xgrab( ulSize );
            memcpy( ( char * ) pDynFunc[ ul ].pCode, szHrbBody + ulBodyOffset, ulSize );
            ulBodyOffset += ulSize;

            pDynFunc[ ul ].pCodeFunc = (PHB_PCODEFUNC) hb_xgrab( sizeof( HB_PCODEFUNC ) );
            pDynFunc[ ul ].pCodeFunc->pCode    = pDynFunc[ ul ].pCode;
            pDynFunc[ ul ].pCodeFunc->pSymbols = pSymRead;
         }

         if( ul < pHrbBody->ulFuncs )
         {
            hb_hrbFreeSymbols( pSymRead, pHrbBody->ulSymbols );
            hb_hrbUnLoad( pHrbBody );
            hb_errRT_BASE( EG_CORRUPTION, 9998, NULL, HB_ERR_FUNCNAME, 0 );
            return NULL;
         }
      }

      /* End of PCODE loading, now linking */

      for( ul = 0; ul < pHrbBody->ulSymbols; ul++ )
      {
         if( pSymRead[ ul ].value.pCodeFunc == ( PHB_PCODEFUNC ) SYM_FUNC )
         {
            ulPos = hb_hrbFindSymbol( pSymRead[ ul ].szName, pHrbBody->pDynFunc, pHrbBody->ulFuncs );

            if( ulPos == SYM_NOT_FOUND )
            {
               pSymRead[ ul ].value.pCodeFunc = ( PHB_PCODEFUNC ) SYM_EXTERN;
            }
            else
            {
               pSymRead[ ul ].value.pCodeFunc = ( PHB_PCODEFUNC ) pHrbBody->pDynFunc[ ulPos ].pCodeFunc;
               pSymRead[ ul ].scope.value |= HB_FS_PCODEFUNC | HB_FS_LOCAL;
            }
         }
         else if( pSymRead[ ul ].value.pCodeFunc == ( PHB_PCODEFUNC ) SYM_DEFERRED )
         {
            pSymRead[ ul ].value.pCodeFunc = ( PHB_PCODEFUNC ) SYM_EXTERN;
            pSymRead[ ul ].scope.value |= HB_FS_DEFERRED;
         }

         /* External function */
         if( pSymRead[ ul ].value.pCodeFunc == ( PHB_PCODEFUNC ) SYM_EXTERN )
         {
            pDynSym = hb_dynsymFind( pSymRead[ ul ].szName );

            if( pDynSym )
            {
               pSymRead[ ul ].value.pFunPtr = pDynSym->pSymbol->value.pFunPtr;
               if( pDynSym->pSymbol->scope.value & HB_FS_PCODEFUNC )
               {
                  pSymRead[ ul ].scope.value |= HB_FS_PCODEFUNC;
               }
            }
            else if( ( pSymRead[ ul ].scope.value & HB_FS_DEFERRED ) == 0 )
            {
               char szName[ HB_SYMBOL_NAME_LEN + 1 ];

               hb_strncpy( szName, pSymRead[ ul ].szName, HB_SYMBOL_NAME_LEN );
               hb_hrbFreeSymbols( pSymRead, pHrbBody->ulSymbols );
               hb_hrbUnLoad( pHrbBody );
               hb_errRT_BASE( EG_ARG, 6101, "Unknown or unregistered symbol", szName, 0 );
               return NULL;
            }
         }
      }

      pHrbBody->pModuleSymbols = hb_vmRegisterSymbols( pHrbBody->pSymRead,
               ( USHORT ) pHrbBody->ulSymbols, "pcode.hrb", 0, TRUE, FALSE );

      if( pHrbBody->pModuleSymbols->pModuleSymbols != pSymRead )
      {
         /*
          * Old unused symbol table has been recycled - free the one
          * we allocated and disactivate static initialization [druzus]
          */
         pHrbBody->pSymRead = pHrbBody->pModuleSymbols->pModuleSymbols;
         hb_hrbFreeSymbols( pSymRead, pHrbBody->ulSymbols );

         pHrbBody->fInit = TRUE;
      }
      else
      {
         /* mark symbol table as dynamically allocated so HVM will free it on exit */
         pHrbBody->pModuleSymbols->fAllocated = TRUE;

         /* initialize static variables */
         hb_hrbInitStatic( pHrbBody );
      }
   }

   return pHrbBody;
}

static PHRB_BODY hb_hrbLoadFromFile( char* szHrb )
{
   char szFileName[ _POSIX_PATH_MAX + 1 ];
   PHRB_BODY pHrbBody = NULL;
   PHB_FNAME pFileName;
   FHANDLE hFile;

   /* Create full filename */

   pFileName = hb_fsFNameSplit( szHrb );
   if( hb_set.HB_SET_DEFEXTENSIONS && pFileName->szExtension == NULL )
   {
      pFileName->szExtension = ".hrb";
   }
   hb_fsFNameMerge( szFileName, pFileName );
   hb_xfree( pFileName );

   /* Open as binary */

   do
   {
      hFile = hb_fsOpen( ( BYTE * ) szFileName, FO_READ );
   }
   while( hFile == FS_ERROR &&
          hb_errRT_BASE_Ext1( EG_OPEN, 6102, NULL, szFileName, hb_fsError(),
                              EF_CANDEFAULT | EF_CANRETRY,
                              HB_ERR_ARGS_BASEPARAMS ) == E_RETRY );

   if( hFile != FS_ERROR )
   {
      ULONG ulBodySize = hb_fsSeek( hFile, 0, FS_END );

      if( ulBodySize )
      {
         BYTE * pbyBuffer;

         pbyBuffer = ( BYTE * ) hb_xgrab( ulBodySize + sizeof( char ) + 1 );
         hb_fsSeek( hFile, 0, FS_SET );
         hb_fsReadLarge( hFile, pbyBuffer, ulBodySize );
         pbyBuffer[ ulBodySize ] = '\0';

         pHrbBody = hb_hrbLoad( ( char * ) pbyBuffer, ( ULONG ) ulBodySize );
         hb_xfree( pbyBuffer );
      }
      hb_fsClose( hFile );
   }

   return pHrbBody;
}

static void hb_hrbDo( PHRB_BODY pHrbBody, int argc, char * argv[] )
{
   PHB_ITEM pRetVal = NULL;
   int i;

   hb_hrbInit( pHrbBody, argc, argv );

   /* May not have a startup symbol, if first symbol was an INIT Symbol (was executed already).*/
   if( pHrbBody->lSymStart >= 0 )
   {
       hb_vmPushSymbol( &pHrbBody->pSymRead[ pHrbBody->lSymStart ] );
       hb_vmPushNil();

       for( i = 0; i < ( hb_pcount() - 1 ); i++ )
       {
          hb_vmPush( hb_param( i + 2, HB_IT_ANY ) ); /* Push other cmdline params*/
       }

       hb_vmDo( hb_pcount() - 1 );                   /* Run the thing !!!        */

       pRetVal = hb_itemNew( NULL );
       hb_itemMove( pRetVal, hb_stackReturnItem() );
   }

   hb_hrbExit( pHrbBody );

   if( pRetVal )
   {
      hb_itemReturnRelease( pRetVal );
   }
}


/*
   __HRBRUN( <cFile> [, xParam1 [, xParamN ] ] ) -> return value.

   This program will get the data from the .hrb file and run the p-code
   contained in it.

   In due time it should also be able to collect the data from the
   binary/executable itself
*/
HB_FUNC( __HRBRUN )
{
   ULONG ulLen = hb_parclen( 1 );

   if( ulLen > 0 )
   {
      char * fileOrBody = hb_parc( 1 );
      PHRB_BODY pHrbBody;

      if( ulLen > 4 && memcmp( szHead, fileOrBody, 4 ) == 0 )
         pHrbBody = hb_hrbLoad( fileOrBody, ulLen );
      else
         pHrbBody = hb_hrbLoadFromFile( fileOrBody );

      if( pHrbBody )
      {
         int argc = hb_pcount(), i;
         char **argv = NULL;

         if( argc > 1 )
         {
            argv = (char**) hb_xgrab( sizeof(char*) * (argc-1) );
            for( i=0; i<argc-1; i++ )
               argv[i] = hb_parcx( i+2 );
         }

         hb_hrbDo( pHrbBody, argc-1, argv );

         if( argv )
            hb_xfree( argv );

         hb_hrbUnLoad( pHrbBody );
         hb_retl( TRUE );
      }
      else
         hb_retl( FALSE );
   }
   else
      hb_errRT_BASE( EG_ARG, 6103, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( __HRBLOAD )
{
   ULONG ulLen = hb_parclen( 2 );

   if( ulLen > 0 && ISBYREF( 1 ) )
   {
      char * fileOrBody = hb_parc( 2 );
      PHRB_BODY pHrbBody;

      if( ulLen > 4 && memcmp( szHead, fileOrBody, 4 ) == 0 )
         pHrbBody = hb_hrbLoad( fileOrBody, ulLen );
      else
         pHrbBody = hb_hrbLoadFromFile( fileOrBody );

      /* Store pHrbBody in the first parameter also NULL [jarabal] */
      hb_storptr( ( void *) pHrbBody, 1 );

      if( pHrbBody )
      {
         int argc = hb_pcount();
         char ** argv = NULL;
         int i;

         if( argc > 2 )
         {
            argv = ( char ** ) hb_xgrab( sizeof( char * ) * ( argc - 2 ) );

            for( i = 0; i < argc - 2; i++ )
               argv[i] = hb_parcx( i + 3 );
         }

         hb_hrbInit( pHrbBody, argc - 2, argv );

         if( argv )
            hb_xfree( argv );
      }
      /* Now return nil, pHrbBody it's the first parameter
      hb_retptr( ( void *) pHrbBody );
      return value it's unpredictable if error in init hrb [jarabal] */
   }
   else
      hb_errRT_BASE( EG_ARG, 9998, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( __HRBDO )
{
   PHRB_BODY pHrbBody = ( PHRB_BODY ) hb_parptr( 1 );

   if( pHrbBody )
   {
      int argc = hb_pcount();
      char **argv = NULL;
      int i;

      if( argc > 1 )
      {
         argv = ( char ** ) hb_xgrab( sizeof( char * ) * ( argc - 1 ) );

         for( i = 0; i < argc - 1; i++ )
            argv[i] = hb_parcx( i + 2 );
      }

      hb_hrbDo( pHrbBody, argc - 1, argv );

      if( argv )
         hb_xfree( argv );
   }
   else
      hb_errRT_BASE( EG_ARG, 6104, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( __HRBUNLOAD )
{
   PHRB_BODY pHrbBody = ( PHRB_BODY ) hb_parptr( 1 );

   if( pHrbBody )
      hb_hrbUnLoad( pHrbBody );
   else
      hb_errRT_BASE( EG_ARG, 6105, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( __HRBGETFU )
{
   PHRB_BODY pHrbBody = ( PHRB_BODY ) hb_parptr( 1 );

   if( pHrbBody && hb_parclen( 2 ) > 0 )
   {
      char * szName = hb_strupr( hb_strdup( hb_parc( 2 ) ) );
      ULONG ulPos = 0;

      while( ulPos < pHrbBody->ulSymbols )
      {
         if( !strcmp( szName, pHrbBody->pSymRead[ ulPos ].szName ) )
            break;
         ulPos++;
      }
      hb_xfree( szName );

      if( ulPos < pHrbBody->ulSymbols )
         hb_itemPutSymbol( hb_stackReturnItem(), pHrbBody->pSymRead + ulPos );
   }
   else
      hb_errRT_BASE( EG_ARG, 6106, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( __HRBDOFU )
{
   PHB_ITEM pSymItem = hb_param( 1, HB_IT_SYMBOL );

   if( pSymItem )
   {
      int argc = hb_pcount();
      int i;

      hb_vmPushSymbol( hb_itemGetSymbol( pSymItem ) );
      hb_vmPushNil();

      for( i = 2; i <= argc; i++ )  /* Push other  params  */
         hb_vmPush( hb_stackItemFromBase( i ) );

      hb_vmDo( argc - 1 );          /* Run function        */
   }
   else
      hb_errRT_BASE( EG_ARG, 6107, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}
From guy.roussin at teledetection.fr  Sun Jul  6 16:52:26 2008
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Sun Jul  6 16:52:41 2008
Subject: [Harbour] Q: Ubuntu 8.04.1, make_deb.sh, gttrm and mouse detection
In-Reply-To: <DF3C8046-3A7A-4362-8BE3-799A43B0BA3B@syenar.hu>
References: <DF3C8046-3A7A-4362-8BE3-799A43B0BA3B@syenar.hu>
Message-ID: <4871308A.40201@teledetection.fr>

Hi Viktor,

Note the grep '^ii' in :

dpkg -l "$1" 2> /dev/null | grep '^ii' &> /dev/null

So i think the answer to test_reqpkg is false in your case


Recent distribution like debian sid and i suppose ubuntu 8.04
use libgpm-dev instead of libgpmg1-dev (note that in debian
sid package libgpmg1-dev is still there as a transitional
package). So, i suppose libgpmg1-dev is removed from
ubuntu 8.04 (see with aptitude search libgpm)

So we can change the line 29 :
if [ -z "$HB_GPM_MOUSE" ] && test_reqpkg libgpmg1-dev

with something like that :

if [ -z "$HB_GPM_MOUSE" ] && ( test_reqpkg libgpmg1-dev || test_reqpkg libgpm-dev )

Guy


Szak?ts Viktor a ?crit :
> Hi folks,
> 
> I'm trying to create a .deb package under Ubuntu 8.04.1,
> and it's going fine for the most part, but gttrm lib doesn't
> get created when I'm trying make_deb.sh, while if I try
> with make_gnu.sh, it does.
> 
> The reason of the failure is that with make_deb.sh, gttrm.c
> (and gtcrs.c, mousesln.c) are attempted to be built with
> mouse support, but gpm.h is not found.
> 
> This may be cause because of the way mousing is detected in
> make_deb.sh:
> ---
> vszakats@orange:~$ dpkg -l "libgpmg1-dev"
> Desired=Unknown/Install/Remove/Purge/Hold
> | 
> Status=Not/Installed/Config-f/Unpacked/Failed-cfg/Half-inst/t-aWait/T-pend
> |/ Err?=(none)/Hold/Reinst-required/X=both-problems (Status,Err: 
> uppercase=bad)
> ||/ Name                           Version                        
> Description
> +++-==============================-==============================-============================================================================ 
> 
> pn  libgpmg1-dev                   <none>                         (no 
> description available)
> ---
> 
> Which tricks make_deb.sh into thinking the package is there, while
> it isn't.
> 
> Could we add header detection similar to contribs, to the
> GT Makefiles, too?
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From harbour.01 at syenar.hu  Sun Jul  6 17:03:21 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Jul  6 17:03:26 2008
Subject: [Harbour] 2008-07-06 23:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dfab$Blat.v2.6.2$b90fbd51$165869a7fd04@127.0.0.1>

2008-07-06 23:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbundoc.api
     ! Casting in _tctemp()
--
Brgds,
Viktor

From mbelgrano at deltain.it  Sun Jul  6 18:54:52 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Jul  6 18:56:39 2008
Subject: R: [Harbour] decoding base64
References: <001801c8df2e$914a6280$b48f7a56@compika><AFB948164110ED43B5EB849E8DEEF03815EE03@SRV02.deltain.net>
	<001f01c8df56$954de230$b48f7a56@compika>
Message-ID: <AFB948164110ED43B5EB849E8DEEF0380375FD@SRV02.deltain.net>

Hi Peti!
Sorry i don't have 
try search author and associates info
 
Massimo <mailto:mbelgrano@deltain.com> 


________________________________

Da: harbour-bounces@harbour-project.org per conto di Xccs-project
Inviato: dom 06/07/2008 12.53
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] decoding base64


Hy Massimo!
 
Many thanks, but i don't download the library, the page has been opened, but when i click on the download link, then generate error.
Can you send the pack, or the sourcecode send me in mail?
I use harbour width minigui under win32 and gcc compiler.
Thanks!
 
 
                    Peti
 
 

	----- Original Message ----- 
	From: Massimo Belgrano <mailto:mbelgrano@deltain.it>  
	To: Harbour Project Main Developer List. <mailto:harbour@harbour-project.org>  
	Sent: Sunday, July 06, 2008 11:42 AM
	Subject: RE: [Harbour] decoding base64


	libb64 is a library of ANSI C routines for fast encoding/decoding data into and from a base64-encoded format. C++ wrappers are included, as well as the source code <http://nixbit.com/cat/programming/libraries/libb64/>  for standalone encoding and decoding executables.

	http://nixbit.com/cat/programming/libraries/libb64/

	 

	 

	From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Xccs-project
	Sent: Sunday, July 06, 2008 8:07 AM
	To: harbour@harbour-project.org
	Subject: [Harbour] decoding base64

	 

	Hy to All!

	 

	I have a problem, it is big me:

	I made an e-mailclient, i use tpop3, tsmtp and tdecode classes.

	In the tdecode class found a method to encoding base64, it is the encode64, but the decode64 method doesn't exists. How can i decoding a base64 text?

	Have the decode method of tdecode class some parameter, witch cann define the coding method, base64 or quoted printable?

	Or in the constructor method can i set it?

	It is verry inportant for me, also, if somebodi knows the answer, please write to me, and if have an example, please write to me too!

	S.O.S.

	 

	Many thanks for the help!

	 

	Have everybody a nice day!

	 

	                Peti

	 

	 

	
________________________________


	

	_______________________________________________
	Harbour mailing list
	Harbour@harbour-project.org
	http://lists.harbour-project.org/mailman/listinfo/harbour
	

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 8333 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080707/5ea900b2/attachment.bin
From harbour.01 at syenar.hu  Mon Jul  7 01:00:11 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 01:00:16 2008
Subject: [Harbour] 2008-07-07 06:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8dfee$Blat.v2.6.2$55f8014a$12c854a4274a@127.0.0.1>

2008-07-07 06:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * make_deb.sh
     + Added libgpm-dev to mouse test. Thanks Guy.

   - doc/simplex.txt
   * doc/Makefile
     - Removed obsolete file.

   * doc/linux1st.txt
     + Added libgpm*-dev requirements.

   * contrib/hbtpathy/Makefile
   * contrib/hbziparch/Makefile
     ! Fixed referring to win32 archictecture as 'win32' 
       (should be 'w32'). Recently introduced bugs.

   * contrib/hbfimage/fi_winfu.c
   * contrib/hbfimage/fi_wrp.c
     ! Fixed for POCC, XCC compilers.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 00:59:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 01:00:18 2008
Subject: [Harbour] Q: Ubuntu 8.04.1, make_deb.sh, gttrm and mouse detection
In-Reply-To: <4871308A.40201@teledetection.fr>
References: <DF3C8046-3A7A-4362-8BE3-799A43B0BA3B@syenar.hu>
	<4871308A.40201@teledetection.fr>
Message-ID: <0DAD0835-27B3-4C79-A63A-4BE0CC38361C@syenar.hu>

Hi Guy,

> dpkg -l "$1" 2> /dev/null | grep '^ii' &> /dev/null
>
> So i think the answer to test_reqpkg is false in your case

You must be right, with a short test I did, it didn't
return true.

I still wonder why it wanted to build with mouse when
trying make_deb.sh and why not (rightly) when trying with
make_gnu.sh?

[ I've now installed hbgpmg1-dev, which will solve this
problem, but IMO still would have to be fixed if indeed
a detection problem. ]

> Recent distribution like debian sid and i suppose ubuntu 8.04
> use libgpm-dev instead of libgpmg1-dev (note that in debian
> sid package libgpmg1-dev is still there as a transitional
> package). So, i suppose libgpmg1-dev is removed from
> ubuntu 8.04 (see with aptitude search libgpm)

I've checked and in Ubuntu, the names remained:
libgpmg1
libgpmg1-dev

> with something like that :
>
> if [ -z "$HB_GPM_MOUSE" ] && ( test_reqpkg libgpmg1-dev ||  
> test_reqpkg libgpm-dev )

I'll change that.

Brgds,
Viktor

From mpaliwoda at interia.pl  Mon Jul  7 03:52:18 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul  7 03:52:24 2008
Subject: [Harbour] make_xmingwce.sh and WinCE problems
Message-ID: <20080707075218.3D3C612B5D9D@f50.poczta.interia.pl>


Hi all (esp. Przemek),

I attempted to compile Harbour for WinCE platform using 
make_xmingwce.sh script and cegcc 0.51. I got following 
errors :

../../hbwince.c:652: error: 'LPVOID' redeclared as different kind of symbol
/opt/mingw32ce/lib/gcc/arm-wince-mingw32ce/4.1.0/../../../../arm-wince-mingw32ce/include/winnt.h:88: error: previous declaration of 'LPVOID' was here
../../hbwince.c:664: error: 'HLOCAL' redeclared as different kind of symbol
/opt/mingw32ce/lib/gcc/arm-wince-mingw32ce/4.1.0/../../../../arm-wince-mingw32ce/include/windef.h:278: error: previous declaration of 'HLOCAL' was here

Unfortunately I completly am not able to see what's wrong 
with the code.



I would like to change a fragment of make xmingwce.sh 
from :

-------------------------
DIR=`cd $(dirname $0);pwd`
if which harbour &> /dev/null; then
    HB_COMP_PATH=`which harbour 2> /dev/null`
else
    HB_COMP_PATH="$DIR/source/main/$HB_HOST_ARCH/$HB_HOST_CC/harbour"
fi
if [ -x "${HB_COMP_PATH}" ]; then
    ln -s "${HB_COMP_PATH}" ${HB_BIN_COMPILE}/harbour.exe
else
    echo "You must have a working Harbour executable for your platform on your PATH."
    exit 1
fi

ln -s "$DIR/source/pp/$HB_HOST_ARCH/$HB_HOST_CC/hbpp" ${HB_BIN_COMPILE}/hbpp.exe
export HB_PPGEN_PATH=${HB_BIN_COMPILE}
-------------------------

to

-------------------------
DIR=`cd $(dirname $0);pwd`
if [ -z "${HB_COMP_PATH}" ]; then
    if which harbour &> /dev/null; then
        HB_COMP_PATH=`which harbour 2> /dev/null`
    else
        HB_COMP_PATH="$DIR/source/main/$HB_HOST_ARCH/$HB_HOST_CC/harbour"
    fi
fi
if [ -x "${HB_COMP_PATH}" ]; then
    ln -s "${HB_COMP_PATH}" ${HB_BIN_COMPILE}/harbour.exe
else
    echo "You must have a working 'harbour' executable for your platform on your PATH."
    exit 1
fi

if [ -z "${HB_PPGEN_PATH}" ]; then
    if which hbpp &> /dev/null; then
        HB_PPGEN_PATH=`which hbpp 2> /dev/null`
    else
        DIR=`dirname ${HB_COMP_PATH}`
        if [ -x "${DIR}/hbpp" ]; then
            HB_PPGEN_PATH="${DIR}/hbpp"
        else
            HB_PPGEN_PATH="$DIR/source/pp/$HB_HOST_ARCH/$HB_HOST_CC/hbpp"
        fi
    fi
fi
if [ -x "${HB_PPGEN_PATH}" ]; then
    ln -s ${HB_PPGEN_PATH} ${HB_BIN_COMPILE}/hbpp.exe
else
    echo "You must have a working 'hbpp' executable for your platform on your PATH."
    exit 1
fi
export HB_PPGEN_PATH
-------------------------

because I do not like the current way of setting
HB_COMP_PATH and HB_PPGEN_PATH. They are in fact
hardcoded. Any objections ?

Also hardcoding CCPREFIX is plainly wrong because a new 
cegcc has changed its base name from arm-wince-mingw32ce
to arm-mingw32ce. I'd like to change it from 

    export CCPREFIX="arm-wince-mingw32ce-"

to

    [ -z "$CCPREFIX" ] && export CCPREFIX="arm-wince-mingw32ce-"

What do you think ?

-- 

Marek

----------------------------------------------------------------------
Aj! Boli! Smieszne wpadki - nie probuj tego w domu!
Zobacz filmik >>> http://link.interia.pl/f1e62

From paolorus at 2bm.it  Mon Jul  7 06:22:31 2008
From: paolorus at 2bm.it (Paolo Russignan)
Date: Mon Jul  7 06:18:07 2008
Subject: [Harbour] Errore irrecuperabile 9024
In-Reply-To: <18146207.post@talk.nabble.com>
References: <48590864.2080406@2bm.it>	<25074C89-1E03-43D3-8A5B-EC7CB70F6D82@syenar.hu>	<4861FB23.4070105@2bm.it>
	<18108095.post@talk.nabble.com>	<4863A096.8080507@2bm.it>
	<18146207.post@talk.nabble.com>
Message-ID: <4871EE67.3060008@2bm.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080707/c552f21d/attachment.html
From druzus at acn.waw.pl  Mon Jul  7 06:48:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 06:48:42 2008
Subject: [Harbour] make_xmingwce.sh and WinCE problems
In-Reply-To: <20080707075218.3D3C612B5D9D@f50.poczta.interia.pl>
References: <20080707075218.3D3C612B5D9D@f50.poczta.interia.pl>
Message-ID: <20080707104836.GA6365@34-mo7-2.acn.waw.pl>

On Mon, 07 Jul 2008, Marek Paliwoda wrote:

Hi Marek,

> I attempted to compile Harbour for WinCE platform using 
> make_xmingwce.sh script and cegcc 0.51. I got following 
> errors :
> ../../hbwince.c:652: error: 'LPVOID' redeclared as different kind of symbol
> /opt/mingw32ce/lib/gcc/arm-wince-mingw32ce/4.1.0/../../../../arm-wince-mingw32ce/include/winnt.h:88: error: previous declaration of 'LPVOID' was here
> ../../hbwince.c:664: error: 'HLOCAL' redeclared as different kind of symbol
> /opt/mingw32ce/lib/gcc/arm-wince-mingw32ce/4.1.0/../../../../arm-wince-mingw32ce/include/windef.h:278: error: previous declaration of 'HLOCAL' was here
> Unfortunately I completly am not able to see what's wrong 
> with the code.

Strange, Looks that it interacts with some new MinGWCE declarations.
It will be necessary to look at it closer.

> I would like to change a fragment of make xmingwce.sh 
[...]
> because I do not like the current way of setting
> HB_COMP_PATH and HB_PPGEN_PATH. They are in fact
> hardcoded. Any objections ?
> Also hardcoding CCPREFIX is plainly wrong because a new 
> cegcc has changed its base name from arm-wince-mingw32ce
> to arm-mingw32ce. I'd like to change it from 
>     export CCPREFIX="arm-wince-mingw32ce-"
> to
>     [ -z "$CCPREFIX" ] && export CCPREFIX="arm-wince-mingw32ce-"
> What do you think ?

Both are OK for me though for CCPREFIX I would add small autodetection
so version 0.50 and 0.51 will work without user interactions. Simple
test for -d <dirname> or -x <executablename> should be enough.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jul  7 06:49:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 06:49:29 2008
Subject: [Harbour] 2008-07-07 12:48 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807071049.m67AnNtB014356@31-mo5-4.acn.waw.pl>

2008-07-07 12:48 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/gencc.c
    ! fixed bud with wrong C code generated for doubly negated integer
      values reported by Viktor.

best regards
Przemek
From mpaliwoda at interia.pl  Mon Jul  7 07:04:21 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul  7 07:05:43 2008
Subject: [Harbour] =?iso-8859-2?q?Skrypt_do_natychmiastowego_puszczenia_n?=
 =?iso-8859-2?q?a_bazie_zewn=EAtrznej_-_eserwis?=
Message-ID: <4871F835.5020704@interia.pl>

W za??czeniu ...

-- 

   Marek Paliwoda
mpaliwoda@interia.pl
-------------- next part --------------
--**************************************************
--**************************************************
--**************************************************

if exists (select * from dbo.sysobjects
           where id = object_id(N'[dbo].[CSMS_Frm_OnUpd]')
           and OBJECTPROPERTY(id, N'IsTrigger') = 1)
drop trigger [dbo].[CSMS_Frm_OnUpd]
GO

--++++++++++++++++++++++++++++++++++++++++++++++++++

/*
CREATE TRIGGER CSMS_Frm_OnUpd ON dbo.K0_KatalogFirm
FOR UPDATE AS
BEGIN
  INSERT INTO CSMS_K0_KatalogFirm
    ( idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
      kodPocztowy,  miejscowosc,  ulica,  nrDomu,
      kodPocztowy1, miejscowosc1, ulica1, nrDomu1,
      kodOperacji )
  SELECT
    I.idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
    A.kodPocztowy, M.miejscowosc, A.ulica, A.nrDomu,
    B.kodPocztowy, N.miejscowosc, B.ulica, B.nrDomu,
    'U'
  FROM inserted I INNER JOIN ( K0_Adres A INNER JOIN A0_Miejscowosc M
                                 ON M.idMiejscowosci=A.idMiejscowosc
                             ) ON A.idFirmy=I.idFirmy AND A.typAdresu=1
                  LEFT  JOIN ( K0_Adres B INNER JOIN A0_Miejscowosc N
                                 ON N.idMiejscowosci=B.idMiejscowosc
                             ) ON B.idFirmy=I.idFirmy AND B.typAdresu=2
END
*/
--GO

--++++++++++++++++++++++++++++++++++++++++++++++++++

exec sp_settriggerorder 'CSMS_Frm_OnUpd', @order='last', @stmttype = 'UPDATE'

--**************************************************

if exists (select * from dbo.sysobjects
           where id = object_id(N'[dbo].[CSMS_Adr_OnIns]')
           and OBJECTPROPERTY(id, N'IsTrigger') = 1)
drop trigger [dbo].[CSMS_Adr_OnIns]
GO

CREATE TRIGGER CSMS_Adr_OnIns ON dbo.K0_Adres
FOR INSERT AS
BEGIN
  DECLARE @IDFrm        INTEGER
  DECLARE @Skrot        VARCHAR(40)
  DECLARE @Nazwa        VARCHAR(200)
  DECLARE @Nip          CHAR(13)
  DECLARE @Regon        CHAR(20)
  DECLARE @KodPcz       CHAR(6)
  DECLARE @Miejsc       VARCHAR(50)
  DECLARE @Ulica        VARCHAR(30)
  DECLARE @NrDom        VARCHAR(10)
  DECLARE @KodPc1       CHAR(6)
  DECLARE @Miejs1       VARCHAR(50)
  DECLARE @Ulic1        VARCHAR(30)
  DECLARE @NrDo1        VARCHAR(10)
  DECLARE @Oper         CHAR(1)

  DECLARE @IDCsms       INTEGER

  -- Wstawienie rekordu wynikaj?cego z typuAdresu=1
  -- (mo?e by? "I" lub "U" - zale?nie jaka by?a op.)

  DECLARE genCSMS CURSOR LOCAL FAST_FORWARD FOR
    SELECT
      I.idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
      I.kodPocztowy, M.miejscowosc, I.ulica, I.nrDomu,
      B.kodPocztowy, N.miejscowosc, B.ulica, B.nrDomu,
      'I'
    FROM inserted I
           INNER JOIN A0_Miejscowosc M
             ON M.idMiejscowosci=I.idMiejscowosc
           INNER JOIN (
             K0_KatalogFirm F
               LEFT  JOIN (
                 K0_Adres B
                   INNER JOIN A0_Miejscowosc N
                     ON N.idMiejscowosci=B.idMiejscowosc
               ) ON B.idFirmy=F.idFirmy AND B.typAdresu=2
           ) ON F.idFirmy=I.idFirmy
    WHERE I.typAdresu=1


  OPEN genCSMS

  WHILE 1 = 1
  BEGIN
    FETCH NEXT FROM genCSMS INTO
        @IDFrm, @Skrot,  @Nazwa,  @Nip,
        @Regon, @KodPcz, @Miejsc, @Ulica,
        @NrDom, @KodPc1, @Miejs1, @Ulic1,
        @NrDo1, @Oper
    IF @@FETCH_STATUS <> 0 BREAK

    --+++++++++++++++++++++++++++++++++++++++++

    /*
    -- Czy ju? czasami nie mamy tego rekordu ?
    SET @IDCsms = null

    SELECT @IDCsms=IDcsmsKF
    FROM   CSMS_K0_KatalogFirm
    WHERE  idFirmy = @IDFrm
      AND  kodOperacji = 'I'

    -- Nie - nie mamy
    IF @IDCsms IS null
      INSERT INTO CSMS_K0_KatalogFirm (
        idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
        kodPocztowy,  miejscowosc,  ulica,  nrDomu,
        kodPocztowy1, miejscowosc1, ulica1, nrDomu1,
        kodOperacji
      ) VALUES (
        @IDFrm,  @Skrot,  @Nazwa, @Nip,   @Regon,
        @KodPcz, @Miejsc, @Ulica, @NrDom,
        @KodPc1, @Miejs1, @Ulic1, @NrDo1,
        @Oper
      )
    -- Tak - ju? mamy
    ELSE
      UPDATE CSMS_K0_KatalogFirm SET
        krotkaNazwa  = @Skrot,
        pelnaNazwa   = @Nazwa,
        nip          = @Nip,
        regon        = @Regon,
        kodPocztowy  = @KodPcz,
        miejscowosc  = @Miejsc,
        ulica        = @Ulica,
        nrDomu       = @NrDom,
        kodPocztowy1 = @KodPc1,
        miejscowosc1 = @Miejs1,
        ulica1       = @Ulic1,
        nrDomu1      = @NrDo1,
        Pobrano      =  null
      WHERE IDcsmsKF = @IDCsms
    */

    INSERT INTO CSMS_K0_KatalogFirm (
      idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
      kodPocztowy,  miejscowosc,  ulica,  nrDomu,
      kodPocztowy1, miejscowosc1, ulica1, nrDomu1,
      kodOperacji
    ) VALUES (
      @IDFrm,  @Skrot,  @Nazwa, @Nip,   @Regon,
      @KodPcz, @Miejsc, @Ulica, @NrDom,
      @KodPc1, @Miejs1, @Ulic1, @NrDo1,
      @Oper
    )
  END
  CLOSE genCSMS
  DEALLOCATE genCSMS

  --*********************************************

  -- Wszystkie operacje na typieAdresu=2 traktujemy jak "U"

  INSERT INTO CSMS_K0_KatalogFirm
    ( idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
      kodPocztowy,  miejscowosc,  ulica,  nrDomu,
      kodPocztowy1, miejscowosc1, ulica1, nrDomu1,
      kodOperacji )
  SELECT
    I.idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
    B.kodPocztowy, N.miejscowosc, B.ulica, B.nrDomu,
    I.kodPocztowy, M.miejscowosc, I.ulica, I.nrDomu,
    'U'
  FROM inserted I
         INNER JOIN A0_Miejscowosc M
           ON M.idMiejscowosci=I.idMiejscowosc
         INNER JOIN (
           K0_KatalogFirm F
             INNER JOIN K0_Adres B ON B.idFirmy=F.idFirmy AND B.typAdresu=1
             INNER JOIN A0_Miejscowosc N ON N.idMiejscowosci=B.idMiejscowosc
         ) ON F.idFirmy=I.idFirmy
  WHERE I.typAdresu=2
END
GO

--++++++++++++++++++++++++++++++++++++++++++++++++++

if exists (select * from dbo.sysobjects
           where id = object_id(N'[dbo].[CSMS_Adr_OnUpd]')
           and OBJECTPROPERTY(id, N'IsTrigger') = 1)
drop trigger [dbo].[CSMS_Adr_OnUpd]
GO

CREATE TRIGGER CSMS_Adr_OnUpd ON dbo.K0_Adres
FOR UPDATE AS
BEGIN
  INSERT INTO CSMS_K0_KatalogFirm
    ( idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
      kodPocztowy,  miejscowosc,  ulica,  nrDomu,
      kodPocztowy1, miejscowosc1, ulica1, nrDomu1,
      kodOperacji )
  SELECT DISTINCT
    I.idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
    I.kodPocztowy, M.miejscowosc, I.ulica, I.nrDomu,
    B.kodPocztowy, N.miejscowosc, B.ulica, B.nrDomu,
    'U'
  FROM inserted I
         INNER JOIN A0_Miejscowosc M
           ON M.idMiejscowosci=I.idMiejscowosc
         INNER JOIN (
           K0_KatalogFirm F
             LEFT  JOIN (
               K0_Adres B
                 INNER JOIN A0_Miejscowosc N
                   ON N.idMiejscowosci=B.idMiejscowosc
             ) ON B.idFirmy=F.idFirmy AND B.typAdresu=2
         ) ON F.idFirmy=I.idFirmy
  WHERE I.typAdresu=1
END
GO

--++++++++++++++++++++++++++++++++++++++++++++++++++

if exists (select * from dbo.sysobjects
           where id = object_id(N'[dbo].[CSMS_Adr_OnDel]')
           and OBJECTPROPERTY(id, N'IsTrigger') = 1)
drop trigger [dbo].[CSMS_Adr_OnDel]
GO

CREATE TRIGGER CSMS_Adr_OnDel ON dbo.K0_Adres
FOR DELETE AS
BEGIN
  INSERT INTO CSMS_K0_KatalogFirm
    ( idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
      kodPocztowy,  miejscowosc,  ulica,  nrDomu,
      kodPocztowy1, miejscowosc1, ulica1, nrDomu1,
      kodOperacji )
  SELECT
    I.idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
    B.kodPocztowy, N.miejscowosc, B.ulica, B.nrDomu,
    I.kodPocztowy, M.miejscowosc, I.ulica, I.nrDomu,
    'U'
  FROM deleted I
         INNER JOIN A0_Miejscowosc M
           ON M.idMiejscowosci=I.idMiejscowosc
         INNER JOIN (
           K0_KatalogFirm F
             INNER JOIN K0_Adres B ON B.idFirmy=F.idFirmy AND B.typAdresu=1
             INNER JOIN A0_Miejscowosc N ON N.idMiejscowosci=B.idMiejscowosc
         ) ON F.idFirmy=I.idFirmy
  WHERE I.typAdresu=2
    AND NOT EXISTS (
            SELECT idFirmy FROM deleted J
            WHERE  J.idFirmy = I.idFirmy
              AND  J.typAdresu=1
        )

  INSERT INTO CSMS_K0_KatalogFirm
    ( idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
      kodPocztowy,  miejscowosc,  ulica,  nrDomu,
      kodPocztowy1, miejscowosc1, ulica1, nrDomu1,
      kodOperacji )
  SELECT DISTINCT
    I.idFirmy, krotkaNazwa, pelnaNazwa, nip, regon,
    I.kodPocztowy, M.miejscowosc, I.ulica, I.nrDomu,
    B.kodPocztowy, N.miejscowosc, B.ulica, B.nrDomu,
    'D'
  FROM deleted I
         INNER JOIN A0_Miejscowosc M
           ON M.idMiejscowosci=I.idMiejscowosc
         INNER JOIN (
           K0_KatalogFirm F
             LEFT  JOIN (
               K0_Adres B
                 INNER JOIN A0_Miejscowosc N
                   ON N.idMiejscowosci=B.idMiejscowosc
             ) ON B.idFirmy=F.idFirmy AND B.typAdresu=2
         ) ON F.idFirmy=I.idFirmy
  WHERE I.typAdresu=1
END
GO

--++++++++++++++++++++++++++++++++++++++++++++++++++

exec sp_settriggerorder 'CSMS_Adr_OnIns', @order='last', @stmttype = 'INSERT'
exec sp_settriggerorder 'CSMS_Adr_OnUpd', @order='last', @stmttype = 'UPDATE'
exec sp_settriggerorder 'CSMS_Adr_OnDel', @order='last', @stmttype = 'DELETE'

--**************************************************
--**************************************************
--**************************************************

if exists (select * from dbo.sysobjects
           where id = object_id(N'[dbo].[CSMS_Zlc_OnIns]')
           and OBJECTPROPERTY(id, N'IsTrigger') = 1)
drop trigger [dbo].[CSMS_Zlc_OnIns]
GO

CREATE TRIGGER CSMS_Zlc_OnIns ON dbo.Z0_Zlecenia
FOR INSERT AS
BEGIN
  -- wstawiamy wszystkie  zapisy 'I' nawet dla tych, kt?rzy ju? s?
  INSERT INTO CSMS_Z0_Zlecenia
    ( nrZlecenia, dataOd, dataDo, dataRejZlecenia, trescZlecWgNabywcy,
      trescZlecWgWystawcy, idNabywca, idZleceniodawca, idOdbiorca,
      kodOsrodka, kodDzialu, kodOddzialu, kodOperacji, zamowienie )
  SELECT
    I.nrZlecenia, I.dataOd, I.dataDo, I.dataRejZlecenia, I.trescZlecWgNabywcy,
    I.trescZlecWgWystawcy, I.idNabywca, I.idZleceniodawca, I.idOdbiorca,
    S.Kod AS kodOsrodka, D.Kod AS kodDzialu, O.Kod AS kodOddzialu, 'I',
    I.zamowienie
  FROM inserted I INNER JOIN Oddzial O ON O.IdOddzial=I.IdOddzial
                  INNER JOIN Dzial   D ON D.IdDzial=O.IdDzial
                  INNER JOIN Osrodek S ON S.IdOsrodek=D.IdOsrodek
END
GO

--++++++++++++++++++++++++++++++++++++++++++++++++++

if exists (select * from dbo.sysobjects
           where id = object_id(N'[dbo].[CSMS_Zlc_OnUpd]')
           and OBJECTPROPERTY(id, N'IsTrigger') = 1)
drop trigger [dbo].[CSMS_Zlc_OnUpd]
GO

CREATE TRIGGER CSMS_Zlc_OnUpd ON dbo.Z0_Zlecenia
FOR UPDATE AS
BEGIN
  INSERT INTO CSMS_Z0_Zlecenia
    ( nrZlecenia, dataOd, dataDo, dataRejZlecenia, trescZlecWgNabywcy,
      trescZlecWgWystawcy, idNabywca, idZleceniodawca, idOdbiorca,
      kodOsrodka, kodDzialu, kodOddzialu, kodOperacji, zamowienie )
  SELECT
    I.nrZlecenia, I.dataOd, I.dataDo, I.dataRejZlecenia, I.trescZlecWgNabywcy,
    I.trescZlecWgWystawcy, I.idNabywca, I.idZleceniodawca, I.idOdbiorca,
    S.Kod AS kodOsrodka, D.Kod AS kodDzialu, O.Kod AS kodOddzialu, 'U',
    I.zamowienie
  FROM inserted I INNER JOIN Oddzial O ON O.IdOddzial=I.IdOddzial
                  INNER JOIN Dzial   D ON D.IdDzial=O.IdDzial
                  INNER JOIN Osrodek S ON S.IdOsrodek=D.IdOsrodek
END
GO

--++++++++++++++++++++++++++++++++++++++++++++++++++

if exists (select * from dbo.sysobjects
           where id = object_id(N'[dbo].[CSMS_Zlc_OnDel]')
           and OBJECTPROPERTY(id, N'IsTrigger') = 1)
drop trigger [dbo].[CSMS_Zlc_OnDel]
GO

CREATE TRIGGER CSMS_Zlc_OnDel ON dbo.Z0_Zlecenia
FOR DELETE AS
BEGIN
  INSERT INTO CSMS_Z0_Zlecenia
    ( nrZlecenia, dataOd, dataDo, dataRejZlecenia, trescZlecWgNabywcy,
      trescZlecWgWystawcy, idNabywca, idZleceniodawca, idOdbiorca,
      kodOsrodka, kodDzialu, kodOddzialu, kodOperacji, zamowienie )
  SELECT
    D.nrZlecenia, D.dataOd, D.dataDo, D.dataRejZlecenia, D.trescZlecWgNabywcy,
    D.trescZlecWgWystawcy, D.idNabywca, D.idZleceniodawca, D.idOdbiorca,
    OSR.Kod AS kodOsrodka, DZZ.Kod AS kodDzialu, ODD.Kod AS kodOddzialu, 'D',
    D.zamowienie
  FROM deleted D INNER JOIN Oddzial ODD ON ODD.IdOddzial=D.IdOddzial
                 INNER JOIN Dzial   DZZ ON DZZ.IdDzial=ODD.IdDzial
                 INNER JOIN Osrodek OSR ON OSR.IdOsrodek=DZZ.IdOsrodek
END
GO

--++++++++++++++++++++++++++++++++++++++++++++++++++

exec sp_settriggerorder 'CSMS_Zlc_OnIns', @order='last', @stmttype = 'INSERT'
exec sp_settriggerorder 'CSMS_Zlc_OnUpd', @order='last', @stmttype = 'UPDATE'
exec sp_settriggerorder 'CSMS_Zlc_OnDel', @order='last', @stmttype = 'DELETE'

--**************************************************
--**************************************************
--**************************************************
From mpaliwoda at interia.pl  Mon Jul  7 07:25:32 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul  7 07:26:43 2008
Subject: [Harbour] =?iso-8859-2?q?Re=3A_Skrypt_do_natychmiastowego_puszcz?=
 =?iso-8859-2?q?enia_na_bazie_zewn=EAtrznej_-_eserwis?=
In-Reply-To: <4871F835.5020704@interia.pl>
References: <4871F835.5020704@interia.pl>
Message-ID: <g4suh2$orp$1@ger.gmane.org>

Sorry guys,

Sent by mistake ...

-- 

Marek

From druzus at acn.waw.pl  Mon Jul  7 07:56:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 07:56:53 2008
Subject: [Harbour] Change in runner.c __HRBLOAD()
In-Reply-To: <4870C3D4.4010302@ya.com>
References: <4870C3D4.4010302@ya.com>
Message-ID: <20080707115646.GA14880@34-mo7-2.acn.waw.pl>

On Sun, 06 Jul 2008, Javier wrote:

Hi Javier,

> Sorry for my wrong explanation, my problem is that I costs less program it 
> that write this post. :'(
> Please, see my Test() function if there is error in the init functions of 
> hrb, __hrbLoad() returns a wrong pointer (normally nil) disabling the 
> discharge of the hrb and memmory leaks.

No It doesn't. The return value is still inside hb_stackReturnItem() and
it's enough to retrieve it. You can make it using difference between
procedure and function. Just simply create:

   procedure my_hrbLoad( cHrb, oErr )
      oErr := NIL
      begin sequence with {|e|break(e)}
         hb_hrbLoad( cHrb )
      recover using oErr
      endsequnce
   return

and simply use:

   pHrb := my_hrbLoad( cHrb, @oErr )
   if empty( pHrb )
      ? "Errors during .hrb file loading."
   else
      if oErr != NIL
         ? "Errors during initialization."
      else
         doSomeThing()
      endif
      begin sequence with {|e|break(e)}
         hb_hrbUnload( pHrb )
      recover using oErr
         ? "Error in EXIT procedures"
      endsequnce
   endif

pHrb will be always initialized with valid pointer if .hrb file
is properly loaded and inside oErr you will have error object if
error will appear inside hb_hrbLoad().
The other solution is adding automatic destructors to pHrb pointers
and probably it's sth what we should make because it will resolve
also few other problems.
Anyhow because it will change current behavior and .hrb code will
be automatically unloaded when all pHrb pointers will be cleared
then I would like to agree such modifications with group before
I'll make it.

> The problem is that __hrbLoad() return the pointer of hrb in the stack 
> return not in the stack parameter frame.-

As you can see above it's not a problem but it forces that user have
to create additional hack. Storing pointers in parameters is also
such hack though done in different way inside runner.c code.
IMHO the valid solution is adding automatic destructors and if group
agree then I'll make it.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jul  7 08:02:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 08:02:58 2008
Subject: [Harbour] Change in runner.c __HRBLOAD()
In-Reply-To: <20080707115646.GA14880@34-mo7-2.acn.waw.pl>
References: <4870C3D4.4010302@ya.com>
	<20080707115646.GA14880@34-mo7-2.acn.waw.pl>
Message-ID: <797B98A6-B140-437F-B400-5F7BA385F696@syenar.hu>

>> The problem is that __hrbLoad() return the pointer of hrb in the  
>> stack
>> return not in the stack parameter frame.-
>
> As you can see above it's not a problem but it forces that user have
> to create additional hack. Storing pointers in parameters is also
> such hack though done in different way inside runner.c code.
> IMHO the valid solution is adding automatic destructors and if group
> agree then I'll make it.

One vote from me, to do it.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 08:16:00 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 08:16:10 2008
Subject: [Harbour] 2008-07-07 13:50 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e02b$Blat.v2.6.2$37e9aefa$127826172424@127.0.0.1>

2008-07-07 13:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/hbffind.c
     ! Added workaround for PellesC 5.00.1 hang bug.

   * config/w32/pocc.cf
     % Removed unnecessary '-I' switches.
     ! Removed ws2.lib from liblist to make it link with PellesC 5.00.1 
       (where this lib is not available anymore).
--
Brgds,
Viktor

From mbelgrano at deltain.it  Mon Jul  7 08:23:06 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Jul  7 08:23:20 2008
Subject: R: Re: [Harbour] Change in runner.c __HRBLOAD()
Message-ID: <000401c8e02c$3bd654b1$0400a8c0@deltain.net>

I positive vote also

----- Messaggio originale -----
Da: Szak?ts Viktor <harbour.01@syenar.hu>
Inviato: lunedi 7 luglio 2008 14.03
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: [Harbour] Change in runner.c __HRBLOAD()

>> The problem is that __hrbLoad() return the pointer of hrb in the  
>> stack
>> return not in the stack parameter frame.-
>
> As you can see above it's not a problem but it forces that user have
> to create additional hack. Storing pointers in parameters is also
> such hack though done in different way inside runner.c code.
> IMHO the valid solution is adding automatic destructors and if group
> agree then I'll make it.

One vote from me, to do it.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Mon Jul  7 08:24:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 08:25:50 2008
Subject: [Harbour] PellesC 5.00.1 and hbdot problem.
Message-ID: <97C9CFBA-6A87-49D6-9B98-22A7CFCD3181@syenar.hu>

Hi all,

After a seemingly successful build (with latest revision),
with only a few warnings here and there, I'm getting the
attached screen if '? version()' <Enter> is keyed into
hbdot.exe.

What could be the problem?

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pelles.png
Type: image/png
Size: 15874 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080707/b8d450c5/pelles-0001.png
-------------- next part --------------

From mbelgrano at deltain.it  Mon Jul  7 09:26:13 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Jul  7 09:26:19 2008
Subject: R: [Harbour] PellesC 5.00.1 and hbdot problem.
In-Reply-To: <97C9CFBA-6A87-49D6-9B98-22A7CFCD3181@syenar.hu>
References: <97C9CFBA-6A87-49D6-9B98-22A7CFCD3181@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE09@SRV02.deltain.net>

Hbtest work fine?

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Szak?ts Viktor
Inviato: luned? 7 luglio 2008 14.25
A: Harbour Project Main Developer List.
Oggetto: [Harbour] PellesC 5.00.1 and hbdot problem.

Hi all,

After a seemingly successful build (with latest revision), with only a few warnings here and there, I'm getting the attached screen if '? version()' <Enter> is keyed into hbdot.exe.

What could be the problem?

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 10:44:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 10:45:55 2008
Subject: R: [Harbour] PellesC 5.00.1 and hbdot problem.
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE09@SRV02.deltain.net>
References: <97C9CFBA-6A87-49D6-9B98-22A7CFCD3181@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EE09@SRV02.deltain.net>
Message-ID: <8188BF8A-9B7C-4349-AC06-3C9D981E2C07@syenar.hu>

Yes.

On 2008.07.07., at 15:26, Massimo Belgrano wrote:

> Hbtest work fine?
>
> -----Messaggio originale-----
> Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] Per conto di Szak?ts Viktor
> Inviato: luned? 7 luglio 2008 14.25
> A: Harbour Project Main Developer List.
> Oggetto: [Harbour] PellesC 5.00.1 and hbdot problem.
>
> Hi all,
>
> After a seemingly successful build (with latest revision), with only  
> a few warnings here and there, I'm getting the attached screen if '?  
> version()' <Enter> is keyed into hbdot.exe.
>
> What could be the problem?
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rportnoff at spendmap.com  Mon Jul  7 10:50:06 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Jul  7 10:48:52 2008
Subject: [Harbour] Class creation broken in RC2 (RESOLVED?)
In-Reply-To: <A63FB518-48E5-4455-A0FA-C15DD63EDC5E@syenar.hu>
References: <B0081722893@ms1.3peaks.com>
	<A63FB518-48E5-4455-A0FA-C15DD63EDC5E@syenar.hu>
Message-ID: <B0081772386@ms1.3peaks.com>

Yes, I am using the /u switch.

At 08:09 PM 7/4/2008, you wrote:
>Hi Randy,
>
>Okay, thanks I'll fix this. You seem to be using /u switch with
>Harbour, which got broken lately in this respect.
>
>Brgds,
>Viktor
>
>On 2008.07.04., at 22:37, Randy Portnoff wrote:
>
>>I seems I now have to define __HARBOUR__ for it to compile and use
>>topclass.ch properly - I did not have to do this before.
>>
>><<<Original message>>>
>>
>>Hi all,
>>
>>I can no longer compile PRG code which contains class definitions
>>(via Clip4Win32's topclass.ch) - I get the following errors:
>>
>>PPBROWSE.prg(97) Error E0030  Syntax error: "syntax error at 'INIT'"
>>PPBROWSE.prg(99) Error E0030  Syntax error: "syntax error at
>>'__SUBWNDPROC'"
>>PPBROWSE.prg(101) Error E0030  Syntax error: "syntax error at
>>'ADDCOLUMN'"
>>PPBROWSE.prg(102) Error E0030  Syntax error: "syntax error at
>>'_CLASS_DECLARATION_'"
>>.
>>.
>>.
>>
>>However, this worked fine in: Harbour devel build 1.1-1 Intl. (Rev.
>>8567)
>>
>>Regards,
>>Randy.
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From druzus at acn.waw.pl  Mon Jul  7 11:03:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 11:03:26 2008
Subject: R: [Harbour] PellesC 5.00.1 and hbdot problem.
In-Reply-To: <8188BF8A-9B7C-4349-AC06-3C9D981E2C07@syenar.hu>
References: <97C9CFBA-6A87-49D6-9B98-22A7CFCD3181@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EE09@SRV02.deltain.net>
	<8188BF8A-9B7C-4349-AC06-3C9D981E2C07@syenar.hu>
Message-ID: <20080707150320.GA5528@34-mo7-2.acn.waw.pl>

On Mon, 07 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Yes.

And what are the results?
The same as in other builds?

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jul  7 11:09:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 11:10:07 2008
Subject: R: [Harbour] PellesC 5.00.1 and hbdot problem.
In-Reply-To: <20080707150320.GA5528@34-mo7-2.acn.waw.pl>
References: <97C9CFBA-6A87-49D6-9B98-22A7CFCD3181@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EE09@SRV02.deltain.net>
	<8188BF8A-9B7C-4349-AC06-3C9D981E2C07@syenar.hu>
	<20080707150320.GA5528@34-mo7-2.acn.waw.pl>
Message-ID: <BE100122-7ADD-4B57-A9D0-59D21CCDD164@syenar.hu>

Hi Przemek,

Exactly the same as with Pelles C 4.50.
Which is in turn exactly the same as BCC55.

Brgds,
Viktor

On 2008.07.07., at 17:03, Przemyslaw Czerpak wrote:

> On Mon, 07 Jul 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Yes.
>
> And what are the results?
> The same as in other builds?
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Jul  7 11:39:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 11:40:38 2008
Subject: [Harbour] hb_ArrayID() problem
Message-ID: <0AE89AE6-75CB-46E5-AC42-D2BD54AD87CD@syenar.hu>

Hi all,

I'd like to propose to either rename hb_ArrayID() function
to __ArrayID() and/or move it to contrib/xhb.

This is pretty much alien for a language, and it doesn't work
reliably in 64bit. (and cannot even be fixed without breaking
compatibility)

Opinions?

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 11:42:55 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 11:42:59 2008
Subject: [Harbour] 2008-07-07 17:41 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e048$Blat.v2.6.2$1fdb7f88$e884619a19c@127.0.0.1>

2008-07-07 17:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/vm/extrap.c
     ! Warning fixed.

   * contrib/hbmysql/mysql.c
   * contrib/hbmysql/tmysql.prg
     ! sqlListF() return value changed to pointer from numeric.
       Now compatible with Win64.
       INCOMPATIBLE.

   * contrib/hbw32/w32_prn.c
     ! Warning suppressed (pointer to BOOL conversion).

   * contrib/hbw32/dllcall.c
   * contrib/hbhpdf/harupdf.c
   * contrib/hbfimage/fi_winfu.c
   * contrib/hbgf/hbgfw32/win32.c
     ! Fixed several pointer (handle) passings to be 64bit compatible.

   * contrib/hbw32/w32_reg.prg
     * Minor formatting.

   ; TOFIX: There are still some PellesC 64bit warnings to be fixed.
     (posted separately)
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 11:42:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 11:43:44 2008
Subject: [Harbour] PellesC 5 warnings/errors
Message-ID: <4244C826-2BF3-4458-9F0B-968043B2297C@syenar.hu>

../../atnum.c(254): fatal error: Internal error: reduce_tree().
../../odbc.c(402): error #2140: Type error in argument 4 to  
'SQLExtendedFetch'; found 'unsigned long long int *', expected  
'unsigned long int *'.
../../genhrb.c(88): warning #2223: Unable to convert character  
'\u00c0' to codepage 1250; using default.
../../disksphb.c(284): warning #2154: Unreachable code.
../../filesys.c(543): warning #2006: [ISO] Conversion from 'void *' to  
'long int' is compiler dependent.
../../filesys.c(543): warning #2052: Conversion from 'void *' to 'long  
int' is undefined.
../../arrayshb.c(138): warning #2006: [ISO] Conversion from 'void *'  
to 'long int' is compiler dependent.
../../arrayshb.c(138): warning #2052: Conversion from 'void *' to  
'long int' is undefined.
../../extrap.c(258): warning #2115: Local 'ef' is initialized but  
never used.
../../deflate.c(327): warning #2115: Local 'hash_head' is initialized  
but never used.
../../gtwvg.c(2629): warning #2006: [ISO] Conversion from 'HWND' to  
'long int' is compiler dependent.
../../gtwvg.c(2629): warning #2052: Conversion from 'HWND' to 'long  
int' is undefined.
../../gtwvg.c(3322): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../gtwvg.c(3322): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../gtwvg.c(3328): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../gtwvg.c(3328): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(365): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../wvgcore.c(365): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(453): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../wvgcore.c(453): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(479): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../wvgcore.c(479): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(567): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../wvgcore.c(567): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(2853): warning #2006: [ISO] Conversion from 'HFONT' to  
'unsigned long int' is compiler dependent.
../../wvgcore.c(2853): warning #2052: Conversion from 'HFONT' to  
'unsigned long int' is undefined.
../../wvgcore.c(3016): warning #2006: [ISO] Conversion from 'HBITMAP'  
to 'unsigned long int' is compiler dependent.
../../wvgcore.c(3016): warning #2052: Conversion from 'HBITMAP' to  
'unsigned long int' is undefined.
../../wvgutils.c(603): warning #2006: [ISO] Conversion from 'HCURSOR'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(603): warning #2052: Conversion from 'HCURSOR' to  
'unsigned long int' is undefined.
../../wvgutils.c(703): warning #2006: [ISO] Conversion from 'HMENU' to  
'long int' is compiler dependent.
../../wvgutils.c(703): warning #2052: Conversion from 'HMENU' to 'long  
int' is undefined.
../../wvgutils.c(711): warning #2006: [ISO] Conversion from 'HMENU' to  
'long int' is compiler dependent.
../../wvgutils.c(711): warning #2052: Conversion from 'HMENU' to 'long  
int' is undefined.
../../wvgutils.c(718): warning #2006: [ISO] Conversion from 'HMENU' to  
'long int' is compiler dependent.
../../wvgutils.c(718): warning #2052: Conversion from 'HMENU' to 'long  
int' is undefined.
../../wvgutils.c(924): warning #2006: [ISO] Conversion from 'HMENU' to  
'unsigned long int' is compiler dependent.
../../wvgutils.c(924): warning #2052: Conversion from 'HMENU' to  
'unsigned long int' is undefined.
../../wvgutils.c(961): warning #2006: [ISO] Conversion from 'void *'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(961): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../wvgutils.c(1066): warning #2006: [ISO] Conversion from 'HWND' to  
'unsigned long int' is compiler dependent.
../../wvgutils.c(1066): warning #2052: Conversion from 'HWND' to  
'unsigned long int' is undefined.
../../wvgutils.c(1095): warning #2006: [ISO] Conversion from 'void *'  
to 'int' is compiler dependent.
../../wvgutils.c(1095): warning #2052: Conversion from 'void *' to  
'int' is undefined.
../../wvgutils.c(1279): warning #2006: [ISO] Conversion from 'unsigned  
short int *' to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1279): warning #2052: Conversion from 'unsigned short  
int *' to 'unsigned long int' is undefined.
../../wvgutils.c(1279): warning #2006: [ISO] Conversion from 'unsigned  
short int *' to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1279): warning #2052: Conversion from 'unsigned short  
int *' to 'unsigned long int' is undefined.
../../wvgutils.c(1292): warning #2006: [ISO] Conversion from 'unsigned  
short int *' to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1292): warning #2052: Conversion from 'unsigned short  
int *' to 'unsigned long int' is undefined.
../../wvgutils.c(1388): warning #2006: [ISO] Conversion from 'HCURSOR'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1388): warning #2052: Conversion from 'HCURSOR' to  
'unsigned long int' is undefined.
../../wvgutils.c(1501): warning #2006: [ISO] Conversion from 'void *'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1501): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../wvgutils.c(1515): warning #2006: [ISO] Conversion from 'void *'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1515): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../wvgutils.c(1614): warning #2006: [ISO] Conversion from 'HWND' to  
'unsigned long int' is compiler dependent.
../../wvgutils.c(1614): warning #2052: Conversion from 'HWND' to  
'unsigned long int' is undefined.
../../wvgutils.c(1656): warning #2006: [ISO] Conversion from 'HCURSOR'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1656): warning #2052: Conversion from 'HCURSOR' to  
'unsigned long int' is undefined.
../../wvgutils.c(1688): warning #2006: [ISO] Conversion from 'HBITMAP'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1688): warning #2052: Conversion from 'HBITMAP' to  
'unsigned long int' is undefined.
../../wvgutils.c(1722): warning #2006: [ISO] Conversion from 'HDC' to  
'unsigned long int' is compiler dependent.
../../wvgutils.c(1722): warning #2052: Conversion from 'HDC' to  
'unsigned long int' is undefined.
../../wvgutils.c(1749): warning #2006: [ISO] Conversion from 'HBRUSH'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1749): warning #2052: Conversion from 'HBRUSH' to  
'unsigned long int' is undefined.
../../wvgutils.c(1798): warning #2006: [ISO] Conversion from 'HWND' to  
'long int' is compiler dependent.
../../wvgutils.c(1798): warning #2052: Conversion from 'HWND' to 'long  
int' is undefined.
../../wvgutils.c(1827): warning #2006: [ISO] Conversion from 'HFONT'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1827): warning #2052: Conversion from 'HFONT' to  
'unsigned long int' is undefined.
../../wvgutils.c(2165): warning #2006: [ISO] Conversion from 'HWND' to  
'long int' is compiler dependent.
../../wvgutils.c(2165): warning #2052: Conversion from 'HWND' to 'long  
int' is undefined.
../../hb_btree.c(643): warning #2006: [ISO] Conversion from 'void *'  
to 'unsigned long int' is compiler dependent.
../../hb_btree.c(643): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../hb_btree.c(739): warning #2006: [ISO] Conversion from  
'ioBuffer_T *' to 'unsigned long int' is compiler dependent.
../../hb_btree.c(739): warning #2052: Conversion from 'ioBuffer_T *'  
to 'unsigned long int' is undefined.
../../odbc.c(118): warning #2006: [ISO] Conversion from 'void *' to  
'long int' is compiler dependent.
../../odbc.c(118): warning #2052: Conversion from 'void *' to 'long  
int' is undefined.
../../odbc.c(127): warning #2006: [ISO] Conversion from 'void *' to  
'long int' is compiler dependent.
../../odbc.c(127): warning #2052: Conversion from 'void *' to 'long  
int' is undefined.
../../odbc.c(216): warning #2006: [ISO] Conversion from 'void *' to  
'long int' is compiler dependent.
../../odbc.c(216): warning #2052: Conversion from 'void *' to 'long  
int' is undefined.
../../odbc.c(482): warning #2006: [ISO] Conversion from 'char *' to  
'long int' is compiler dependent.
../../odbc.c(482): warning #2052: Conversion from 'char *' to 'long  
int' is undefined.
../../odbc.c(488): warning #2006: [ISO] Conversion from 'char *' to  
'long int' is compiler dependent.
../../odbc.c(488): warning #2052: Conversion from 'char *' to 'long  
int' is undefined.
../../ole2.c(335): warning #2006: [ISO] Conversion from 'LPDISPATCH'  
to 'long int' is compiler dependent.
../../ole2.c(335): warning #2052: Conversion from 'LPDISPATCH' to  
'long int' is undefined.
../../utils.c(291): warning #2223: Unable to convert character  
'\u009d' to codepage 1250; using default.
../../utils.c(294): warning #2223: Unable to convert character  
'\u008b' to codepage 1250; using default.
../../dllcall.c(505): warning #2006: [ISO] Conversion from 'void *' to  
'unsigned long int' is compiler dependent.
../../dllcall.c(505): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../dllcall.c(782): warning #2006: [ISO] Conversion from 'HINSTANCE'  
to 'long int' is compiler dependent.
../../dllcall.c(782): warning #2052: Conversion from 'HINSTANCE' to  
'long int' is undefined.
../../dllcall.c(823): warning #2006: [ISO] Conversion from 'HINSTANCE'  
to 'unsigned long int' is compiler dependent.
../../dllcall.c(823): warning #2052: Conversion from 'HINSTANCE' to  
'unsigned long int' is undefined.
../../w32_ole.c(759): warning #2006: [ISO] Conversion from  
'LPDISPATCH' to 'long int' is compiler dependent.
../../w32_ole.c(759): warning #2052: Conversion from 'LPDISPATCH' to  
'long int' is undefined.
../../w32_ole.c(1089): warning #2006: [ISO] Conversion from  
'LPDISPATCH' to 'long int' is compiler dependent.
../../w32_ole.c(1089): warning #2052: Conversion from 'LPDISPATCH' to  
'long int' is undefined.
../../w32_ole.c(1468): warning #2006: [ISO] Conversion from 'void *'  
to 'long int' is compiler dependent.
../../w32_ole.c(1468): warning #2052: Conversion from 'void *' to  
'long int' is undefined.
../../w32_ole.c(1521): warning #2006: [ISO] Conversion from 'void *'  
to 'long int' is compiler dependent.
../../w32_ole.c(1521): warning #2052: Conversion from 'void *' to  
'long int' is undefined.
../../w32_regc.c(94): warning #2006: [ISO] Conversion from 'HKEY' to  
'unsigned long int' is compiler dependent.
../../w32_regc.c(94): warning #2052: Conversion from 'HKEY' to  
'unsigned long int' is undefined.
../../w32_regc.c(116): warning #2006: [ISO] Conversion from 'HKEY' to  
'unsigned long int' is compiler dependent.
../../w32_regc.c(116): warning #2052: Conversion from 'HKEY' to  
'unsigned long int' is undefined.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Jul  7 12:25:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 12:25:18 2008
Subject: [Harbour] hb_ArrayID() problem
In-Reply-To: <0AE89AE6-75CB-46E5-AC42-D2BD54AD87CD@syenar.hu>
References: <0AE89AE6-75CB-46E5-AC42-D2BD54AD87CD@syenar.hu>
Message-ID: <20080707162513.GA5829@34-mo7-2.acn.waw.pl>

On Mon, 07 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'd like to propose to either rename hb_ArrayID() function
> to __ArrayID() and/or move it to contrib/xhb.
> This is pretty much alien for a language, and it doesn't work
> reliably in 64bit. (and cannot even be fixed without breaking
> compatibility)

If you are talking about .prg function then I agree to move it
to XHB library but changing the name is not good idea because
xHarbour has such function and if XHB library should give compatibility
for xHarbour code ported to Harbour then we should keep the name.

Please only remember that we have also C level function with the
same name which we have to keep because it's used by some other
code.

best regards,
Przemek
From mpaliwoda at interia.pl  Mon Jul  7 13:02:32 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul  7 13:02:42 2008
Subject: [Harbour] ChangeLog: 2008-07-07 19:00 UTC+0100 Marek Paliwoda
 (mpaliwoda at interia pl)
Message-ID: <48724C28.4090104@interia.pl>

2008-07-07 19:00 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
    * make_xmingwce.mak
      * Changed the way HB_COMP_PATH, HB_PPGEN_PATH,
        CCPATH and CCPREFIX environment variables are
        handled

-- 

     Marek Paliwoda
mpaliwoda at interia pl

----------------------------------------------------------------------
Rowerem po Roztoczu.
Zobacz relacje >>> http://link.interia.pl/f1e65

From harbour.01 at syenar.hu  Mon Jul  7 13:28:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 13:29:51 2008
Subject: [Harbour] hb_ArrayID() problem
In-Reply-To: <20080707162513.GA5829@34-mo7-2.acn.waw.pl>
References: <0AE89AE6-75CB-46E5-AC42-D2BD54AD87CD@syenar.hu>
	<20080707162513.GA5829@34-mo7-2.acn.waw.pl>
Message-ID: <2035FE32-A25E-44EF-9A66-E5AE7A7E9AB4@syenar.hu>

>
Hi Przemek,

>> I'd like to propose to either rename hb_ArrayID() function
>> to __ArrayID() and/or move it to contrib/xhb.
>> This is pretty much alien for a language, and it doesn't work
>> reliably in 64bit. (and cannot even be fixed without breaking
>> compatibility)
>
> If you are talking about .prg function then I agree to move it
> to XHB library but changing the name is not good idea because
> xHarbour has such function and if XHB library should give  
> compatibility
> for xHarbour code ported to Harbour then we should keep the name.

Yes, I know it's needed by xhb, I wrote "and/or" because
in case we rename we can move the original name to xhb.lib :)

But I also prefer to simply move it to xhb. Which I'll do ASAP.

> Please only remember that we have also C level function with the
> same name which we have to keep because it's used by some other
> code.

I meant the Harbour level one. (the C level one doesn't have
a return value problem, and I've seen it's used. I could have
been more specific, though sorry).

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 13:33:45 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 13:33:48 2008
Subject: [Harbour] 2008-07-07 19:32 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e057$Blat.v2.6.2$9bbe4536$e80bc5d133a@127.0.0.1>

2008-07-07 19:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/vm/arrayshb.c
   * contrib/xhb/xhbfunc.c
     ! Moved hb_ArrayID() Harbour level function to xhb.lib.
     ; NOTE: This function is not compatible with x64 architecture.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Jul  7 14:05:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 14:05:42 2008
Subject: [Harbour] 2008-07-07 19:32 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c8e057$Blat.v2.6.2$9bbe4536$e80bc5d133a@127.0.0.1>
References: <01c8e057$Blat.v2.6.2$9bbe4536$e80bc5d133a@127.0.0.1>
Message-ID: <20080707180537.GA19477@34-mo7-2.acn.waw.pl>

On Mon, 07 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-07-07 19:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>    * source/vm/arrayshb.c
>    * contrib/xhb/xhbfunc.c
>      ! Moved hb_ArrayID() Harbour level function to xhb.lib.
>      ; NOTE: This function is not compatible with x64 architecture.

It can be updated for WIN64 (please remember that only WIN64 has 32 bit
LONG type and other x86 based 64bit platforms I know have 64bit LONG type).
It's enopugh to change return value to:

   hb_retnint( ( HB_PTR_DIFF ) hb_arrayId( pArray ) );

anyhow over 4 years ago (28 Apr 2004) I've change this function in
xHarbour to return pointer instead of number so now it should look
like:

   HB_FUNC( HB_ARRAYID )
   {
      PHB_ITEM pArray = hb_param( 1, HB_IT_ARRAY );

      hb_retptr( pArray ? ( void * ) pArray->item.asArray.value : NULL );
   }

This version is xHarbour compatible.
Sorry that I forgot to update it in Harbour but for me it was old obsolete
code.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jul  7 14:17:25 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 14:17:38 2008
Subject: [Harbour] 2008-07-07 20:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e05d$Blat.v2.6.2$b51fc95e$13146e68dbbe@127.0.0.1>

2008-07-07 20:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/xhb/xhbfunc.c
     ! Changed hb_ArrayID() to be in sync with xhb, and at the 
       same time fixing the Win64 compatibility issue.
       Thanks Przemek.

   * ChangeLog
     ! Typo.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 14:24:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 14:25:39 2008
Subject: [Harbour] 2008-07-07 19:32 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080707180537.GA19477@34-mo7-2.acn.waw.pl>
References: <01c8e057$Blat.v2.6.2$9bbe4536$e80bc5d133a@127.0.0.1>
	<20080707180537.GA19477@34-mo7-2.acn.waw.pl>
Message-ID: <FA61C966-E905-4B54-A9AC-22ECE1A57E57@syenar.hu>

>>
Hi Przemek,

>> 2008-07-07 19:32 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>   * source/vm/arrayshb.c
>>   * contrib/xhb/xhbfunc.c
>>     ! Moved hb_ArrayID() Harbour level function to xhb.lib.
>>     ; NOTE: This function is not compatible with x64 architecture.
>
> It can be updated for WIN64 (please remember that only WIN64 has 32  
> bit
> LONG type and other x86 based 64bit platforms I know have 64bit LONG  
> type).
> It's enopugh to change return value to:

I'm always mixing terminology, sorry, I meant Win64.
[ that's what I wrote first, and I changed to x64 pbly
because I'm bloody tired. ]

>   hb_retnint( ( HB_PTR_DIFF ) hb_arrayId( pArray ) );

You're right.

I didn't consider this solution for other places,
but I feel it better to use ptr functions, since
using ints hides logic and not very good at long
term.

> anyhow over 4 years ago (28 Apr 2004) I've change this function in
> xHarbour to return pointer instead of number so now it should look
> like:
>
>   HB_FUNC( HB_ARRAYID )
>   {
>      PHB_ITEM pArray = hb_param( 1, HB_IT_ARRAY );
>
>      hb_retptr( pArray ? ( void * ) pArray->item.asArray.value :  
> NULL );
>   }
>
> This version is xHarbour compatible.
> Sorry that I forgot to update it in Harbour but for me it was old  
> obsolete
> code.

Even better. I've committed it.

Brgds,
Viktor

From jarabal at ya.com  Mon Jul  7 14:57:51 2008
From: jarabal at ya.com (Javier)
Date: Mon Jul  7 14:58:16 2008
Subject: [Harbour] Change in runner.c __HRBLOAD()
In-Reply-To: <20080707115646.GA14880@34-mo7-2.acn.waw.pl>
References: <4870C3D4.4010302@ya.com>
	<20080707115646.GA14880@34-mo7-2.acn.waw.pl>
Message-ID: <4872672F.7040209@ya.com>

Hi Przemek,

If I have understood well I agree with best solution is automatic 
destructors for pHrb type pointer and them automatic call hb_hrbUnLoad() 
when release, in other words, do you plan to convert pHrb in collectible 
pointer?

pHrb := __hrbLoad(  cHrb )   // pHrb it's the unique instance (reference 
GC) of this hrb module
pHrb := nil   // call hb_hrbUnLoad() and free memory

Another thing that I don't understand, why be forced  the parameters to 
character as if are from the command line?
IMHO: This subtracts functionality and if they proceed of the command 
line also would be accepted.

Thank you and sorry for my wrong English.
Best regards.
Xavi

Przemyslaw Czerpak escribi?:
> On Sun, 06 Jul 2008, Javier wrote:
>
> Hi Javier,
>
>   
>> Sorry for my wrong explanation, my problem is that I costs less program it 
>> that write this post. :'(
>> Please, see my Test() function if there is error in the init functions of 
>> hrb, __hrbLoad() returns a wrong pointer (normally nil) disabling the 
>> discharge of the hrb and memmory leaks.
>>     
>
> No It doesn't. The return value is still inside hb_stackReturnItem() and
> it's enough to retrieve it. You can make it using difference between
> procedure and function. Just simply create:
>
>    procedure my_hrbLoad( cHrb, oErr )
>       oErr := NIL
>       begin sequence with {|e|break(e)}
>          hb_hrbLoad( cHrb )
>       recover using oErr
>       endsequnce
>    return
>
> and simply use:
>
>    pHrb := my_hrbLoad( cHrb, @oErr )
>    if empty( pHrb )
>       ? "Errors during .hrb file loading."
>    else
>       if oErr != NIL
>          ? "Errors during initialization."
>       else
>          doSomeThing()
>       endif
>       begin sequence with {|e|break(e)}
>          hb_hrbUnload( pHrb )
>       recover using oErr
>          ? "Error in EXIT procedures"
>       endsequnce
>    endif
>
> pHrb will be always initialized with valid pointer if .hrb file
> is properly loaded and inside oErr you will have error object if
> error will appear inside hb_hrbLoad().
> The other solution is adding automatic destructors to pHrb pointers
> and probably it's sth what we should make because it will resolve
> also few other problems.
> Anyhow because it will change current behavior and .hrb code will
> be automatically unloaded when all pHrb pointers will be cleared
> then I would like to agree such modifications with group before
> I'll make it.
>
>   
>> The problem is that __hrbLoad() return the pointer of hrb in the stack 
>> return not in the stack parameter frame.-
>>     
>
> As you can see above it's not a problem but it forces that user have
> to create additional hack. Storing pointers in parameters is also
> such hack though done in different way inside runner.c code.
> IMHO the valid solution is adding automatic destructors and if group
> agree then I'll make it.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
From rportnoff at spendmap.com  Mon Jul  7 15:02:46 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Jul  7 15:01:31 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
Message-ID: <B0081779035@ms1.3peaks.com>

Hi all,

When at EOF() and attempt to replace a field, get runtime error as 
"Variable does not exist" - This is better than Clipper which does 
not throw an error at all, but I think a more meaningful error 
message should be used like: "Attempt to update record while at EOF".

Regards,
Randy.


From druzus at acn.waw.pl  Mon Jul  7 16:53:14 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 16:53:20 2008
Subject: [Harbour] Change in runner.c __HRBLOAD()
In-Reply-To: <4872672F.7040209@ya.com>
References: <4870C3D4.4010302@ya.com>
	<20080707115646.GA14880@34-mo7-2.acn.waw.pl>
	<4872672F.7040209@ya.com>
Message-ID: <20080707205314.GA5593@34-mo7-2.acn.waw.pl>

On Mon, 07 Jul 2008, Javier wrote:

Hi Javier,

> If I have understood well I agree with best solution is automatic 
> destructors for pHrb type pointer and them automatic call hb_hrbUnLoad() 
> when release, in other words, do you plan to convert pHrb in collectible 
> pointer?
> pHrb := __hrbLoad(  cHrb )   // pHrb it's the unique instance (reference 
> GC) of this hrb module
> pHrb := nil   // call hb_hrbUnLoad() and free memory

Exactly. It will be only necessary to implement clean method
for executing EXIT procedures inside .hrb files or to be more
precise: add protection against executing them twice when some
.hrb modules are unloaded from EXIT procedures or in final item
cleanup in hb_vmQuit(). In fact such protection should be added
even for current code.

> Another thing that I don't understand, why be forced  the parameters to 
> character as if are from the command line?
> IMHO: This subtracts functionality and if they proceed of the command 
> line also would be accepted.

It was not my decision to accept only string parameters.
I guess it was chosen to emulate standalone Clipper/Harbour
application execute conditions where all parameters passed
to application are strings and each INIT procedure receive
their copy. If you think that it's good to allow also passing
other item types then I can change the code. I can imagine
some situations when it may be useful but of course code
inside INIT procedures will have to be ready for such
situations.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Jul  7 17:07:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 17:07:44 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <B0081779035@ms1.3peaks.com>
References: <B0081779035@ms1.3peaks.com>
Message-ID: <20080707210740.GB5593@34-mo7-2.acn.waw.pl>

On Mon, 07 Jul 2008, Randy Portnoff wrote:

Hi Randy,

> When at EOF() and attempt to replace a field, get runtime error as 
> "Variable does not exist" - This is better than Clipper which does 
> not throw an error at all, but I think a more meaningful error 
> message should be used like: "Attempt to update record while at EOF".

I can imagine valid Clipper code which uses this behavior intentionally,
f.e. to drop new record data by simple disabling APPEND BLANK instruction
without interrupting the execution context so such modification
will break it.
If you need such functionality then you can make it yourself very
easy using USRRDD library and overloading PUTVALUE method, f.e.
see code below.

best regards,
Przemek




#include "rddsys.ch"
#include "hbusrrdd.ch"

ANNOUNCE MYRDD
REQUEST DBFCDX

STATIC FUNCTION MYRDD_GenErorr( nWA, nField, xValue )
   LOCAL oError
   oError := ErrorNew()
   oError:GenCode     := EG_UNSUPPORTED
   oError:SubCode     := 9999
   oError:Description := "Attempt to update record while at EOF"
   oError:CanDefault  := .T.
   UR_SUPER_ERROR( nWA, oError )
   RETURN FAILURE

STATIC FUNCTION MYRDD_PUTVALUE( nWA, nField, xValue )
   IF EOF()
      RETURN MYRDD_GenErorr()
   ENDIF
   RETURN UR_SUPER_LOCK( nWA, nField, xValue )

FUNCTION MYRDD_GETFUNCTABLE( pFuncCount, pFuncTable, pSuperTable, nRddID )
   LOCAL cSuperRDD := "DBFCDX" /* We are inheriting from DBFCDX */
   LOCAL aMethods[ UR_METHODCOUNT ]
   aMethods[ UR_PUTVALUE] := ( @MYRDD_PUTVALUE() )
   RETURN USRRDD_GETFUNCTABLE( pFuncCount, pFuncTable, pSuperTable, nRddID, ;
                               cSuperRDD, aMethods )

INIT PROC MYRDD_INIT()
   rddRegister( "MYRDD", RDT_FULL )
   RETURN
From druzus at acn.waw.pl  Mon Jul  7 17:13:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 17:13:22 2008
Subject: R: [Harbour] PellesC 5.00.1 and hbdot problem.
In-Reply-To: <BE100122-7ADD-4B57-A9D0-59D21CCDD164@syenar.hu>
References: <97C9CFBA-6A87-49D6-9B98-22A7CFCD3181@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EE09@SRV02.deltain.net>
	<8188BF8A-9B7C-4349-AC06-3C9D981E2C07@syenar.hu>
	<20080707150320.GA5528@34-mo7-2.acn.waw.pl>
	<BE100122-7ADD-4B57-A9D0-59D21CCDD164@syenar.hu>
Message-ID: <20080707211316.GC5593@34-mo7-2.acn.waw.pl>

On Mon, 07 Jul 2008, Szak?ts Viktor wrote:
> Hi Przemek,
> Exactly the same as with Pelles C 4.50.
> Which is in turn exactly the same as BCC55.

Then it's probably caused by this conversion:

../../genhrb.c(88): warning #2223: Unable to convert character  
'\u00c0' to codepage 1250; using default.

It's from the warning messages you sent.
Looks like new POCC makes literal string conversion to current CP :-o
Change in ../../genhrb.c:

   memcpy( ptr, "\300HRB", 4 );  /* signature */
   ptr += 4;

to:

   /* signature */
   *ptr++ = '\300'
   *ptr++ = 'H';
   *ptr++ = 'R';
   *ptr++ = 'B';

It will probably resolve the problem.

best regards,
Przemek
From rportnoff at spendmap.com  Mon Jul  7 17:17:46 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Jul  7 17:16:31 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <20080707210740.GB5593@34-mo7-2.acn.waw.pl>
References: <B0081779035@ms1.3peaks.com>
	<20080707210740.GB5593@34-mo7-2.acn.waw.pl>
Message-ID: <B0081782378@ms1.3peaks.com>

Hi Przemek,

I don't think you understand what I mean...

In Clipper, if you attempt to update a record when at EOF (ie. by 
mistake), it does NOT cause a runtime error (which is bad!). Harbour, 
on the other hand, does generate a runtime error (which is good!).

However, what I am saying is that, the error message that Harbour 
generates now (ie. "Variable does not exist") is misleading. I am 
suggesting that is be re-worded to "Attempt to update record while at EOF".

Does that make sense?

Regards,
Randy.

At 05:07 PM 7/7/2008, you wrote:
>On Mon, 07 Jul 2008, Randy Portnoff wrote:
>
>Hi Randy,
>
> > When at EOF() and attempt to replace a field, get runtime error as
> > "Variable does not exist" - This is better than Clipper which does
> > not throw an error at all, but I think a more meaningful error
> > message should be used like: "Attempt to update record while at EOF".
>
>I can imagine valid Clipper code which uses this behavior intentionally,
>f.e. to drop new record data by simple disabling APPEND BLANK instruction
>without interrupting the execution context so such modification
>will break it.
>If you need such functionality then you can make it yourself very
>easy using USRRDD library and overloading PUTVALUE method, f.e.
>see code below.
>
>best regards,
>Przemek
>
>
>
>
>#include "rddsys.ch"
>#include "hbusrrdd.ch"
>
>ANNOUNCE MYRDD
>REQUEST DBFCDX
>
>STATIC FUNCTION MYRDD_GenErorr( nWA, nField, xValue )
>    LOCAL oError
>    oError := ErrorNew()
>    oError:GenCode     := EG_UNSUPPORTED
>    oError:SubCode     := 9999
>    oError:Description := "Attempt to update record while at EOF"
>    oError:CanDefault  := .T.
>    UR_SUPER_ERROR( nWA, oError )
>    RETURN FAILURE
>
>STATIC FUNCTION MYRDD_PUTVALUE( nWA, nField, xValue )
>    IF EOF()
>       RETURN MYRDD_GenErorr()
>    ENDIF
>    RETURN UR_SUPER_LOCK( nWA, nField, xValue )
>
>FUNCTION MYRDD_GETFUNCTABLE( pFuncCount, pFuncTable, pSuperTable, nRddID )
>    LOCAL cSuperRDD := "DBFCDX" /* We are inheriting from DBFCDX */
>    LOCAL aMethods[ UR_METHODCOUNT ]
>    aMethods[ UR_PUTVALUE] := ( @MYRDD_PUTVALUE() )
>    RETURN USRRDD_GETFUNCTABLE( pFuncCount, pFuncTable, pSuperTable, nRddID, ;
>                                cSuperRDD, aMethods )
>
>INIT PROC MYRDD_INIT()
>    rddRegister( "MYRDD", RDT_FULL )
>    RETURN
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Mon Jul  7 17:29:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 17:30:06 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <B0081779035@ms1.3peaks.com>
References: <B0081779035@ms1.3peaks.com>
Message-ID: <DCBCC409-2145-4E75-B717-F8B87B55E702@syenar.hu>

Hi Randy and all,

I'd vote to make Harbour Clipper compatible, unless
we have a strong reason against this practice (like
the behaviour in Clipper is inconsistent or erroneous).

Brgds,
Viktor

On 2008.07.07., at 21:02, Randy Portnoff wrote:

> Hi all,
>
> When at EOF() and attempt to replace a field, get runtime error as  
> "Variable does not exist" - This is better than Clipper which does  
> not throw an error at all, but I think a more meaningful error  
> message should be used like: "Attempt to update record while at EOF".
>
> Regards,
> Randy.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rportnoff at spendmap.com  Mon Jul  7 17:33:51 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Jul  7 17:32:34 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <DCBCC409-2145-4E75-B717-F8B87B55E702@syenar.hu>
References: <B0081779035@ms1.3peaks.com>
	<DCBCC409-2145-4E75-B717-F8B87B55E702@syenar.hu>
Message-ID: <B0081782622@ms1.3peaks.com>

Hi Viktor,

IMO, it is a bug in Clipper - It should throw a runtime error - IOW, 
the app thinks it wrote data but the data was never written (ie. was 
lost) and therefore, that's a bug!

I see no practical reason why someone would want to do this AND I can 
see that a developer would want to know that it is happening.

Regards,
Randy.


At 05:29 PM 7/7/2008, you wrote:
>Hi Randy and all,
>
>I'd vote to make Harbour Clipper compatible, unless
>we have a strong reason against this practice (like
>the behaviour in Clipper is inconsistent or erroneous).
>
>Brgds,
>Viktor
>
>On 2008.07.07., at 21:02, Randy Portnoff wrote:
>
>>Hi all,
>>
>>When at EOF() and attempt to replace a field, get runtime error as
>>"Variable does not exist" - This is better than Clipper which does
>>not throw an error at all, but I think a more meaningful error
>>message should be used like: "Attempt to update record while at EOF".
>>
>>Regards,
>>Randy.
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From druzus at acn.waw.pl  Mon Jul  7 17:33:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 17:33:06 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <B0081782378@ms1.3peaks.com>
References: <B0081779035@ms1.3peaks.com>
	<20080707210740.GB5593@34-mo7-2.acn.waw.pl>
	<B0081782378@ms1.3peaks.com>
Message-ID: <20080707213301.GA18840@34-mo7-2.acn.waw.pl>

On Mon, 07 Jul 2008, Randy Portnoff wrote:
> Hi Przemek,
> I don't think you understand what I mean...
> In Clipper, if you attempt to update a record when at EOF (ie. by 
> mistake), it does NOT cause a runtime error (which is bad!).

Yes, it is.

> Harbour, 
> on the other hand, does generate a runtime error (which is good!).

No. Harbour doesn't generate RT error in such case. Maybe some RDDs
you are using make it but this are not core RDDs.
Probably you are using ADS RDD where we have:

   if( !pArea->fPositioned )
   {
      /* TODO: it should return SUCCESS for Clipper compatibility */
      return FAILURE;
   }

And this is Clipper incompatible behavior local to ADS RDD only
and which probably should be fixed by simple modification to:
   if( !pArea->fPositioned )
      return SUCCESS;
what will restore original Clipper behavior.

> However, what I am saying is that, the error message that Harbour 
> generates now (ie. "Variable does not exist") is misleading. I am 
> suggesting that is be re-worded to "Attempt to update record while at EOF".

So use the code I send to generate any error message you like.

> Does that make sense?

For me from the beginning :-) but I'm afraid you missed original
Harbour behavior.

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Jul  7 17:34:52 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Jul  7 17:34:55 2008
Subject: [Harbour] Harbour Online Help # 5
Message-ID: <18327155.post@talk.nabble.com>


Hello All

Please visit:

http://www.vouch.info/harbour

and click on any function. It will exapand to show you the source
of that function. Click again and it is collapsed. Please be patient
if page loading time is more as every source folder is documented 
in one file.

Still work-in-progress.

Opinions and comments are welcome! 

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---5-tp18327155p18327155.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rportnoff at spendmap.com  Mon Jul  7 17:41:39 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Jul  7 17:40:23 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <20080707213301.GA18840@34-mo7-2.acn.waw.pl>
References: <B0081779035@ms1.3peaks.com>
	<20080707210740.GB5593@34-mo7-2.acn.waw.pl>
	<B0081782378@ms1.3peaks.com>
	<20080707213301.GA18840@34-mo7-2.acn.waw.pl>
Message-ID: <B0081782739@ms1.3peaks.com>

Hi Przemek,

Ok, but I disagree with this one - IMO, it is a bug in Clipper which 
should not be Harbour.

Regards,
Randy.


At 05:33 PM 7/7/2008, you wrote:
>On Mon, 07 Jul 2008, Randy Portnoff wrote:
> > Hi Przemek,
> > I don't think you understand what I mean...
> > In Clipper, if you attempt to update a record when at EOF (ie. by
> > mistake), it does NOT cause a runtime error (which is bad!).
>
>Yes, it is.
>
> > Harbour,
> > on the other hand, does generate a runtime error (which is good!).
>
>No. Harbour doesn't generate RT error in such case. Maybe some RDDs
>you are using make it but this are not core RDDs.
>Probably you are using ADS RDD where we have:
>
>    if( !pArea->fPositioned )
>    {
>       /* TODO: it should return SUCCESS for Clipper compatibility */
>       return FAILURE;
>    }
>
>And this is Clipper incompatible behavior local to ADS RDD only
>and which probably should be fixed by simple modification to:
>    if( !pArea->fPositioned )
>       return SUCCESS;
>what will restore original Clipper behavior.
>
> > However, what I am saying is that, the error message that Harbour
> > generates now (ie. "Variable does not exist") is misleading. I am
> > suggesting that is be re-worded to "Attempt to update record while at EOF".
>
>So use the code I send to generate any error message you like.
>
> > Does that make sense?
>
>For me from the beginning :-) but I'm afraid you missed original
>Harbour behavior.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Mon Jul  7 17:56:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 17:57:41 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <B0081782622@ms1.3peaks.com>
References: <B0081779035@ms1.3peaks.com>
	<DCBCC409-2145-4E75-B717-F8B87B55E702@syenar.hu>
	<B0081782622@ms1.3peaks.com>
Message-ID: <B3D51D3B-B637-45FA-94CE-DF6958F9B331@syenar.hu>

> Hi Viktor,
>
> IMO, it is a bug in Clipper - It should throw a runtime error - IOW,  
> the app thinks it wrote data but the data was never written (ie. was  
> lost) and therefore, that's a bug!
>
> I see no practical reason why someone would want to do this AND I  
> can see that a developer would want to know that it is happening.

The problem is that some existing code can break if we
change this.

We cannot be exactly sure why the Clipper team has chosen
this way of working (maybe to maintain compatibility with
dBase), but it was surely intentional. It also seems consistent
that reads of fields when on EOF also don't return a RTE.
Moreover RLOCK() also returns .T. when on EOF (this is even
documented in the NG), which suggest that EOF is consistently
handled in a silent, "optimistic", "friendly" way all along
Clipper.

"Normal" app code should check for this condition IMO, before
writing to a record.

We could classify this a bug, if any of the CA shipped RDDs
would handle this matter inconsistently. (say DBFCDX in 5.3
would RTE).

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 18:09:28 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 18:09:31 2008
Subject: [Harbour] 2008-07-08 00:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e07e$Blat.v2.6.2$1fe0fcde$1d983b638b2c@127.0.0.1>

2008-07-08 00:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/compiler/genhrb.c
   * contrib/hbtip/utils.c
     ! Changed octal values in strings (and chars too) to make 
       these functions work with Pelles C 5.00.1.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul  7 18:19:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul  7 18:19:57 2008
Subject: [Harbour] 2008-07-07 17:41 UTC+0200 Viktor Szakats (harbour.01
	syenar hu) [2]
Message-ID: <A3A90C1F-B2E6-4331-B77E-23A81C93F203@syenar.hu>

Missed this change from the ChangeLog:

2008-07-07 17:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
    ...

    * source/rtl/hbffind.c
      ! Added workaround for PellesC 5.00.1 compiler bug
        (hang -> out of memory) when compiling a certain expression.

    ...
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Jul  7 18:35:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 18:35:45 2008
Subject: [Harbour] 2008-07-08 00:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807072235.m67MZe0W023473@31-mo5-4.acn.waw.pl>

2008-07-08 00:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapifs.h
  * harbour/include/hbdefs.h
  * harbour/source/rtl/console.c
  * harbour/source/rtl/philes.c
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/philes53.c
  * harbour/source/rtl/gtapi.c
  * harbour/source/rtl/filesys.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbsql.c
  * harbour/source/rdd/sdf1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/delim1.c
  * harbour/contrib/hbbmcdx/bmdbfcdx.c
    + added HB_NHANDLE
    + added hb_numToHandle() macro
    ! fixed WIN32 HANDLE to integer number conversions in Harbour file API
    ! fixed F_ERROR and FS_ERROR usage
    * added support for optional FHANDLE mapped to pointer instead of
      integer number - disable by default in hbdefs.h
      Now Harbour can be compiled with internal pointer and integer file
      handles (FHANDLE)

best regards
Przemek
From druzus at acn.waw.pl  Mon Jul  7 18:38:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 18:38:54 2008
Subject: [Harbour] 2008-07-08 00:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807072238.m67Mcox1023592@31-mo5-4.acn.waw.pl>

2008-07-08 00:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbdefs.h
    * disabled internal pointer handles I enabled by mistake for MS-WIN
      builds

best regards
Przemek
From druzus at acn.waw.pl  Mon Jul  7 20:27:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul  7 20:27:22 2008
Subject: [Harbour] 2008-07-08 02:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>

2008-07-08 02:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/runner.c
    + added support for passing non string parameters to .HRB INIT/<main>
      procedures/function
    + added automatic destructors for .HRB modules
    ; TOFIX: add protection against possible double executing of
      EXIT procedures in .HRB modules in HVM quit phase

best regards
Przemek
From jarabal at ya.com  Mon Jul  7 21:44:00 2008
From: jarabal at ya.com (Javier)
Date: Mon Jul  7 21:44:24 2008
Subject: [Harbour] Change in runner.c __HRBLOAD()
In-Reply-To: <20080707205314.GA5593@34-mo7-2.acn.waw.pl>
References: <4870C3D4.4010302@ya.com>	<20080707115646.GA14880@34-mo7-2.acn.waw.pl>	<4872672F.7040209@ya.com>
	<20080707205314.GA5593@34-mo7-2.acn.waw.pl>
Message-ID: <4872C660.2000406@ya.com>

Przemek,

IMHO: Yes, I think that it is better don't force the parameters to 
string and more thinking of the HRB's power.
I also think that it is very good solution pHrb in collectible pointer: 
very sure and avoid possibles memory leaks.
The only thing I dislike is having the new pHrbBodyGC of __hrbLoad() 
inside hb_stackReturnItem() and not be able to access without the hacks 
explained. Sincerely I believe that also hack inside __hrbLoad()  is 
more easier for the PRG's coders to have more control.

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> On Mon, 07 Jul 2008, Javier wrote:
>
> Hi Javier,
>
>   
>> If I have understood well I agree with best solution is automatic 
>> destructors for pHrb type pointer and them automatic call hb_hrbUnLoad() 
>> when release, in other words, do you plan to convert pHrb in collectible 
>> pointer?
>> pHrb := __hrbLoad(  cHrb )   // pHrb it's the unique instance (reference 
>> GC) of this hrb module
>> pHrb := nil   // call hb_hrbUnLoad() and free memory
>>     
>
> Exactly. It will be only necessary to implement clean method
> for executing EXIT procedures inside .hrb files or to be more
> precise: add protection against executing them twice when some
> .hrb modules are unloaded from EXIT procedures or in final item
> cleanup in hb_vmQuit(). In fact such protection should be added
> even for current code.
>
>   
>> Another thing that I don't understand, why be forced  the parameters to 
>> character as if are from the command line?
>> IMHO: This subtracts functionality and if they proceed of the command 
>> line also would be accepted.
>>     
>
> It was not my decision to accept only string parameters.
> I guess it was chosen to emulate standalone Clipper/Harbour
> application execute conditions where all parameters passed
> to application are strings and each INIT procedure receive
> their copy. If you think that it's good to allow also passing
> other item types then I can change the code. I can imagine
> some situations when it may be useful but of course code
> inside INIT procedures will have to be ready for such
> situations.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
From jarabal at ya.com  Mon Jul  7 22:15:34 2008
From: jarabal at ya.com (Javier)
Date: Mon Jul  7 22:15:58 2008
Subject: [Harbour] Change in runner.c __HRBLOAD()
In-Reply-To: <4872C660.2000406@ya.com>
References: <4870C3D4.4010302@ya.com>	<20080707115646.GA14880@34-mo7-2.acn.waw.pl>	<4872672F.7040209@ya.com>	<20080707205314.GA5593@34-mo7-2.acn.waw.pl>
	<4872C660.2000406@ya.com>
Message-ID: <4872CDC6.6010102@ya.com>

Sorry Przemek, I could not have read your changelog until after my post.
Tomorrow I see but... good work!. Thank you.

Best regards,
Xavi

Javier escribi?:
> Przemek,
>
> IMHO: Yes, I think that it is better don't force the parameters to 
> string and more thinking of the HRB's power.
> I also think that it is very good solution pHrb in collectible 
> pointer: very sure and avoid possibles memory leaks.
> The only thing I dislike is having the new pHrbBodyGC of __hrbLoad() 
> inside hb_stackReturnItem() and not be able to access without the 
> hacks explained. Sincerely I believe that also hack inside 
> __hrbLoad()  is more easier for the PRG's coders to have more control.
>
> Best regards,
> Xavi
>
> Przemyslaw Czerpak escribi?:
>> On Mon, 07 Jul 2008, Javier wrote:
>>
>> Hi Javier,
>>
>>  
>>> If I have understood well I agree with best solution is automatic 
>>> destructors for pHrb type pointer and them automatic call 
>>> hb_hrbUnLoad() when release, in other words, do you plan to convert 
>>> pHrb in collectible pointer?
>>> pHrb := __hrbLoad(  cHrb )   // pHrb it's the unique instance 
>>> (reference GC) of this hrb module
>>> pHrb := nil   // call hb_hrbUnLoad() and free memory
>>>     
>>
>> Exactly. It will be only necessary to implement clean method
>> for executing EXIT procedures inside .hrb files or to be more
>> precise: add protection against executing them twice when some
>> .hrb modules are unloaded from EXIT procedures or in final item
>> cleanup in hb_vmQuit(). In fact such protection should be added
>> even for current code.
>>
>>  
>>> Another thing that I don't understand, why be forced  the parameters 
>>> to character as if are from the command line?
>>> IMHO: This subtracts functionality and if they proceed of the 
>>> command line also would be accepted.
>>>     
>>
>> It was not my decision to accept only string parameters.
>> I guess it was chosen to emulate standalone Clipper/Harbour
>> application execute conditions where all parameters passed
>> to application are strings and each INIT procedure receive
>> their copy. If you think that it's good to allow also passing
>> other item types then I can change the code. I can imagine
>> some situations when it may be useful but of course code
>> inside INIT procedures will have to be ready for such
>> situations.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>   
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Tue Jul  8 02:06:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 02:06:18 2008
Subject: [Harbour] 2008-07-08 07:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e0c0$Blat.v2.6.2$b941b354$a908b7f20ac@127.0.0.1>

2008-07-08 07:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbodbc/odbc.c
     ! Fixed all ODBC handles to be pointers. This way it's Win64 
       compatible. This is an INCOMPATIBLE change. Since normal 
       app code is using ODBC error values to check for error 
       conditions, the type of handles shouldn't be a concern for 
       most app code.
       I'd ask everyone using hbodbc to do some tests.
     + TOFIXes added where deprecated (and potentially dangerous) 
       APIs are used.

   * contrib/hbw32/dllcall.c
     ! Using hb_parnint()/hb_retnint() instead of hb_parnl()/hb_retnl() 
       to make Harbour level .dll functions compatible with Win64, and 
       at the same time stay compatible with XBase++.

   * contrib/rddado/adordd.prg
     ! Fixed a few places where _SET_EXACT dependent string 
       comparisons were used. One of them could cause
       problems updating field values.

   * contrib/hbodbc/todbc.prg
     * Formatting.

   * contrib/hbodbc/tests/odbcdemo.prg
   * contrib/hbodbc/tests/odbccall.prg
   * contrib/hbodbc/tests/testodbc.prg
     ! Made them work out of the box.
     ; TOFIX: All of them gives "unrecognized database format" for harbour.mdb.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  8 02:37:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 02:37:45 2008
Subject: [Harbour] 2008-07-08 08:29 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e0c5$Blat.v2.6.2$1fc8d054$1e18bed51078@127.0.0.1>

2008-07-08 08:29 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbodbc/odbc.c
     ! Fixed compilation error with Pelles C 5.00.1.
     * Some formatting.

   * contrib/hbw32/dllcall.c
     + Two TOFIXes added for Win64 support.
     ! One Warning fixed under Win64.

   * contrib/hbfimage/make_gcc.sh
   * contrib/hbfimage/make_b32.bat
   * contrib/hbfimage/make_vc.bat
     ! Corrected to look in Dist subdir instead of 'source', 
       so that simple .dll ditribution is enough to compile.
--
Brgds,
Viktor

From dmacias at mail.udg.mx  Tue Jul  8 04:09:53 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Jul  8 04:09:49 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <487320D1.7030807@mail.udg.mx>

Any idea / hint / test ... in problem described below ?

David Macias


Harbour under OS/2 does not output to printer

Notice: I never tried to print with Harbour under OS/2 due I use it in
server side, which does not need to print, so this was a surprise

I use an old and complex system made in Clipper 5.3 in DOS session under
OS/2 and it print as usual
Now I ported it to Harbour under OS/2 and does not print

- Testing with harbour\tests\output.prg does not show output in printer

- This small code work (print) fine with Clipper but does not print with
Harbour
---------------
func main

SET PRINTER ON
? "Printing to default"
SET PRINTER OFF

SET PRINTER TO PRN
SET PRINTER ON
? "Printing to default (PRN)"
SET PRINTER OFF
SET PRINTER TO

SET PRINTER TO LPT1
SET PRINTER ON
? "Printing to LPT1"
SET PRINTER OFF
SET PRINTER TO

RETURN NIL
---------------

- Tested with older Harbour releases show the same: does not print

- From command line these output to printer as usual
   COPY test.txt LPT1:
   COPY test.txt PRN:

- harbour\source\rtl\set.c contain this code:
-----------------------------
#if defined(HB_OS_UNIX)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "|lpr" );
#elif defined(HB_OS_DOS)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "PRN" );
#elif defined(HB_OS_WIN_32)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "LPT1" );
#else
    hb_set.HB_SET_PRINTFILE = hb_strdup( "PRN" ); /* TOFIX */
#endif
-----------------------------

so OS/2 is using PRN as default, which work under command line

- These lines show correct values:
  QOUT( SET( _SET_PRINTER ) )     .F. / .T.
  QOUT( SET( _SET_PRINTFILE ) )   "PRN", "LPT1"


Any hints ?


David Macias



From mbelgrano at deltain.it  Tue Jul  8 04:11:59 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  8 04:12:15 2008
Subject: R: [Harbour] Harbour Online Help # 5
Message-ID: <000501c8e0d2$517df279$0400a8c0@deltain.net>

Good

Will be usefull 
a classification by kind of function (math,text,array)
A concept zone where i read what is rdd or clipper array before use. Most of this function are in harbour/doc
A sample of each function


----- Messaggio originale -----
Da: Pritpal Bedi <bedipritpal@hotmail.com>
Inviato: luned? 7 luglio 2008 23.35
A: harbour@harbour-project.org <harbour@harbour-project.org>
Oggetto: [Harbour] Harbour Online Help # 5


Hello All

Please visit:

http://www.vouch.info/harbour

and click on any function. It will exapand to show you the source
of that function. Click again and it is collapsed. Please be patient
if page loading time is more as every source folder is documented 
in one file.

Still work-in-progress.

Opinions and comments are welcome! 

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---5-tp18327155p18327155.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From sscc at mweb.co.za  Tue Jul  8 04:19:57 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Jul  8 04:20:10 2008
Subject: [Harbour] Re: RC2 checklist
In-Reply-To: <486D22C2.1050404@interia.pl>
References: <E95DB401-ED1A-43AE-84E3-D480E4F02659@syenar.hu>	<486CB505.1020701@interia.pl>
	<486D22C2.1050404@interia.pl>
Message-ID: <4873232D.1090908@mweb.co.za>

Marek Paliwoda wrote:

> As I mentioned some time ago I postponed implementing
> this solution after the release (if nobody does it
> quicker :)), so for RC2 I guess it is better to assume
> that we build Win64 binaries in CPP mode only. I don't
> think it's worth checking Paul's solution now if it
> is not going to be implemented at this moment.
> If anyone has a different opinion regarding implementing
> Paul's solution "now" vs "after the release" - please
> speak now :).

I think it should be done now.

Regards
Alex
From dbtopas at dbtopas.lt  Tue Jul  8 04:32:42 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jul  8 04:30:37 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <B0081782378@ms1.3peaks.com>
References: <B0081779035@ms1.3peaks.com>	<20080707210740.GB5593@34-mo7-2.acn.waw.pl>
	<B0081782378@ms1.3peaks.com>
Message-ID: <4873262A.5020503@dbtopas.lt>

Hi,


Randy Portnoff wrote:
> In Clipper, if you attempt to update a record when at EOF (ie. by 
> mistake), it does NOT cause a runtime error (which is bad!). 

It's great! My software uses macro. Macro can write to database. To test 
macro evaluation and avoid data to written to database during the test I 
set current workarea pointer to EOF, and I can evaluate macro safely.


> Harbour, on 
> the other hand, does generate a runtime error (which is good!).

I should test it, because it breaks my app logic. But I've not 
encountered problems until now with Harbour, so, I guess you are wrong 
and Harbour does not generate error too.


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Tue Jul  8 04:37:38 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 04:37:41 2008
Subject: [Harbour] 2008-07-08 10:34 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e0d5$Blat.v2.6.2$e1071dd8$1f08d3b33058@127.0.0.1>

2008-07-08 10:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/rddads/ads1.c
     ! Fixed to behave Clipper-like when trying to write 
       when on EOF position. This way a TODO is cleared in the 
       source.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Tue Jul  8 04:44:09 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jul  8 04:42:03 2008
Subject: [Harbour] "Variable does not exist" when at EOF()
In-Reply-To: <20080707213301.GA18840@34-mo7-2.acn.waw.pl>
References: <B0081779035@ms1.3peaks.com>	<20080707210740.GB5593@34-mo7-2.acn.waw.pl>	<B0081782378@ms1.3peaks.com>
	<20080707213301.GA18840@34-mo7-2.acn.waw.pl>
Message-ID: <487328D9.3090308@dbtopas.lt>

Hi,

> Probably you are using ADS RDD where we have:
> 
>    if( !pArea->fPositioned )
>    {
>       /* TODO: it should return SUCCESS for Clipper compatibility */
>       return FAILURE;
>    }
> 
> And this is Clipper incompatible behavior local to ADS RDD only
> and which probably should be fixed by simple modification to:
>    if( !pArea->fPositioned )
>       return SUCCESS;
> what will restore original Clipper behavior.


I think it should be fixed.



Best regards,
Mindaugas
From labitas at gmail.com  Tue Jul  8 05:29:02 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Tue Jul  8 05:29:08 2008
Subject: [Harbour] DBFCDX: Unrecoverable error 9201
Message-ID: <2386af1b0807080229r4b13f03ga5399de1a8003111@mail.gmail.com>

Hello,

Any hint how to avoid error:

Harbour 1.0.0RC2 Intl. (Rev. 8932)
Windows XP 5.1.2600 Service Pack 2
Page=0xa00, calc=-175, iFree=65, req=3, keys=141, keyLen=240

Unrecoverable error 9201: hb_cdxPageLeafEncode: FreeSpace calculated wrong!.

in this small code below

----------------
Proc Main
  Local i
  Field TEXT

 REQUEST DBFCDX
 RDDSETDEFAULT( 'DBFCDX' )

 ? Version()
 ? OS()

 dbCreate( 'test', { {'TEXT', 'C', 240, 0} } )
 USE 'test' EXCLUSIVE NEW

 For i := 1 to 140
   dbAppend()
 next

 INDEX ON TEXT TAG TAG1 TO TEST

 dbAppend()

Return
----------------

Regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080708/3542f94e/attachment.html
From druzus at acn.waw.pl  Tue Jul  8 08:13:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  8 08:13:37 2008
Subject: [Harbour] 2008-07-08 14:13 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807081213.m68CDV3S008926@31-mo5-4.acn.waw.pl>

2008-07-08 14:13 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbrddcdx.h
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    ! fixed casting for indexes with key length greater then 196 bytes
      created on tables with record number smaller then 256. In such
      case if keys have equal value then after decoding they may need
      more then 32767 bytes and casting to SHORT gives negative indexes.
      Thanks to Saulius Zrelskis for example.
    % changed some SHORT to INT to reduce runtime overhead

best regards
Przemek
From labitas at gmail.com  Tue Jul  8 08:40:14 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Tue Jul  8 08:40:21 2008
Subject: [Harbour] 2008-07-08 14:13 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807081213.m68CDV3S008926@31-mo5-4.acn.waw.pl>
References: <200807081213.m68CDV3S008926@31-mo5-4.acn.waw.pl>
Message-ID: <2386af1b0807080540v404998fep5b9c1726a37a6aaa@mail.gmail.com>

 * $Id: ChangeLog 8956 2008-07-08 12:13:30Z druzus $

After this change error vanishes
Thanks Przemek and

Best regards
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080708/f60b81f8/attachment.html
From harbour.01 at syenar.hu  Tue Jul  8 10:52:41 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 10:52:46 2008
Subject: [Harbour] 2008-07-08 16:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e10a$Blat.v2.6.2$45da08fe$19a81eb17248@127.0.0.1>

2008-07-08 16:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbw32/Makefile
   * contrib/hbw32/common.mak
   + contrib/hbw32/w32_osc.c
   + contrib/hbw32/w32_os.prg
     + Ported some Windows specific version detection and 
       networking checker/setup code. From Peter Rees/xhb:
       OS_ISWINNT()
       OS_ISWINNT351()
       OS_ISWINNT4()
       OS_ISWIN2000_OR_LATER()
       OS_ISWIN2000()
       OS_ISWINXP()
       OS_ISWIN2003()
       OS_ISWINVISTA()
       OS_ISWIN9X()
       OS_ISWIN95()
       OS_ISWIN98()
       OS_ISWINME()
       OS_ISWTSCLIENT()
       OS_VERSIONINFO()
       OS_NETREGOK()
       OS_NETVREDIROK()
--
Brgds,
Viktor

From mbelgrano at deltain.it  Tue Jul  8 11:37:25 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  8 11:37:31 2008
Subject: [Harbour] Harbour Online Help # 5
In-Reply-To: <000501c8e0d2$517df279$0400a8c0@deltain.net>
References: <000501c8e0d2$517df279$0400a8c0@deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE1A@SRV02.deltain.net>

Hi Pritpal 
a documentation is ready in minigui project ,you can download the chm at http://hmgs-minigui.cvs.sourceforge.net/*checkout*/hmgs-minigui/minigui/Harbour/doc/%28x%29harbour.chm or view html at http://www.oohg.org/manual/harbour/(x)harbour.html

what think about integrating this work in your works?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Tuesday, July 08, 2008 10:12 AM
To: Harbour Project Main Developer List.
Subject: R: [Harbour] Harbour Online Help # 5

Good

Will be usefull 
a classification by kind of function (math,text,array)
A concept zone where i read what is rdd or clipper array before use. Most of this function are in harbour/doc
A sample of each function


----- Messaggio originale -----
Da: Pritpal Bedi <bedipritpal@hotmail.com>
Inviato: luned? 7 luglio 2008 23.35
A: harbour@harbour-project.org <harbour@harbour-project.org>
Oggetto: [Harbour] Harbour Online Help # 5


Hello All

Please visit:

http://www.vouch.info/harbour

and click on any function. It will exapand to show you the source
of that function. Click again and it is collapsed. Please be patient
if page loading time is more as every source folder is documented 
in one file.

Still work-in-progress.

Opinions and comments are welcome! 

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---5-tp18327155p18327155.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Tue Jul  8 11:46:16 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  8 11:46:22 2008
Subject: [Harbour] decoding base64
In-Reply-To: <001f01c8df56$954de230$b48f7a56@compika>
References: <001801c8df2e$914a6280$b48f7a56@compika><AFB948164110ED43B5EB849E8DEEF03815EE03@SRV02.deltain.net>
	<001f01c8df56$954de230$b48f7a56@compika>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE1B@SRV02.deltain.net>

http://libb64.sourceforge.net



From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Xccs-project
Sent: Sunday, July 06, 2008 12:54 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] decoding base64

Hy Massimo!
?
Many thanks, but i don't download the library, the page has been opened, but when i click on the download link, then generate error.
Can you send the pack, or the sourcecode send me in mail?
I use harbour width minigui under win32 and gcc compiler.
Thanks!
?
?
??????????????????? Peti
?
?
----- Original Message ----- 
From: Massimo Belgrano 
To: Harbour Project Main Developer List. 
Sent: Sunday, July 06, 2008 11:42 AM
Subject: RE: [Harbour] decoding base64

libb64 is a library of ANSI C routines for fast encoding/decoding data into and from a base64-encoded format. C++ wrappers are included, as well as the source code for standalone encoding and decoding executables.
http://nixbit.com/cat/programming/libraries/libb64/


From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Xccs-project
Sent: Sunday, July 06, 2008 8:07 AM
To: harbour@harbour-project.org
Subject: [Harbour] decoding base64

Hy to All!
?
I have a problem, it is big me:
I made an e-mailclient,?i use tpop3, tsmtp and tdecode classes.
In the tdecode class found a method to encoding base64, it is the encode64, but the decode64 method doesn't exists. How can i decoding a base64 text?
Have the decode method of tdecode class some parameter, witch cann define the coding method, base64 or quoted printable?
Or in the constructor method can i set it?
It is verry inportant for me, also, if somebodi knows the answer, please write to me, and if have an example, please write to me too!
S.O.S.
?
Many thanks for the help!
?
Have everybody a nice day!
?
??? ??? ??? ??? Peti
?
?
________________________________________
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From dbtopas at dbtopas.lt  Tue Jul  8 12:04:23 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jul  8 12:02:19 2008
Subject: [Harbour] ChangeLog 2008-07-08 19:03 UTC+0300 Mindaugas Kavaliauskas
Message-ID: <48739007.9090104@dbtopas.lt>

2008-07-08 19:03 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * contrib/hbmzip/hbmzip.c
     + implemented file date/time get/set for OS2
     ; TODO: DOS implementation is still missing
     ; Implementation is not tested!


David Macias wrote:
> [E:\harbour807\harbour\tests]myzip.exe pba myzip.exe
> 
> Archive file: pba.zip
> Adding myzip.exe
> [E:\harbour807\harbour\tests]unzip -l pba.zip
> Archive:  pba.zip
>   Length     EAs   ACLs    Date   Time    Name
>  --------    ---   ----    ----   ----    ----
>   1199071      0      0  00-01-80 00:00   myzip.exe
>  --------  -----  -----                   -------
>   1199071      0      0                   1 file
> 
> [E:\harbour807\harbour\tests] myunzip pba.zip myzip.exe
> 
> Archive file: pba.zip
> 
> Filename                         Date     Time          Size Compressed  Action
> --------------------------------------------------------------------------------
> -
> myzip.exe                        /  /   00:00:00    1199071     361254 Extracting 

Please test now.


Best regards,
Mindaugas
From mbelgrano at deltain.it  Tue Jul  8 12:13:23 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  8 12:13:35 2008
Subject: [Harbour] harbour xharbour comparision by ohloh
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE1C@SRV02.deltain.net>

http://www.ohloh.net/projects/compare?project_0=harbour+project&project_
1=xHarbour+Extended+Harbour+Compiler&project_2=&submit=Go

Massimo Belgrano

From druzus at acn.waw.pl  Tue Jul  8 12:51:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  8 12:51:30 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <487320D1.7030807@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<487320D1.7030807@mail.udg.mx>
Message-ID: <20080708165125.GA5710@34-mo7-2.acn.waw.pl>

On Tue, 08 Jul 2008, David Arturo Macias Corona wrote:

Hi David,

> Harbour under OS/2 does not output to printer
> Notice: I never tried to print with Harbour under OS/2 due I use it in
> server side, which does not need to print, so this was a surprise

Have you tried xHarbour?
Such printing uses normal file API. In xHarbour Maurilio changed open()
function used by hb_fsOpen() to OS2 API DosOpen() combined with _imphandle()

   2006-06-06 09:58 UTC+0200 Maurilio Longo <maurilio.longo@libero.it>
      * source/rtl/filesys.c
        + added HB_OS2_IO sections to work around a GCC 'feature' on OS/2
          which makes it fail to open/create files on filesystems which do
          not support extended attributes (EAs).

It's possible that this modification resolves the problem.
Anyhow if possible I would like to also ask you to make tests
with file range locking with Harbour and xHarbour. F.e. try
to check if RLOCK set by one process is visible by other, f.e.
in this code:

   proc main()
      if !dbExists("_tst")
         ? "Create table"
         dbCreate("_tst",{{"F1","C",1,0}})
         use _tst
         dbappend()
         close
      endif
      use _tst shared
      dbgoto(1)
      ? "Locking record 1:", dbRlock()
      inkey(0)
   return

I'm not OS2 user/programmer and it's not clear for me reading OS2
API if it is possible to set file range locking without HLockID handler
returned by DosProtectOpen(). If _imphandle() cannot retrieve it
internally from OS structures then probably not.
If locking works correctly in xHarbour then I'll add Maurilio's
modifications to Harbour OS2/GCC builds.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Jul  8 12:58:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  8 12:58:53 2008
Subject: [Harbour] HBCURL - some questions
Message-ID: <20080708165848.GB5710@34-mo7-2.acn.waw.pl>

Hi Viktor,

I've got two questions about current HBCURL status:

1. You left in the code:

      #if LIBCURL_VERSION_NUM < 0x071100
         #error hbcurl: Harbour hbcurl needs libcurl 7.17.0 or upper.
      #endif

   Anyhow after your modifications it can be cleanly compiled also
   with older CURL library versions (I tested 7.16.4). Are such builds
   functional in the part which is supported by earlier CURL versions.
   If yes then why we keep above #error message?

2. The memory mapping is not redirected to Harbour hb_x*() memory
   functions. I can see in the code:

   #ifdef _HB_CURL_REDEF_MEM
   /* NOTE/TOFIX: _HB_CURL_REDEF_MEM doesn't work at this moment, as hb_xgrab() is
                  getting pointers not allocated by our allocators. [vszakats] */
   [...]

   It's not clear for me what the above note means.
   Can you tell me more precisely what is wrong?

best regards,
Przemek
From maurilio.longo at libero.it  Tue Jul  8 13:02:13 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Jul  8 13:02:18 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <20080708165125.GA5710@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<487320D1.7030807@mail.udg.mx>
	<20080708165125.GA5710@34-mo7-2.acn.waw.pl>
Message-ID: <48739D95.9070701@libero.it>

Przemyslaw,

Locking works ok on xHarbour, I'm using it extensively on files shared between
  OS/2, DOS and win32 processes which handle files on a mars_nwe volume.

I think that my fix to filesys.c is superceded by newer GCC versions, but I
did not test this extensively given that the present code seems to work OK.

Best regards.

Maurilio.

BTW, You don't need to call DosProtectOpen() to make a lock, a DosOpen()ed
file can be locked as well, see xharbour filesys.c line 2496 for example.

Przemyslaw Czerpak wrote:
> On Tue, 08 Jul 2008, David Arturo Macias Corona wrote:
> 
> Hi David,
> 
>> Harbour under OS/2 does not output to printer
>> Notice: I never tried to print with Harbour under OS/2 due I use it in
>> server side, which does not need to print, so this was a surprise
> 
> Have you tried xHarbour?
> Such printing uses normal file API. In xHarbour Maurilio changed open()
> function used by hb_fsOpen() to OS2 API DosOpen() combined with _imphandle()
> 
>    2006-06-06 09:58 UTC+0200 Maurilio Longo <maurilio.longo@libero.it>
>       * source/rtl/filesys.c
>         + added HB_OS2_IO sections to work around a GCC 'feature' on OS/2
>           which makes it fail to open/create files on filesystems which do
>           not support extended attributes (EAs).
> 
> It's possible that this modification resolves the problem.
> Anyhow if possible I would like to also ask you to make tests
> with file range locking with Harbour and xHarbour. F.e. try
> to check if RLOCK set by one process is visible by other, f.e.
> in this code:
> 
>    proc main()
>       if !dbExists("_tst")
>          ? "Create table"
>          dbCreate("_tst",{{"F1","C",1,0}})
>          use _tst
>          dbappend()
>          close
>       endif
>       use _tst shared
>       dbgoto(1)
>       ? "Locking record 1:", dbRlock()
>       inkey(0)
>    return
> 
> I'm not OS2 user/programmer and it's not clear for me reading OS2
> API if it is possible to set file range locking without HLockID handler
> returned by DosProtectOpen(). If _imphandle() cannot retrieve it
> internally from OS structures then probably not.
> If locking works correctly in xHarbour then I'll add Maurilio's
> modifications to Harbour OS2/GCC builds.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Tue Jul  8 13:24:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  8 13:24:28 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <48739D95.9070701@libero.it>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<487320D1.7030807@mail.udg.mx>
	<20080708165125.GA5710@34-mo7-2.acn.waw.pl>
	<48739D95.9070701@libero.it>
Message-ID: <20080708172423.GA6053@34-mo7-2.acn.waw.pl>

On Tue, 08 Jul 2008, Maurilio Longo wrote:

Hi Maurilio,

> Locking works ok on xHarbour, I'm using it extensively on files shared between
>   OS/2, DOS and win32 processes which handle files on a mars_nwe volume.

This may work because it uses different internal API. The client requests
are translated to NetWare protocol and send to mars. BTW I still haven't
public 63 bit POSIX locking patches for mars so you should not use CL53
or HB64 locks in such installations.

> I think that my fix to filesys.c is superceded by newer GCC versions, but I
> did not test this extensively given that the present code seems to work OK.

What GCC version you are talking about?
David's report suggests that code like:

   proc main()
      local hFile, cFile, cData
      cFile := "PRN"
      cData := "Printer test" + hb_osNewLine() + ;
               Version() + hb_osNewLine() + ;
               Os() + hb_osNewLine() + ;
               DTOC( Date() ) + " " + Time() + hb_osNewLine() + ;
               Chr( 12 )
      if ( hFile := fopen( cFile, 2 ) ) != -1
         ? "Writting to", cFile
         ? "Bytes written:", fwrite( hFile, cData, len( cData ) ), ;
           "from:", len( cData )
         fclose( hFile )
      else
         ? "Cannot open:", cFile
      endif
   return

does not work.

Does it work for you for printers connected to local computers?

> BTW, You don't need to call DosProtectOpen() to make a lock, a DosOpen()ed
> file can be locked as well, see xharbour filesys.c line 2496 for example.

Thank you very much. I missed it. I guess that it will work also for
local filesystems between processes.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jul  8 14:34:02 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 14:34:56 2008
Subject: [Harbour] HBCURL - some questions
In-Reply-To: <20080708165848.GB5710@34-mo7-2.acn.waw.pl>
References: <20080708165848.GB5710@34-mo7-2.acn.waw.pl>
Message-ID: <821DD03E-4156-41FD-AD27-99B2860D55AA@syenar.hu>

Hi Przemek,

> 1. You left in the code:
>
>      #if LIBCURL_VERSION_NUM < 0x071100
>         #error hbcurl: Harbour hbcurl needs libcurl 7.17.0 or upper.
>      #endif
>
>   Anyhow after your modifications it can be cleanly compiled also
>   with older CURL library versions (I tested 7.16.4). Are such builds
>   functional in the part which is supported by earlier CURL versions.
>   If yes then why we keep above #error message?

The reason is that starting 7.17.0 libcurl handles passed strings
to curl_easy_setopt() differently so that it automatically makes
a copy of the passed string and deals with the management of that.
Previous versions required a static buffer to be passed, so in my
understanding, hb_parc[x]() return values couldn't be used safely.

See:
http://curl.haxx.se/libcurl/c/curl_easy_setopt.html
[ DESCRIPTION / NOTE ]

> 2. The memory mapping is not redirected to Harbour hb_x*() memory
>   functions. I can see in the code:
>
>   #ifdef _HB_CURL_REDEF_MEM
>   /* NOTE/TOFIX: _HB_CURL_REDEF_MEM doesn't work at this moment, as  
> hb_xgrab() is
>                  getting pointers not allocated by our allocators.  
> [vszakats] */
>   [...]
>
>   It's not clear for me what the above note means.
>   Can you tell me more precisely what is wrong?

If you enable _HB_CURL_REDEF_MEM, and have FM stats enabled,
Harbour will show an internal error saying that an attempt
was made to realloc or free an invalid buffer. Which to me
suggested that the buffer was not allocated by an hb_x*()
call. This behaviour could be seen when running some simple
program.

But:

I've retested now (with libcurl 7.18.1), and I cannot replicate
it anymore, so it might well be caused by something we've
cleared up in the many cleanups since my NOTE/TOFIX.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  8 14:44:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 14:44:33 2008
Subject: [Harbour] 2008-07-08 20:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e12a$Blat.v2.6.2$a76a0b80$14d498db931a@127.0.0.1>

2008-07-08 20:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
     ! CURL_EASY_GETINFO() will now return the proper type 
       (with an empty value) if the given info type is not 
       supported in the libcurl version used at build-time.
       (This makes the test program not crash after latest 
       hbcurl changes.)
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul  8 14:55:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 14:56:11 2008
Subject: [Harbour] BUG: GETENV() possible HVM corruption
Message-ID: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>

Hi all,

There seems to be a potential HVM corruption
in GETENV() where the buffer returned by hb_itemGetC()
is written into.

I've seen GPFs multiple times in this function in
my application log. (which may be caused by something
else too of course).

HB_GETENV() and GETE() are also affected.

Brgds,
Viktor

From bedipritpal at hotmail.com  Tue Jul  8 15:49:16 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Jul  8 15:49:20 2008
Subject: [Harbour] Harbour Online Help # 6
Message-ID: <18347551.post@talk.nabble.com>


Hello All

http://www.vouch.info/harbour

! Cleaned comments at the begining and end of a function body.
  Still to deal with /**/ comments.
! Changed HTML layout internally. Now help manual is 
  considerably shortened in size.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---6-tp18347551p18347551.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Tue Jul  8 15:56:16 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  8 15:56:23 2008
Subject: [Harbour] where can i post harbour.chm?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE1E@SRV02.deltain.net>

i have good documentation regarding harbour as chm/html
http://www.oohg.org/manual/harbour/(x)harbour.html

Can I post?
Where?
\harbour\Contrib\docu?
Harbour website?

Da: Janusz [mailto:januszpora@onet.eu] 
Inviato: marted? 8 luglio 2008 20.59
A: Massimo Belgrano
Oggetto: Re: little request for Janusz

Hi Massimo.
You have my agreement on upload on Harbour csv.
I have only version CHM at present, but I can generate version source html, which version interests you?
I can update documentation if I get suitable sources.
Kind regards
Janusz Pora
?


"Massimo Belgrano" napisa?(a): 
Hi Janusz
I have seen your contribution to minigui ??of(x) harbour.chm
Compliment is good
Can you contribute to harbour with this doc?
http://lists.harbour-project.org/mailman/listinfo/harbour
if you send me permission & file I can uploadto harbour cvs
How can made an updated x) harbour chm or x)harbour pdf ?
Thanks in advance and sorry for my badenglish
Massimo Belgrano

From abe.buch at att.net  Tue Jul  8 16:30:14 2008
From: abe.buch at att.net (Abeb)
Date: Tue Jul  8 16:30:17 2008
Subject: [Harbour] Howto gtwvt
Message-ID: <18348389.post@talk.nabble.com>


Hi All Of You,
First let me thank all of you for this GREAT work. THANKS.

I'm trying to expirement with gtwvt.

What moduals need to be linked in to use this GT (using Borland)?

Thanks
Abe


-- 
View this message in context: http://www.nabble.com/Howto-gtwvt-tp18348389p18348389.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Tue Jul  8 16:39:34 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  8 16:39:39 2008
Subject: R: [Harbour] Howto gtwvt
In-Reply-To: <18348389.post@talk.nabble.com>
References: <18348389.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE1F@SRV02.deltain.net>

First Read doc in doc\gtapi.txt
Second you must link Gtwvt.lib and any other gt that you wand use with gtwvt thank to multigt architecture 

Massimo Belgrano
Albo Nazionale Informatici Professionisti n? 2620
Socio n? 2843 Associazione Informatici Professionisti

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.? http://www.deltain.it 
Via Torelli , 31 - 28100 Novara - Tel: 0321/30281

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Abeb
Inviato: marted? 8 luglio 2008 22.30
A: harbour@harbour-project.org
Oggetto: [Harbour] Howto gtwvt


Hi All Of You,
First let me thank all of you for this GREAT work. THANKS.

I'm trying to expirement with gtwvt.

What moduals need to be linked in to use this GT (using Borland)?

Thanks
Abe


-- 
View this message in context: http://www.nabble.com/Howto-gtwvt-tp18348389p18348389.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From abe.buch at att.net  Tue Jul  8 16:46:51 2008
From: abe.buch at att.net (Abeb)
Date: Tue Jul  8 16:46:58 2008
Subject: [Harbour] R: Howto gtwvt
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE1F@SRV02.deltain.net>
References: <18348389.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815EE1F@SRV02.deltain.net>
Message-ID: <18348714.post@talk.nabble.com>


i get a dialog box say It's not a GUI program


Massimo Belgrano-3 wrote:
> 
> First Read doc in doc\gtapi.txt
> Second you must link Gtwvt.lib and any other gt that you wand use with
> gtwvt thank to multigt architecture 
> 
> Massimo Belgrano
> Albo Nazionale Informatici Professionisti n? 2620
> Socio n? 2843 Associazione Informatici Professionisti
> 
> Analisi e sviluppo software per Lan e Web
> Consulenza informatica - Formazione
> Delta Informatica S.r.l.? http://www.deltain.it 
> Via Torelli , 31 - 28100 Novara - Tel: 0321/30281
> 
> -----Messaggio originale-----
> Da: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] Per conto di Abeb
> Inviato: marted? 8 luglio 2008 22.30
> A: harbour@harbour-project.org
> Oggetto: [Harbour] Howto gtwvt
> 
> 
> Hi All Of You,
> First let me thank all of you for this GREAT work. THANKS.
> 
> I'm trying to expirement with gtwvt.
> 
> What moduals need to be linked in to use this GT (using Borland)?
> 
> Thanks
> Abe
> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/Howto-gtwvt-tp18348389p18348389.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Howto-gtwvt-tp18348389p18348714.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Jul  8 16:57:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul  8 16:57:20 2008
Subject: [Harbour] HBCURL - some questions
In-Reply-To: <821DD03E-4156-41FD-AD27-99B2860D55AA@syenar.hu>
References: <20080708165848.GB5710@34-mo7-2.acn.waw.pl>
	<821DD03E-4156-41FD-AD27-99B2860D55AA@syenar.hu>
Message-ID: <20080708205715.GA14304@34-mo7-2.acn.waw.pl>

On Tue, 08 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> The reason is that starting 7.17.0 libcurl handles passed strings
> to curl_easy_setopt() differently so that it automatically makes
> a copy of the passed string and deals with the management of that.
> Previous versions required a static buffer to be passed, so in my
> understanding, hb_parc[x]() return values couldn't be used safely.
> See:
> http://curl.haxx.se/libcurl/c/curl_easy_setopt.html
> [ DESCRIPTION / NOTE ]

Thank you for information.
Yes, hb_parc() is not safe though if it's the only one problem then
we can document it and your will have to resolve the problem himself,
f.e. by keeping string parameters in some array at .prg level.
I do not like it but if newer curl versions does not need such
condition then I do not think it's worth to update hbcurl.c code
for older versions and make it fully safe at .c level. If you think
it's worth then it will be enough to use hash table for string just
like the one we have in compilers for identifiers.

> If you enable _HB_CURL_REDEF_MEM, and have FM stats enabled,
> Harbour will show an internal error saying that an attempt
> was made to realloc or free an invalid buffer. Which to me
> suggested that the buffer was not allocated by an hb_x*()
> call. This behaviour could be seen when running some simple
> program.
> But:
> I've retested now (with libcurl 7.18.1), and I cannot replicate
> it anymore, so it might well be caused by something we've
> cleared up in the many cleanups since my NOTE/TOFIX.

There was a bug in calloc() wrapper: the returned memory block
was not cleared with 0 bytes. Now it's fixed and maybe it resolved
the problem.
BTW maybe we should add hb_xcalloc()/hb_xcgrab() to fm.c?
The second potential problem which can appear in such redirecting
is behavior of our hb_xrealloc() function which is not ANSI-C
compatible:

   hb_xrealloc( NULL, <nSize> )

should work like:

   hb_xgrab( <nSize> ) or hb_xalloc( <nSize> )

but in Harbour it makes:

   hb_errInternal( HB_EI_XREALLOCNULL, NULL, NULL, NULL );

and:

   hb_xrealloc( <ptr>, 0 )

should work like:

   hb_xfree( <ptr> ) returning NULL;

but in Harbour it makes:

   hb_errInternal( HB_EI_XREALLOCNULLSIZE, NULL, NULL, NULL );


This realloc() behavior is really nice and in the past I often
used it because it simplifies upper level code.
When I begin to work on [x]Harbour I have to drop my habits
due to this internal errors (I even committed not working code
few times in the past).
I do not know if these internal errors are Clipper compatible.
If they aren't then I suggest to remove them.
Meanwhile hb_curl_xrealloc() should look like:

   void * hb_curl_xrealloc( void * p, size_t size )
   {
      if( p == NULL )
      {
         return hb_xgrab( size );
      }
      else if( size == 0 )
      {
         hb_xfree( p );
         return NULL;
      }
      return hb_xrealloc( p, size );
   }

I think that with such version it should work correctly in all cases.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jul  8 17:39:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 17:40:37 2008
Subject: [Harbour] HBCURL - some questions
In-Reply-To: <20080708205715.GA14304@34-mo7-2.acn.waw.pl>
References: <20080708165848.GB5710@34-mo7-2.acn.waw.pl>
	<821DD03E-4156-41FD-AD27-99B2860D55AA@syenar.hu>
	<20080708205715.GA14304@34-mo7-2.acn.waw.pl>
Message-ID: <BBC398F6-B379-4401-B761-BF09086E16E6@syenar.hu>

Hi Przemek,

>> The reason is that starting 7.17.0 libcurl handles passed strings
>> to curl_easy_setopt() differently so that it automatically makes
>> a copy of the passed string and deals with the management of that.
>> Previous versions required a static buffer to be passed, so in my
>> understanding, hb_parc[x]() return values couldn't be used safely.
>> See:
>> http://curl.haxx.se/libcurl/c/curl_easy_setopt.html
>> [ DESCRIPTION / NOTE ]
>
> Thank you for information.
> Yes, hb_parc() is not safe though if it's the only one problem then
> we can document it and your will have to resolve the problem himself,
> f.e. by keeping string parameters in some array at .prg level.
> I do not like it but if newer curl versions does not need such
> condition then I do not think it's worth to update hbcurl.c code
> for older versions and make it fully safe at .c level. If you think
> it's worth then it will be enough to use hash table for string just
> like the one we have in compilers for identifiers.

It was not very important for me, since I currently use it
for Windows where the newest version is easily available.
Ubuntu 8.04 also has it now. It would be more elegant to
solve this on the C level IMO, but I didn't have enough
skills to solve this effortlessly (and elegantly) enough.

>> If you enable _HB_CURL_REDEF_MEM, and have FM stats enabled,
>> Harbour will show an internal error saying that an attempt
>> was made to realloc or free an invalid buffer. Which to me
>> suggested that the buffer was not allocated by an hb_x*()
>> call. This behaviour could be seen when running some simple
>> program.
>> But:
>> I've retested now (with libcurl 7.18.1), and I cannot replicate
>> it anymore, so it might well be caused by something we've
>> cleared up in the many cleanups since my NOTE/TOFIX.
>
> There was a bug in calloc() wrapper: the returned memory block
> was not cleared with 0 bytes. Now it's fixed and maybe it resolved
> the problem.

Yes, this is a good candidate, it might also have been some
hb_parptrGC related problem, which showed itself like this.

If you don't see any problems around, we might enable this
by default now.

> BTW maybe we should add hb_xcalloc()/hb_xcgrab() to fm.c?

I think we should. Maybe the name would better be like
hb_xallocz()/hb_xgrabz() to make it easier to grep and
align by alphabet with existing ones.

> The second potential problem which can appear in such redirecting
> is behavior of our hb_xrealloc() function which is not ANSI-C
> compatible:
>
>   hb_xrealloc( NULL, <nSize> )
>
> should work like:
>
>   hb_xgrab( <nSize> ) or hb_xalloc( <nSize> )
>
> but in Harbour it makes:
>
>   hb_errInternal( HB_EI_XREALLOCNULL, NULL, NULL, NULL );
>
> and:
>
>   hb_xrealloc( <ptr>, 0 )
>
> should work like:
>
>   hb_xfree( <ptr> ) returning NULL;
>
> but in Harbour it makes:
>
>   hb_errInternal( HB_EI_XREALLOCNULLSIZE, NULL, NULL, NULL );
>
>
> This realloc() behavior is really nice and in the past I often
> used it because it simplifies upper level code.
> When I begin to work on [x]Harbour I have to drop my habits
> due to this internal errors (I even committed not working code
> few times in the past).

Good idea to make it ANSI C-like.

> I do not know if these internal errors are Clipper compatible.

In Clipper there is no public realloc function, so modifying
it is not a compatibility issue. Functionally it also wouldn't
break any code.

> If they aren't then I suggest to remove them.

I agree.

> Meanwhile hb_curl_xrealloc() should look like:
>
>   void * hb_curl_xrealloc( void * p, size_t size )
>   {
>      if( p == NULL )
>      {
>         return hb_xgrab( size );
>      }
>      else if( size == 0 )
>      {
>         hb_xfree( p );
>         return NULL;
>      }
>      return hb_xrealloc( p, size );
>   }
>
> I think that with such version it should work correctly in all cases.

Hm, great. I'd let you modify hb_xrealloc() to work
the standard way, then I can enable this code as it is now.

Brgds,
Viktor

From mbelgrano at deltain.it  Tue Jul  8 18:13:14 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul  8 18:13:20 2008
Subject: [Harbour] R: Howto gtwvt
In-Reply-To: <18348714.post@talk.nabble.com>
References: <18348389.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815EE1F@SRV02.deltain.net>
	<18348714.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE21@SRV02.deltain.net>

This is my sample
-------------------------------------------BLD_B32A.BAT
@echo off
rem
rem $Id: bld_b32.bat 8467 2008-05-21 11:45:42Z vszakats $
rem
if "%HB_BIN_INSTALL%" == "" set HB_BIN_INSTALL=..\..\..\bin
if "%HB_LIB_INSTALL%" == "" set HB_LIB_INSTALL=..\..\..\lib
if "%HB_INC_INSTALL%" == "" set HB_INC_INSTALL=..\..\..\include
set HB_ARCHITECTURE=w32
set HB_COMPILER=bcc32
set HB_USER_LIBS=gtwvt.lib 
SET CFLAGS= -tW -a8 -OS -O2 -5 -6 
call %HB_BIN_INSTALL%\bld.bat %1 %2 %3 %4 %5 %6 %7 %8 %9

----------------------------------------------------TEST.PRG
#include "INKEY.CH"

    REQUEST HB_GT_WVT
    REQUEST HB_GT_WVT_DEFAULT
   

PROCEDURE main
   ? HB_GTVERSION(), HB_GTVERSION(1)
       TONE( 200, 3 )
       TONE( 300, 3 )
       TONE( 500, 3 )
       Name=space(30)
       @ 2,2 SAY "Name" get name
       Read
       @ 3,2 say "Hello "+name
       INKEY( 0 )
    RETURN
-------------------------
BLD_B32A TEST
-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Abeb
Sent: Tuesday, July 08, 2008 10:47 PM
To: harbour@harbour-project.org
Subject: Re: [Harbour] R: Howto gtwvt


i get a dialog box say It's not a GUI program


Massimo Belgrano-3 wrote:
> 
> First Read doc in doc\gtapi.txt
> Second you must link Gtwvt.lib and any other gt that you wand use with
> gtwvt thank to multigt architecture 
> 
> Massimo Belgrano
> Albo Nazionale Informatici Professionisti n? 2620
> Socio n? 2843 Associazione Informatici Professionisti
> 
> Analisi e sviluppo software per Lan e Web
> Consulenza informatica - Formazione
> Delta Informatica S.r.l.? http://www.deltain.it 
> Via Torelli , 31 - 28100 Novara - Tel: 0321/30281
> 
> -----Messaggio originale-----
> Da: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] Per conto di Abeb
> Inviato: marted? 8 luglio 2008 22.30
> A: harbour@harbour-project.org
> Oggetto: [Harbour] Howto gtwvt
> 
> 
> Hi All Of You,
> First let me thank all of you for this GREAT work. THANKS.
> 
> I'm trying to expirement with gtwvt.
> 
> What moduals need to be linked in to use this GT (using Borland)?
> 
> Thanks
> Abe
> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/Howto-gtwvt-tp18348389p18348389.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Howto-gtwvt-tp18348389p18348714.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From abe.buch at att.net  Tue Jul  8 18:29:58 2008
From: abe.buch at att.net (Abeb)
Date: Tue Jul  8 18:30:02 2008
Subject: [Harbour] R: Howto gtwvt
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE21@SRV02.deltain.net>
References: <18348389.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815EE1F@SRV02.deltain.net>
	<18348714.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815EE21@SRV02.deltain.net>
Message-ID: <18350534.post@talk.nabble.com>


Thanks alot
it's th cflags i was missing (-tW)
Thanks



Massimo Belgrano-3 wrote:
> 
> This is my sample
> -------------------------------------------BLD_B32A.BAT
> @echo off
> rem
> rem $Id: bld_b32.bat 8467 2008-05-21 11:45:42Z vszakats $
> rem
> if "%HB_BIN_INSTALL%" == "" set HB_BIN_INSTALL=..\..\..\bin
> if "%HB_LIB_INSTALL%" == "" set HB_LIB_INSTALL=..\..\..\lib
> if "%HB_INC_INSTALL%" == "" set HB_INC_INSTALL=..\..\..\include
> set HB_ARCHITECTURE=w32
> set HB_COMPILER=bcc32
> set HB_USER_LIBS=gtwvt.lib 
> SET CFLAGS= -tW -a8 -OS -O2 -5 -6 
> call %HB_BIN_INSTALL%\bld.bat %1 %2 %3 %4 %5 %6 %7 %8 %9
> 
> ----------------------------------------------------TEST.PRG
> #include "INKEY.CH"
> 
>     REQUEST HB_GT_WVT
>     REQUEST HB_GT_WVT_DEFAULT
>    
> 
> PROCEDURE main
>    ? HB_GTVERSION(), HB_GTVERSION(1)
>        TONE( 200, 3 )
>        TONE( 300, 3 )
>        TONE( 500, 3 )
>        Name=space(30)
>        @ 2,2 SAY "Name" get name
>        Read
>        @ 3,2 say "Hello "+name
>        INKEY( 0 )
>     RETURN
> -------------------------
> BLD_B32A TEST
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Abeb
> Sent: Tuesday, July 08, 2008 10:47 PM
> To: harbour@harbour-project.org
> Subject: Re: [Harbour] R: Howto gtwvt
> 
> 
> i get a dialog box say It's not a GUI program
> 
> 
> Massimo Belgrano-3 wrote:
>> 
>> First Read doc in doc\gtapi.txt
>> Second you must link Gtwvt.lib and any other gt that you wand use with
>> gtwvt thank to multigt architecture 
>> 
>> Massimo Belgrano
>> Albo Nazionale Informatici Professionisti n? 2620
>> Socio n? 2843 Associazione Informatici Professionisti
>> 
>> Analisi e sviluppo software per Lan e Web
>> Consulenza informatica - Formazione
>> Delta Informatica S.r.l.? http://www.deltain.it 
>> Via Torelli , 31 - 28100 Novara - Tel: 0321/30281
>> 
>> -----Messaggio originale-----
>> Da: harbour-bounces@harbour-project.org
>> [mailto:harbour-bounces@harbour-project.org] Per conto di Abeb
>> Inviato: marted? 8 luglio 2008 22.30
>> A: harbour@harbour-project.org
>> Oggetto: [Harbour] Howto gtwvt
>> 
>> 
>> Hi All Of You,
>> First let me thank all of you for this GREAT work. THANKS.
>> 
>> I'm trying to expirement with gtwvt.
>> 
>> What moduals need to be linked in to use this GT (using Borland)?
>> 
>> Thanks
>> Abe
>> 
>> 
>> -- 
>> View this message in context:
>> http://www.nabble.com/Howto-gtwvt-tp18348389p18348389.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>> 
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> 
>> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/Howto-gtwvt-tp18348389p18348714.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Howto-gtwvt-tp18348389p18350534.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Jul  8 18:29:41 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 18:32:12 2008
Subject: [Harbour] Re: BUG: GETENV() possible HVM corruption
In-Reply-To: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>
References: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>
Message-ID: <71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>

Sorry, this was a false alarm.

I'll continue hunting those GPFs, most of
them occur in GETENV() and HB_GTINFO( HB_GTI_CLIPBOARD, <cString> )

Brgds,
Viktor

On 2008.07.08., at 20:55, Szak?ts Viktor wrote:

> Hi all,
>
> There seems to be a potential HVM corruption
> in GETENV() where the buffer returned by hb_itemGetC()
> is written into.
>
> I've seen GPFs multiple times in this function in
> my application log. (which may be caused by something
> else too of course).
>
> HB_GETENV() and GETE() are also affected.
>
> Brgds,
> Viktor
>

From harbour.01 at syenar.hu  Tue Jul  8 18:49:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul  8 18:49:57 2008
Subject: [Harbour] where can i post harbour.chm?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE1E@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EE1E@SRV02.deltain.net>
Message-ID: <26B26530-F1CA-4C7B-8EB7-0A35E42B8063@syenar.hu>

> i have good documentation regarding harbour as chm/html
> http://www.oohg.org/manual/harbour/(x)harbour.html
>
> Can I post?
> Where?
> \harbour\Contrib\docu?
> Harbour website?

First it would be good to upload the .html
source files .zipped to an FTP, so that we could
see how it looks / works. We can think about
moving it to the SVN afterwards.

Since Harbour is a multiplatform project, I'd
strongly suggest to stay away from .chm and other
proprietary and/or binary formats.

Brgds,
Viktor

From tgbssk at hotmail.com  Tue Jul  8 17:40:03 2008
From: tgbssk at hotmail.com (--------- Abhimanyu Y. Altekar ---------)
Date: Tue Jul  8 19:40:14 2008
Subject: [Harbour] NEED HELP ON FWH 7.12
References: <20080708165848.GB5710@34-mo7-2.acn.waw.pl><821DD03E-4156-41FD-AD27-99B2860D55AA@syenar.hu>
	<20080708205715.GA14304@34-mo7-2.acn.waw.pl>
Message-ID: <BAY140-DAV5D37765DC93D2B8B30CC7D5970@phx.gbl>

Hi All,

I have      Five Win 7.12 With 

 
    1) Harbour 2.4.80.JK
 
    2) xHarbour Compiler build 1.1.0 (SimpLex)
 
    3) jkide32.zip(28/05/08) 2.4.80
 
    Which JKVFWH.LIB and JKVFWHX.LIB I need to use ?
 

- Regards 
 
 
 
 


From bedipritpal at hotmail.com  Tue Jul  8 19:45:59 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Jul  8 19:46:02 2008
Subject: [Harbour] 2008-07-08 16:45 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <18351546.post@talk.nabble.com>


2008-07-08 16:45 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtwvg/gtwvg.c
  * source/rtl/gtwvt/gtwvt.c
    ! Fixed GPF in HB_GTI_CLIPBOARDDATA.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-07-08-16%3A45-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp18351546p18351546.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Jul  8 19:47:33 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Jul  8 19:47:38 2008
Subject: [Harbour] BUG: GETENV() possible HVM corruption
In-Reply-To: <71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>
References: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>
	<71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>
Message-ID: <18351572.post@talk.nabble.com>


Hello Viktor

>HB_GTINFO( HB_GTI_CLIPBOARD, <cString> )

Should be fixed now. 
Thanks Peter Rees (xhb).

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/BUG%3A-GETENV%28%29-possible-HVM-corruption-tp18346512p18351572.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From jarabal at ya.com  Tue Jul  8 21:46:55 2008
From: jarabal at ya.com (Javier)
Date: Tue Jul  8 21:47:20 2008
Subject: [Harbour] 2008-07-08 02:27 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>
References: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>
Message-ID: <4874188F.1060207@ya.com>

Przemek,
>     ; TOFIX: add protection against possible double executing of
>       EXIT procedures in .HRB modules in HVM quit phase
Please, could you explain in that you are thinking.

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> 2008-07-08 02:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/vm/runner.c
>     + added support for passing non string parameters to .HRB INIT/<main>
>       procedures/function
>     + added automatic destructors for .HRB modules
>     ; TOFIX: add protection against possible double executing of
>       EXIT procedures in .HRB modules in HVM quit phase
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
From harbour.01 at syenar.hu  Wed Jul  9 01:29:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 01:30:13 2008
Subject: [Harbour] 2008-07-08 16:45 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <18351546.post@talk.nabble.com>
References: <18351546.post@talk.nabble.com>
Message-ID: <F5160BF2-42BC-4C60-9D23-372413F51667@syenar.hu>

Hi Pritpal,

In Harbour it's valid to pass NULL to hb_itemPutC()
for an empty string. (if this doesn't work for some
reason, it should be fixed in hb_itemPutC())

Also, you've converted back hb_itemPutCLPtr() to
hb_itemPutCPtr(), which is essentially the same
call in Harbour now, but the latter usage is discouraged.

Can you please undo this change?

Brgds,
Viktor

On 2008.07.09., at 1:45, Pritpal Bedi wrote:

>
> 2008-07-08 16:45 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * contrib/gtwvg/gtwvg.c
>  * source/rtl/gtwvt/gtwvt.c
>    ! Fixed GPF in HB_GTI_CLIPBOARDDATA.
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/2008-07-08-16%3A45-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp18351546p18351546.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Jul  9 01:33:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 01:34:07 2008
Subject: [Harbour] BUG: GETENV() possible HVM corruption
In-Reply-To: <18351572.post@talk.nabble.com>
References: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>
	<71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>
	<18351572.post@talk.nabble.com>
Message-ID: <88426D68-16E1-4EBE-8A6B-CD5478B6CD70@syenar.hu>

Hi Pritpal,

On 2008.07.09., at 1:47, Pritpal Bedi wrote:

>
> Hello Viktor
>
>> HB_GTINFO( HB_GTI_CLIPBOARD, <cString> )
>
> Should be fixed now.
> Thanks Peter Rees (xhb).

Thanks, but I'm getting GPF when <cString> is
specified and you modified the branch when
_getting_ the clipboard. Also, the GPFs (all of
them actually) seem to happen inside the OS,
not directly in Harbour code.

[ BTW, this could be a valid fix for xhb,
where NULL may not supported in hb_itemPutC(),
but in Harbour it is. ]

I wonder if there is a way to get the name
of a function by address in Windows. Like in
procexp.exe for example.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  9 02:32:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 02:33:40 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
Message-ID: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>

Hi all,

make_b32.bat and make_vc.bat are both able to generate
harbour.dlls, but the created .dlls have different names:
harbour-b32.dll using make_b32.bat and harbour-vc.dll using
make_vc.bat.

I wonder if this is good practice as the actual compiler
used to generate a .dll shouldn't matter for the end user,
so it might be better to simply use harbour.dll in all
cases.

[ The created .lib should still be named harbour-b32.lib
and harbour-vc.lib (or maybe rather harbour-coff.lib /
harbour-omf.lib) though. ]

Any opinions?

Brgds,
Viktor

From mpaliwoda at interia.pl  Wed Jul  9 03:36:04 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 03:36:10 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
Message-ID: <20080709073605.0104F7DC8E6@f20.poczta.interia.pl>

> make_b32.bat and make_vc.bat are both able to generate
> harbour.dlls, but the created .dlls have different names:
> harbour-b32.dll using make_b32.bat and harbour-vc.dll using
> make_vc.bat.
> 
> I wonder if this is good practice as the actual compiler
> used to generate a .dll shouldn't matter for the end user,
> so it might be better to simply use harbour.dll in all
> cases.
> 
> [ The created .lib should still be named harbour-b32.lib
> and harbour-vc.lib (or maybe rather harbour-coff.lib /
> harbour-omf.lib) though. ]
> 
> Any opinions?

The reason is - they are not interchangable due to underscore
differences. So if you install one dll in system directory it
will not work with programs compiled with other compiler. I did
not investigate if they can be built in compatible mode for C
builds, because the real problem is CPP mode, where name mangling
takes place. Although we use extern "C", I do not want to block
CPP mode in core dll because for example in Win64 C mode static
initialisation does not work. So to me *it makes perfect sense"
to have different dll names. Please - do not change it.

-- 

Marek


----------------------------------------------------------------------
W kosciele tez zdarzaja sie wpadki!
Smieszny filmik >>> http://link.interia.pl/f1e61

From mpaliwoda at interia.pl  Wed Jul  9 03:56:40 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 03:56:44 2008
Subject: [Harbour] Contrib HB_DIR_* and HB_INC_* mess
Message-ID: <20080709075640.4F18A7DC8E6@f20.poczta.interia.pl>


Hi Viktor,

Recently you have introduced HB_DIR_* envvars into some of our contribs.
Well, I cannot see the reason for this another set of - IMO - unnecesary
things, especially that they introduce quite a mess instead of simplifying
building process. Explanation :

I have downloaded FreeImage for Windows zip which after unzipping gives 
me the following structure : 

.            <DIR>     08.02.15    9:29
..           <DIR>     08.02.15    9:29
EXAMPLES     <DIR>     08.02.15    9:29
SOURCE       <DIR>     08.02.15    9:29
WRAPPER      <DIR>     08.02.15    9:29
LICENS~1 TXT     17577 04.03.17    5:45
LICENS~2 TXT     18353 04.06.27   18:42
README~1 MIN      1529 04.03.17    5:45
WHATSNEW TXT     50075 07.11.19   21:04
       11 plik(?w)      87534 bajt?w

As you can see there is no DIST dir inside. I have set HB_INC_FREEIMAGE
envvar to my FreeImage SOURCE directory where dll and .h is placed but
FreeImage was not built. After looking at contrib/make_b32_all.bat I saw
this line :

   if not "%HB_DIR_FREEIMAGE%" == "" set _HB_DIRS=%_HB_DIRS% hbfimage

So to include FreeImage in build process I have to set HB_DIR_FREEIMAGE
envvar as well. I see NO REASON to set two envvars to build one contrib
from a user's point of view. 

All this mess comes from your *forced* soultion to build *.lib from
*.dll automaticly. As I said it many many times you pay more and more
in terms of simplicity and clearity of building process - still keeping 
this solution, and in fact you make things harder than they could be
for the end user. The sad thing is that you do not want to acccept
this argument at all. Please remove this HB_DIR_* thing ...

-- 

Marek

----------------------------------------------------------------------
Zobacz cala prawde o Lukaszu Podolskim!
kliknij >>> http://link.interia.pl/f1e57

From dmacias at mail.udg.mx  Wed Jul  9 03:57:48 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  9 03:57:42 2008
Subject: [Harbour] Re: ChangeLog 2008-07-08 19:03 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48746F7C.5000801@mail.udg.mx>

Mindaugas:

 >2008-07-08 19:03 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
 >   * contrib/hbmzip/hbmzip.c
 >     + implemented file date/time get/set for OS2
 >     ; TODO: DOS implementation is still missing
 >     ; Implementation is not tested!

I got these errors:

--------------------------------------------
../../hbmzip.c: In function `hb_zipStoreFile':
../../hbmzip.c:645: error: structure has no member named `twosec'
../../hbmzip.c: In function `hb_unzipExtractCurrentFile':
../../hbmzip.c:905: error: structure has no member named `tm_mo'
../../hbmzip.c:907: error: `tmu_date' undeclared (first use in this 
function)
../../hbmzip.c:907: error: (Each undeclared identifier is reported only once
../../hbmzip.c:907: error: for each function it appears in.)
make[3]: *** [hbmzip.o] Error 1
make[2]: *** [descend] Error 2
--------------------------------------------

David Macias


From harbour.01 at syenar.hu  Wed Jul  9 04:02:10 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 04:02:11 2008
Subject: [Harbour] 2008-07-09 10:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e19a$Blat.v2.6.2$16e7b038$1280801dfd9c@127.0.0.1>

2008-07-09 10:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtwvt/gtwvt.c
   * contrib/gtwvg/gtwvg.c
     ! Restored previous change.
       In Harbour, passing NULL to hb_itemPutC() is valid and 
       will result in an empty string being stored in an optimized way.
       hb_itemPutCLPtr() should be used instead of hb_itemPutCPtr().
       The GPF in question used to happen when setting the clipboard, 
       and it looks to happen inside the OS. I'm still investigating.

   * contrib/hbapollo/tests/bld_b32.bat
   * contrib/hbapollo/tests/bld_vc.bat
     ! Fixed external .lib name.
--
Brgds,
Viktor

From maurilio.longo at libero.it  Wed Jul  9 04:15:46 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Jul  9 04:15:54 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <20080708172423.GA6053@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<487320D1.7030807@mail.udg.mx>	<20080708165125.GA5710@34-mo7-2.acn.waw.pl>	<48739D95.9070701@libero.it>
	<20080708172423.GA6053@34-mo7-2.acn.waw.pl>
Message-ID: <487473B2.9010800@libero.it>

Hi Przemyslaw,

Przemyslaw Czerpak wrote:
> On Tue, 08 Jul 2008, Maurilio Longo wrote:
> 
> Hi Maurilio,
> 
>> Locking works ok on xHarbour, I'm using it extensively on files shared between
>>   OS/2, DOS and win32 processes which handle files on a mars_nwe volume.
> 
> This may work because it uses different internal API. The client requests
> are translated to NetWare protocol and send to mars. BTW I still haven't
> public 63 bit POSIX locking patches for mars so you should not use CL53
> or HB64 locks in such installations.
> 
I thought mars was on a dead end, we are removing it for samba servers in the
near future.


>> I think that my fix to filesys.c is superceded by newer GCC versions, but I
>> did not test this extensively given that the present code seems to work OK.
> 
> What GCC version you are talking about?

>From this version, if I'm not wrong, it should be fixed, but I don't think
that my changes are what stops printing.

(D:\)gcc --version
gcc (GCC) 3.3.5 (Bird Build 2006-03-18 05:37)



> David's report suggests that code like:
> 
>    proc main()
>       local hFile, cFile, cData
>       cFile := "PRN"
>       cData := "Printer test" + hb_osNewLine() + ;
>                Version() + hb_osNewLine() + ;
>                Os() + hb_osNewLine() + ;
>                DTOC( Date() ) + " " + Time() + hb_osNewLine() + ;
>                Chr( 12 )
>       if ( hFile := fopen( cFile, 2 ) ) != -1
>          ? "Writting to", cFile
>          ? "Bytes written:", fwrite( hFile, cData, len( cData ) ), ;
>            "from:", len( cData )
>          fclose( hFile )
>       else
>          ? "Cannot open:", cFile
>       endif
>    return
> 
> does not work.
> 
> Does it work for you for printers connected to local computers?
> 
I don't have locally connected printers here, but I can test it against some
netowrked ones, I'll let you know (I've never printed anything from xharbour
code on OS/2).

Best regards.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Wed Jul  9 04:16:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 04:17:28 2008
Subject: [Harbour] Contrib HB_DIR_* and HB_INC_* mess
In-Reply-To: <20080709075640.4F18A7DC8E6@f20.poczta.interia.pl>
References: <20080709075640.4F18A7DC8E6@f20.poczta.interia.pl>
Message-ID: <78368F1C-09EC-49C2-9848-D959A402E749@syenar.hu>

Hi Marek,

OnRecently you have introduced HB_DIR_* envvars into some of our  
contribs.
> Well, I cannot see the reason for this another set of - IMO -  
> unnecesary
> things, especially that they introduce quite a mess instead of  
> simplifying
> building process. Explanation :

To be more precise, I've first introduced HB_DIR_*, later you
added HB_INC_* to .sh (rightly so), and I've recently implemented  
HB_INC_*
as an alternative in all places where HB_DIR_* was used. (naming has  
been
changed from HB_*_INC/DIR to HB_DIR/INC_* for clarity).

> I have downloaded FreeImage for Windows zip which after unzipping  
> gives
> me the following structure :
>
> .            <DIR>     08.02.15    9:29
> ..           <DIR>     08.02.15    9:29
> EXAMPLES     <DIR>     08.02.15    9:29
> SOURCE       <DIR>     08.02.15    9:29
> WRAPPER      <DIR>     08.02.15    9:29
> LICENS~1 TXT     17577 04.03.17    5:45
> LICENS~2 TXT     18353 04.06.27   18:42
> README~1 MIN      1529 04.03.17    5:45
> WHATSNEW TXT     50075 07.11.19   21:04
>       11 plik(?w)      87534 bajt?w
>
> As you can see there is no DIST dir inside. I have set  
> HB_INC_FREEIMAGE
> envvar to my FreeImage SOURCE directory where dll and .h is placed but

Difficult to decide what should be the default. I've downloaded
FreeImage for Windows (FreeImage3100Win32.zip) from the official  
homepage
two days ago, and it had a Dist dir (just like the previous one I got
a year ago (FreeImage393.zip), with sources).

> FreeImage was not built. After looking at contrib/make_b32_all.bat I  
> saw
> this line :
>
>   if not "%HB_DIR_FREEIMAGE%" == "" set _HB_DIRS=%_HB_DIRS% hbfimage
>
> So to include FreeImage in build process I have to set  
> HB_DIR_FREEIMAGE
> envvar as well. I see NO REASON to set two envvars to build one  
> contrib
> from a user's point of view.

Yes, sorry, I forgot about *_all.bats. All we need to do is modify them
to accept either envvars (INC or DIR). I'll do this ASAP.

You don't have to use DIR, rather you can use INC if you don't need
.lib generation from .dll and use DIR if you do, that was the point of
my latest changes.

> All this mess comes from your *forced* soultion to build *.lib from
> *.dll automaticly. As I said it many many times you pay more and more
> in terms of simplicity and clearity of building process - still  
> keeping
> this solution, and in fact you make things harder than they could be
> for the end user. The sad thing is that you do not want to acccept
> this argument at all. Please remove this HB_DIR_* thing ...

I won't, sorry. It's useful for everyone who builds Harbour from
source (as opposed to using Harbour downloaded as a binary). I've
saved hours of struggling with implib (and friends) manually just
in this last month.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  9 04:21:27 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 04:21:28 2008
Subject: [Harbour] 2008-07-09 10:20 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e19c$Blat.v2.6.2$c8641d72$10d8f691887e@127.0.0.1>

2008-07-09 10:20 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/make_b32_all.bat
   * contrib/make_vc_all.bat
     ! Fixed to accept HB_INC_* envvars to specify 
       header locations for external packages.
--
Brgds,
Viktor

From dmacias at mail.udg.mx  Wed Jul  9 04:23:19 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  9 04:23:12 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48747577.3050802@mail.udg.mx>

Przemek:

 >Have you tried xHarbour?
 >Such printing uses normal file API. In xHarbour Maurilio changed open()
 >function used by hb_fsOpen() to OS2 API DosOpen() combined with 
 >_imphandle()

 >   2006-06-06 09:58 UTC+0200 Maurilio Longo <maurilio.longo at
 >libero.it>
 >      * source/rtl/filesys.c
 >        + added HB_OS2_IO sections to work around a GCC 'feature' on
 >OS/2
 >          which makes it fail to open/create files on filesystems which
 >do
 >          not support extended attributes (EAs).

Before your responses I wrote to Maurilio, after old xHarbour tests. 
This is his reponse:
----------------------------------------------
David,

I think OS/2 support for printers has never been written. I don't know if
opening "LPTn:" as a file is enough for a line printer, it surely is not
enough for a modern printer, say a laser or ink-jet one.

Maurilio.

David Arturo Macias Corona wrote:
 > Maurilio:
 >
 > Any idea / hint / test ... in problem described below ?
 >
 > I tested with latest OS/2 binaries from xHarbour.org ( Dec 2006 ) and
 > does not print too
 >
 > I can not build current xHarbour under OS/2 yet
 >
 > David Macias
----------------------------------------------


 >It's possible that this modification resolves the problem.
 >Anyhow if possible I would like to also ask you to make tests
 >with file range locking with Harbour and xHarbour. F.e. try
 >to check if RLOCK set by one process is visible by other, f.e.
 >in this code:

 >   proc main()
 >      if !dbExists("_tst")
 >         ? "Create table"
 >         dbCreate("_tst",{{"F1","C",1,0}})
 >         use _tst
 >         dbappend()
 >         close
 >      endif
 >      use _tst shared
 >      dbgoto(1)
 >      ? "Locking record 1:", dbRlock()
 >      inkey(0)
 >   return

 >I'm not OS2 user/programmer and it's not clear for me reading OS2
 >API if it is possible to set file range locking without HLockID handler
 >returned by DosProtectOpen(). If _imphandle() cannot retrieve it
 >internally from OS structures then probably not.
 >If locking works correctly in xHarbour then I'll add Maurilio's
 >modifications to Harbour OS2/GCC builds.

Tested with old xHarbour ( Dec 2006 ) and current Harbour
Result is:
     Locking record 1: .F.
in program started in second place ( Harbour-xHarbour, xHarbour-Harbour )

Perhaps in recent xHarbour it can lock fine, but Dec 2006 is after date 
of Maurilio's changes ( 2006-06-06 )

You and Maurilio can decide about adding Maurilio's
modifications to Harbour OS2/GCC builds.

But I need to learn how to rebuild current xHarbour under OS/2  :-)

David Macias

From dmacias at mail.udg.mx  Wed Jul  9 04:29:56 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  9 04:29:49 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48747704.50300@mail.udg.mx>

Przemek:

 >David's report suggests that code like:

 >   proc main()
 >      local hFile, cFile, cData
 >      cFile := "PRN"
 >      cData := "Printer test" + hb_osNewLine() + ;
 >               Version() + hb_osNewLine() + ;
 >               Os() + hb_osNewLine() + ;
 >               DTOC( Date() ) + " " + Time() + hb_osNewLine() + ;
 >               Chr( 12 )
 >      if ( hFile := fopen( cFile, 2 ) ) != -1
 >         ? "Writting to", cFile
 >         ? "Bytes written:", fwrite( hFile, cData, len( cData ) ), ;
 >           "from:", len( cData )
 >         fclose( hFile )
 >      else
 >         ? "Cannot open:", cFile
 >      endif
 >   return

 >does not work.


It work perfectly with current Harbour AND with old xHarbour ( Dec 2006 )

Tested with "prn" and "lpt1"
----------------------------------
[E:\harbour807\harbour\bin]hbrun e:\prntest.prg

Writting to lpt1
Bytes written:         81 from:         81
----------------------------------

and output in printer/paper is correct

As I can see this is the start of solution   :-)

David Macias


From dmacias at mail.udg.mx  Wed Jul  9 04:49:56 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  9 04:49:49 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48747BB4.6020009@mail.udg.mx>

Przemek, Maurilio:

Testing again with this code:
---------------
func main

SET PRINTER ON
? "Printing to default"
SET PRINTER OFF

SET PRINTER TO PRN
SET PRINTER ON
? "Printing to default (PRN)"
SET PRINTER OFF
SET PRINTER TO

SET PRINTER TO LPT1
SET PRINTER ON
? "Printing to LPT1"
SET PRINTER OFF
SET PRINTER TO

RETURN NIL
---------------

produce not output in printer, but I found two files on disk with 
content sent to printer:
LPT1.prn, PRN.prn

Perhaps all problem is automatic .prn extension added ?
This extension is ignored in DOS/Win when device exist, and not ignored 
in OS/2 ?

David Macias


From labitas at gmail.com  Wed Jul  9 05:17:32 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Jul  9 05:17:36 2008
Subject: [Harbour] TBROWSE column heading
Message-ID: <2386af1b0807090217k612bbfcfh20e55679f612dbc8@mail.gmail.com>

Hello,

CA-Cl*pper will allow any types for the headings, but reserves row/rows
for heading only for nonzero length strings.

Code for Clipper/Harbour below shows this

----------------
#include "inkey.ch"
#include "box.ch"

proc main()

   static s_nPos   := 1
   static s_nSize  := 25

   local nTop, nLeft, nBottom, nRight
   local oBrw, oCol
   local nKey

   nTop    := 2
   nLeft   := 30
   nBottom := 18
   nRight  := 50

   cls
   dispBox( nTop, nLeft, nBottom, nRight, B_DOUBLE_SINGLE )
   oBrw := tbrowseNew( nTop + 1, nLeft + 1, nBottom - 1, nRight - 1 )

   oBrw:SkipBlock     := { | n | n := iif( n < 0, max( n, 1 - s_nPos ), ;
                                                  min( s_nSize - s_nPos, n )
), ;
                                 s_nPos += n, n }
   oBrw:GoTopBlock    := { || s_nPos := 1 }
   oBrw:GoBottomBlock := { || s_nPos := s_nSize }

   oCol := tbColumnNew( , {|| s_nPos } )
   oBrw:addColumn( oCol )

   while .T.
      while !oBrw:stabilize() .and. nextkey()==0
      enddo
      nKey := inkey( 0 )
      if nKey == K_ESC
         exit
      else
         oBrw:applyKey( nKey )
      endif
   enddo

return
----------------

Regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080709/1283dc17/attachment-0001.html
From dmacias at mail.udg.mx  Wed Jul  9 05:41:07 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  9 05:41:00 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <487487B3.6050800@mail.udg.mx>

Przemek, Maurilio:

 >produce not output in printer, but I found two files on disk with
 >content sent to printer:
 >LPT1.prn, PRN.prn

 >Perhaps all problem is automatic .prn extension added ?
 >This extension is ignored in DOS/Win when device exist, and not ignored
 >in OS/2 ?

Confirmed
Deleting ".prn" default extension output goes to printer as should be

harbour\source\rtl\set.c
-------------------------------
hb_set.hb_set_printhan = open_handle( hb_set.HB_SET_PRINTFILE, bFlag, 
"", HB_SET_PRINTFILE );
-------------------------------

Przemek: Can you add code ?
Avoid ".prn" default extension if is OS/2 and device exist

David Macias


Norton Guide:

      SET PRINTER TO determines the destination of output from all commands
      and functions that send output to the printer.  This includes @...SAYs
      if DEVICE is SET TO PRINTER.  Output can be sent to a device or to a
      file.  If the destination is a device, the following names are valid:
      LPT1, LPT2, LPT3 (all parallel ports), COM1, and COM2 (serial ports),
      CON and PRN.  The default device is PRN.

      If the destination is a file, it is created in the current DEFAULT
      directory.  If a file with the same name exists in the same 
location, it
      is overwritten by the new file without warning.  All subsequent output
      to the printer is then written to this file until the file is closed
      using SET PRINTER TO with no argument.

From druzus at acn.waw.pl  Wed Jul  9 05:42:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 05:42:46 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>
Message-ID: <20080709094240.GA1307@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> make_b32.bat and make_vc.bat are both able to generate
> harbour.dlls, but the created .dlls have different names:
> harbour-b32.dll using make_b32.bat and harbour-vc.dll using
> make_vc.bat.
> I wonder if this is good practice as the actual compiler
> used to generate a .dll shouldn't matter for the end user,
> so it might be better to simply use harbour.dll in all
> cases.

They are not compatible due to different internal naming and
calling convention.
Final user may have many different Harbour applications compiled
by MSVC and BCC using harbour.dll and different names allows to
install both DLLs in system directory.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jul  9 05:48:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 05:48:43 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <48747577.3050802@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48747577.3050802@mail.udg.mx>
Message-ID: <20080709094839.GB1307@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, David Arturo Macias Corona wrote:

Hi David,

> Before your responses I wrote to Maurilio, after old xHarbour tests. 
> This is his reponse:
> ----------------------------------------------
> David,
> I think OS/2 support for printers has never been written. I don't know if
> opening "LPTn:" as a file is enough for a line printer, it surely is not
> enough for a modern printer, say a laser or ink-jet one.

Not modern but the chipest one which supports only GDI protocol.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jul  9 05:51:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 05:51:53 2008
Subject: [Harbour] Re: Printing in OS/2
In-Reply-To: <48747BB4.6020009@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48747BB4.6020009@mail.udg.mx>
Message-ID: <20080709095148.GC1307@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, David Arturo Macias Corona wrote:

Hi David,

> produce not output in printer, but I found two files on disk with 
> content sent to printer:
> LPT1.prn, PRN.prn

The same happens in MS-Windows sometimes.

> Perhaps all problem is automatic .prn extension added ?
> This extension is ignored in DOS/Win when device exist, and not ignored 
> in OS/2 ?

Any extension should be ignored. I'll add workaround for adding .prn
extension for some well known device names:
   PRN
   LPT[123]
   COM[1-9]
It should resolve the problem.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jul  9 05:57:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 05:57:38 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>

2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbdate.h
  * harbour/source/common/hbdate.c
    + added hb_timeStampEncode()

  * harbour/include/hbapifs.h
  * harbour/source/rtl/filesys.c
    + added hb_fsSetFileTime()
    + added POSIX file attributes with some macros to convert Harbour
      definitions into OS ones.
    + added initial version of hb_fsSetAttr() - work in progress, I should
      finish it in the evening.

  * harbour/contrib/hbmzip/hbmzip.c
    * added setting file attribute in DJGPP builds
    ! fixed some small typos in OS2 builds reported by David

  * harbour/source/vm/fm.c
    * changed hb_xrealloc() to be ANSI-C realloc() compatible

best regards
Przemek
From druzus at acn.waw.pl  Wed Jul  9 06:01:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 06:01:55 2008
Subject: [Harbour] 2008-07-08 02:27 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4874188F.1060207@ya.com>
References: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>
	<4874188F.1060207@ya.com>
Message-ID: <20080709100150.GD1307@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Javier wrote:

Hi Javier,

> >    ; TOFIX: add protection against possible double executing of
> >      EXIT procedures in .HRB modules in HVM quit phase
> Please, could you explain in that you are thinking.

Now it's possible to create situation when EXIT procedures will be
executed twice.

   proc main()
   memvar p
   public p
   p:=__hrbLoad("tst.hrb")
   return

   /*** tst.prg ***/
   exit proc x
      ? "I'm exit procedure"
   return

I can quite easy block it globally but I would like to
allow executing .hrb EXIT procedures for modules loaded
inside other EXIT procedures and for this I will need
deeper modifications. If I'll find time for it then I'll
make it. If not then I'll simply block executing .hrb EXIT
procedures after executing all other ones.

best regards
Przemek
From mpaliwoda at interia.pl  Wed Jul  9 06:06:08 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 06:06:12 2008
Subject: [Harbour] ChangeLog : 2008-07-09 12:05 UTC+0100 Marek Paliwoda
	(mpaliwoda at interia pl)
Message-ID: <20080709100608.EB137386C7C@f02.poczta.interia.pl>

2008-07-09 12:05 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * source/codepage/cp_tpl.c
   * source/codepage/cpbg866.c
   * source/codepage/cpbgiso.c
   * source/codepage/cpbgmik.c
   * source/codepage/cpbgwin.c
   * source/codepage/cpcs852.c
   * source/codepage/cpcsiso.c
   * source/codepage/cpcskam.c
   * source/codepage/cpcswin.c
   * source/codepage/cpde850.c
   * source/codepage/cpdeiso.c
   * source/codepage/cpdewin.c
   * source/codepage/cpel737.c
   * source/codepage/cpelwin.c
   * source/codepage/cpes850.c
   * source/codepage/cpesmwin.c
   * source/codepage/cpeswin.c
   * source/codepage/cpfr850.c
   * source/codepage/cphr1250.c
   * source/codepage/cphr437.c
   * source/codepage/cphr852.c
   * source/codepage/cphu852.c
   * source/codepage/cphu852s.c
   * source/codepage/cphuiso.c
   * source/codepage/cphuisos.c
   * source/codepage/cphuwin.c
   * source/codepage/cphuwins.c
   * source/codepage/cpit437.c
   * source/codepage/cpit850.c
   * source/codepage/cpitisb.c
   * source/codepage/cpitiso.c
   * source/codepage/cpltwin.c
   * source/codepage/cppl852.c
   * source/codepage/cppliso.c
   * source/codepage/cpplmaz.c
   * source/codepage/cpplwin.c
   * source/codepage/cppt850.c
   * source/codepage/cpptiso.c
   * source/codepage/cpru866.c
   * source/codepage/cpruiso.c
   * source/codepage/cprukoi.c
   * source/codepage/cpruwin.c
   * source/codepage/cpsk852.c
   * source/codepage/cpskiso.c
   * source/codepage/cpskkam.c
   * source/codepage/cpskwin.c
   * source/codepage/cpsl437.c
   * source/codepage/cpsl852.c
   * source/codepage/cpsliso.c
   * source/codepage/cpslwin.c
   * source/codepage/cpsrwin.c
   * source/codepage/cpsv850.c
   * source/codepage/cpsvclip.c
   * source/codepage/cpsvwin.c
   * source/codepage/cptr857.c
   * source/codepage/cptrwin.c
   * source/codepage/cpua866.c
   * source/codepage/cpuakoi.c
   * source/codepage/cpuawin.c
   * source/compiler/genc.c
   * source/lang/msg_tpl.c
   * source/lang/msgbe866.c
   * source/lang/msgbewin.c
   * source/lang/msgbg866.c
   * source/lang/msgbgiso.c
   * source/lang/msgbgmik.c
   * source/lang/msgbgwin.c
   * source/lang/msgca.c
   * source/lang/msgcs852.c
   * source/lang/msgcsiso.c
   * source/lang/msgcskam.c
   * source/lang/msgcswin.c
   * source/lang/msgde.c
   * source/lang/msgdewin.c
   * source/lang/msgel.c
   * source/lang/msgelwin.c
   * source/lang/msgeo.c
   * source/lang/msges.c
   * source/lang/msgeswin.c
   * source/lang/msgeu.c
   * source/lang/msgfr.c
   * source/lang/msggl.c
   * source/lang/msghe862.c
   * source/lang/msghewin.c
   * source/lang/msghr437.c
   * source/lang/msghr852.c
   * source/lang/msghriso.c
   * source/lang/msghrwin.c
   * source/lang/msghu852.c
   * source/lang/msghucwi.c
   * source/lang/msghuiso.c
   * source/lang/msghuwin.c
   * source/lang/msgid.c
   * source/lang/msgis850.c
   * source/lang/msgit.c
   * source/lang/msgko.c
   * source/lang/msgltwin.c
   * source/lang/msgnl.c
   * source/lang/msgpl852.c
   * source/lang/msgpliso.c
   * source/lang/msgplmaz.c
   * source/lang/msgplwin.c
   * source/lang/msgpt.c
   * source/lang/msgro.c
   * source/lang/msgru866.c
   * source/lang/msgrukoi.c
   * source/lang/msgruwin.c
   * source/lang/msgsk852.c
   * source/lang/msgskiso.c
   * source/lang/msgskkam.c
   * source/lang/msgskwin.c
   * source/lang/msgsl437.c
   * source/lang/msgsl852.c
   * source/lang/msgsliso.c
   * source/lang/msgslwin.c
   * source/lang/msgsr852.c
   * source/lang/msgsriso.c
   * source/lang/msgsrwin.c
   * source/lang/msgtr857.c
   * source/lang/msgtrwin.c
   * source/lang/msgua866.c
   * source/lang/msguakoi.c
   * source/lang/msguawin.c
   * source/lang/msgzhb5.c
   * source/lang/msgzhgb.c
   * source/pp/pplib3.c
   * source/rdd/dbf1.c
   * source/rdd/dbfcdx/dbfcdx1.c
   * source/rdd/dbffpt/dbffpt1.c
   * source/rdd/dbfntx/dbfntx1.c
   * source/rdd/delim1.c
   * source/rdd/sdf1.c
   * source/rtl/gt_tpl/gt_tpl.c
   * source/rtl/gtalleg/gtalleg.c
   * source/rtl/gtcgi/gtcgi.c
   * source/rtl/gtcrs/gtcrs.c
   * source/rtl/gtdos/gtdos.c
   * source/rtl/gtgui/gtdef.c
   * source/rtl/gtgui/gtgui.c
   * source/rtl/gtos2/gtos2.c
   * source/rtl/gtpca/gtpca.c
   * source/rtl/gtsln/gtsln.c
   * source/rtl/gtstd/gtstd.c
   * source/rtl/gttrm/gttrm.c
   * source/rtl/gtwin/gtwin.c
   * source/rtl/gtwvt/gtwvt.c
   * source/rtl/gtxwc/gtxwc.c
   * source/rtl/hbregex.c
   * contrib/examples/rdddbt/dbfdbt1.c
   * contrib/gtwvg/gtwvg.c
   * contrib/hbbmcdx/bmdbfcdx.c
   * contrib/hbbtree/hb_btree.c
   * contrib/hbct/ctwin.c
   * contrib/rddads/ads1.c
   * include/hbinit.h
     * Changed C mode static initialisation code.
       Thanks for Paul Tucker for the solution.

   * make_vc.mak
     * Removed /OPT:WIN98 since it is not supported in Win64
       and has less impact on WinXP/Win2003 builds


Please note : 
Unfortunately it does not solve C mode static init for Win64 builds.
They still have to be compiled in CPP mode.

-- 

Marek

----------------------------------------------------------------------
Tw?j g?os si? liczy!
kliknij >>> http://link.interia.pl/f1e76

From dmacias at mail.udg.mx  Wed Jul  9 06:10:08 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul  9 06:10:02 2008
Subject: [Harbour] Re: 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48748E80.7010300@mail.udg.mx>

Przemek, Mindaugas:

 >2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/contrib/hbmzip/hbmzip.c
 >    * added setting file attribute in DJGPP builds
 >    ! fixed some small typos in OS2 builds reported by David

Rebuilding hbmzip.a date/time work fine under OS/2 using myzip.exe, 
myunzip.exe tests
So this case is solved, thanks  :-)

David Macias


From sscc at mweb.co.za  Wed Jul  9 06:17:46 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Jul  9 06:18:11 2008
Subject: [Harbour] ChangeLog : 2008-07-09 12:05 UTC+0100 Marek Paliwoda
	(mpaliwoda at interia pl)
In-Reply-To: <20080709100608.EB137386C7C@f02.poczta.interia.pl>
References: <20080709100608.EB137386C7C@f02.poczta.interia.pl>
Message-ID: <4874904A.1020406@mweb.co.za>

Marek Paliwoda wrote:

>      * Changed C mode static initialisation code.
>        Thanks for Paul Tucker for the solution.

Thank you.

Regards
Alex

From druzus at acn.waw.pl  Wed Jul  9 06:32:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 06:32:38 2008
Subject: [Harbour] 2008-07-09 12:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807091032.m69AWXex005894@31-mo5-4.acn.waw.pl>

2008-07-09 12:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/set.c
    ! do not add .prn extension to printer/extra filenames if file name
      is one of well known device name: PRN, LPT[1-3], COM[1-9]
      This code is enabled only for OS2 builds where it's necessary
      but maybe MS-Windows/DOS users should think about adding it to
      their builds too because sometimes also DOS/Win does not recognize
      correctly device name when it has extension.

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul  9 06:43:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 06:44:19 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <20080709094240.GA1307@34-mo7-2.acn.waw.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>
	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>
Message-ID: <958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>

Hi Przemek,

>>
>> make_b32.bat and make_vc.bat are both able to generate
>> harbour.dlls, but the created .dlls have different names:
>> harbour-b32.dll using make_b32.bat and harbour-vc.dll using
>> make_vc.bat.
>> I wonder if this is good practice as the actual compiler
>> used to generate a .dll shouldn't matter for the end user,
>> so it might be better to simply use harbour.dll in all
>> cases.
>
> They are not compatible due to different internal naming and
> calling convention.
> Final user may have many different Harbour applications compiled
> by MSVC and BCC using harbour.dll and different names allows to
> install both DLLs in system directory.

I understand that, but isn't it the point of .dlls that they
provide a _common_ interface for all programs regardless of the
compiler/tools/C/C++ mode used to generate the .dll and the
user applications using it?

It should behave similarly to harbour.exe which, on a given
platform (win32), is perfectly equal in all respects
regardless the compiler used (mingw, bcc, msvc).

I mean all the .dlls I know (besides Harbour), provide one
such .dll (the most obvious example being Windows .dlls, but
I could cite all the external tools contribs use) and I can
use them equally well with all compilers and programming
languages.

I understand this is more complicated to achieve for a
.dll interface (than for harbour.exe), but shouldn't we try it?

Brgds,
Viktor

From jarabal at ya.com  Wed Jul  9 07:08:09 2008
From: jarabal at ya.com (Javier)
Date: Wed Jul  9 07:08:34 2008
Subject: [Harbour] 2008-07-08 02:27 UTC+0200
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080709100150.GD1307@34-mo7-2.acn.waw.pl>
References: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>	<4874188F.1060207@ya.com>
	<20080709100150.GD1307@34-mo7-2.acn.waw.pl>
Message-ID: <48749C19.8020009@ya.com>

Hi Przemek,

Please, take my words as a mere sketch because it's possible that I'm 
lost in your line of thought.
I think that INIT/EXIT procedures is fine controlled by runner so only 
not registering them in globally solves the thing but it's possible that 
I lose something more: now hrb module is CG.

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> On Wed, 09 Jul 2008, Javier wrote:
>
> Hi Javier,
>
>   
>>>    ; TOFIX: add protection against possible double executing of
>>>      EXIT procedures in .HRB modules in HVM quit phase
>>>       
>> Please, could you explain in that you are thinking.
>>     
>
> Now it's possible to create situation when EXIT procedures will be
> executed twice.
>
>    proc main()
>    memvar p
>    public p
>    p:=__hrbLoad("tst.hrb")
>    return
>
>    /*** tst.prg ***/
>    exit proc x
>       ? "I'm exit procedure"
>    return
>
> I can quite easy block it globally but I would like to
> allow executing .hrb EXIT procedures for modules loaded
> inside other EXIT procedures and for this I will need
> deeper modifications. If I'll find time for it then I'll
> make it. If not then I'll simply block executing .hrb EXIT
> procedures after executing all other ones.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
From mpaliwoda at interia.pl  Wed Jul  9 07:38:46 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 07:38:51 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
Message-ID: <20080709113846.DEC74386C7C@f02.poczta.interia.pl>

Viktor,

> I mean all the .dlls I know (besides Harbour), provide one
> such .dll (the most obvious example being Windows .dlls, but
> I could cite all the external tools contribs use) and I can
> use them equally well with all compilers and programming
> languages.

Really ? Even those which are pure C++ ? Any example of such a dll 
usable in different compilers ?

-- 

Marek

----------------------------------------------------------------------
Tw?j g?os si? liczy!
kliknij >>> http://link.interia.pl/f1e76

From druzus at acn.waw.pl  Wed Jul  9 07:42:06 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 07:42:11 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>
	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>
	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
Message-ID: <20080709114206.GA5882@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I understand that, but isn't it the point of .dlls that they
> provide a _common_ interface for all programs regardless of the
> compiler/tools/C/C++ mode used to generate the .dll and the
> user applications using it?

Probably it was an intention but not result in real life
and it's the reason why you need import libraries to link
your application with foreign .dll. It simply hides differences
in naming and calling convention. Anyhow it can be added to
application at compile time if you have necessary tool which
understand the ABI used in .dll and can create proper import
library. It cannot be resolved (at least easy) by user which
has only final binaries.

> It should behave similarly to harbour.exe which, on a given
> platform (win32), is perfectly equal in all respects
> regardless the compiler used (mingw, bcc, msvc).

But isn't. In some compilers you can control calling and naming
convention using compiler switches but in some other it's not
possible.

> I mean all the .dlls I know (besides Harbour), provide one
> such .dll (the most obvious example being Windows .dlls, but
> I could cite all the external tools contribs use) and I can
> use them equally well with all compilers and programming
> languages.

I've never heard about such .dlls and I cannot imagine how it's
possible. Of course if you have some tool which can create
import library for foreign .dll then it may hide the difference
and you can succesfully link your application but for each function
you will have additional code which will translate function call
from native to forign format and of course will hide naming
differences. Anyhow it's only link time solution (though in
theory it should be possible to create intermediate .dll between
existing binaries and some forign .dll which make the same
translations and resolve the problem even for final binaries)
which causes speed overhead. Additionally there are very serious
differences in ABI used by different C compilers and it will
be hard to find necessary converters. F.e. do you know sth
what can create import libraries for OpenWatcom which by default
uses registers instead of C stack to pass some parameters?

> I understand this is more complicated to achieve for a
> .dll interface (than for harbour.exe), but shouldn't we try it?

If you accept the cost and you chose preferable format which
can and should be used in all different builds (it will be
necessary to find valid converters) then you can try. But I
do not believe that people using BCC will accept using harbour.dll
in MSVC format with additional import library.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul  9 07:47:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 07:48:22 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <20080709113846.DEC74386C7C@f02.poczta.interia.pl>
References: <20080709113846.DEC74386C7C@f02.poczta.interia.pl>
Message-ID: <E2D37ABF-0A80-4EA1-9E5C-8771A0F5A8D9@syenar.hu>

>>
Hi Marek,

>> I mean all the .dlls I know (besides Harbour), provide one
>> such .dll (the most obvious example being Windows .dlls, but
>> I could cite all the external tools contribs use) and I can
>> use them equally well with all compilers and programming
>> languages.
>
> Really ? Even those which are pure C++ ? Any example of such a dll

I'm not talking about pure C++, since Harbour is pure _C_, so we
don't have to deal with pure C++, only C code compiled in C++
mode, which is different.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  9 07:58:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 07:58:08 2008
Subject: [Harbour] 2008-07-09 13:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807091158.m69Bw3hj014557@31-mo5-4.acn.waw.pl>

2008-07-09 13:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/hbmzip.c
    ! added missing DJGPP header files

  * harbour/source/rtl/filesys.c
    * finished hb_fsSetAttr()

  * harbour/source/rtl/set.c
    % optimized for loop

best regards
Przemek
From mpaliwoda at interia.pl  Wed Jul  9 08:00:26 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 08:00:31 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
Message-ID: <20080709120026.8DBEE7E806E@f17.poczta.interia.pl>

Viktor,

> >> I mean all the .dlls I know (besides Harbour), provide one
> >> such .dll (the most obvious example being Windows .dlls, but
> >> I could cite all the external tools contribs use) and I can
> >> use them equally well with all compilers and programming
> >> languages.
> >
> > Really ? Even those which are pure C++ ? Any example of such a dll
> 
> I'm not talking about pure C++, since Harbour is pure _C_, so we
> don't have to deal with pure C++, only C code compiled in C++
> mode, which is different.

So do you know about any dll compiled with Borland which is 
part of a system directory and is used by other compilers ?

-- 

Marek

----------------------------------------------------------------------
Zobacz cala prawde o Lukaszu Podolskim!
kliknij >>> http://link.interia.pl/f1e57

From harbour.01 at syenar.hu  Wed Jul  9 08:02:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 08:03:27 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <20080709114206.GA5882@34-mo7-2.acn.waw.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>
	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>
	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
	<20080709114206.GA5882@34-mo7-2.acn.waw.pl>
Message-ID: <DB6B9A9E-2786-450F-9BDE-F0E93BB8F9C0@syenar.hu>

>>
Hi Przemek,

>> I understand that, but isn't it the point of .dlls that they
>> provide a _common_ interface for all programs regardless of the
>> compiler/tools/C/C++ mode used to generate the .dll and the
>> user applications using it?
>
> Probably it was an intention but not result in real life
> and it's the reason why you need import libraries to link
> your application with foreign .dll. It simply hides differences
> in naming and calling convention. Anyhow it can be added to
> application at compile time if you have necessary tool which
> understand the ABI used in .dll and can create proper import
> library. It cannot be resolved (at least easy) by user which
> has only final binaries.
>
>> It should behave similarly to harbour.exe which, on a given
>> platform (win32), is perfectly equal in all respects
>> regardless the compiler used (mingw, bcc, msvc).
>
> But isn't. In some compilers you can control calling and naming
> convention using compiler switches but in some other it's not
> possible.

I can see that, but that only means we cannot generate
our "standard" Harbour .dll using every possible compilers,
just some dedicated ones. Which is perfectly acceptable (and
just an implementation/build detail) and in fact irrelevant
from a users POVs. The point from a users POV is IMO that
there should be one and only harbour.dll, and they can use
it through some documented methods, .h and .def files in a
std way.

>> I mean all the .dlls I know (besides Harbour), provide one
>> such .dll (the most obvious example being Windows .dlls, but
>> I could cite all the external tools contribs use) and I can
>> use them equally well with all compilers and programming
>> languages.
>
> I've never heard about such .dlls and I cannot imagine how it's
> possible. Of course if you have some tool which can create
> import library for foreign .dll then it may hide the difference
> and you can succesfully link your application but for each function
> you will have additional code which will translate function call
> from native to forign format and of course will hide naming
> differences. Anyhow it's only link time solution (though in
> theory it should be possible to create intermediate .dll between
> existing binaries and some forign .dll which make the same
> translations and resolve the problem even for final binaries)
> which causes speed overhead. Additionally there are very serious
> differences in ABI used by different C compilers and it will
> be hard to find necessary converters. F.e. do you know sth
> what can create import libraries for OpenWatcom which by default
> uses registers instead of C stack to pass some parameters?

That's not my point. We should use a calling convention for
that .dll which is supported by most compilers, meaning
'MS cdecl' for example. That's why we have the HB_EXPORT
keyword.

I'm not saying that any .c code built using any compilers'
default options should be possible to be used with any other
compilers without a hitch.

What I'm saying is that there exist such a calling
convention and naming convention used to build a .dll
which can allow most (or all) 3rd party tools to be able
to interface with it.

user32.dll f.e. is such a .dll. Creating import libraries
is a different matter, and we should or might supply those
for different compilers to help them being used, but harbour.dll
itself should be the same all across.

>> I understand this is more complicated to achieve for a
>> .dll interface (than for harbour.exe), but shouldn't we try it?
>
> If you accept the cost and you chose preferable format which
> can and should be used in all different builds (it will be
> necessary to find valid converters) then you can try. But I
> do not believe that people using BCC will accept using harbour.dll
> in MSVC format with additional import library.

They need to use an import lib anyway (which we already supply),
why would they care about the compiler used for harbour.dll if
it works? I don't know of any .dlls I use, which compiler was
used to build them.

All I care (as a .dll user) is a .lib file which works with the
given .dll and with my compiler of choice. IMO, ideally Harbour
should supply one harbour.dll (built with whatever tool is required
to make it proper), possibly a .def file, and also possibly a
proper .lib with COFF and one in OMF format.

Is this nonsense? What am I missing?

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Jul  9 08:16:07 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jul  9 08:16:11 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
References: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
Message-ID: <4874AC07.9030904@dbtopas.lt>

Przemyslaw Czerpak wrote:
> 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/contrib/hbmzip/hbmzip.c
>     * added setting file attribute in DJGPP builds
>     ! fixed some small typos in OS2 builds reported by David


Thank You, I was going to commit the change, but I found it's already there.


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Wed Jul  9 08:21:12 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jul  9 08:21:14 2008
Subject: [Harbour] BUG: GETENV() possible HVM corruption
In-Reply-To: <88426D68-16E1-4EBE-8A6B-CD5478B6CD70@syenar.hu>
References: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>	<71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>	<18351572.post@talk.nabble.com>
	<88426D68-16E1-4EBE-8A6B-CD5478B6CD70@syenar.hu>
Message-ID: <4874AD38.2060008@dbtopas.lt>

Hi,


> I wonder if there is a way to get the name
> of a function by address in Windows. Like in
> procexp.exe for example.

Do you mean address to function name mapping like .map file info or 
debug info attached to executable? I do not find any functionality like 
this in procexp.exe.


Best regards,
Mindaugas
From mbelgrano at deltain.it  Wed Jul  9 08:21:21 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul  9 08:21:37 2008
Subject: R: RE: [Harbour] R: Howto gtwvt
Message-ID: <000601c8e1be$52705aec$0400a8c0@deltain.net>

Dear harbour guru
How made clear situation like this?
Can generated a message like insufficent cflag directive instead generate an unusable exe?
I have not proposal but hope in a way of using harbour without know c compiler.
Harbour to obj can resolve?
Harbour to exe is possible?



----- Messaggio originale -----
Da: Abeb <abe.buch@att.net>
Inviato: mercoled? 9 luglio 2008 0.30
A: harbour@harbour-project.org <harbour@harbour-project.org>
Oggetto: RE: [Harbour] R: Howto gtwvt


Thanks alot
it's th cflags i was missing (-tW)
Thanks



Massimo Belgrano-3 wrote:
> 
> This is my sample
> -------------------------------------------BLD_B32A.BAT
> @echo off
> rem
> rem $Id: bld_b32.bat 8467 2008-05-21 11:45:42Z vszakats $
> rem
> if "%HB_BIN_INSTALL%" == "" set HB_BIN_INSTALL=..\..\..\bin
> if "%HB_LIB_INSTALL%" == "" set HB_LIB_INSTALL=..\..\..\lib
> if "%HB_INC_INSTALL%" == "" set HB_INC_INSTALL=..\..\..\include
> set HB_ARCHITECTURE=w32
> set HB_COMPILER=bcc32
> set HB_USER_LIBS=gtwvt.lib 
> SET CFLAGS= -tW -a8 -OS -O2 -5 -6 
> call %HB_BIN_INSTALL%\bld.bat %1 %2 %3 %4 %5 %6 %7 %8 %9
> 
> ----------------------------------------------------TEST.PRG
> #include "INKEY.CH"
> 
>     REQUEST HB_GT_WVT
>     REQUEST HB_GT_WVT_DEFAULT
>    
> 
> PROCEDURE main
>    ? HB_GTVERSION(), HB_GTVERSION(1)
>        TONE( 200, 3 )
>        TONE( 300, 3 )
>        TONE( 500, 3 )
>        Name=space(30)
>        @ 2,2 SAY "Name" get name
>        Read
>        @ 3,2 say "Hello "+name
>        INKEY( 0 )
>     RETURN
> -------------------------
> BLD_B32A TEST
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Abeb
> Sent: Tuesday, July 08, 2008 10:47 PM
> To: harbour@harbour-project.org
> Subject: Re: [Harbour] R: Howto gtwvt
> 
> 
> i get a dialog box say It's not a GUI program
> 
> 
> Massimo Belgrano-3 wrote:
>> 
>> First Read doc in doc\gtapi.txt
>> Second you must link Gtwvt.lib and any other gt that you wand use with
>> gtwvt thank to multigt architecture 
>> 
>> Massimo Belgrano
>> Albo Nazionale Informatici Professionisti n? 2620
>> Socio n? 2843 Associazione Informatici Professionisti
>> 
>> Analisi e sviluppo software per Lan e Web
>> Consulenza informatica - Formazione
>> Delta Informatica S.r.l.  http://www.deltain.it 
>> Via Torelli , 31 - 28100 Novara - Tel: 0321/30281
>> 
>> -----Messaggio originale-----
>> Da: harbour-bounces@harbour-project.org
>> [mailto:harbour-bounces@harbour-project.org] Per conto di Abeb
>> Inviato: marted? 8 luglio 2008 22.30
>> A: harbour@harbour-project.org
>> Oggetto: [Harbour] Howto gtwvt
>> 
>> 
>> Hi All Of You,
>> First let me thank all of you for this GREAT work. THANKS.
>> 
>> I'm trying to expirement with gtwvt.
>> 
>> What moduals need to be linked in to use this GT (using Borland)?
>> 
>> Thanks
>> Abe
>> 
>> 
>> -- 
>> View this message in context:
>> http://www.nabble.com/Howto-gtwvt-tp18348389p18348389.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>> 
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> 
>> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/Howto-gtwvt-tp18348389p18348714.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Howto-gtwvt-tp18348389p18350534.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From dbtopas at dbtopas.lt  Wed Jul  9 08:36:31 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jul  9 08:36:35 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>
	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
Message-ID: <4874B0CF.5030500@dbtopas.lt>

Hi,


>> They are not compatible due to different internal naming and
>> calling convention.
>> Final user may have many different Harbour applications compiled
>> by MSVC and BCC using harbour.dll and different names allows to
>> install both DLLs in system directory.
> 
> I understand that, but isn't it the point of .dlls that they
> provide a _common_ interface for all programs regardless of the
> compiler/tools/C/C++ mode used to generate the .dll and the
> user applications using it?

I have a similar opinion. Dll files are used to do function calls from 
external application, and these is no restrictions on compiler to be 
used to compile this external app.

So, I guess calling convention should be "standard". To solve some 
differences in function naming, import library options could be used. 
Borland implib.exe has:
     -a     Add '_' alias for MS flavor cdecl functions
     -c     Case sensitive symbols

I do not know that are differences in calling conventions in different 
compilers. Perhaps problems could be with C calling convension (used by 
Harbour), but Pascal should be OK, otherwise system dll's could not be used.

One more problem to be solved is alignment of structures. We will need 
strict alignment setting in .h files, to be able to compile dll and exe 
by different compiler, having different alignment settings.


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Jul  9 08:38:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 08:39:10 2008
Subject: [Harbour] BUG: GETENV() possible HVM corruption
In-Reply-To: <4874AD38.2060008@dbtopas.lt>
References: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>	<71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>	<18351572.post@talk.nabble.com>
	<88426D68-16E1-4EBE-8A6B-CD5478B6CD70@syenar.hu>
	<4874AD38.2060008@dbtopas.lt>
Message-ID: <59144048-01AF-4953-80A7-1E9173B5A0CB@syenar.hu>

Hi Mindaugas,

>>
>> I wonder if there is a way to get the name
>> of a function by address in Windows. Like in
>> procexp.exe for example.
>
> Do you mean address to function name mapping like .map file info or  
> debug info attached to executable? I do not find any functionality  
> like this in procexp.exe.

If you go to a task properties, you will get a "Threads" tab,
where you can get the stack with the "Stack" button, where you
should see the names (only for system .dlls). I'm thinking of
something like that.

(I've tried it on a virgin XP SP3, which doesn't have any
debug symbols or anything extra installed).

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  9 08:42:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 08:43:37 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <20080709120026.8DBEE7E806E@f17.poczta.interia.pl>
References: <20080709120026.8DBEE7E806E@f17.poczta.interia.pl>
Message-ID: <81706CAE-1F25-4C7D-9434-3D8CE2C8E0FE@syenar.hu>

>>>>
Hi Marek,

>>>> I mean all the .dlls I know (besides Harbour), provide one
>>>> such .dll (the most obvious example being Windows .dlls, but
>>>> I could cite all the external tools contribs use) and I can
>>>> use them equally well with all compilers and programming
>>>> languages.
>>>
>>> Really ? Even those which are pure C++ ? Any example of such a dll
>>
>> I'm not talking about pure C++, since Harbour is pure _C_, so we
>> don't have to deal with pure C++, only C code compiled in C++
>> mode, which is different.
>
> So do you know about any dll compiled with Borland which is
> part of a system directory and is used by other compilers ?

I don't know of any .dlls I use, what was the compiler used
to generate them, nor do I care as far as I can use them with
provided .lib files (or if these are not available I can
create my own .lib files for them).

If BCC is not applicable to produce a standard calling
convention and a standard name mangling, we might not use
it a Harbour .dll binary package.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Jul  9 09:16:20 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jul  9 09:16:25 2008
Subject: [Harbour] BUG: GETENV() possible HVM corruption
In-Reply-To: <59144048-01AF-4953-80A7-1E9173B5A0CB@syenar.hu>
References: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>	<71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>	<18351572.post@talk.nabble.com>	<88426D68-16E1-4EBE-8A6B-CD5478B6CD70@syenar.hu>	<4874AD38.2060008@dbtopas.lt>
	<59144048-01AF-4953-80A7-1E9173B5A0CB@syenar.hu>
Message-ID: <4874BA24.20802@dbtopas.lt>

Hi,


Szak?ts Viktor wrote:
> If you go to a task properties, you will get a "Threads" tab,
> where you can get the stack with the "Stack" button, where you
> should see the names (only for system .dlls). I'm thinking of
> something like that.
> 
> (I've tried it on a virgin XP SP3, which doesn't have any
> debug symbols or anything extra installed).

I guess it's not difficult to obtain (well, perhaps, a few thousand 
lines of code :) ). Stack trace addresses can be obtained in case of 
GPF. Code posted by me, adapted to Harbour by you.

Next task is to get list of loaded dll's and it's image base. If I 
remember You are the one who is using Far manager. It has ProcList 
plugin [Alt+F1] [4: Process list]. If you press [F3 View], you'll find 
something like:
Modules:
   Base      Size    Path (version info is not displayed)
   00400000   C0000 C:\Program Files\Far\Far.exe
   7C900000   B0000 C:\WINDOWS\system32\ntdll.dll
   7C800000   F4000 C:\WINDOWS\system32\kernel32.dll
   77D40000   90000 C:\WINDOWS\system32\USER32.dll
   77F10000   46000 C:\WINDOWS\system32\GDI32.dll
   73000000   26000 C:\WINDOWS\system32\WINSPOOL.DRV
   77C10000   58000 C:\WINDOWS\system32\msvcrt.dll
   ......

After you have dll list, you have address space <-> dll correspondence.
(I guess this could be obtained using ntdll.dll or psapi.dll. The 
details could be found in Far manager SVN.)

The last job is to open dll file for reading, load export section and 
find the entry containing the nearest address.



Best regards,
Mindaugas
From sscc at mweb.co.za  Wed Jul  9 09:17:52 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Jul  9 09:18:01 2008
Subject: [Harbour] BUG: GETENV() possible HVM corruption
In-Reply-To: <59144048-01AF-4953-80A7-1E9173B5A0CB@syenar.hu>
References: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>	<71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>	<18351572.post@talk.nabble.com>	<88426D68-16E1-4EBE-8A6B-CD5478B6CD70@syenar.hu>	<4874AD38.2060008@dbtopas.lt>
	<59144048-01AF-4953-80A7-1E9173B5A0CB@syenar.hu>
Message-ID: <4874BA80.7090309@mweb.co.za>

Szak?ts Viktor wrote:

> (I've tried it on a virgin XP SP3, which doesn't have any
> debug symbols or anything extra installed).

www.sysinternals.com (bought by MS) have some very interesting 
utilities which may help - Process Monitor and Process Explorer.

Regards
Alex
From mpaliwoda at interia.pl  Wed Jul  9 09:52:37 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 09:52:48 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874B0CF.5030500@dbtopas.lt>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
	<4874B0CF.5030500@dbtopas.lt>
Message-ID: <4874C2A5.4010202@interia.pl>

Mindaugas, Viktor, all

>>> They are not compatible due to different internal naming and
>>> calling convention.
>>> Final user may have many different Harbour applications compiled
>>> by MSVC and BCC using harbour.dll and different names allows to
>>> install both DLLs in system directory.
>>
>> I understand that, but isn't it the point of .dlls that they
>> provide a _common_ interface for all programs regardless of the
>> compiler/tools/C/C++ mode used to generate the .dll and the
>> user applications using it?
> 
> I have a similar opinion. Dll files are used to do function calls from 
> external application, and these is no restrictions on compiler to be 
> used to compile this external app.

Sorry guys, but it seems to me you both mix Harbour.dll
with general purpose dll libraries used by a system.
It's not the case. The problem is C standard Runtime
library. Each C compiler has its own dynamic CRTL designed
and compiled for that compiler. Harbour uses C Runtime
library extensivly. If I would like to create and use
Harbour dll which uses *dynamic C Runtime library" I will
not be able to do so - following your aproach.
And in fact I do this. My HbWxW uses Harbour dll AND
dynamic CRTL (Borland build).

So please don't force anything based on your (not real
life) experience with dlls. Current aproach is a good
balance between "dll hell" and a "real life" requirements.

Or do you want to have a "final word" again ?

-- 

Marek

----------------------------------------------------------------------
W kosciele tez zdarzaja sie wpadki!
Smieszny filmik >>> http://link.interia.pl/f1e61

From harbour.01 at syenar.hu  Wed Jul  9 10:18:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 10:19:24 2008
Subject: [Harbour] BUG: GETENV() possible HVM corruption
In-Reply-To: <4874BA24.20802@dbtopas.lt>
References: <1700AB0E-DBA8-4AEE-8594-4F48D216064E@syenar.hu>	<71C5AA84-EA02-4EE3-B627-7476E887440E@syenar.hu>	<18351572.post@talk.nabble.com>	<88426D68-16E1-4EBE-8A6B-CD5478B6CD70@syenar.hu>	<4874AD38.2060008@dbtopas.lt>
	<59144048-01AF-4953-80A7-1E9173B5A0CB@syenar.hu>
	<4874BA24.20802@dbtopas.lt>
Message-ID: <A9E4302A-BD17-4301-AAF1-EF42D355B0E0@syenar.hu>

Hi Mindaugas,

>>
>> (I've tried it on a virgin XP SP3, which doesn't have any
>> debug symbols or anything extra installed).
>
> I guess it's not difficult to obtain (well, perhaps, a few thousand  
> lines of code :) ). Stack trace addresses can be obtained in case of  
> GPF. Code posted by me, adapted to Harbour by you.
>
> Next task is to get list of loaded dll's and it's image base. If I  
> remember You are the one who is using Far manager. It has ProcList  
> plugin [Alt+F1] [4: Process list]. If you press [F3 View], you'll  
> find something like:

You remember well.

> Modules:
>  Base      Size    Path (version info is not displayed)
>  00400000   C0000 C:\Program Files\Far\Far.exe
>  7C900000   B0000 C:\WINDOWS\system32\ntdll.dll
>  7C800000   F4000 C:\WINDOWS\system32\kernel32.dll
>  77D40000   90000 C:\WINDOWS\system32\USER32.dll
>  77F10000   46000 C:\WINDOWS\system32\GDI32.dll
>  73000000   26000 C:\WINDOWS\system32\WINSPOOL.DRV
>  77C10000   58000 C:\WINDOWS\system32\msvcrt.dll
>  ......
>
> After you have dll list, you have address space <-> dll  
> correspondence.
> (I guess this could be obtained using ntdll.dll or psapi.dll. The  
> details could be found in Far manager SVN.)
>
> The last job is to open dll file for reading, load export section  
> and find the entry containing the nearest address.

Good ideas. I'm not sure I can implement/port it, but
the ingredients are there.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Jul  9 10:58:03 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jul  9 10:58:07 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874C2A5.4010202@interia.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>
	<4874C2A5.4010202@interia.pl>
Message-ID: <4874D1FB.7020308@dbtopas.lt>

Hi,


> Sorry guys, but it seems to me you both mix Harbour.dll
> with general purpose dll libraries used by a system.

So, what difference do you see between Harbour.dll and "general puporse 
dll". Why Harbour.dll could not be a general puporse dll? What are 
requirements for dll to be a general puporse?


> It's not the case. The problem is C standard Runtime
> library. Each C compiler has its own dynamic CRTL designed
> and compiled for that compiler. Harbour uses C Runtime
> library extensivly. If I would like to create and use
> Harbour dll which uses *dynamic C Runtime library" I will
> not be able to do so - following your aproach.
> And in fact I do this. My HbWxW uses Harbour dll AND
> dynamic CRTL (Borland build).

Not sure I've got your idea well... I'll try to ask a two questions:

1) Can we link static C RTL to harbour.dll? I mean all C RTL functions 
like memcpy(), etc. will be inside inside harbour.dll, but not Borland's 
cc3250.dll. This way our harbour.dll will be "self contained" it will 
not depend on external borland's code.

2) If 1) is true, do we have any other problems to use BCC compiled 
harbour.dll with another C compiler?

OK, I see some problems here. Some functions depends on structures 
created by RTL, for example I guess we'll have GPF if we allocate memory 
using Borland's malloc() (from harbour.dll) and free it using 
Microsoft's free() (from main app). This should be solved by forcing 
main app to use .dll hb_xgrab(), hb_xfree().


> Or do you want to have a "final word" again ?

No need for final word. Final solution would be better.

Perhaps more problems could by found, but I really think there is a 
solution for the problem. I used various .dll, for example: zlib.dll, 
libcairo.dll, libmysql.dll, ace32.dll, gtk, MrSID, etc, etc. I did not 
care that compiler it was compiled. I've used it from both GCC and 
Borland. Original binary distribution very ofter come with COFF import 
library (perhaps MSVC), but I've used Borland's implib.exe, and used 
created import library with success.


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Jul  9 10:58:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 10:59:25 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874C2A5.4010202@interia.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
	<4874B0CF.5030500@dbtopas.lt> <4874C2A5.4010202@interia.pl>
Message-ID: <E23BD98D-CB76-467F-8D57-48DC9A6A97BE@syenar.hu>

>>>>
Hi Marek,

>>>> I understand that, but isn't it the point of .dlls that they
>>> provide a _common_ interface for all programs regardless of the
>>> compiler/tools/C/C++ mode used to generate the .dll and the
>>> user applications using it?
>> I have a similar opinion. Dll files are used to do function calls  
>> from external application, and these is no restrictions on compiler  
>> to be used to compile this external app.
>
> Sorry guys, but it seems to me you both mix Harbour.dll
> with general purpose dll libraries used by a system.
> It's not the case. The problem is C standard Runtime
> library. Each C compiler has its own dynamic CRTL designed
> and compiled for that compiler. Harbour uses C Runtime
> library extensivly. If I would like to create and use
> Harbour dll which uses *dynamic C Runtime library" I will
> not be able to do so - following your aproach.
> And in fact I do this. My HbWxW uses Harbour dll AND
> dynamic CRTL (Borland build).

Okay, that's also part of the issue. But f.e.
libcurl.dll also uses C RTL, so it depends on MSVCRT.DLL.
[ BTW, all MinGW binaries depend on MSVCRT.DLL ]

Standard ANSI C calls shouldn't be a problem, as they
should work regardless of the underlying C RTL
implementation. Then, I guess the problem may be with
compiler specific C RTL functions (?).

There was a direction way back in time, so that we
should try to use ANSI C functions or direct OS API
calls, while avoiding any C RTL specific functions.

Maybe following the above could clear up such issues,
if we really have them.

> So please don't force anything based on your (not real
> life) experience with dlls. Current aproach is a good
> balance between "dll hell" and a "real life" requirements.

Who forces what? I was raising a potential issue/question
and we're discussing it, hopefully everybody will learn
something, but surely nobody loses anything.

> Or do you want to have a "final word" again ?

Is this REALLY necessary?

Or is Harbour developers' list such a place where
questions cannot be asked about Harbour's properties,
inner workings, design considerations behind certain
moves in the past or current state, or raise any
possible issues without being faced with this comment
again and again?

Final word, yeah: Regardless of any moves made out
this discussion I think it's very important to discuss
why Harbour has harbour-b32.dll and harbour-vc.dll, when
and why should one use any one of them. These questions
are nowhere documented, and very much unclear for me
(and probably for other users downloading binaries, too),
so they would raise anyway as soon as someone would try
to use any harbour.dll at all.

Brgds,
Viktor

From mpaliwoda at interia.pl  Wed Jul  9 10:59:59 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 11:00:12 2008
Subject: [Harbour] 2008-07-09 13:57 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <200807091158.m69Bw3hj014557@31-mo5-4.acn.waw.pl>
References: <200807091158.m69Bw3hj014557@31-mo5-4.acn.waw.pl>
Message-ID: <4874D26F.2030104@interia.pl>

Hi Przemek,

> 2008-07-09 13:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/filesys.c
>     * finished hb_fsSetAttr()

Crosscompiling using MSVC Win64 I get :

----------
source\rtl\filesys.c(1061) : error C2440: 'initializing' : cannot convert 
from 'BYTE *' to 'LPTSTR'
         Types pointed to are unrelated; conversion requires 
reinterpret_cast, C-style cast or function-style cast
----------

Any hint ?

-- 

Marek

----------------------------------------------------------------------
Galeria absurdow.
zobacz >>> http://link.interia.pl/f1e5e

From mpaliwoda at interia.pl  Wed Jul  9 11:20:00 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 11:20:16 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874D1FB.7020308@dbtopas.lt>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>
	<4874D1FB.7020308@dbtopas.lt>
Message-ID: <4874D720.9090805@interia.pl>

Mindaugas,

> So, what difference do you see between Harbour.dll and "general puporse 
> dll". Why Harbour.dll could not be a general puporse dll? What are 
> requirements for dll to be a general puporse?

Dependance on CRTL. MS provides one with system, but
some compilers do not depend on it (Borland for example).

>> It's not the case. The problem is C standard Runtime
>> library. Each C compiler has its own dynamic CRTL designed
>> and compiled for that compiler. Harbour uses C Runtime
>> library extensivly. If I would like to create and use
>> Harbour dll which uses *dynamic C Runtime library" I will
>> not be able to do so - following your aproach.
>> And in fact I do this. My HbWxW uses Harbour dll AND
>> dynamic CRTL (Borland build).
> 
> Not sure I've got your idea well... I'll try to ask a two questions:
> 
> 1) Can we link static C RTL to harbour.dll? I mean all C RTL functions 
> like memcpy(), etc. will be inside inside harbour.dll, but not Borland's 
> cc3250.dll. This way our harbour.dll will be "self contained" it will 
> not depend on external borland's code.

What you've written is true. But that's not the case. The
problem is *dynamic* CRTL. Especially the threaded one.
For Borland it is cc3250mt.dll (Bcc 5.5). Some programs
REQUIRE to be built using dynamic threaded CRTL. Try to
build a dll which is used in threads and is not built
against cc3250mt.dll with Borland and you'll see what
I am talking about.

> 2) If 1) is true, do we have any other problems to use BCC compiled 
> harbour.dll with another C compiler?

It's not true. See above.

> OK, I see some problems here. Some functions depends on structures 
> created by RTL, for example I guess we'll have GPF if we allocate memory 
> using Borland's malloc() (from harbour.dll) and free it using 
> Microsoft's free() (from main app). This should be solved by forcing 
> main app to use .dll hb_xgrab(), hb_xfree().

And you consider it as a valid solution ?
What if I wanted to write some C extensions,
mainly to deal with so called "worker threads" ?
Or I would like to use 3-rd party dll which
uses malloc() internally ?
Come on. Be serious. You are a programmer.

>> Or do you want to have a "final word" again ?
> 
> No need for final word. Final solution would be better.

> Perhaps more problems could by found, but I really think there is a 
> solution for the problem. I used various .dll, for example: zlib.dll, 
> libcairo.dll, libmysql.dll, ace32.dll, gtk, MrSID, etc, etc. I did not 
> care that compiler it was compiled. I've used it from both GCC and 
> Borland. Original binary distribution very ofter come with COFF import 
> library (perhaps MSVC), but I've used Borland's implib.exe, and used 
> created import library with success.

Perhaps you did not use dynamic CRTL with those dlls in Borland.

-- 

Marek

----------------------------------------------------------------------
Zobacz cala prawde o Lukaszu Podolskim!
kliknij >>> http://link.interia.pl/f1e57

From e.m.giordano at emagsoftware.it  Wed Jul  9 11:21:41 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Jul  9 11:21:46 2008
Subject: [Harbour] 2008-07-09 13:57 UTC+0200
	PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
References: <200807091158.m69Bw3hj014557@31-mo5-4.acn.waw.pl>
	<4874D26F.2030104@interia.pl>
Message-ID: <4453889A22884A12A14C9DB3AC7A29FE@emag>


-----Messaggio Originale----- 
Da: "Marek Paliwoda" <mpaliwoda@interia.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 9 luglio 2008 16.59
Oggetto: Re: [Harbour] 2008-07-09 13:57 UTC+0200 PrzemyslawCzerpak 
(druzus/at/priv.onet.pl)


> Hi Przemek,
>
>> 2008-07-09 13:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>   * harbour/source/rtl/filesys.c
>>     * finished hb_fsSetAttr()
>
> Crosscompiling using MSVC Win64 I get :
>
> ----------
> source\rtl\filesys.c(1061) : error C2440: 'initializing' : cannot convert 
> from 'BYTE *' to 'LPTSTR'
>         Types pointed to are unrelated; conversion requires 
> reinterpret_cast, C-style cast or function-style cast
> ----------
>
> Any hint ?

And this is from BCC55:

Warning W8079 source\rtl\filesys.c 1061: Mixing pointers to different 'char' 
types in function hb_fsSetAttr

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mpaliwoda at interia.pl  Wed Jul  9 11:28:20 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 11:28:31 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <E23BD98D-CB76-467F-8D57-48DC9A6A97BE@syenar.hu>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>
	<4874C2A5.4010202@interia.pl>
	<E23BD98D-CB76-467F-8D57-48DC9A6A97BE@syenar.hu>
Message-ID: <4874D914.2060503@interia.pl>

Viktor,

> Okay, that's also part of the issue. But f.e.
> libcurl.dll also uses C RTL, so it depends on MSVCRT.DLL.
> [ BTW, all MinGW binaries depend on MSVCRT.DLL ]

AFAIK MSVCRT.DLL is a system CRTL. Normally it is
not used by MSVC, until you explicitly build your
exe against it. MSVC uses its own CRTL (although I
may be wrong here).

Did you use libcurl with Borland harbour.dll compiled
to use Borland dynamic CRTL ? I wonder if it really
works.

> Standard ANSI C calls shouldn't be a problem, as they
> should work regardless of the underlying C RTL
> implementation. Then, I guess the problem may be with
> compiler specific C RTL functions (?).
> 
> There was a direction way back in time, so that we
> should try to use ANSI C functions or direct OS API
> calls, while avoiding any C RTL specific functions.
> 
> Maybe following the above could clear up such issues,
> if we really have them.
> 
>> So please don't force anything based on your (not real
>> life) experience with dlls. Current aproach is a good
>> balance between "dll hell" and a "real life" requirements.
> 
> Who forces what? I was raising a potential issue/question
> and we're discussing it, hopefully everybody will learn
> something, but surely nobody loses anything.

I don't see any issue except the one which
will come if we follow your proposition. It
does not solve anything and will block some
possible scenarious.

>> Or do you want to have a "final word" again ?
> 
> Is this REALLY necessary?
> 
> Or is Harbour developers' list such a place where
> questions cannot be asked about Harbour's properties,
> inner workings, design considerations behind certain
> moves in the past or current state, or raise any
> possible issues without being faced with this comment
> again and again?
> 
> Final word, yeah: Regardless of any moves made out
> this discussion I think it's very important to discuss
> why Harbour has harbour-b32.dll and harbour-vc.dll, when
> and why should one use any one of them. These questions
> are nowhere documented, and very much unclear for me
> (and probably for other users downloading binaries, too),
> so they would raise anyway as soon as someone would try
> to use any harbour.dll at all.

The problem with "final word" is that you do not
want to listen to any resonable arguments. Even
those based on technical details.

-- 

Marek

----------------------------------------------------------------------
Rowerem po Roztoczu.
Zobacz relacje >>> http://link.interia.pl/f1e65

From druzus at acn.waw.pl  Wed Jul  9 11:42:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 11:42:57 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <DB6B9A9E-2786-450F-9BDE-F0E93BB8F9C0@syenar.hu>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>
	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>
	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
	<20080709114206.GA5882@34-mo7-2.acn.waw.pl>
	<DB6B9A9E-2786-450F-9BDE-F0E93BB8F9C0@syenar.hu>
Message-ID: <20080709154251.GA29740@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I can see that, but that only means we cannot generate
> our "standard" Harbour .dll using every possible compilers,
> just some dedicated ones. Which is perfectly acceptable (and
> just an implementation/build detail) and in fact irrelevant
> from a users POVs. The point from a users POV is IMO that
> there should be one and only harbour.dll, and they can use
> it through some documented methods, .h and .def files in a
> std way.

But it's not acceptable by me and Harbour users which have to
use 3-rd party binary libraries. As long as Harbour will depend
on C compiler and linker then droping native compiler .DLLs
will be night mare.
1-st: user will notbe able to create Harbour DLLs themself using
      C compiler they have for Harbour so they will have to install
      two different compilers in such case.
2-nd: he will end with binaries having two sets of C-RTLs: one used
      by user code and 3-rd party binary libraries and seconds used
      by harbour.dll with all other .DLLs refereed by it. It's even
      possible that the same .dll libraries will be loaded by different
      implib wrappers.
3-rd: The final binaries will be bigger and slower due to additional
      wrapper code. And of course for full dynamic builds you will need
      to have in final computers .DLLs from native C compiler and from
      the one used to create for harbour.dll. I do not know how big
      problem it can create in MS-Windows world and if it's it real
      problem or not.
In summary it will cause that C compilers which cannot generate and
natively support "common" .dll format will have to be dropped by users
and instead of resolving some meaningless problem we will create new
very serious one.

> That's not my point. We should use a calling convention for
> that .dll which is supported by most compilers, meaning
> 'MS cdecl' for example. That's why we have the HB_EXPORT
> keyword.

HB_EXPORT is only visibility attribute. It informs linker
for which symbols it should create special translation table
used by application when it loads .DLL. This attribute is
efectively used at link time. There is also IMPORT attribute
which is used only at compile time and inform compilers that
some symbols will come from .DLLs so cannot be accessed directly
but using translation table with exported symbols inside DLL.
It means that compiler cannot enable some optimizations because
in DLL format this translation table supports only direct addreses
without offsets so if you access some structure members compiler
cannot calculate the offset during compilation but has to generate
.asm code which will add it to address taken from translation table.
The code is a little bit slower but it's a must in DLL format.
And here we have yet another problem. All public structures will
need fixed alignment so we will have to force alignment switches
during compilation. Anyhow it may also not help because in some
cases even if you force the same alignment different C compilers
can calculate it differently!. It will be necessary to carefully
check all our public structure definitions and if possible make
them alignment independent changing the order of structure members
and/or adding dummy members (BTW some cleanup in public structures
which may resolve some potential alignment problem should be done
even if we will not try to create common harbour.dll)
All of the above has nothing to naming and calling conventions.

> What I'm saying is that there exist such a calling
> convention and naming convention used to build a .dll
> which can allow most (or all) 3rd party tools to be able
> to interface with it.
> user32.dll f.e. is such a .dll.

C compilers have build-in import libraries for standard system
DLLs so you simply do not see them but they exists and are linked.

> Creating import libraries
> is a different matter, and we should or might supply those
> for different compilers to help them being used, but harbour.dll
> itself should be the same all across.

I do not think that Harbour users using other compilers will accept
it. Anyhow if you really need it then you can chose one format (f.e.
MSVC one) and reserve harbour.dll name only for this format. But
please do not force other users to create slower and bigger binaries
which may also have some unpleasure side effect for MT mode when
two different C-RTLs will be linked with final binaries. F.e. some
system functions may not be MT safe and C-RTL may use some mutex
which protect their execution. This functions may be used internally
by some other ones which we use in Harbour code and which are used
by 3-rd party code. Two different C-RTLs will not know anything about
their own protection and this may cause unpredictable results.
I do not know if such situation will appear but if it will then
finding the real reason of some seldom and unexpected behavior or
GPFs will be in practice impossible.

> They need to use an import lib anyway (which we already supply),
> why would they care about the compiler used for harbour.dll if
> it works? I don't know of any .dlls I use, which compiler was
> used to build them.

Not every one have to use 3-rd party .DLLs you are talking about
and AFAIK some of this libraries where recompiled bu users using
native compilers.

> All I care (as a .dll user) is a .lib file which works with the
> given .dll and with my compiler of choice. IMO, ideally Harbour
> should supply one harbour.dll (built with whatever tool is required
> to make it proper), possibly a .def file, and also possibly a
> proper .lib with COFF and one in OMF format.

1-st we should add support for direct .obj file generation and
add some simple linker. In such case you can define "suggested"
standard which will be compatible with generated .obj files and
and linker. It will also force 3-rd part developers to create
binaries in this format. Anyhow it should be still possible for
users to create native .DLLs if they like and want to use them
because the need maximum speed and minimal size.

best regards,
Przemek
From dbtopas at dbtopas.lt  Wed Jul  9 11:53:17 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jul  9 11:53:21 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874D720.9090805@interia.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<4874D1FB.7020308@dbtopas.lt>
	<4874D720.9090805@interia.pl>
Message-ID: <4874DEED.2090001@dbtopas.lt>

Hi,


> And you consider it as a valid solution ?
> What if I wanted to write some C extensions,
> mainly to deal with so called "worker threads" ?
> Or I would like to use 3-rd party dll which
> uses malloc() internally ?
> Come on. Be serious. You are a programmer.

I'm not sure I've understood the meaning of "worker threads", but I 
think I've found the main idea of malloc(), free() solution: memory 
should be allocated and freed using the same library. Dll and main exe 
can have separate memory heaps.


> Perhaps you did not use dynamic CRTL with those dlls in Borland.

Yes, usually I use static linking. But... do you know any popular 
library project with different binary distributions for MinGW, MSVC, 
BCC? Somehow zlib, Advantage Database server, MySQL, Firebird, etc is 
able to by pass this problem. Or am I wrong? I see Harbour the first one 
with separate .dlls. Maybe it's because of its nature - virtual machine 
inside .dll, maybe we should compare ourself JavaVM, or .NET... But I'm 
not sure if it's unsolvable problem. I'm not saying it should be done 
today, or before 1.0 Final.



Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Jul  9 12:06:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 12:07:37 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874D914.2060503@interia.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>
	<4874C2A5.4010202@interia.pl>
	<E23BD98D-CB76-467F-8D57-48DC9A6A97BE@syenar.hu>
	<4874D914.2060503@interia.pl>
Message-ID: <1FDF273A-238E-4B34-9BD9-2FE92CD832D1@syenar.hu>

Hi Marek,

>> AFAIK MSVCRT.DLL is a system CRTL. Normally it is
> not used by MSVC, until you explicitly build your
> exe against it. MSVC uses its own CRTL (although I
> may be wrong here).
>
> Did you use libcurl with Borland harbour.dll compiled
> to use Borland dynamic CRTL ? I wonder if it really
> works.

I don't use harbour.dll at all (never exactly understood
its details and benefits), but since I've built all
binaries for Windows, I was wondering why are we having
to differently named ones, a practice which I haven't
seen in any other projects before.

Answering to your question, I'm not sure if I'd want to
use Borland dynamic C RTL. Why is it better than using
the static one? And back to the first one, what is the
benefit of harbour-*.dll? (no pun intented, I'm really
interested, and I don't want to remove it either.)

[ The issue so far:
1) C calling convention differences (solvable)
2) name mangling differences (solvable)
3) C RTL interaction and dependency
    Multiple issues, the exact specifics are not exactly clear
    to me yet. ]

>>> So please don't force anything based on your (not real
>>> life) experience with dlls. Current aproach is a good
>>> balance between "dll hell" and a "real life" requirements.
>> Who forces what? I was raising a potential issue/question
>> and we're discussing it, hopefully everybody will learn
>> something, but surely nobody loses anything.
>
> I don't see any issue except the one which
> will come if we follow your proposition. It
> does not solve anything and will block some
> possible scenarious.

I was asking question to have a clearer picture
about this "issue", let's call it topic.

>>> Final word, yeah: Regardless of any moves made out
>> this discussion I think it's very important to discuss
>> why Harbour has harbour-b32.dll and harbour-vc.dll, when
>> and why should one use any one of them. These questions
>> are nowhere documented, and very much unclear for me
>> (and probably for other users downloading binaries, too),
>> so they would raise anyway as soon as someone would try
>> to use any harbour.dll at all.
>
> The problem with "final word" is that you do not
> want to listen to any resonable arguments. Even
> those based on technical details.

I have no doubt that you know what you're talking
about, but it's really difficult to discuss even a
technical thing when you consider a mere question
an attack. I'd prefer to read more on the technical
details rather.

If this is a tabu issue in some sorts of ways, let's move on.

Brgds,
Viktor

From mpaliwoda at interia.pl  Wed Jul  9 12:13:44 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 12:13:57 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874DEED.2090001@dbtopas.lt>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<4874D1FB.7020308@dbtopas.lt>	<4874D720.9090805@interia.pl>
	<4874DEED.2090001@dbtopas.lt>
Message-ID: <4874E3B8.9030204@interia.pl>

Mindaugas,

>> And you consider it as a valid solution ?
>> What if I wanted to write some C extensions,
>> mainly to deal with so called "worker threads" ?
>> Or I would like to use 3-rd party dll which
>> uses malloc() internally ?
>> Come on. Be serious. You are a programmer.
> 
> I'm not sure I've understood the meaning of "worker threads", but I 
> think I've found the main idea of malloc(), free() solution: memory 
> should be allocated and freed using the same library. Dll and main exe 
> can have separate memory heaps.
> 
>> Perhaps you did not use dynamic CRTL with those dlls in Borland.
> 
> Yes, usually I use static linking. But... do you know any popular 
> library project with different binary distributions for MinGW, MSVC, 
> BCC? Somehow zlib, Advantage Database server, MySQL, Firebird, etc is 
> able to by pass this problem. Or am I wrong? 

Yes, you are wrong. See below what MS docs say about the problem.

> I see Harbour the first one with separate .dlls. 

I guess it's OK :).

> Maybe it's because of its nature - virtual machine 
> inside .dll, maybe we should compare ourself JavaVM, or .NET... But I'm 
> not sure if it's unsolvable problem. I'm not saying it should be done 
> today, or before 1.0 Final.

 From MSVC documentation :

"The msvcrt.dll is now a "known DLL," meaning that it is a system component 
owned and built by Windows. It is intended for future use only by 
system-level components.

If you have more than one DLL or EXE, then you may have more than one CRT, 
whether or not you are using different versions of Visual C++. For example, 
statically linking the CRT into multiple DLLs can present the same problem. 
Developers encountering this problem with static CRTs have been instructed 
to compile with /MD to use the CRT DLL. Now that the CRT DLL has been 
renamed to msvcr90.dll, applications may have some components linked to 
msvcrt.dll and others to msvcr90.dll. If your DLLs pass CRT resources across 
the msvcrt.dll and msvcr90.dll boundary, you will encounter issues with 
mismatched CRTs and need to recompile your project with Visual C++ 2008.

If your program is using more than one version of the CRT, some care is 
needed when passing certain CRT objects (such as file handles, locales and 
environment variables) across DLL boundaries. For more information on the 
issues involved and how to resolve them, see Potential Errors Passing CRT 
Objects Across DLL Boundaries."


-- 

Marek

----------------------------------------------------------------------
Zobacz cala prawde o Lukaszu Podolskim!
kliknij >>> http://link.interia.pl/f1e57

From harbour.01 at syenar.hu  Wed Jul  9 12:16:33 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 12:17:22 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874DEED.2090001@dbtopas.lt>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<4874D1FB.7020308@dbtopas.lt>
	<4874D720.9090805@interia.pl> <4874DEED.2090001@dbtopas.lt>
Message-ID: <AA1EA2B5-9086-428A-90CC-29F5EAED3340@syenar.hu>

>> And you consider it as a valid solution ?
>> What if I wanted to write some C extensions,
>> mainly to deal with so called "worker threads" ?
>> Or I would like to use 3-rd party dll which
>> uses malloc() internally ?
>> Come on. Be serious. You are a programmer.
>
> I'm not sure I've understood the meaning of "worker threads", but I  
> think I've found the main idea of malloc(), free() solution: memory  
> should be allocated and freed using the same library. Dll and main  
> exe can have separate memory heaps.
>
>
>> Perhaps you did not use dynamic CRTL with those dlls in Borland.
>
> Yes, usually I use static linking. But... do you know any popular  
> library project with different binary distributions for MinGW, MSVC,  
> BCC? Somehow zlib, Advantage Database server, MySQL, Firebird, etc  
> is able to by pass this problem. Or am I wrong? I see Harbour the  
> first one with separate .dlls. Maybe it's because of its nature -  
> virtual machine inside .dll, maybe we should compare ourself JavaVM,  
> or .NET... But I'm not sure if it's unsolvable problem. I'm not  
> saying it should be done today, or before 1.0 Final.

Definitely not before 1.0.0 (if ever), but I was wondering about
the exact same thing. I cannot yet grasp why harbour.dll is different,
I can accept it is, but I still don't see it clearly why.

Also other programming languages:
- python25.dll (using msvcr71.dll)
- php5ts.dll (using msvcrt.dll)

Maybe these also have some documented restrictions on the supported
compilers for apps wanting to interface with them, I don't know.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  9 12:25:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 12:25:09 2008
Subject: [Harbour] 2008-07-09 18:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807091625.m69GP358007187@31-mo5-4.acn.waw.pl>

2008-07-09 18:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbwince.h
  * harbour/source/common/hbwince.c
    + added SetFileAttributesA() for WinCE builds

  * harbour/source/rtl/filesys.c
    * replaced UNICODE translations for SetFileAttributes()
      with direct call to SetFileAttributesA()

  * harbour/include/hbapifs.h
  * harbour/source/rtl/spfiles.c
  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/direct.c
  * harbour/source/rtl/filesys.c
    * changed internal representation for file attributes from USHORT
      to ULONG
    + added support for POSIX permission attributes in .c code
    ; added some comments about used attribute translations which
      should be cleand

best regards
Przemek
From mpaliwoda at interia.pl  Wed Jul  9 12:27:20 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 12:27:33 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <1FDF273A-238E-4B34-9BD9-2FE92CD832D1@syenar.hu>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<E23BD98D-CB76-467F-8D57-48DC9A6A97BE@syenar.hu>	<4874D914.2060503@interia.pl>
	<1FDF273A-238E-4B34-9BD9-2FE92CD832D1@syenar.hu>
Message-ID: <4874E6E8.2070806@interia.pl>

Viktor,

> I don't use harbour.dll at all (never exactly understood
> its details and benefits), but since I've built all
> binaries for Windows, I was wondering why are we having
> to differently named ones, a practice which I haven't
> seen in any other projects before.

So read my answer to Mindaugas, where I quoted MSVC docs
about the issue I was trying to show to both of you.

> Answering to your question, I'm not sure if I'd want to
> use Borland dynamic C RTL. Why is it better than using
> the static one? 

It's not a matter of "being better or worse". It's a matter
of "working" at all. Some projects WILL NOT work without dynamic
CRTL. That's a matter of fact. You have to deal with it.

> And back to the first one, what is the
> benefit of harbour-*.dll? (no pun intented, I'm really
> interested, and I don't want to remove it either.)

Some libraries have to be compiled to dll. Otherwise
they will not work at all. That's their nature. An
example is HbWxW. There are literaly hundreds of classes
in it, each of them being in a separate obj. Those
classes create other classes dynamicly during runtime.
So often there is no reference to some class from your
code, but it has to be created. Because it is not
referenced by your code you would have to REQUEST it
explicitly. But you do not know WHICH one will be
created in general - it's internal part of a librbary.
So you would have to REQUEST ALL classes from library,
causing the final exe to be simlpy HUGE - each exe created
would contain ALL classes. Having a library in dll
solves the problem in an elegant way.

> [ The issue so far:
> 1) C calling convention differences (solvable)
> 2) name mangling differences (solvable)
> 3) C RTL interaction and dependency
>    Multiple issues, the exact specifics are not exactly clear
>    to me yet. ]

So read my answer to Mindaugas, where I quoted MSVC docs
about the issue I was trying to show to both of you.

>>>> So please don't force anything based on your (not real
>>>> life) experience with dlls. Current aproach is a good
>>>> balance between "dll hell" and a "real life" requirements.
>>> Who forces what? I was raising a potential issue/question
>>> and we're discussing it, hopefully everybody will learn
>>> something, but surely nobody loses anything.
>>
>> I don't see any issue except the one which
>> will come if we follow your proposition. It
>> does not solve anything and will block some
>> possible scenarious.
> 
> I was asking question to have a clearer picture
> about this "issue", let's call it topic.
> 
>>>> Final word, yeah: Regardless of any moves made out
>>> this discussion I think it's very important to discuss
>>> why Harbour has harbour-b32.dll and harbour-vc.dll, when
>>> and why should one use any one of them. These questions
>>> are nowhere documented, and very much unclear for me
>>> (and probably for other users downloading binaries, too),
>>> so they would raise anyway as soon as someone would try
>>> to use any harbour.dll at all.
>>
>> The problem with "final word" is that you do not
>> want to listen to any resonable arguments. Even
>> those based on technical details.
> 
> I have no doubt that you know what you're talking
> about, but it's really difficult to discuss even a
> technical thing when you consider a mere question
> an attack. I'd prefer to read more on the technical
> details rather.

I DO NOT cosider it an attack. I consider it *FORCING*.

> If this is a tabu issue in some sorts of ways, let's move on.

Tabu ? You can call it TABU if you do not want to listen
arguments.

-- 

Marek

----------------------------------------------------------------------
Najciekawsze miejsca w Polsce i na swiecie!
Zobacz >>> http://link.interia.pl/f1e60

From druzus at acn.waw.pl  Wed Jul  9 12:30:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 12:30:51 2008
Subject: [Harbour] 2008-07-09 18:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807091630.m69GUkTg011846@31-mo5-4.acn.waw.pl>

2008-07-09 18:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filesys.c
    ! casting

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul  9 12:35:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 12:35:53 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <20080709154251.GA29740@34-mo7-2.acn.waw.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>
	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>
	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>
	<20080709114206.GA5882@34-mo7-2.acn.waw.pl>
	<DB6B9A9E-2786-450F-9BDE-F0E93BB8F9C0@syenar.hu>
	<20080709154251.GA29740@34-mo7-2.acn.waw.pl>
Message-ID: <3D4F2F6F-7C29-492E-9EF6-9E4C65BA1F16@syenar.hu>

Hi Przemek,

>> What I'm saying is that there exist such a calling
>> convention and naming convention used to build a .dll
>> which can allow most (or all) 3rd party tools to be able
>> to interface with it.
>> user32.dll f.e. is such a .dll.
>
> C compilers have build-in import libraries for standard system
> DLLs so you simply do not see them but they exists and are linked.

That's clear.

>> Creating import libraries
>> is a different matter, and we should or might supply those
>> for different compilers to help them being used, but harbour.dll
>> itself should be the same all across.
>
> I do not think that Harbour users using other compilers will accept
> it. Anyhow if you really need it then you can chose one format (f.e.
> MSVC one) and reserve harbour.dll name only for this format. But
> please do not force other users to create slower and bigger binaries
> which may also have some unpleasure side effect for MT mode when
> two different C-RTLs will be linked with final binaries. F.e. some
> system functions may not be MT safe and C-RTL may use some mutex
> which protect their execution. This functions may be used internally
> by some other ones which we use in Harbour code and which are used
> by 3-rd party code. Two different C-RTLs will not know anything about
> their own protection and this may cause unpredictable results.
> I do not know if such situation will appear but if it will then
> finding the real reason of some seldom and unexpected behavior or
> GPFs will be in practice impossible.

Where this "forcing" notion comes from? I was proposing/asking
something, if I wanted to force something I could have committed
it already I guess.

Otherwise okay, and I don't plan to touch this matter by myself,
as I'm no harbour.dll user. [ Probably I won't ever be even,
because it really looks like something creating more problems
than it solves, and I personally cannot see the benefits. But I did  
try. ]

>> They need to use an import lib anyway (which we already supply),
>> why would they care about the compiler used for harbour.dll if
>> it works? I don't know of any .dlls I use, which compiler was
>> used to build them.
>
> Not every one have to use 3-rd party .DLLs you are talking about
> and AFAIK some of this libraries where recompiled bu users using
> native compilers.

I've lost it :/

>> All I care (as a .dll user) is a .lib file which works with the
>> given .dll and with my compiler of choice. IMO, ideally Harbour
>> should supply one harbour.dll (built with whatever tool is required
>> to make it proper), possibly a .def file, and also possibly a
>> proper .lib with COFF and one in OMF format.
>
> 1-st we should add support for direct .obj file generation and
> add some simple linker. In such case you can define "suggested"
> standard which will be compatible with generated .obj files and
> and linker. It will also force 3-rd part developers to create
> binaries in this format. Anyhow it should be still possible for
> users to create native .DLLs if they like and want to use them
> because the need maximum speed and minimal size.

Okay, that sounds like a promising future (regardless of the
outcome of the .dll).

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Jul  9 12:50:25 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Jul  9 12:50:30 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874E3B8.9030204@interia.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<4874D1FB.7020308@dbtopas.lt>	<4874D720.9090805@interia.pl>	<4874DEED.2090001@dbtopas.lt>
	<4874E3B8.9030204@interia.pl>
Message-ID: <4874EC51.7010907@dbtopas.lt>

Hi,


Marek Paliwoda wrote:
> If your program is using more than one version of the CRT, some care is 
> needed when passing certain CRT objects (such as file handles, locales 
> and environment variables) across DLL boundaries. For more information 
> on the issues involved and how to resolve them, see Potential Errors 
> Passing CRT Objects Across DLL Boundaries."

It's exactly the same that I've said about malloc(), free(). File 
handles, locales, etc. are the other CRT objects, just like pointers of 
allocated memory. Because, for example, CRT library has file handle <-> 
system handle mapping table.

But I still have not got any answer or idea about using other dlls like 
ace32, freeimage, zlib, mysql, curl, etc. According to your logic we 
must drop using it, but we use it with success. And things will not be 
clear until we will not understand the reasons, why other dlls are 
"general puporse".

I have nothing against user possibility to compile .dll with native 
compiler. Actually, I vote for it, but if harbour.dll will ever be used 
as a "Harbour language implementation library" users will want to have 
Harbour.dll and harbour.h, and do function call without limitation on 
their compiler - MSVC, GCC, Borland C, VisualBasic, Delphi, Pascal or 
assembler. That's where, I see a problem of "general puporse harbour.dll".


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Jul  9 12:50:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 12:51:24 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874E6E8.2070806@interia.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<E23BD98D-CB76-467F-8D57-48DC9A6A97BE@syenar.hu>	<4874D914.2060503@interia.pl>
	<1FDF273A-238E-4B34-9BD9-2FE92CD832D1@syenar.hu>
	<4874E6E8.2070806@interia.pl>
Message-ID: <1F4C8413-B24B-491C-8CB8-2F5C2D8B6DF5@syenar.hu>

>>
Hi Marek,

>> I don't use harbour.dll at all (never exactly understood
>> its details and benefits), but since I've built all
>> binaries for Windows, I was wondering why are we having
>> to differently named ones, a practice which I haven't
>> seen in any other projects before.
>
> So read my answer to Mindaugas, where I quoted MSVC docs
> about the issue I was trying to show to both of you.

Yes, thanks, I did and it was useful.

>> Answering to your question, I'm not sure if I'd want to
>> use Borland dynamic C RTL. Why is it better than using
>> the static one?
>
> It's not a matter of "being better or worse". It's a matter
> of "working" at all. Some projects WILL NOT work without dynamic
> CRTL. That's a matter of fact. You have to deal with it.

Okay.

>> And back to the first one, what is the
>> benefit of harbour-*.dll? (no pun intented, I'm really
>> interested, and I don't want to remove it either.)
>
> Some libraries have to be compiled to dll. Otherwise
> they will not work at all. That's their nature. An
> example is HbWxW. There are literaly hundreds of classes
> in it, each of them being in a separate obj. Those
> classes create other classes dynamicly during runtime.
> So often there is no reference to some class from your
> code, but it has to be created. Because it is not
> referenced by your code you would have to REQUEST it
> explicitly. But you do not know WHICH one will be
> created in general - it's internal part of a librbary.
> So you would have to REQUEST ALL classes from library,
> causing the final exe to be simlpy HUGE - each exe created
> would contain ALL classes. Having a library in dll
> solves the problem in an elegant way.

Thanks for the explanation.

BTW, I didn't know about HbWxW at all to this day,
but I'll give it a shot now.

BTW2: Is there anything missing from Harbour (besides
MT support), to create a Harbour version of HbWxW?

>> [ The issue so far:
>> 1) C calling convention differences (solvable)
>> 2) name mangling differences (solvable)
>> 3) C RTL interaction and dependency
>>   Multiple issues, the exact specifics are not exactly clear
>>   to me yet. ]
>
> So read my answer to Mindaugas, where I quoted MSVC docs
> about the issue I was trying to show to both of you.

Okay, object passing was one issue I had in mind.

>> an attack. I'd prefer to read more on the technical
>> details rather.
>
> I DO NOT cosider it an attack. I consider it *FORCING*.

?

>> If this is a tabu issue in some sorts of ways, let's move on.
>
> Tabu ? You can call it TABU if you do not want to listen
> arguments.

I'm gladly listening. All I wonder is why listening and
raising some questions qualifies as forcing.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  9 12:59:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 13:00:06 2008
Subject: [SPAM]  R: RE: [Harbour] R: Howto gtwvt
In-Reply-To: <000601c8e1be$52705aec$0400a8c0@deltain.net>
References: <000601c8e1be$52705aec$0400a8c0@deltain.net>
Message-ID: <20080709165959.GA12038@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Massimo Belgrano wrote:

Hi Massimo,

> How made clear situation like this?
> Can generated a message like insufficent cflag directive instead
> generate an unusable exe?

In this case you are talking about linker flags not C compiler flags.

> I have not proposal but hope in a way of using harbour without know
> c compiler.
> Harbour to obj can resolve?
> Harbour to exe is possible?

It will be hard to make it. We do not have any control on linker
used to create final binaries. In Windows it's possible to create
two different type of binaries: console ones using main() as startup
point and GUI ones using WinMain(). Which version will be created
depends on used C compiler/linker and even on linked libraries.
F.e. MinGW linker (LD) has feature which chose type of application
scanning linked symbol table. If it finds main() functions then
creates console binaries. Otherwise GUI ones. For this we have to
moved mainstd.c from HVM lib to separate library (mainstd) in MinGW
builds and now user can control type of binaries by linked library
list. If he adds mainstd to it then it's console application otherwise
GUI one. AFAIR not all MinGW versions works in such way. In BCC you
can use -tW linker switch to create GUI programs.
We cannot stop linker against creating application in different mode
then user wanted. Sometimes both modes can be valid.
We can only try to force some mode by adding some symbol request.
Probably in few linkers it will force generating link time error
when wrong switches will be used. If some windows user well know
C compilers he is using then he can try to make sth like that.
Maybe some compilers have direct support for such extensions in
some #pragma directives. I do not know.
I guess you want to add such bindings to GTWVT/GTWVG to force
linking in GUI mode. Maybe it's possible for BCC but I do not
know this compiler enough to make it myself and of course it
will be only for one compiler. Each other will need its own
solution.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jul  9 13:11:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 13:11:53 2008
Subject: [Harbour] 2008-07-08 02:27 UTC+0200
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48749C19.8020009@ya.com>
References: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>
	<4874188F.1060207@ya.com>
	<20080709100150.GD1307@34-mo7-2.acn.waw.pl>
	<48749C19.8020009@ya.com>
Message-ID: <20080709171149.GB12038@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Javier wrote:

Hi Javier,

> I think that INIT/EXIT procedures is fine controlled by runner so only 
> not registering them in globally solves the thing but it's possible that 
> I lose something more: now hrb module is CG.

They have to be registered or some important functionality will be
broken. But of course it's possible to block executing EXIT procedures
only for .hrb modules.
Anyhow it does not resolve the problem. The question is: when EXIT
procedures should be executed. Now they are executed at the beginning
of HVM quit procedure before any subsystems are unloaded. If we make
such modification then they will be executed when variable will be out
of scope. It means that some important HVM parts may be deactivated,
f.e. RDD will be unloaded so EXIT procedure will not be able to write
any data to DBFs. I would like to keep current execution of EXIT
procedures and I can easy block any other EXIT procedures to protect
against double execution. But I would like also to execute EXIT procedures
for modules loaded and unloaded during HVM quit. This needs some deeper
modifications. Anyhow maybe it will be better and more clear to simply
block loading new .hrb modules when HVM QUIT procedure started what
fully eliminates the problem.

best regards,
Przemek
From mbelgrano at deltain.it  Wed Jul  9 13:45:42 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul  9 13:45:49 2008
Subject: R: [SPAM]  R: RE: [Harbour] R: Howto gtwvt
In-Reply-To: <20080709165959.GA12038@34-mo7-2.acn.waw.pl>
References: <000601c8e1be$52705aec$0400a8c0@deltain.net>
	<20080709165959.GA12038@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE27@SRV02.deltain.net>

Imo this Is a problem who make very difficult first step with harbour
I litte Understand why need with gtwvt a directive by cflags (-tW)
cflags (-tW) is required if exe  is consoleonly?
And what cflag if I am using more than one gt?
Sorry but I I have more ?????????
Probably the way of using an external c compiler have same advantage and same disadvantage and this is one of this. 

Massimo Belgrano

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Przemyslaw Czerpak
Inviato: mercoled? 9 luglio 2008 19.00
A: Harbour Project Main Developer List.
Oggetto: Re: [SPAM] R: RE: [Harbour] R: Howto gtwvt

On Wed, 09 Jul 2008, Massimo Belgrano wrote:

Hi Massimo,

> How made clear situation like this?
> Can generated a message like insufficent cflag directive instead
> generate an unusable exe?

In this case you are talking about linker flags not C compiler flags.

> I have not proposal but hope in a way of using harbour without know
> c compiler.
> Harbour to obj can resolve?
> Harbour to exe is possible?

It will be hard to make it. We do not have any control on linker
used to create final binaries. In Windows it's possible to create
two different type of binaries: console ones using main() as startup
point and GUI ones using WinMain(). Which version will be created
depends on used C compiler/linker and even on linked libraries.
F.e. MinGW linker (LD) has feature which chose type of application
scanning linked symbol table. If it finds main() functions then
creates console binaries. Otherwise GUI ones. For this we have to
moved mainstd.c from HVM lib to separate library (mainstd) in MinGW
builds and now user can control type of binaries by linked library
list. If he adds mainstd to it then it's console application otherwise
GUI one. AFAIR not all MinGW versions works in such way. In BCC you
can use -tW linker switch to create GUI programs.
We cannot stop linker against creating application in different mode
then user wanted. Sometimes both modes can be valid.
We can only try to force some mode by adding some symbol request.
Probably in few linkers it will force generating link time error
when wrong switches will be used. If some windows user well know
C compilers he is using then he can try to make sth like that.
Maybe some compilers have direct support for such extensions in
some #pragma directives. I do not know.
I guess you want to add such bindings to GTWVT/GTWVG to force
linking in GUI mode. Maybe it's possible for BCC but I do not
know this compiler enough to make it myself and of course it
will be only for one compiler. Each other will need its own
solution.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mpaliwoda at interia.pl  Wed Jul  9 13:49:33 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Jul  9 13:49:44 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <1F4C8413-B24B-491C-8CB8-2F5C2D8B6DF5@syenar.hu>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<E23BD98D-CB76-467F-8D57-48DC9A6A97BE@syenar.hu>	<4874D914.2060503@interia.pl>	<1FDF273A-238E-4B34-9BD9-2FE92CD832D1@syenar.hu>	<4874E6E8.2070806@interia.pl>
	<1F4C8413-B24B-491C-8CB8-2F5C2D8B6DF5@syenar.hu>
Message-ID: <4874FA2D.2040502@interia.pl>

Viktor,

> BTW2: Is there anything missing from Harbour (besides
> MT support), to create a Harbour version of HbWxW?

Harbour version of HbWxW exists for a long time.
But it has changed its status to a private project.

-- 

Marek

----------------------------------------------------------------------
Zobacz cala prawde o Lukaszu Podolskim!
kliknij >>> http://link.interia.pl/f1e57

From jarabal at ya.com  Wed Jul  9 15:50:02 2008
From: jarabal at ya.com (Javier)
Date: Wed Jul  9 15:50:31 2008
Subject: [Harbour] 2008-07-08 02:27
	UTC+0200	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080709171149.GB12038@34-mo7-2.acn.waw.pl>
References: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>	<4874188F.1060207@ya.com>	<20080709100150.GD1307@34-mo7-2.acn.waw.pl>	<48749C19.8020009@ya.com>
	<20080709171149.GB12038@34-mo7-2.acn.waw.pl>
Message-ID: <4875166A.7010804@ya.com>

Hi Przemek,

Ok, I understand, and in the same line that my previous post for if it 
could be more easier without making many changes.
And if we encode pHrbPtr in PHB_SYMBOLS szModuleName f.e. "pcode.hrb" + 
'\0' + pHrbPtr in hb_hrbReturn() and in hb_vmDoExitFunctions() 
identified it and decoded for set pHrbPtr->fExit = FALSE, PHB_SYMBOLS is 
secuential. Does it be possible that solvent all the things?

Best regards,
Xavi

Przemyslaw Czerpak escribi?:
> On Wed, 09 Jul 2008, Javier wrote:
>
> Hi Javier,
>
>   
>> I think that INIT/EXIT procedures is fine controlled by runner so only 
>> not registering them in globally solves the thing but it's possible that 
>> I lose something more: now hrb module is CG.
>>     
>
> They have to be registered or some important functionality will be
> broken. But of course it's possible to block executing EXIT procedures
> only for .hrb modules.
> Anyhow it does not resolve the problem. The question is: when EXIT
> procedures should be executed. Now they are executed at the beginning
> of HVM quit procedure before any subsystems are unloaded. If we make
> such modification then they will be executed when variable will be out
> of scope. It means that some important HVM parts may be deactivated,
> f.e. RDD will be unloaded so EXIT procedure will not be able to write
> any data to DBFs. I would like to keep current execution of EXIT
> procedures and I can easy block any other EXIT procedures to protect
> against double execution. But I would like also to execute EXIT procedures
> for modules loaded and unloaded during HVM quit. This needs some deeper
> modifications. Anyhow maybe it will be better and more clear to simply
> block loading new .hrb modules when HVM QUIT procedure started what
> fully eliminates the problem.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
From druzus at acn.waw.pl  Wed Jul  9 16:26:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 16:26:28 2008
Subject: [Harbour] 2008-07-08 02:27
	UTC+0200	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4875166A.7010804@ya.com>
References: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>
	<4874188F.1060207@ya.com>
	<20080709100150.GD1307@34-mo7-2.acn.waw.pl>
	<48749C19.8020009@ya.com>
	<20080709171149.GB12038@34-mo7-2.acn.waw.pl>
	<4875166A.7010804@ya.com>
Message-ID: <20080709202623.GA12596@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Javier wrote:

Hi Javier,

> Ok, I understand, and in the same line that my previous post for if it 
> could be more easier without making many changes.
> And if we encode pHrbPtr in PHB_SYMBOLS szModuleName f.e. "pcode.hrb" + 
> '\0' + pHrbPtr in hb_hrbReturn() and in hb_vmDoExitFunctions() 
> identified it and decoded for set pHrbPtr->fExit = FALSE, PHB_SYMBOLS is 
> secuential. Does it be possible that solvent all the things?

Yes, it's one of possible solutions. Probably the easiest one but
it resolves only problem with .hrb files. It's possible that
I'll implement sth like that to not make deeper modifications in
core code before 1.0 release. I'll have to think about it.
But there is still open question if we should allow to register
new modules when HVM is in QUIT state.
Please remember that similar situation can appear with modules
loaded/unloaded from .dll/.so/.dyn or other shared libraries.
In practice recent modification doesn't change anything here
and the problem exists from the beginning. Defining that HVM
will not accept new modules when it enter EXIT state seems to
be reasonable for me.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul  9 16:32:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 16:33:27 2008
Subject: [Harbour] 2008-07-08 02:27
	UTC+0200	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080709202623.GA12596@34-mo7-2.acn.waw.pl>
References: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>
	<4874188F.1060207@ya.com>
	<20080709100150.GD1307@34-mo7-2.acn.waw.pl>
	<48749C19.8020009@ya.com>
	<20080709171149.GB12038@34-mo7-2.acn.waw.pl>
	<4875166A.7010804@ya.com>
	<20080709202623.GA12596@34-mo7-2.acn.waw.pl>
Message-ID: <24D08343-59FF-4907-93B4-B108286FCF9B@syenar.hu>

>>
Hi Przemek,

>> Ok, I understand, and in the same line that my previous post for if  
>> it
>> could be more easier without making many changes.
>> And if we encode pHrbPtr in PHB_SYMBOLS szModuleName f.e.  
>> "pcode.hrb" +
>> '\0' + pHrbPtr in hb_hrbReturn() and in hb_vmDoExitFunctions()
>> identified it and decoded for set pHrbPtr->fExit = FALSE,  
>> PHB_SYMBOLS is
>> secuential. Does it be possible that solvent all the things?
>
> Yes, it's one of possible solutions. Probably the easiest one but
> it resolves only problem with .hrb files. It's possible that
> I'll implement sth like that to not make deeper modifications in
> core code before 1.0 release. I'll have to think about it.
> But there is still open question if we should allow to register
> new modules when HVM is in QUIT state.
> Please remember that similar situation can appear with modules
> loaded/unloaded from .dll/.so/.dyn or other shared libraries.
> In practice recent modification doesn't change anything here
> and the problem exists from the beginning. Defining that HVM
> will not accept new modules when it enter EXIT state seems to
> be reasonable for me.

It seems a reasonable restriction, and most probably won't
limit real world usage of this feature. And it's definitely
better than leaving it undefined or buggy.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  9 16:42:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 16:42:22 2008
Subject: [Harbour] 2008-07-09 22:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807092042.m69KgI3O016936@31-mo5-4.acn.waw.pl>

2008-07-09 22:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_xmingwce.sh
    ! fixed HB_PPGEN_PATH setting

best regards
Przemek
From mbelgrano at deltain.it  Wed Jul  9 16:44:13 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul  9 16:44:19 2008
Subject: [Harbour] where can i post harbour.chm?
In-Reply-To: <26B26530-F1CA-4C7B-8EB7-0A35E42B8063@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03815EE1E@SRV02.deltain.net>
	<26B26530-F1CA-4C7B-8EB7-0A35E42B8063@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE2B@SRV02.deltain.net>

Here is zipped html html files with index.hta
http://www.megaupload.com/it/?d=LPP6JB9V


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Wednesday, July 09, 2008 12:49 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] where can i post harbour.chm?

> i have good documentation regarding harbour as chm/html
> http://www.oohg.org/manual/harbour/(x)harbour.html
>
> Can I post?
> Where?
> \harbour\Contrib\docu?
> Harbour website?

First it would be good to upload the .html
source files .zipped to an FTP, so that we could
see how it looks / works. We can think about
moving it to the SVN afterwards.

Since Harbour is a multiplatform project, I'd
strongly suggest to stay away from .chm and other
proprietary and/or binary formats.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Wed Jul  9 16:50:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 16:51:12 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
References: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
Message-ID: <7DE0A91C-C123-40F6-A322-7DFAB29F5162@syenar.hu>

>
Hi Przemek,

>  * harbour/source/vm/fm.c
>    * changed hb_xrealloc() to be ANSI-C realloc() compatible

Do you see any reason we should keep the corresponding
internal error codes and error strings in msg*.c files?

If not, I can delete them.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Jul  9 16:54:28 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 16:54:27 2008
Subject: [Harbour] 2008-07-09 22:53 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8e205$Blat.v2.6.2$fa6985b4$130093575d62@127.0.0.1>

2008-07-09 22:53 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
     + Changed to use Harbour memory allocation functions in 
       libcurl.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Wed Jul  9 16:57:41 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul  9 16:57:46 2008
Subject: [Harbour] where can i post harbour.chm?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE2B@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EE1E@SRV02.deltain.net><26B26530-F1CA-4C7B-8EB7-0A35E42B8063@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815EE2B@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE2D@SRV02.deltain.net>

It is made by free helpmaker
http://www.vizacc.com/Default.aspx
HelpMaker is the best freeware Help Authoring tool in the whole world.
we can export htm,pdf,rtf


From druzus at acn.waw.pl  Wed Jul  9 17:05:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 17:05:48 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <7DE0A91C-C123-40F6-A322-7DFAB29F5162@syenar.hu>
References: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
	<7DE0A91C-C123-40F6-A322-7DFAB29F5162@syenar.hu>
Message-ID: <20080709210544.GA17051@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> > * harbour/source/vm/fm.c
> >   * changed hb_xrealloc() to be ANSI-C realloc() compatible
> Do you see any reason we should keep the corresponding
> internal error codes and error strings in msg*.c files?

I used one of them when both pointer and size are NULL but
in fact I do not see any reason to keep it.
Anyhow such situation:
   ptr = realloc( NULL, 0 );
is implementation dependent and realloc() can return NULL or
pointer to empty memory block which can be only passed to
free() function. In such case we should define exact behavior.
IMHO we can return NULL and fm.c will have to be updated for it.

> If not, I can delete them.

If you can please do it. Thank you.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jul  9 17:13:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 17:13:48 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080709210544.GA17051@34-mo7-2.acn.waw.pl>
References: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
	<7DE0A91C-C123-40F6-A322-7DFAB29F5162@syenar.hu>
	<20080709210544.GA17051@34-mo7-2.acn.waw.pl>
Message-ID: <20080709211342.GA17399@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Przemyslaw Czerpak wrote:

Hi Viktor,

> Anyhow such situation:
>    ptr = realloc( NULL, 0 );
> is implementation dependent and realloc() can return NULL or
> pointer to empty memory block which can be only passed to
> free() function. In such case we should define exact behavior.
> IMHO we can return NULL and fm.c will have to be updated for it.

or simply replace in two place in fm.c:
   hb_errInternal( HB_EI_XREALLOCNULLSIZE, NULL, NULL, NULL );
with:
   hb_errInternal( HB_EI_XGRABNULLSIZE, NULL, NULL, NULL );

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul  9 17:24:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 17:25:43 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080709211342.GA17399@34-mo7-2.acn.waw.pl>
References: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
	<7DE0A91C-C123-40F6-A322-7DFAB29F5162@syenar.hu>
	<20080709210544.GA17051@34-mo7-2.acn.waw.pl>
	<20080709211342.GA17399@34-mo7-2.acn.waw.pl>
Message-ID: <5320F7A5-8B9A-42A4-B0EB-78CC0B3B219D@syenar.hu>

>>
Hi Przemek,

>> Anyhow such situation:
>>   ptr = realloc( NULL, 0 );
>> is implementation dependent and realloc() can return NULL or
>> pointer to empty memory block which can be only passed to
>> free() function. In such case we should define exact behavior.
>> IMHO we can return NULL and fm.c will have to be updated for it.
>
> or simply replace in two place in fm.c:
>   hb_errInternal( HB_EI_XREALLOCNULLSIZE, NULL, NULL, NULL );
> with:
>   hb_errInternal( HB_EI_XGRABNULLSIZE, NULL, NULL, NULL );

Or rather HB_EI_XREALLOC to not let it be confused with hb_xgrab()
problems. What do you think?

Two related questions:
- When HB_FM_STATISTICS is OFF, there is a check for
   pMem after the allocation, and if NULL, an HB_EI_XREALLOC is thrown.
   Shouldn't the same be done for HB_FM_STATISTICS == ON?
- When HB_FM_STATISTICS is OFF, the realloc() logic
   seems to be repeated using free()/malloc() calles,
   I wonder why? Isn't this behaviour the standard way
   realloc() works?

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  9 17:46:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 17:46:20 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <5320F7A5-8B9A-42A4-B0EB-78CC0B3B219D@syenar.hu>
References: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
	<7DE0A91C-C123-40F6-A322-7DFAB29F5162@syenar.hu>
	<20080709210544.GA17051@34-mo7-2.acn.waw.pl>
	<20080709211342.GA17399@34-mo7-2.acn.waw.pl>
	<5320F7A5-8B9A-42A4-B0EB-78CC0B3B219D@syenar.hu>
Message-ID: <20080709214615.GB17399@34-mo7-2.acn.waw.pl>

On Wed, 09 Jul 2008, Szak?ts Viktor wrote:
> Or rather HB_EI_XREALLOC to not let it be confused with hb_xgrab()
> problems. What do you think?

But what about translations?
Are you able to update all lang modules?

> Two related questions:
> - When HB_FM_STATISTICS is OFF, there is a check for
>   pMem after the allocation, and if NULL, an HB_EI_XREALLOC is thrown.
>   Shouldn't the same be done for HB_FM_STATISTICS == ON?

It is. Look carefully few lines below.

> - When HB_FM_STATISTICS is OFF, the realloc() logic
>   seems to be repeated using free()/malloc() calles,
>   I wonder why? Isn't this behaviour the standard way
>   realloc() works?

Because hb_xgrab()/hb_xalloc()/hb_xrealloc() functions allocates
some additional bytes which are used as memory reference counters
and HB_FM_PTR()/HB_ALLOC_SIZE() macros will have to be updated
to respect it in code like:
   pMem = realloc( HB_FM_PTR( pMem ), HB_ALLOC_SIZE( ulSize ) );
In the future we probably try to implement our own memory manager
for some platforms to increase the speed and in such case we will
have also other hidden data.
It's unimportant for code which uses hb_x*() functions. It's enough
if they will work like standard ANSI-C ones.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul  9 18:20:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul  9 18:21:10 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080709214615.GB17399@34-mo7-2.acn.waw.pl>
References: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
	<7DE0A91C-C123-40F6-A322-7DFAB29F5162@syenar.hu>
	<20080709210544.GA17051@34-mo7-2.acn.waw.pl>
	<20080709211342.GA17399@34-mo7-2.acn.waw.pl>
	<5320F7A5-8B9A-42A4-B0EB-78CC0B3B219D@syenar.hu>
	<20080709214615.GB17399@34-mo7-2.acn.waw.pl>
Message-ID: <236F943E-BF4E-420D-87A8-3D61E73B3D2D@syenar.hu>

>
Hi Przemek,

> On Wed, 09 Jul 2008, Szak?ts Viktor wrote:
>> Or rather HB_EI_XREALLOC to not let it be confused with hb_xgrab()
>> problems. What do you think?
>
> But what about translations?
> Are you able to update all lang modules?

Luckily we already have HB_EI_XREALLOC, so it's not a problem,
but all translations should have the two unnecessary ones deleted.

>> Two related questions:
>> - When HB_FM_STATISTICS is OFF, there is a check for
>>  pMem after the allocation, and if NULL, an HB_EI_XREALLOC is thrown.
>>  Shouldn't the same be done for HB_FM_STATISTICS == ON?
>
> It is. Look carefully few lines below.

Okay, I see now.

>> - When HB_FM_STATISTICS is OFF, the realloc() logic
>>  seems to be repeated using free()/malloc() calles,
>>  I wonder why? Isn't this behaviour the standard way
>>  realloc() works?
>
> Because hb_xgrab()/hb_xalloc()/hb_xrealloc() functions allocates
> some additional bytes which are used as memory reference counters
> and HB_FM_PTR()/HB_ALLOC_SIZE() macros will have to be updated
> to respect it in code like:
>   pMem = realloc( HB_FM_PTR( pMem ), HB_ALLOC_SIZE( ulSize ) );
> In the future we probably try to implement our own memory manager
> for some platforms to increase the speed and in such case we will
> have also other hidden data.
> It's unimportant for code which uses hb_x*() functions. It's enough
> if they will work like standard ANSI-C ones.

Thanks, I understand.

I will be off-Harbour for about 2 weeks, so I'll rather leave
this modification for next time. (I don't want to mess it up
and not be able to fix it)

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul  9 18:29:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul  9 18:29:41 2008
Subject: [Harbour] 2008-07-09 11:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <236F943E-BF4E-420D-87A8-3D61E73B3D2D@syenar.hu>
References: <200807090957.m699vYnO001465@31-mo5-4.acn.waw.pl>
	<7DE0A91C-C123-40F6-A322-7DFAB29F5162@syenar.hu>
	<20080709210544.GA17051@34-mo7-2.acn.waw.pl>
	<20080709211342.GA17399@34-mo7-2.acn.waw.pl>
	<5320F7A5-8B9A-42A4-B0EB-78CC0B3B219D@syenar.hu>
	<20080709214615.GB17399@34-mo7-2.acn.waw.pl>
	<236F943E-BF4E-420D-87A8-3D61E73B3D2D@syenar.hu>
Message-ID: <20080709222936.GA17762@34-mo7-2.acn.waw.pl>

On Thu, 10 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I will be off-Harbour for about 2 weeks, so I'll rather leave
> this modification for next time. (I don't want to mess it up
> and not be able to fix it)

It may wait. It's not critical. Thank you very much and
have a good holiday.

best regards,
Przemek
From mpaliwoda at interia.pl  Thu Jul 10 04:49:10 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Jul 10 04:49:24 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4874EC51.7010907@dbtopas.lt>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<4874D1FB.7020308@dbtopas.lt>	<4874D720.9090805@interia.pl>	<4874DEED.2090001@dbtopas.lt>	<4874E3B8.9030204@interia.pl>
	<4874EC51.7010907@dbtopas.lt>
Message-ID: <4875CD06.6010306@interia.pl>

Hi Mindaugas,

> But I still have not got any answer or idea about using other dlls like 
> ace32, freeimage, zlib, mysql, curl, etc. According to your logic we 
> must drop using it, but we use it with success. And things will not be 
> clear until we will not understand the reasons, why other dlls are 
> "general puporse".

It seemd a very important question to me too. The only answer seems
to be that dll boundaries are not crossed. And it seems harbour.dll
also fills this requirement - all operations on Harbour internals are
done inside/thru harbour.dll.

> I have nothing against user possibility to compile .dll with native 
> compiler. Actually, I vote for it, but if harbour.dll will ever be used 
> as a "Harbour language implementation library" users will want to have 
> Harbour.dll and harbour.h, and do function call without limitation on 
> their compiler - MSVC, GCC, Borland C, VisualBasic, Delphi, Pascal or 
> assembler. That's where, I see a problem of "general puporse harbour.dll".

I've spent last two hours playing with dlls and it seems there in no
problem in using dll created by one compiler and used by another one.
CRTL (even dynamic) is not a problem as long as dll boundaries are
not crossed. I was wrong in regard to dynamic CRTL problem. Sorry for
bringing it up unnecesary.

Either Borland harbour.dll works with Harbour compiled with MSVC, or
MSVC harbour.dll works with Harbour compiled with Borland. The only
problem is that those two dlls are not compatible, thus not interchangable.
AFAIK.
I didn't find a way to make them compatible/interchangable. Maybe due to
a lack of knowledge ...

It seems to me all problems with calling convensions, name handling, etc,
are properly handled during a proper generation of import library. Each
import program seems to solve most problems automaticly - and generated
import libraries properly hide differences between dlls.

But since dlls are not interchangable (I cannot overwrite one with the
other one) - I am still against renaming them to one common name -
harbour.dll.

Imagine what happens if one installer program installs harbour.dll in a
system dir and then another one installs Borland harbour.dll in a system
dir too.

Do you have any kind of solution which would solve this problem in an
elegant way ? ( to convince me to harbour.dll name ? ;-) )

-- 

Marek



----------------------------------------------------------------------
Pogoda na dzis.
Sprawdz >>> http://link.interia.pl/f1e42

From dmacias at mail.udg.mx  Thu Jul 10 05:16:01 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Jul 10 05:15:55 2008
Subject: [Harbour] Re: 2008-07-09 12:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <4875D351.6080109@mail.udg.mx>

Przemek:

 >2008-07-09 12:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/source/rtl/set.c
 >    ! do not add .prn extension to printer/extra filenames if file name
 >      is one of well known device name: PRN, LPT[1-3], COM[1-9]
 >      This code is enabled only for OS2 builds where it's necessary
 >      but maybe MS-Windows/DOS users should think about adding it to
 >      their builds too because sometimes also DOS/Win does not recognize
 >      correctly device name when it has extension.


It work fine using PRN, LPT1
Now printing in OS/2 is enabled

a) Can you add OS/2 to cases and set LPT1 as default ?

    /* Default printer device */
#if defined(HB_OS_UNIX)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "|lpr" );
#elif defined(HB_OS_DOS)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "PRN" );
#elif defined(HB_OS_WIN_32)
    hb_set.HB_SET_PRINTFILE = hb_strdup( "LPT1" );
#else
    hb_set.HB_SET_PRINTFILE = hb_strdup( "PRN" ); /* TOFIX */
#endif


b) Can you add CON to device list to avoid extension ?

Norton Guide say:
------------------------------------
   If the destination is a device, the following names are valid:
LPT1, LPT2, LPT3 (all parallel ports), COM1, and COM2 (serial ports),
CON and PRN.  The default device is PRN.
------------------------------------

I tested SET PRINTER TO CON in Clipper and work fine, sending output to 
console
In Harbour it create CON.prn

c) I strongly suggest to enable your code to avoid extension in all OS 
derived from DOS, which recognize/use same devices names
It will suppress those prn.prn, lpt1.prn errors which are sometimes very 
often
Note: I do not remember have seen them in DOS, but in Win are often


David Macias


From jarabal at ya.com  Thu Jul 10 05:16:51 2008
From: jarabal at ya.com (Javier)
Date: Thu Jul 10 05:17:17 2008
Subject: [Harbour] 2008-07-08
	02:27	UTC+0200	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <24D08343-59FF-4907-93B4-B108286FCF9B@syenar.hu>
References: <200807080027.m680RFtF031081@31-mo5-4.acn.waw.pl>	<4874188F.1060207@ya.com>	<20080709100150.GD1307@34-mo7-2.acn.waw.pl>	<48749C19.8020009@ya.com>	<20080709171149.GB12038@34-mo7-2.acn.waw.pl>	<4875166A.7010804@ya.com>	<20080709202623.GA12596@34-mo7-2.acn.waw.pl>
	<24D08343-59FF-4907-93B4-B108286FCF9B@syenar.hu>
Message-ID: <4875D383.9060803@ya.com>

Of course, to me EXIT procedures is a destructor of module for this 
reason is called in HVM QUIT.
I think that it is a wrong praxis practice utilize them for another 
thing that is not close, erase, clean, ... and it seem me reasonable 
protect the process of HVM QUIT.

Best regards,
Xavi

Szak?ts Viktor escribi?:
>>>
> Hi Przemek,
>
>>> Ok, I understand, and in the same line that my previous post for if it
>>> could be more easier without making many changes.
>>> And if we encode pHrbPtr in PHB_SYMBOLS szModuleName f.e. "pcode.hrb" +
>>> '\0' + pHrbPtr in hb_hrbReturn() and in hb_vmDoExitFunctions()
>>> identified it and decoded for set pHrbPtr->fExit = FALSE, 
>>> PHB_SYMBOLS is
>>> secuential. Does it be possible that solvent all the things?
>>
>> Yes, it's one of possible solutions. Probably the easiest one but
>> it resolves only problem with .hrb files. It's possible that
>> I'll implement sth like that to not make deeper modifications in
>> core code before 1.0 release. I'll have to think about it.
>> But there is still open question if we should allow to register
>> new modules when HVM is in QUIT state.
>> Please remember that similar situation can appear with modules
>> loaded/unloaded from .dll/.so/.dyn or other shared libraries.
>> In practice recent modification doesn't change anything here
>> and the problem exists from the beginning. Defining that HVM
>> will not accept new modules when it enter EXIT state seems to
>> be reasonable for me.
>
> It seems a reasonable restriction, and most probably won't
> limit real world usage of this feature. And it's definitely
> better than leaving it undefined or buggy.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From miguelangel at marchuet.net  Thu Jul 10 12:52:07 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Jul 10 12:47:47 2008
Subject: [Harbour] 2008-07-10 18:51 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <48763E37.7000405@marchuet.net>

2008-07-10 18:51 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
   * contrib/hbbmcdx/bmdbfcdx.c
   * contrib/hbbmcdx/hbbmcdx.h
     ! fixed casting for indexes with key length greater then 196 bytes
       created on tables with record number smaller then 256. In such
       case if keys have equal value then after decoding they may need
       more then 32767 bytes and casting to SHORT gives negative indexes.
       Thanks to Saulius Zrelskis for example.
     % changed some SHORT to INT to reduce runtime overhead
   * contrib/hbziparch/hbziparc.c
     ! fixed some unused variables.
     * minor sintax corrections.


Best regards,
Miguel Angel marchuet
From mbelgrano at deltain.it  Fri Jul 11 08:05:51 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jul 11 08:06:07 2008
Subject: [Harbour] Memoedit with copy and paste
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE36@SRV02.deltain.net>

Is possible having in memoedit copy and paste
Anybody have a Solution for using more advanced memo editing?

Massimo Belgrano

From druzus at acn.waw.pl  Fri Jul 11 11:33:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jul 11 11:33:48 2008
Subject: [Harbour] 2008-07-11 17:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807111533.m6BFXh36013807@31-mo5-4.acn.waw.pl>

2008-07-11 17:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/dbedit.ch
  * harbour/source/rtl/dbedit.prg
    + added support for undocumented Clipper DE_APPEND mode - code
      covered by HB_C52_UNDOC
    % ignore K_MOUSEMOVE events to avoid flickering just like CA-Cl*pper
      does
    + added support for cell positioning with mouse left key - CL53
      compatible behavior covered by HB_COMPAT_C53 macro
    * changed static function name dbEditCallUser() to CallUser() for
      strict Clipper compatibility - some user function code may check
      PROCNAME()
    * some minor optimizations and fixes

  * harbour/contrib/hbmzip/hbmzip.c
    * indenting

  * harbour/source/vm/hvm.c
    * formatting

best regards
Przemek
From jfl at mafact.com  Fri Jul 11 12:34:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Fri Jul 11 12:35:23 2008
Subject: [Harbour] 2008-07-11 18:20 UTC+0200 JF Lefebvre (MAFACT)
	(jfl/at/mafact.com)
In-Reply-To: <200807111533.m6BFXh36013807@31-mo5-4.acn.waw.pl>
Message-ID: <9b47bd6.1c8e374.6ba963d.72f6@mafact.com>

2008-07-11 18:20 UTC+0200 JF Lefebvre (MAFACT) (jfl/at/mafact.com)
  * harbour/source/common/hbver.c
    * protected by a #define the use of the new structure OSVERSIONINFOEXA, not know by MSVC 6 (_MSC_VER < 1400)

  * harbour/source/rtl/gtwvt/gtwvt.c
    * Change LONG_PTR to LONG as LONG_PTR was unknow by MSVC compiler and finally the expected type for SetWindowLongPtr() is LONG.
    * protected by a #define the call to SetWindowLongPtr(), not know by MSVC 6 (_MSC_VER < 1400)
    * not tested as working, just compile ok  !!!

From druzus at acn.waw.pl  Fri Jul 11 13:03:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jul 11 13:03:26 2008
Subject: [Harbour] 2008-07-11 18:20 UTC+0200 JF Lefebvre (MAFACT)
	(jfl/at/mafact.com)
In-Reply-To: <9b47bd6.1c8e374.6ba963d.72f6@mafact.com>
References: <200807111533.m6BFXh36013807@31-mo5-4.acn.waw.pl>
	<9b47bd6.1c8e374.6ba963d.72f6@mafact.com>
Message-ID: <20080711170321.GA10569@34-mo7-2.acn.waw.pl>

On Fri, 11 Jul 2008, J. Lefebvre wrote:

Hi,

>   * harbour/source/rtl/gtwvt/gtwvt.c
>     * Change LONG_PTR to LONG as LONG_PTR was unknow by MSVC compiler and finally the expected type for SetWindowLongPtr() is LONG.
>     * protected by a #define the call to SetWindowLongPtr(), not know by MSVC 6 (_MSC_VER < 1400)
>     * not tested as working, just compile ok  !!!

This break 64bit compatibility. In Win64 LONG is 32bit integer and pointer
needs 64 bits. So casting pointer or win handles to LONG is not safe because
it strips upper 32 bits.
Please revert it and use casting to HB_PTRDIFF which is defined in hbdefs.h
with the size enough to hold pointers.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Jul 11 13:07:17 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jul 11 13:07:23 2008
Subject: [Harbour] gtwvt and gtxwc sync
Message-ID: <9257026e0807111007m1517f2f0j9b9cf9c44a628905@mail.gmail.com>

Lately some new features such palette management and X close trap have
been added to gtwvt.

Is there anybody interested to port them to gtxwc also?

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Jul 11 13:13:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jul 11 13:13:36 2008
Subject: [Harbour] 2008-07-11 19:13 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807111713.m6BHDUHr029826@31-mo5-4.acn.waw.pl>

2008-07-11 19:13 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/files.c
    * changed SETFATTR() to use hb_fsSetAttr()

best regards
Przemek
From jfl at mafact.com  Fri Jul 11 13:56:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Fri Jul 11 13:56:54 2008
Subject: [Harbour] 2008-07-11 19:52 UTC+0200 JF Lefebvre (MAFACT)
	(jfl/at/mafact.com)
In-Reply-To: <9b47bd6.1c8e374.6ba963d.72f6@mafact.com>
Message-ID: <70607802.1c8e37f.7054e0b.35bf@mafact.com>

2008-07-11 19:52 UTC+0200 JF Lefebvre (MAFACT) (jfl/at/mafact.com)
  * harbour/source/rtl/gtwvt/gtwvt.c
    * Reversed my change LONG_PTR to LONG but to HB_LONG type for 64 bit compatibility

From jfl at mafact.com  Fri Jul 11 13:58:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Fri Jul 11 13:59:19 2008
Subject: [Harbour] 2008-07-11 18:20 UTC+0200 JF Lefebvre (MAFACT)
	(jfl/at/mafact.com)
In-Reply-To: <20080711170321.GA10569@34-mo7-2.acn.waw.pl>
Message-ID: <c6e58e06.1c8e37f.7078510.1e55@mafact.com>

Hi Przemek,

Changed to HB_LONG.

On the other side, I really wonder why this function would require a 64 bit PTR to send the LONG style ...
But who know :-)

Regards,

JF

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Przemyslaw Czerpak
Envoy??: vendredi 11 juillet 2008 19:03
??: Harbour Project Main Developer List.
Objet?: Re: [Harbour] 2008-07-11 18:20 UTC+0200 JF Lefebvre (MAFACT) (jfl/at/mafact.com)

On Fri, 11 Jul 2008, J. Lefebvre wrote:

Hi,

>   * harbour/source/rtl/gtwvt/gtwvt.c
>     * Change LONG_PTR to LONG as LONG_PTR was unknow by MSVC compiler and finally the expected type for SetWindowLongPtr() is LONG.
>     * protected by a #define the call to SetWindowLongPtr(), not know by MSVC 6 (_MSC_VER < 1400)
>     * not tested as working, just compile ok  !!!

This break 64bit compatibility. In Win64 LONG is 32bit integer and pointer
needs 64 bits. So casting pointer or win handles to LONG is not safe because
it strips upper 32 bits.
Please revert it and use casting to HB_PTRDIFF which is defined in hbdefs.h
with the size enough to hold pointers.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Fri Jul 11 19:03:22 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jul 11 19:03:22 2008
Subject: [Harbour] Duplicated explicit has key
Message-ID: <4877E6BA.9030602@dbtopas.lt>

Hello,


no compile warning/error generated and I would expect result "2" (the 
last one) to be printed.

PROC main()
LOCAL aI := {"A" => 1, "A" => 2}
   ? aI["A"]      // prints: 1
RETURN


Best regards,
Mindaugas
From mbelgrano at deltain.it  Sat Jul 12 09:48:36 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul 12 09:48:50 2008
Subject: [Harbour] What will be harbour 2.0 for you?
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE3D@SRV02.deltain.net>

What will harbour 2.0?
Please reply with :
MT, Unicode, XML, SQL, Multi-window GT for CUI apps, CUI-GUI-WWW without
source code modification
Or any other suggestion
Why?

Massimo Belgrano

From mbelgrano at deltain.it  Sat Jul 12 10:02:16 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul 12 10:02:21 2008
Subject: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE3D@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EE3D@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE3E@SRV02.deltain.net>

I vote CUI-GUI-WWW without source code modification
My motivation is written by  Przemyslaw Czerpak who wrote:
> But I'm interesting in sth else. I'd like to have library which I can 
> use with CUI, GUI and WWW Browsers without source code modification.
> IMHO today porting application to GUI only mode is a waste of time.
> In few years our programs will have to run in WANs and use many 
> different output devices like PDA, cellar phones, watches ;-)... We 
> will need interface which will allow to run application remotely in 
> CUI mode and

With this capability harbour can be best and grow his userbase 

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo
Belgrano
Sent: Saturday, July 12, 2008 3:49 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] What will be harbour 2.0 for you?

What will harbour 2.0?
Please reply with :
MT, Unicode, XML, SQL, Multi-window GT for CUI apps, CUI-GUI-WWW without
source code modification
Or any other suggestion
Why?

Massimo Belgrano

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From sami-site1 at laham.com.br  Sat Jul 12 11:15:27 2008
From: sami-site1 at laham.com.br (Sami Laham)
Date: Sat Jul 12 11:16:17 2008
Subject: RES: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE3E@SRV02.deltain.net>
Message-ID: <002501c8e432$1eb909c0$6f00a8c0@sami>

I agree too 

I vote CUI-GUI-WWW without source code modification 

-----Mensagem original-----
De: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org]Em nome de Massimo Belgrano
Enviada em: s?bado, 12 de julho de 2008 11:02
Para: Harbour Project Main Developer List.
Assunto: RE: [Harbour] What will be harbour 2.0 for you?


I vote CUI-GUI-WWW without source code modification
My motivation is written by  Przemyslaw Czerpak who wrote:
> But I'm interesting in sth else. I'd like to have library which I can 
> use with CUI, GUI and WWW Browsers without source code modification.
> IMHO today porting application to GUI only mode is a waste of time.
> In few years our programs will have to run in WANs and use many 
> different output devices like PDA, cellar phones, watches ;-)... We 
> will need interface which will allow to run application remotely in 
> CUI mode and

With this capability harbour can be best and grow his userbase 

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo
Belgrano
Sent: Saturday, July 12, 2008 3:49 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] What will be harbour 2.0 for you?

What will harbour 2.0?
Please reply with :
MT, Unicode, XML, SQL, Multi-window GT for CUI apps, CUI-GUI-WWW without
source code modification
Or any other suggestion
Why?

Massimo Belgrano

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
A non-text attachment was scrubbed...
Name: winmail.dat
Type: application/ms-tnef
Size: 2540 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080712/a58f4370/winmail-0001.bin
From dbtopas at dbtopas.lt  Sat Jul 12 12:36:47 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Jul 12 12:36:47 2008
Subject: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE3E@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EE3D@SRV02.deltain.net>
	<AFB948164110ED43B5EB849E8DEEF03815EE3E@SRV02.deltain.net>
Message-ID: <4878DD9F.9080700@dbtopas.lt>

> I vote CUI-GUI-WWW without source code modification

Massimo, I think there is no need to do any votes like this. Harbour 
does not have any parliament or president. We are creating Harbour, not 
some "other" guys. Do you vote for your own actions? Do you vote for 
time you get up in the morning, or do you vote for your own breakfast menu?

It would be better for the project to write some code instead of voting.


Best regards,
Mindaugas
From gvarona at ec-red.com  Sat Jul 12 12:46:16 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Sat Jul 12 12:46:24 2008
Subject: [Harbour] Function ACHOICE() with mouse
Message-ID: <4878DFD8.4070300@ec-red.com>

Hello

Can I use the mouse with ACHOICE ()?
If yes, How?

Best Regards
GVS

From gvarona at ec-red.com  Sat Jul 12 12:58:04 2008
From: gvarona at ec-red.com (Guillermo Varona)
Date: Sat Jul 12 12:58:07 2008
Subject: [Harbour] How can get date of creation the a folder in Windows?
In-Reply-To: <486D55CA.5000401@ec-red.com>
References: <486D55CA.5000401@ec-red.com>
Message-ID: <18421547.post@talk.nabble.com>


Any tip / hint for this?

TIA

Best Regards
GVS


Guillermo Varona wrote:
> 
> Hi:
> How can get the date of creation the folder in Windows?
> DIRECTORY () returns me to change the date of the folder.
> 
> Best Regards
> GVS
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/How-can-get-date-of-creation-the-a-folder-in-Windows--tp18269581p18421547.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Sat Jul 12 13:59:42 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Jul 12 13:59:47 2008
Subject: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <4878DD9F.9080700@dbtopas.lt>
References: <AFB948164110ED43B5EB849E8DEEF03815EE3D@SRV02.deltain.net><AFB948164110ED43B5EB849E8DEEF03815EE3E@SRV02.deltain.net>
	<4878DD9F.9080700@dbtopas.lt>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE3F@SRV02.deltain.net>

Thanks for explain your vision

The question is "CUI-GUI-WWW without source code modification" is
possible or impossible?
I hope that you and any other harbour GURU or guy  can give us a reply


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Mindaugas
Kavaliauskas
Sent: Saturday, July 12, 2008 6:37 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] What will be harbour 2.0 for you?

> I vote CUI-GUI-WWW without source code modification

Massimo, I think there is no need to do any votes like this. Harbour 
does not have any parliament or president. We are creating Harbour, not 
some "other" guys. Do you vote for your own actions? Do you vote for 
time you get up in the morning, or do you vote for your own breakfast
menu?

It would be better for the project to write some code instead of voting.


Best regards,
Mindaugas
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From e.m.giordano at emagsoftware.it  Sat Jul 12 17:14:57 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Jul 12 17:15:01 2008
Subject: [Harbour] Errors
Message-ID: <EC1E88B13D614015994F84D630484C5B@emag>

Error E2188 source\rtl\gtwvt\gtwvt.c 1449: Expression syntax in function 
hb_gt_wvt_WndProc
Error E2188 source\rtl\gtwvt\gtwvt.c 1451: Expression syntax in function 
hb_gt_wvt_WndProc
Error E2188 source\rtl\gtwvt\gtwvt.c 2180: Expression syntax in function 
hb_gt_wvt_Info
Error E2188 source\rtl\gtwvt\gtwvt.c 2182: Expression syntax in function 
hb_gt_wvt_Info

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From bedipritpal at hotmail.com  Sat Jul 12 19:17:27 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Jul 12 19:17:31 2008
Subject: [Harbour] 2008-07-12 16:12 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <18424632.post@talk.nabble.com>


2008-07-12 16:12 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * source/rtl/gtwvt/gtwvt.c
    * #if defined(_MSC_VER) and (_MSC_VER >= 1200) => 
      #if defined(_MSC_VER) && (_MSC_VER >= 1200)
    *#elif  =>  #else
     
     /* JF Please check with BCC also */

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-07-12-16%3A12-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp18424632p18424632.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat Jul 12 19:25:28 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Jul 12 19:25:31 2008
Subject: [Harbour] Errors
In-Reply-To: <EC1E88B13D614015994F84D630484C5B@emag>
References: <EC1E88B13D614015994F84D630484C5B@emag>
Message-ID: <18424683.post@talk.nabble.com>


Enrico


Enrico Maria Giordano wrote:
> 
> Error E2188 source\rtl\gtwvt\gtwvt.c 1449: Expression syntax in function 
> hb_gt_wvt_WndProc
> Error E2188 source\rtl\gtwvt\gtwvt.c 1451: Expression syntax in function 
> hb_gt_wvt_WndProc
> Error E2188 source\rtl\gtwvt\gtwvt.c 2180: Expression syntax in function 
> hb_gt_wvt_Info
> Error E2188 source\rtl\gtwvt\gtwvt.c 2182: Expression syntax in function 
> hb_gt_wvt_Info
> 

Should be fixed after
2008-07-12 16:12 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Errors-tp18423712p18424683.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From roberbox at gmail.com  Sat Jul 12 21:21:59 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Sat Jul 12 21:22:16 2008
Subject: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE3F@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EE3D@SRV02.deltain.net><AFB948164110ED43B5EB849E8DEEF03815EE3E@SRV02.deltain.net>	<4878DD9F.9080700@dbtopas.lt>
	<AFB948164110ED43B5EB849E8DEEF03815EE3F@SRV02.deltain.net>
Message-ID: <487958B7.5020902@gmail.com>

Massimo Belgrano wrote:

> The question is "CUI-GUI-WWW without source code modification" is
> possible or impossible?

These are some random thoughts... please don't take it too seriously :)

Well... IMHO a possible approach could be assume that each @ SAY/GET... 
READ construct as an implicit modal window definition and activation 
(for GUI). This way, all pending gets will be included in a new window 
shown when READ is reached. The modal window could be automatically 
closed when read is terminated.

This mechanism could work well for most common situations in a standard 
app, and could be a 'default behavior' that eventually could be changed 
by special compiler switches.

Clipper 5.3 syntax includes some controls that could give you a basic 
GUI functionality easily portable to Win32 API or GTK.

Regarding WWW, the application (running in the server) should send an 
HTML form 'equivalent' to each " say/get read construct, and wait for 
client response....

The two main problems here, are that, AFAIK HTML forms could not provide 
adequate functionality and that running binaries at the server is not 
always possible or affordable.

The first, perhaps, could be solved using javascript... the second looks 
very complicated and 'unreachable' goal (maybe doing that Harbour create 
  PHP code to run on the server?).

Regards,

Roberto.
From e.m.giordano at emagsoftware.it  Sun Jul 13 07:38:14 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Jul 13 07:38:19 2008
Subject: [Harbour] Errors
References: <EC1E88B13D614015994F84D630484C5B@emag>
	<18424683.post@talk.nabble.com>
Message-ID: <ACEC34E395714EBBBFE42C6ED76BB35D@emag>


-----Messaggio Originale----- 
Da: "Pritpal Bedi" <bedipritpal@hotmail.com>
A: <harbour@harbour-project.org>
Data invio: domenica 13 luglio 2008 1.25
Oggetto: Re: [Harbour] Errors


> Should be fixed after
> 2008-07-12 16:12 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)

Thank you!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From mbelgrano at deltain.it  Sun Jul 13 07:42:03 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Jul 13 07:42:20 2008
Subject: R: Re: [Harbour] What will be harbour 2.0 for you?
Message-ID: <000101c8e4dd$7f642011$0400a8c0@deltain.net>

Thank you for an interesting post

----- Messaggio originale -----
Da: Roberto Lopez <roberbox@gmail.com>
Inviato: domenica 13 luglio 2008 3.22
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: [Harbour] What will be harbour 2.0 for you?

Massimo Belgrano wrote:

> The question is "CUI-GUI-WWW without source code modification" is
> possible or impossible?

These are some random thoughts... please don't take it too seriously :)

Well... IMHO a possible approach could be assume that each @ SAY/GET... 
READ construct as an implicit modal window definition and activation 
(for GUI). This way, all pending gets will be included in a new window 
shown when READ is reached. The modal window could be automatically 
closed when read is terminated.

This mechanism could work well for most common situations in a standard 
app, and could be a 'default behavior' that eventually could be changed 
by special compiler switches.

Clipper 5.3 syntax includes some controls that could give you a basic 
GUI functionality easily portable to Win32 API or GTK.

Regarding WWW, the application (running in the server) should send an 
HTML form 'equivalent' to each " say/get read construct, and wait for 
client response....

The two main problems here, are that, AFAIK HTML forms could not provide 
adequate functionality and that running binaries at the server is not 
always possible or affordable.

The first, perhaps, could be solved using javascript... the second looks 
very complicated and 'unreachable' goal (maybe doing that Harbour create 
  PHP code to run on the server?).

Regards,

Roberto.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From jfl at mafact.com  Sun Jul 13 08:40:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Sun Jul 13 08:41:29 2008
Subject: [Harbour] 2008-07-12 16:12 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <18424632.post@talk.nabble.com>
Message-ID: <b450f0ca.1c8e4e5.10313ba0.2333@mafact.com>

Hi,

It compile without any message under MSVC 6.

I can't test under BCC. Sorry.

Regards,

JF,

PS : My apologies for this error. I was probably not too much awake ... :-)
Incredibly, it compiled under MSVC 6.

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Pritpal Bedi
Envoy??: dimanche 13 juillet 2008 1:17
??: harbour@harbour-project.org
Objet?: [Harbour] 2008-07-12 16:12 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)


2008-07-12 16:12 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * source/rtl/gtwvt/gtwvt.c
    * #if defined(_MSC_VER) and (_MSC_VER >= 1200) => 
      #if defined(_MSC_VER) && (_MSC_VER >= 1200)
    *#elif  =>  #else
     
     /* JF Please check with BCC also */

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-07-12-16%3A12-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp18424632p18424632.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From roberbox at gmail.com  Sun Jul 13 09:56:06 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Sun Jul 13 09:56:11 2008
Subject: R: Re: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <000101c8e4dd$7f642011$0400a8c0@deltain.net>
References: <000101c8e4dd$7f642011$0400a8c0@deltain.net>
Message-ID: <487A0976.9070007@gmail.com>

Massimo Belgrano wrote:

> Thank you for an interesting post

I guess that this will be a gret motivation for a lot of developers.

At its time, FoxPro can run apps without modifications on DOS, UNIX, 
Windows and it was very successful.

Perhaps, that great goal (interrupted by MS aquisition of Fox) could be 
finally reached.

As an alternative to extend commands for more advanced GUI/WWW interface 
we could take a look at FoxPro (2.x) syntax and specially Borland dBase 
V. IMHO it was GREAT, simple modern and powerful.

Regards,

Roberto.
From mbelgrano at deltain.it  Sun Jul 13 15:19:31 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Jul 13 15:19:48 2008
Subject: R: Re: R: Re: [Harbour] What will be harbour 2.0 for you?
Message-ID: <000201c8e51d$6745ce89$0400a8c0@deltain.net>

I agree abiut motivation of developer

But What you found great in  Borland dBase syntax?

----- Messaggio originale -----
Da: Roberto Lopez <roberbox@gmail.com>
Inviato: domenica 13 luglio 2008 15.56
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: R: Re: [Harbour] What will be harbour 2.0 for you?

Massimo Belgrano wrote:

> Thank you for an interesting post

I guess that this will be a gret motivation for a lot of developers.

At its time, FoxPro can run apps without modifications on DOS, UNIX, 
Windows and it was very successful.

Perhaps, that great goal (interrupted by MS aquisition of Fox) could be 
finally reached.

As an alternative to extend commands for more advanced GUI/WWW interface 
we could take a look at FoxPro (2.x) syntax and specially Borland dBase 
V. IMHO it was GREAT, simple modern and powerful.

Regards,

Roberto.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Sun Jul 13 15:21:20 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Jul 13 15:21:35 2008
Subject: R: Re: R: Re: [Harbour] What will be harbour 2.0 for you?
Message-ID: <000301c8e51d$a845b831$0400a8c0@deltain.net>

If you send me or post a sample
I can test on bcc

----- Messaggio originale -----
Da: Roberto Lopez <roberbox@gmail.com>
Inviato: domenica 13 luglio 2008 15.56
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: R: Re: [Harbour] What will be harbour 2.0 for you?

Massimo Belgrano wrote:

> Thank you for an interesting post

I guess that this will be a gret motivation for a lot of developers.

At its time, FoxPro can run apps without modifications on DOS, UNIX, 
Windows and it was very successful.

Perhaps, that great goal (interrupted by MS aquisition of Fox) could be 
finally reached.

As an alternative to extend commands for more advanced GUI/WWW interface 
we could take a look at FoxPro (2.x) syntax and specially Borland dBase 
V. IMHO it was GREAT, simple modern and powerful.

Regards,

Roberto.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From roberbox at gmail.com  Sun Jul 13 16:18:33 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Sun Jul 13 16:18:38 2008
Subject: R: Re: R: Re: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <000201c8e51d$6745ce89$0400a8c0@deltain.net>
References: <000201c8e51d$6745ce89$0400a8c0@deltain.net>
Message-ID: <487A6319.8090702@gmail.com>

Massimo Belgrano wrote:

> I agree abiut motivation of developer
> But What you found great in  Borland dBase syntax?

IMHO it is a good mix between 'classical' xbase and OOP. It feels like a 
logical evolution, keeping simplicity of 'old days' and modern elements, 
not missing the xBase target: Simple and powerful.

The FoxPro 2.x approach was interesting too. It was to allow the 
programmer to create GUI elements from special @...GET picture strings, 
doing the transition from console to GUI very simple.

Regards,

Roberto.




From roberbox at gmail.com  Sun Jul 13 16:27:48 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Sun Jul 13 16:27:54 2008
Subject: R: Re: R: Re: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <000301c8e51d$a845b831$0400a8c0@deltain.net>
References: <000301c8e51d$a845b831$0400a8c0@deltain.net>
Message-ID: <487A6544.8000603@gmail.com>

Massimo Belgrano wrote:
> If you send me or post a sample

 From dBase V forr Windows (as far as I remenber it worked the same in 
the DOS version):

//////////////////////////////////////////////////////////////////////

CLASS BROWSE Example

The following example defines a form that contains a browse object of 
the Contact
table. The Exit pushbutton gives the user an alternative way to close 
the form:

LOCAL f
f=NEW EntryForm()
f.OPEN()
CLASS EntryForm OF FORM
   this.Top=2
   this.Left=2
   this.Width=38
   this.Height=20
   this.View = "Contact.DBF"
   this.Text= "Edit as Required"
   DEFINE BROWSE Br1 OF THIS;
     PROPERTY;
       Alias "Contact",;
       Fields "CompCode, Contact",;
       Top 4,;
       Left 3,;
       Width 32,;
       Height 12,;
       Delete .T.,;
       StatusMessage "Contact Table Browse",;
       Toggle .F.  && Disables switching views with F2
   DEFINE TEXT Text1 OF THIS;
     PROPERTY;
       Text "Contact Table Points of Contact",;
       Width 38,;
       Top 1,;
       Left 0,;
       Alignment 1,;
       Height 2.50,;
       FontSize 12.00,;
       FontBold .T.
   DEFINE PUSHBUTTON Exit OF THIS;
     PROPERTY Text "Exit", Height 2,;
       Top 17, Left 14,;
       OnClick {;Form.Close()}
ENDCLASS

///////////////////////////////////////////////////////////////

Regards,

Roberto.

From M.Horodyski at pzuzycie.com.pl  Mon Jul 14 04:05:21 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Jul 14 04:05:27 2008
Subject: [Harbour] RE: Harbour Digest, Vol 21, Issue 52
In-Reply-To: <NLB01FErbreLDwdbWKE0000eb2d@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95010B21F7@PINK.zycie.pzu>

>Date: Sat, 12 Jul 2008 22:21:59 -0300
>From: Roberto Lopez <roberbox@gmail.com>
>Subject: Re: [Harbour] What will be harbour 2.0 for you?
>To: "Harbour Project Main Developer List."
>	<harbour@harbour-project.org>
>Message-ID: <487958B7.5020902@gmail.com>
>Content-Type: text/plain; charset=ISO-8859-1; format=flowed

...

>very complicated and 'unreachable' goal (maybe doing that 
>Harbour create 
>  PHP code to run on the server?).
>
>Regards,
>
>Roberto.


Roberto, why php ?
Why not www server ( like Apache, IIS) work on aplication task ?

Regards,
Marek Horodyski
From mbelgrano at deltain.it  Mon Jul 14 05:44:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Jul 14 05:44:28 2008
Subject: R: RE: [Harbour] 2008-07-12 16:12 UTC-0800 Pritpal
	Bedi(pritpal@vouchcac.com)
Message-ID: <000401c8e596$32445649$0400a8c0@deltain.net>

If you send me or post a sample
I can test on bcc

----- Messaggio originale -----
Da: J. Lefebvre <jfl@mafact.com>
Inviato: domenica 13 luglio 2008 14.41
A: 'Harbour Project Main Developer List.' <harbour@harbour-project.org>
Oggetto: RE: [Harbour] 2008-07-12 16:12 UTC-0800 Pritpal Bedi(pritpal@vouchcac.com)

Hi,

It compile without any message under MSVC 6.

I can't test under BCC. Sorry.

Regards,

JF,

PS : My apologies for this error. I was probably not too much awake ... :-)
Incredibly, it compiled under MSVC 6.

-----Message d'origine-----
De : harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Pritpal Bedi
Envoy? : dimanche 13 juillet 2008 1:17
? : harbour@harbour-project.org
Objet : [Harbour] 2008-07-12 16:12 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)


2008-07-12 16:12 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * source/rtl/gtwvt/gtwvt.c
    * #if defined(_MSC_VER) and (_MSC_VER >= 1200) => 
      #if defined(_MSC_VER) && (_MSC_VER >= 1200)
    *#elif  =>  #else
     
     /* JF Please check with BCC also */

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-07-12-16%3A12-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp18424632p18424632.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Mon Jul 14 05:51:51 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Jul 14 05:52:55 2008
Subject: R: Re: R: Re: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <487A6544.8000603@gmail.com>
References: <000301c8e51d$a845b831$0400a8c0@deltain.net>
	<487A6544.8000603@gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE40@SRV02.deltain.net>

Nice


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Roberto Lopez
Sent: Sunday, July 13, 2008 10:28 PM
To: Harbour Project Main Developer List.
Subject: Re: R: Re: R: Re: [Harbour] What will be harbour 2.0 for you?

Massimo Belgrano wrote:
> If you send me or post a sample

 From dBase V forr Windows (as far as I remenber it worked the same in 
the DOS version):

//////////////////////////////////////////////////////////////////////

CLASS BROWSE Example

The following example defines a form that contains a browse object of 
the Contact
table. The Exit pushbutton gives the user an alternative way to close 
the form:

LOCAL f
f=NEW EntryForm()
f.OPEN()
CLASS EntryForm OF FORM
   this.Top=2
   this.Left=2
   this.Width=38
   this.Height=20
   this.View = "Contact.DBF"
   this.Text= "Edit as Required"
   DEFINE BROWSE Br1 OF THIS;
     PROPERTY;
       Alias "Contact",;
       Fields "CompCode, Contact",;
       Top 4,;
       Left 3,;
       Width 32,;
       Height 12,;
       Delete .T.,;
       StatusMessage "Contact Table Browse",;
       Toggle .F.  && Disables switching views with F2
   DEFINE TEXT Text1 OF THIS;
     PROPERTY;
       Text "Contact Table Points of Contact",;
       Width 38,;
       Top 1,;
       Left 0,;
       Alignment 1,;
       Height 2.50,;
       FontSize 12.00,;
       FontBold .T.
   DEFINE PUSHBUTTON Exit OF THIS;
     PROPERTY Text "Exit", Height 2,;
       Top 17, Left 14,;
       OnClick {;Form.Close()}
ENDCLASS

///////////////////////////////////////////////////////////////

Regards,

Roberto.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From roberbox at gmail.com  Mon Jul 14 06:52:34 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Mon Jul 14 06:52:40 2008
Subject: [Harbour] RE: Harbour Digest, Vol 21, Issue 52
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95010B21F7@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95010B21F7@PINK.zycie.pzu>
Message-ID: <487B2FF2.2080603@gmail.com>

Horodyski Marek (PZUZ) wrote:
<...>
> Roberto, why php ?
> Why not www server ( like Apache, IIS) work on aplication task ?

As I've said were only some random thoughts and ideas.

I like PHP because (AFAIK) is independient from server platform (making 
things simpler) and is widespread, usually included (along MySql) with 
any basic hosting service (even free services).


Regards,

Roberto.



From dbtopas at dbtopas.lt  Mon Jul 14 07:29:45 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Jul 14 07:29:41 2008
Subject: [Harbour] What will be harbour 2.0 for you?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE3F@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EE3D@SRV02.deltain.net><AFB948164110ED43B5EB849E8DEEF03815EE3E@SRV02.deltain.net>	<4878DD9F.9080700@dbtopas.lt>
	<AFB948164110ED43B5EB849E8DEEF03815EE3F@SRV02.deltain.net>
Message-ID: <487B38A9.1040105@dbtopas.lt>

Massimo Belgrano wrote:
> Thanks for explain your vision
> 
> The question is "CUI-GUI-WWW without source code modification" is
> possible or impossible?
> I hope that you and any other harbour GURU or guy  can give us a reply

Hi,


it depends on what you mean "CUI-GUI-WWW without source code 
modification". For example, my app is event driven architecture, like 
all native GUIs for the last 10 years. Perhaps your app uses @ ... SAY 
... . So, "without source code modification" has the opposite meaning 
for you and me.

If we forget about architecture of our app, these is a lot of things to 
solve to have the same source for CUI-GUI-WWW. WWW is stateless protocol 
(cookies are used overcome this drawback), most GUI are event driven, 
etc. We can find some solution for CUI-GUI-WWW, but this solution will 
not be able to use all possibilities of all interfaces, we will be able 
to use all possibilities common for all of them.


Best regards,
Mindaugas
From niki at synel.co.il  Tue Jul 15 01:42:55 2008
From: niki at synel.co.il (Chen Kedem)
Date: Tue Jul 15 01:42:25 2008
Subject: [Harbour] SF: Subversion migration downtime scheduled for 2008-07-16
Message-ID: <1A07FEDC778C3E4AA417F089511F859C031F3B7478@Mail-yoq.SYNEL-COMPANY.LTD>

This was announced on SourceForge site status:
http://sourceforge.net/community/forum/topic.php?id=2836
,--
| The migration of Subversion service to the new datacenter is now scheduled for
| 2008-07-16 starting 04:00 Pacific for 12 hours during which the Subversion service
| will be in read-only mode. The read-only downtime will be used to complete the
| final data sync to Chicago, DNS changeover, and to perform a final round of
| production systems testing before service is made read-write again. We anticipate
| that no changes will be needed in Subversion client configuration or working copies.
`--

  Chen.
From druzus at acn.waw.pl  Tue Jul 15 08:32:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 15 08:32:43 2008
Subject: [Harbour] 2008-07-15 14:31 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807151232.m6FCWaga009064@31-mo5-4.acn.waw.pl>

2008-07-15 14:31 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmysql/Makefile
  * harbour/contrib/hbodbc/Makefile
  * harbour/contrib/hbsqlit3/Makefile
  * harbour/contrib/hbfbird/Makefile
  * harbour/contrib/hbcurl/Makefile
  * harbour/contrib/hbhpdf/Makefile
  * harbour/contrib/hbpgsql/Makefile
  * harbour/contrib/hbfimage/Makefile
  * harbour/contrib/hbgd/Makefile
  * harbour/contrib/hbgf/hbgfgtk/Makefile
    * do not add default system include directory to C_USR during testing
      for foreign header files when HB_XBUILD variable is set - protection
      against including wrong header files in cross builds

  * harbour/contrib/hbtpathy/ChangeLog
    * changed SVN EOL style to 'native'

  * harbour/contrib/hbbmcdx/bmdbfcdx.c
    * pacified warning

best regards
Przemek
From mbelgrano at deltain.it  Tue Jul 15 08:43:06 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul 15 08:43:17 2008
Subject: [Harbour] wich cross platform gui is more oriented to web 2.0
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE47@SRV02.deltain.net>

Wich cross platform gui is more oriented to web 2.0?

If I modify my clipper application for running in gui at least I want
have also little  web version

 

GTK+ is a highly usable, feature rich toolkit for creating graphical
user interfaces which boasts cross platform compatibility and an easy to
use API. GTK+ it is written in C, but has bindings
<http://www.gtk.org/language-bindings.html>  to many other popular
programming languages such as C++, Python and C# among others. GTK+ is
licensed under the GNU LGPL 2.1
<http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html>  allowing
development of both free and proprietary software with GTK+ without any
license fees or royalties. Here sample of screenshot
http://www.gtk.org/screenshots.html 

wxWidgets lets developers create applications for Win32, Mac OS X, GTK+,
X11, Motif, WinCE, and more using one codebase. It can be used from
languages such as C++, Python, Perl, and C#/.NET. Unlike other
cross-platform toolkits, wxWidgets applications look and feel native.
This is because wxWidgets uses the platform's own native controls rather
than emulating them. It's also extensive, free, open-source, and mature.
Here sample screenshot http://www.wxwidgets.org/about/screensh.htm

Trixul is an XML and JavaScript GUI toolkit that supports MacOS X,
Linux, and Windows environments directly via Cocoa, Gtk+, and .NET
native implementations. JavaScript code can call C++ directly.. Trixul
development is managed at Source Forge. Click here
<http://sourceforge.net/projects/trixul>  to visit the Source Forge
page. Developers are currently being sought to take Trixul from its
current form into something that can be used for large-scale
development. A blog <http://www.trixul.com/blog/>  chronicles the early
development of Trixul.

 

Anyone can share experiences with this guit

Trixul ise XML similar to hwgui

HbWxW - A Multiplatform GUI Library for Harbou
http://harbour.fm.interia.pl/

Hwgui use win32 api and gtk for linux
http://sourceforge.net/projects/hwgui/ 

xbGTK seem inactive from same year i
http://xbgtk.sourceforge.net/index.php?TITLE=Home
<http://xbgtk.sourceforge.net/index.php?TITLE=Home> 

 

 

 

 

Massimo Belgrano <mailto:mbelgrano@deltain.com> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080715/573cc8cd/attachment.html
From druzus at acn.waw.pl  Tue Jul 15 08:51:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 15 08:51:47 2008
Subject: [Harbour] Duplicated explicit has key
In-Reply-To: <4877E6BA.9030602@dbtopas.lt>
References: <4877E6BA.9030602@dbtopas.lt>
Message-ID: <20080715125142.GA16450@34-mo7-2.acn.waw.pl>

On Sat, 12 Jul 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> PROC main()
> LOCAL aI := {"A" => 1, "A" => 2}
>   ? aI["A"]      // prints: 1
> RETURN
> no compile warning/error generated

I think I should add such warning.

> and I would expect result "2" (the last one) to be printed.

This we can discus. For sure it should give the same results
as HB_HASH() and now they are reverted.
So we should change HB_HASH() function or the order of variables
stored for HB_P_HASHGEN PCODE.
What do you prefer?

Best regards,
Przemek
From druzus at acn.waw.pl  Tue Jul 15 08:53:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 15 08:53:31 2008
Subject: [Harbour] gtwvt and gtxwc sync
In-Reply-To: <9257026e0807111007m1517f2f0j9b9cf9c44a628905@mail.gmail.com>
References: <9257026e0807111007m1517f2f0j9b9cf9c44a628905@mail.gmail.com>
Message-ID: <20080715125320.GB16450@34-mo7-2.acn.waw.pl>

On Fri, 11 Jul 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> Lately some new features such palette management and X close trap have
> been added to gtwvt.
> Is there anybody interested to port them to gtxwc also?

I'll add palete managment in the weekend or the beginning of next week.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Jul 15 08:59:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 15 08:59:56 2008
Subject: [SPAM] Re: [Harbour] How can get date of creation the a folder in
	Windows?
In-Reply-To: <18421547.post@talk.nabble.com>
References: <486D55CA.5000401@ec-red.com> <18421547.post@talk.nabble.com>
Message-ID: <20080715125951.GC16450@34-mo7-2.acn.waw.pl>

On Sat, 12 Jul 2008, Guillermo Varona wrote:
> Any tip / hint for this?
> > How can get the date of creation the folder in Windows?
> > DIRECTORY () returns me to change the date of the folder.

source/rtl/hbffind.c[623]:
   if( FileTimeToLocalFileTime( &info->pFindFileData.ftLastWriteTime, &ft ) &&
change to:
   if( FileTimeToLocalFileTime( &info->pFindFileData.ftCreationTime, &ft ) &&

best regards,
Przemek
From dbtopas at dbtopas.lt  Tue Jul 15 12:58:30 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Jul 15 12:58:24 2008
Subject: [Harbour] Duplicated explicit has key
In-Reply-To: <20080715125142.GA16450@34-mo7-2.acn.waw.pl>
References: <4877E6BA.9030602@dbtopas.lt>
	<20080715125142.GA16450@34-mo7-2.acn.waw.pl>
Message-ID: <487CD736.8020808@dbtopas.lt>

Hi,


>> and I would expect result "2" (the last one) to be printed.
> 
> This we can discus. For sure it should give the same results
> as HB_HASH() and now they are reverted.
> So we should change HB_HASH() function or the order of variables
> stored for HB_P_HASHGEN PCODE.
> What do you prefer?

I think it's more clear, if the last value remains valid.
   aI := {key1=>val1, key2=>val2, key3=>val3}
is something like:
   aI := {=>}; aI[key1] := val1; aI[key2] := val2; aI[key3] := val3


Best regards,
Mindaugas
From bedipritpal at hotmail.com  Tue Jul 15 21:32:51 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Jul 15 21:32:54 2008
Subject: [Harbour] Harbour Online Help # 7
Message-ID: <18478442.post@talk.nabble.com>


Hello Everybody

http://www.vouch.info/harbour/

+ Shows up full function body.
+ Rearranged Harbour directory tree.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---7-tp18478442p18478442.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vagskarm at netone.gr  Wed Jul 16 05:49:58 2008
From: vagskarm at netone.gr (Vagelis Skarmaliorakis)
Date: Wed Jul 16 05:50:01 2008
Subject: [Harbour] Two points (a. opensuse 11.0 -b. t-gtk library)
Message-ID: <18398964.post@talk.nabble.com>


Hi all,

Concrats for your work. Finally i had time to build harbour from source at a
fresh Opensuse 11.0 installation 32bit. Everything went ok, compiled some
tests and runed them.

I also instlled t-gtk gui library. But i can't compile the demo's. I am
getting error messsages like this:

<<
\/usr/lib/harbour/libgttrm.a(gttrm.o): In function `hb_gt_trm_Refresh':
(.text+0x1dc1): undefined reference to `_gpm_arg'
/usr/lib/harbour/libgttrm.a(gttrm.o): In function `hb_gt_trm_Refresh':
(.text+0x1dc7): undefined reference to `_gpm_buf'
/usr/lib/harbour/libgttrm.a(gttrm.o): In function `hb_gt_trm_Refresh':
(.text+0x1deb): undefined reference to `gpm_consolefd'
/usr/lib/harbour/libgttrm.a(gttrm.o): In function `hb_gt_trm_Refresh':
(.text+0x1dfa): undefined reference to `_gpm_buf'
/usr/lib/harbour/libgttrm.a(gttrm.o): In function `set_gpmevt':
(.text+0x2c81): undefined reference to `Gpm_GetEvent'
/usr/lib/harbour/libgttrm.a(gttrm.o): In function `hb_gt_trm_Exit':
(.text+0x4a58): undefined reference to `gpm_fd'
/usr/lib/harbour/libgttrm.a(gttrm.o): In function `hb_gt_trm_Exit':
(.text+0x4af8): undefined reference to `Gpm_Close'\
>>

The problem is harbour's or t-grk's ?

Any suggestions for another gui library ?

Thanks
Vagelis
-- 
View this message in context: http://www.nabble.com/Two-points-%28a.-opensuse-11.0--b.-t-gtk-library%29-tp18398964p18398964.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vagskarm at netone.gr  Wed Jul 16 05:50:32 2008
From: vagskarm at netone.gr (Vagelis Skarmaliorakis)
Date: Wed Jul 16 05:50:35 2008
Subject: [Harbour] wich cross platform gui is more oriented to web 2.0
Message-ID: <18464550.post@talk.nabble.com>


Hi,

There is also wxharbour (http://sourceforge.net/projects/wxharbour)

BR
Vagelis Skarmaliorakis
-- 
View this message in context: http://www.nabble.com/wich-cross-platform-gui-is-more-oriented-to-web-2.0-tp18464329p18464550.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Wed Jul 16 06:19:08 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul 16 06:19:18 2008
Subject: [Harbour] Harbour Online Help # 7
In-Reply-To: <18478442.post@talk.nabble.com>
References: <18478442.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE4E@SRV02.deltain.net>

What do you think about documentation from minigui regarding harbour?

Here is zipped html html files with index.hta
http://www.megaupload.com/it/?d=LPP6JB9V  
Here chm http://www.megaupload.com/it/?d=COMTX65Z

It is made by free helpmaker (http://www.vizacc.com/Default.aspx )
HelpMaker is the best freeware Help Authoring tool in the whole world.
we can export htm,pdf,rtf



-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Wednesday, July 16, 2008 3:33 AM
To: harbour@harbour-project.org
Subject: [Harbour] Harbour Online Help # 7


Hello Everybody

http://www.vouch.info/harbour/

+ Shows up full function body.
+ Rearranged Harbour directory tree.

Regards
Pritpal Bedi
-- 
View this message in context:
http://www.nabble.com/Harbour-Online-Help---7-tp18478442p18478442.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From marcos.gambeta at yahoo.com.br  Wed Jul 16 07:16:10 2008
From: marcos.gambeta at yahoo.com.br (Marcos Antonio Gambeta)
Date: Wed Jul 16 07:16:14 2008
Subject: [Harbour] wich cross platform gui is more oriented to web 2.0
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815EE47@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815EE47@SRV02.deltain.net>
Message-ID: <487DD87A.9020304@yahoo.com.br>

Massimo Belgrano escreveu:
>
> Anyone can share experiences with this guit
>
> Trixul ise XML similar to hwgui
>
> HbWxW - A Multiplatform GUI Library for Harbou 
>  http://harbour.fm.interia.pl/
>
> Hwgui use win32 api and gtk for linux 
> http://sourceforge.net/projects/hwgui/
>
> xbGTK seem inactive from same year i 
> http://xbgtk.sourceforge.net/index.php?TITLE=Home
>

Massimo,

Others GUI libraries:

http://sourceforge.net/projects/xhgtk

http://sourceforge.net/projects/t-gtk

Suggestion to Harbour website: add the libraries to third party products 
list.

http://www.harbour-project.org/3rdparty.htm


Regards,
Marcos Gambeta

From mbelgrano at deltain.it  Wed Jul 16 10:22:00 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul 16 10:22:09 2008
Subject: [Harbour] wich cross platform gui is more oriented to web 2.0
In-Reply-To: <487DD87A.9020304@yahoo.com.br>
References: <AFB948164110ED43B5EB849E8DEEF03815EE47@SRV02.deltain.net>
	<487DD87A.9020304@yahoo.com.br>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE5F@SRV02.deltain.net>

This page is very old
So please anybody post every interesting 3rd party library
I compose a new thirdy part page



-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Marcos Antonio
Gambeta
Sent: Wednesday, July 16, 2008 1:16 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] wich cross platform gui is more oriented to web
2.0

Massimo Belgrano escreveu:
>
> Anyone can share experiences with this guit
>
> Trixul ise XML similar to hwgui
>
> HbWxW - A Multiplatform GUI Library for Harbou 
>  http://harbour.fm.interia.pl/
>
> Hwgui use win32 api and gtk for linux 
> http://sourceforge.net/projects/hwgui/
>
> xbGTK seem inactive from same year i 
> http://xbgtk.sourceforge.net/index.php?TITLE=Home
>

Massimo,

Others GUI libraries:

http://sourceforge.net/projects/xhgtk

http://sourceforge.net/projects/t-gtk

Suggestion to Harbour website: add the libraries to third party products

list.

http://www.harbour-project.org/3rdparty.htm


Regards,
Marcos Gambeta

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From tgbssk at hotmail.com  Wed Jul 16 13:19:45 2008
From: tgbssk at hotmail.com (--------- Abhimanyu Y. Altekar ---------)
Date: Wed Jul 16 13:19:55 2008
Subject: [Harbour] Third Party Free GUI + LIBs for XHarbour/Harbour
References: <AFB948164110ED43B5EB849E8DEEF03815EE47@SRV02.deltain.net><487DD87A.9020304@yahoo.com.br>
	<AFB948164110ED43B5EB849E8DEEF03815EE5F@SRV02.deltain.net>
Message-ID: <BAY140-DAV256E0D2B7CA00D676B9C4D58F0@phx.gbl>

Some Third Party products for all Clipper/XHarbour/Harbour Lovers

(1 ) -----------------------------------------------------------------------

    HbWxW (Cross Platform Libs ) *FREE
    http://harbour.fm.interia.pl/




(2 ) -----------------------------------------------------------------------
    JKIDE/ Visual FiveWin  (Lib + WYSIWYG IDE Currently on Windows ) *FREE
(Being better n better  )

    http://www.geocities.com/ksfanhk/index.htm

    Some of zip files are Cracked, Author has sent email that -He will
uploade good zip files very soon.
    So it is suggeted not to use JKIDE LIB's  functions at this stage.

    Apart from cracked Zip problem JKIDE written in xHarbour/Harbour and
Comprehensive .

    It is specially developed for FIVEWINE LIBs to use with XHarbour/Harbour
& MSVC 6.0 & BCC 5.x

(3 ) -----------------------------------------------------------------------
    Harbour ooHG IDE + LIBs (Windows )
    http://www.oohg.org/english/
    Another Good IDE (Being better n better  )
****************************************************************************
*****
*  I think all of us should use these products and Report Bugs so that QC
part can be completed Quickly  *
****************************************************************************
*****

From mbelgrano at deltain.it  Wed Jul 16 13:30:46 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Jul 16 13:30:56 2008
Subject: [Harbour] Third Party Free GUI + LIBs for XHarbour/Harbour
In-Reply-To: <BAY140-DAV256E0D2B7CA00D676B9C4D58F0@phx.gbl>
References: <AFB948164110ED43B5EB849E8DEEF03815EE47@SRV02.deltain.net><487DD87A.9020304@yahoo.com.br><AFB948164110ED43B5EB849E8DEEF03815EE5F@SRV02.deltain.net>
	<BAY140-DAV256E0D2B7CA00D676B9C4D58F0@phx.gbl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE63@SRV02.deltain.net>

Thanks

Please annybody post which lib-tools use

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of <---------
Abhimanyu Y. Altekar --------->
Sent: Wednesday, July 16, 2008 7:20 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] Third Party Free GUI + LIBs for XHarbour/Harbour

Some Third Party products for all Clipper/XHarbour/Harbour Lovers

(1 )
-----------------------------------------------------------------------

    HbWxW (Cross Platform Libs ) *FREE
    http://harbour.fm.interia.pl/




(2 )
-----------------------------------------------------------------------
    JKIDE/ Visual FiveWin  (Lib + WYSIWYG IDE Currently on Windows )
*FREE
(Being better n better  )

    http://www.geocities.com/ksfanhk/index.htm

    Some of zip files are Cracked, Author has sent email that -He will
uploade good zip files very soon.
    So it is suggeted not to use JKIDE LIB's  functions at this stage.

    Apart from cracked Zip problem JKIDE written in xHarbour/Harbour and
Comprehensive .

    It is specially developed for FIVEWINE LIBs to use with
XHarbour/Harbour
& MSVC 6.0 & BCC 5.x

(3 )
-----------------------------------------------------------------------
    Harbour ooHG IDE + LIBs (Windows )
    http://www.oohg.org/english/
    Another Good IDE (Being better n better  )
************************************************************************
****
*****
*  I think all of us should use these products and Report Bugs so that
QC
part can be completed Quickly  *
************************************************************************
****
*****

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Wed Jul 16 21:37:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 16 21:37:14 2008
Subject: [Harbour] 2008-07-17 03:36 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807170137.m6H1b9rj021362@31-mo5-4.acn.waw.pl>

2008-07-17 03:36 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbtpathy/tplinux.c
    * workaround for missing CRTCTS declaration in OpenWatcom

  * harbour/contrib/hbsqlit3/sqlite3/sqlite3.c
  * harbour/contrib/hbsqlit3/hbsqlit3.c
    * pacified warnings
    ! fixed C++ compilation

  * harbour/contrib/gtwvg/gtwvg.h
    * add hack for missing GCLP_HCURSOR declaration in OpenWatcom

  * harbour/contrib/hbtpathy/tpwin32.c
  * harbour/contrib/hbw32/dllcall.c
  * harbour/contrib/hbw32/w32_osc.c
  * harbour/contrib/hbole/ole2.c
  * harbour/contrib/hbgf/hbgfw32/win32.c
    * updated for UNICODE builds
    * pacified warnings

best regards
Przemek
From druzus at acn.waw.pl  Thu Jul 17 12:29:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 17 12:29:18 2008
Subject: [Harbour] Duplicated explicit has key
In-Reply-To: <487CD736.8020808@dbtopas.lt>
References: <4877E6BA.9030602@dbtopas.lt>
	<20080715125142.GA16450@34-mo7-2.acn.waw.pl>
	<487CD736.8020808@dbtopas.lt>
Message-ID: <20080717162911.GA8995@34-mo7-2.acn.waw.pl>

On Tue, 15 Jul 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> >>and I would expect result "2" (the last one) to be printed.
> >This we can discus. For sure it should give the same results
> >as HB_HASH() and now they are reverted.
> >So we should change HB_HASH() function or the order of variables
> >stored for HB_P_HASHGEN PCODE.
> >What do you prefer?
> I think it's more clear, if the last value remains valid.
>   aI := {key1=>val1, key2=>val2, key3=>val3}
> is something like:
>   aI := {=>}; aI[key1] := val1; aI[key2] := val2; aI[key3] := val3

At the beginning I though about adding warning message like
"repeated hash key ignored" and in such case it's better to
accept the first value. But it does not resolve the problem
when keys are not literal expressions and repeated values
cannot be detected at compile time. I also cannot revert the
order of variables stored for HB_P_HASHGEN because it will
change the order in which of user expression are evaluated
f.e. { ++i=>"A", ++i=>"B", ++i=>"C" } so I decided to change
it at runtime and added new function hb_hashAddNew() which
works like hb_hashAdd() but does not overwrite existing values.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Jul 17 12:29:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 17 12:29:33 2008
Subject: [Harbour] 2008-07-17 18:19 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807171629.m6HGTSPG009043@31-mo5-4.acn.waw.pl>

2008-07-17 18:19 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbw32/dllcall.c
    * minor cleanup in return values

  * harbour/contrib/hbole/ole2.c
    * cleaned casting in UNICODE conversions

  * harbour/source/common/expropt2.c
    * replicate CA-Cl*pper compile time optimization bugs:
         "" $ <literString>         => .T.
         AT( "", <literString> )    => 1
         CHR( 256 )                 => ""
      only when Harbour extensions (-kh) are not enabled, f.e.
      in strict Clipper compatibility mode (-kc)

  * harbour/utils/hbtest/rt_hvma.prg
  * harbour/utils/hbtest/rt_str.prg
    * updated to test Clipper and Harbour compile time modes in
      the above situations

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  - harbour/source/rtl/strings.c
  * harbour/source/common/hbstr.c
    * moved hb_strEmpty() from RTL to COMMON library

  * harbour/include/hbexprb.c
  * harbour/include/hbexprop.h
  * harbour/source/common/expropt2.c
    + added compile time optimization for EMPTY() function
    ; removed 'TODO: empty optimization' note

  * harbour/source/rtl/itemseri.c
    % compress trailing spaces during string item serialization

  * harbour/include/hbapi.h
  * harbour/source/vm/hashes.c
    + added hb_hashAddNew() - works like hb_hashAdd() but it adds item
      only if new key is used

  * harbour/source/vm/hvm.c
    * use hb_hashAddNew() instead of hb_hashAdd() for HB_P_HASHGEN
      I cannot revert the order of hash item during compilation because
      it will also change the order of user expression evaluation.

best regards
Przemek
From esgici at gmail.com  Thu Jul 17 16:22:20 2008
From: esgici at gmail.com (Bicahi Esgici)
Date: Thu Jul 17 16:22:24 2008
Subject: [Harbour] RE: Third Party Free GUI + LIBs for XHarbour/Harbour
Message-ID: <d4ce00e70807171322g460ba5e7i68db3f5673ab63a8@mail.gmail.com>

Hi to all

At Wed, 16 Jul 2008 19:30:46 +0200 Massimo Belgrano wrote:

> Please annybody post which lib-tools use

I don't know this demand is for developer only.

As a end user, my favourite was, is and always will be Harbour MiniGUI.

Roberto Lopez, founder, builder and developer of Harbour MiniGUI has a
project too, although in the beginning phase: "Harbour MiniGUI Linux."

I guess most members and followers of this forum know this:

News page:

http://harbourminigui.blogspot.com/

Main Page:

http://harbourminigui.googlepages.com

Best Regards

Bicahi Esgici

-- 
esgici
From mbelgrano at deltain.it  Thu Jul 17 16:31:48 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Jul 17 16:31:59 2008
Subject: [Harbour] RE: Third Party Free GUI + LIBs for XHarbour/Harbour
In-Reply-To: <d4ce00e70807171322g460ba5e7i68db3f5673ab63a8@mail.gmail.com>
References: <d4ce00e70807171322g460ba5e7i68db3f5673ab63a8@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE6C@SRV02.deltain.net>

Question is for everybody
Thanks for your reply

Which is the actual situation of Minigui LINUX?
Please post same sample if you have?

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Bicahi Esgici
Sent: Thursday, July 17, 2008 10:22 PM
To: harbour@harbour-project.org
Subject: [Harbour] RE: Third Party Free GUI + LIBs for XHarbour/Harbour

Hi to all

At Wed, 16 Jul 2008 19:30:46 +0200 Massimo Belgrano wrote:

> Please annybody post which lib-tools use

I don't know this demand is for developer only.

As a end user, my favourite was, is and always will be Harbour MiniGUI.

Roberto Lopez, founder, builder and developer of Harbour MiniGUI has a
project too, although in the beginning phase: "Harbour MiniGUI Linux."

I guess most members and followers of this forum know this:

News page:

http://harbourminigui.blogspot.com/

Main Page:

http://harbourminigui.googlepages.com

Best Regards

Bicahi Esgici

-- 
esgici
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From dbtopas at dbtopas.lt  Fri Jul 18 10:39:35 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Jul 18 10:39:38 2008
Subject: [Harbour] Duplicated explicit has key
In-Reply-To: <20080717162911.GA8995@34-mo7-2.acn.waw.pl>
References: <4877E6BA.9030602@dbtopas.lt>	<20080715125142.GA16450@34-mo7-2.acn.waw.pl>	<487CD736.8020808@dbtopas.lt>
	<20080717162911.GA8995@34-mo7-2.acn.waw.pl>
Message-ID: <4880AB27.9080209@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
> I also cannot revert the
> order of variables stored for HB_P_HASHGEN because it will
> change the order in which of user expression are evaluated
> f.e. { ++i=>"A", ++i=>"B", ++i=>"C" } so I decided to change
> it at runtime and added new function hb_hashAddNew() which
> works like hb_hashAdd() but does not overwrite existing values.

Perhaps, the same effect could be reached just by picking key, value 
pairs in opposite order from the stack in the hb_vmHashGen(). But this 
is more elegant solution (it does not require two loops, first for hash 
value assignment, second for hb_stackPop()).


Best regards,
Mindaugas

From esgici at gmail.com  Fri Jul 18 13:19:17 2008
From: esgici at gmail.com (Bicahi Esgici)
Date: Fri Jul 18 13:19:21 2008
Subject: [Harbour] RE: Third Party Free GUI + LIBs for XHarbour/Harbour
Message-ID: <d4ce00e70807181019s5cbf67eap7677bb046d3ed9f8@mail.gmail.com>

At 17 Jul 2008, Massimo Belgrano wrote:

> Which is the actual situation of Minigui LINUX?
> Please post same sample if you have?


Hi Massimo

As I was replied your guestion in HMG Yahoo group at Wed Jul 16, 2008
: I follow Roberto's web pages only; so I haven't any other news,
especially about HMG-Linux.

On the other hand, I haven't Linux and time for learning it :(

According to Roberto's HMG main page, URL for downloading HMG-Linux is:

http://sourceforge.net/project/showfiles.php?group_id=54496&package_id=49181&release_id=436007

Sample prg is above.

I hope Roberto itself can will give more infos.

By the way, my dream is: HMG embedded Harbour !


Regards

---------------------

* Harbour MiniGUI Linux Demo
* (c) 2006 Roberto Lopez


#include "minigui.ch"

PROCEDURE MAIN

	DEFINE WINDOW Win1 ;
		AT 10 , 10 ;
		WIDTH 500 ;
		HEIGHT 400 ;
		TITLE "Hi!!" ;
		MAIN

		@ 40 , 10 BUTTON Button1 ;
			OF Win1 ;
			CAPTION "MsgInfo()" ;
			ACTION MSGINFO ( 'Click 1' ) ;
			WIDTH 100 ;
			HEIGHT 30

		@ 70 , 10 BUTTON Button2 ;
			OF Win1 ;
			CAPTION "Exit" ;
			ACTION HMG_RELEASEWINDOW('WIN1') ;
			WIDTH 100 ;
			HEIGHT 30

		@ 100 , 10 BUTTON Button3 ;
			OF Win1 ;
			CAPTION "Modal Window" ;
			ACTION ModalTest() ;
			WIDTH 100 ;
			HEIGHT 30

		@ 140 , 20 EDITBOX Edit1 ;
			OF Win1 ;
			WIDTH 140 ;
			HEIGHT 60

		@ 10 , 10 LABEL Label1 ;
			OF Win1 ;
			VALUE "Hello" ;
			WIDTH 100 ;
			HEIGHT 30

		@ 10 , 200 TEXTBOX Text1 ;
			OF Win1 ;
			WIDTH 120 ;
			HEIGHT 23 ;
			VALUE "Text1"

		@ 50 , 200 SPINNER Spin1 ;
			OF Win1 ;
			RANGE 0 , 10 ;
			VALUE 5 ;
			WIDTH 100 ;
			HEIGHT 23 ;
			INCREMENT 1

		@ 210 , 10 MONTHCALENDAR MonthCal1 ;
			OF Win1 ;
			WIDTH 200 ;
			HEIGHT 170

		@ 150 , 200 CHECKBOX Check1 ;
			OF Win1 ;
			CAPTION "Hi!!" ;
			WIDTH 120 ;
			HEIGHT 30

		@ 190 , 220 GRID Grid1 ;
			OF Win1 ;
			WIDTH 170 ;
			HEIGHT 180 ;
			HEADERS {"One","Two","Three"} ;
			WIDTHS {50,50,50}

	END WINDOW

	ACTIVATE WINDOW Win1

RETURN

PROCEDURE ModalTest()

	DEFINE WINDOW Win2 ;
		AT 10 , 300 ;
		WIDTH 160 ;
		HEIGHT 450 ;
		TITLE "Hi!!" ;
		MODAL

		@ 10 , 10 BUTTON Button1 ;
			OF Win2 ;
			CAPTION "Get TextBox Value" ;
			ACTION MSGINFO ( GetProperty('Win1','Text1','Value') ) ;
			WIDTH 130 ;
			HEIGHT 30

		@ 40 , 10 BUTTON Button2 ;
			OF Win2 ;
			CAPTION "Set TextBox Value" ;
			ACTION SetProperty('Win1','Text1','Value','New value')  ;
			WIDTH 130 ;
			HEIGHT 30

		@ 70 , 10 BUTTON Button3 ;
			OF Win2 ;
			CAPTION "Get Spinner Value" ;
			ACTION MsgInfo ( Str ( GetProperty('Win1','Spin1','Value') ) ) ;
			WIDTH 130 ;
			HEIGHT 30

		@ 100 , 10 BUTTON Button4 ;
			OF Win2 ;
			CAPTION "Set Spinner Value" ;
			ACTION SetProperty('Win1','Spin1','Value', 7 )  ;
			WIDTH 130 ;
			HEIGHT 30

	END WINDOW

	ACTIVATE WINDOW Win2

RETURN

---------------------

-- 
esgici
From alex_degarate at hotmail.com  Fri Jul 18 14:31:34 2008
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Fri Jul 18 14:31:46 2008
Subject: [Harbour] Split Contrib Source code
Message-ID: <BLU149-W9601DC381EF2EA7DE2A1985890@phx.gbl>


Can we split the contrib source code from the harbour source code ?

In that way Harbour core and Contrib code could be updated each one at its own time with independently.

At this moment Contrib folder code it`s almost 45 % from total size source code of Harbour 1.00 RC2 

Additionally if other developers can get the task of Contrib folders maintenance, main developers will be alleviated in its task.

What do you think ?

Alejandro





_________________________________________________________________
Invite your mail contacts to join your friends list with Windows Live Spaces. It's easy!
http://spaces.live.com/spacesapi.aspx?wx_action=create&wx_url=/friends.aspx&mkt=en-us
From gvarona at ec-red.com  Sat Jul 19 12:37:58 2008
From: gvarona at ec-red.com (=?ISO-8859-2?Q?Guillermo_Varona_Silup=FA?=)
Date: Sat Jul 19 12:38:06 2008
Subject: [Harbour] Re: Re: How can get date of creation the a folder in
	Windows?
In-Reply-To: <20080715125951.GC16450@34-mo7-2.acn.waw.pl>
References: <486D55CA.5000401@ec-red.com> <18421547.post@talk.nabble.com>
	<20080715125951.GC16450@34-mo7-2.acn.waw.pl>
Message-ID: <48821866.4060309@ec-red.com>

Przemyslaw Czerpak escribi?:
> On Sat, 12 Jul 2008, Guillermo Varona wrote:
>> Any tip / hint for this?
>>> How can get the date of creation the folder in Windows?
>>> DIRECTORY () returns me to change the date of the folder.
> 
> source/rtl/hbffind.c[623]:
>    if( FileTimeToLocalFileTime( &info->pFindFileData.ftLastWriteTime, &ft ) &&
> change to:
>    if( FileTimeToLocalFileTime( &info->pFindFileData.ftCreationTime, &ft ) &&
> 

Thank you, it worked perfect!
The only thing I'm going to have to make my own version of Harbour.

Best Regards
GVS
From niki at synel.co.il  Sun Jul 20 06:39:33 2008
From: niki at synel.co.il (Chen Kedem)
Date: Sun Jul 20 06:37:53 2008
Subject: [Harbour] SF: Performance issues with migrated SVN
Message-ID: <488315E5.351D@synel.co.il>

The folks at SourceForge are still having problems with the SVN
services. So before you re-format your PC, the problem is probably
NOT on your side.

For more information, see Sf site status page:
http://sourceforge.net/community/forum/forum.php?id=11


  Chen.
From niki at synel.co.il  Sun Jul 20 07:44:56 2008
From: niki at synel.co.il (Chen Kedem)
Date: Sun Jul 20 07:43:15 2008
Subject: [Harbour] SF bugtracker#
Message-ID: <48832538.5B95@synel.co.il>

Some one reported a problem with the -gw switch:
https://sourceforge.net/tracker/index.php?func=detail&aid=2022726&group_id=681&atid=100681

I know OBJ generation feature is not exactly functioning, I can
duplicate the problem, if it is not working may be it need to be
disabled on default build.

---zz4.prg---
proc test
? "Hello"
return
-------------                    

..\bin\harbour zz4 /w/a/n/gw

I get the following from CodeGuard:

Error 00001. 0x300010 (Thread 0x0094):
Resource leak: The memory block (0xC8B7B4) was never freed

The memory block (0x00C8B7B4) [size: 36 bytes] was allocated with malloc
Call Tree:
   0x0040118A(=harbour.exe:0x01:00018A) source\main\HARBOUR.C#108
   0x00446C86(=harbour.exe:0x01:045C86) source\compiler\GENOBJ32.C#349
   0x004460B3(=harbour.exe:0x01:0450B3) source\compiler\GENOBJ32.C#94
   0x0040E51B(=harbour.exe:0x01:00D51B) source\compiler\HBMAIN.C#4353
   0x0040FCB1(=harbour.exe:0x01:00ECB1) source\compiler\HBMAIN.C#4811
   0x0040392D(=harbour.exe:0x01:00292D) source\compiler\HBMAIN.C#159


Tested with BCC32 ChangeLog 2008-07-17 18:19 UTC+0200 Przemyslaw Czerpak


  Chen.
From harbour.01 at syenar.hu  Mon Jul 21 06:29:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 21 06:29:42 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4875CD06.6010306@interia.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<4874D1FB.7020308@dbtopas.lt>	<4874D720.9090805@interia.pl>	<4874DEED.2090001@dbtopas.lt>	<4874E3B8.9030204@interia.pl>
	<4874EC51.7010907@dbtopas.lt> <4875CD06.6010306@interia.pl>
Message-ID: <07EA1471-C7CC-43FE-9E3E-8B1D3C64AD27@syenar.hu>

Hi Marek,

> But since dlls are not interchangable (I cannot overwrite one with the
> other one) - I am still against renaming them to one common name -
> harbour.dll.
>
> Imagine what happens if one installer program installs harbour.dll  
> in a
> system dir and then another one installs Borland harbour.dll in a  
> system
> dir too.
>
> Do you have any kind of solution which would solve this problem in an
> elegant way ? ( to convince me to harbour.dll name ? ;-) )

IMO, we should either stick with one compiler when generating
"official" harbour.dll (this may mean a separate, compiler independent
.dll-only binary distribution .zip file), or we can try to make them
interchangeable, if there is any chance to do it.

Brgds,
Viktor

From rportnoff at spendmap.com  Mon Jul 21 12:09:33 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Jul 21 12:08:16 2008
Subject: [Harbour] Incorrect field masking
Message-ID: <B0082207171@ms1.3peaks.com>

Hi all,

This is NOT a Clipper-compatibility issue but I believe is incorrect 
behavior (ie. a bug)...

If you have a field mask as "999,999,999.99" for a numeric field, as 
you enter digits in the field, spaces appear and sometimes commas 
inconsistently appear as well. Once focus is lost for the field, the 
field seems to format properly. Furthermore, if you try to enter a 
comma, it jumps to the decimal position as if the decimal was pressed.

To fix this behavior (bug?) I suggest that the commas in the field 
mask be ignored while the get object has input focus - Then, apply 
the field mask upon the lose focus event, as is occurring now.

Regards,
Randy.




From e.m.giordano at emagsoftware.it  Mon Jul 21 12:15:31 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Jul 21 12:15:38 2008
Subject: [Harbour] Incorrect field masking
References: <B0082207171@ms1.3peaks.com>
Message-ID: <0F753796B2424C15896094373AA69541@emag>


-----Messaggio Originale----- 
Da: "Randy Portnoff" <rportnoff@spendmap.com>
A: <harbour@harbour-project.org>
Data invio: luned? 21 luglio 2008 18.09
Oggetto: [Harbour] Incorrect field masking


> Furthermore, if you try to enter a comma, it jumps to the decimal position 
> as if the decimal was pressed.

This has been the normal Clipper behavior for decades. Please don't change 
it.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Mon Jul 21 12:43:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 21 12:43:33 2008
Subject: [Harbour] 2008-07-21 18:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807211643.m6LGhQrL019774@31-mo5-4.acn.waw.pl>

2008-07-21 18:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
  * harbour/contrib/hbtip/ChangeLog
    * replaced TABs with SPACEs

  * harbour/source/compiler/genobj32.c
    ! fixed memory leak
      TODO: disable this module in default builds until it will not
      be fixed to generate valid OMF .obj files

best regards
Przemek
From capelsoft at terra.es  Mon Jul 21 12:46:31 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Mon Jul 21 12:46:47 2008
Subject: [Harbour] Warning + undeclared identifier for WINCE
References: <B0082207171@ms1.3peaks.com>
	<0F753796B2424C15896094373AA69541@emag>
Message-ID: <3BA4C52C99A14B0EB64FD24F11E9EAB7@pepeluis>

Hi,

After last SVN I try to build libs for WinCe using EVC4.

I get these messages:

expropt2.c
p:\progra~1\harbour\source\common\expropt2.c(1760) : warning C4244: 
'function' : conversion from '__int64 ' to 'long ', possible loss of data
hbwince.c
p:\progra~1\harbour\source\common\hbwince.c(532) : error C2065: 
'DRIVE_UNKNOWN' : undeclared identifier
hbstr.c


I am using this sets for building libs:

SET HB_ARCHITECTURE=w32
SET HB_GT_LIB=gtwvt
SET HB_GT_DEFAULT=wvt
SET HB_VISUALC_VER=60
SET HB_BUILD_MODE=c
SET 
CLIBFLAGS=-DHB_OS_WIN_32  -DHB_WINCE -DHB_GTGUI_HACK -DHARBOUR_MAIN_WIN -DHB_TR_LEVEL_ALWAYS 
 -DUNICODE

Thanks and regards for your help.
Jos? Luis Capel

From mbelgrano at deltain.it  Mon Jul 21 13:00:05 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Jul 21 13:00:12 2008
Subject: [Harbour] Incorrect field masking
In-Reply-To: <0F753796B2424C15896094373AA69541@emag>
References: <B0082207171@ms1.3peaks.com>
	<0F753796B2424C15896094373AA69541@emag>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE76@SRV02.deltain.net>

Good for italian decimal

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Enrico Maria Giordano
Sent: Monday, July 21, 2008 6:16 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Incorrect field masking


-----Messaggio Originale----- 
Da: "Randy Portnoff" <rportnoff@spendmap.com>
A: <harbour@harbour-project.org>
Data invio: luned? 21 luglio 2008 18.09
Oggetto: [Harbour] Incorrect field masking


> Furthermore, if you try to enter a comma, it jumps to the decimal position 
> as if the decimal was pressed.

This has been the normal Clipper behavior for decades. Please don't change 
it.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Jul 21 13:05:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 21 13:05:33 2008
Subject: [Harbour] 2008-07-21 19:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807211705.m6LH5S45019911@31-mo5-4.acn.waw.pl>

2008-07-21 19:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbwince.h
    * added DRIVE_UNKNOWN declaration for MSVC WinCE builds

  * harbour/source/common/expropt2.c
    * pacified warning

best regards
Przemek
From mpaliwoda at interia.pl  Mon Jul 21 14:06:59 2008
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Jul 21 14:07:09 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <07EA1471-C7CC-43FE-9E3E-8B1D3C64AD27@syenar.hu>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<4874D1FB.7020308@dbtopas.lt>	<4874D720.9090805@interia.pl>	<4874DEED.2090001@dbtopas.lt>	<4874E3B8.9030204@interia.pl>	<4874EC51.7010907@dbtopas.lt>
	<4875CD06.6010306@interia.pl>
	<07EA1471-C7CC-43FE-9E3E-8B1D3C64AD27@syenar.hu>
Message-ID: <4884D043.80908@interia.pl>

Hi Viktor,

[ I hope you spent great time during your vacations :) ]

> IMO, we should either stick with one compiler when generating
> "official" harbour.dll (this may mean a separate, compiler independent
> .dll-only binary distribution .zip file), or we can try to make them
> interchangeable, if there is any chance to do it.

IMO the former is only acceptable as long as you consider
binary distrubutions provided by Harbour team. But some
users might want to build Harbour from sources using their
favorite C compiler. What would be the solution for them ?
How would we protect them ?

The latter is *far* beyond my knowledge. I am not even sure
if it is doable at all :).

[ BTW, I'll be unrechable on a list for at least few weeks -
if no longer :(. Sorry. I accept each group decision on this
subject taken in a meantime. ]

-- 

Marek

----------------------------------------------------------------------
Galeria absurdow.
zobacz >>> http://link.interia.pl/f1e5e

From capelsoft at terra.es  Mon Jul 21 14:49:04 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Mon Jul 21 15:05:34 2008
Subject: [Harbour] 2008-07-21 19:05 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200807211705.m6LH5S45019911@31-mo5-4.acn.waw.pl>
Message-ID: <818C1201F49F422F8619C4F0CB2EE822@pepeluis>

Przemek,

Sorry, I can not see DRIVE_UNKNOWN declaration in hbwince.h

Regards,
Jos? Luis Capel

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: <harbour@harbour-project.org>
Sent: Monday, July 21, 2008 7:05 PM
Subject: [Harbour] 2008-07-21 19:05 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-07-21 19:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbwince.h
>    * added DRIVE_UNKNOWN declaration for MSVC WinCE builds
>
>  * harbour/source/common/expropt2.c
>    * pacified warning
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From druzus at acn.waw.pl  Mon Jul 21 15:20:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 21 15:21:30 2008
Subject: [Harbour] 2008-07-21 19:05 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <818C1201F49F422F8619C4F0CB2EE822@pepeluis>
References: <200807211705.m6LH5S45019911@31-mo5-4.acn.waw.pl>
	<818C1201F49F422F8619C4F0CB2EE822@pepeluis>
Message-ID: <20080721192045.GA20736@34-mo7-2.acn.waw.pl>

On Mon, 21 Jul 2008, Jos? Luis Capel - wrote:

Hi Jose,

> Sorry, I can not see DRIVE_UNKNOWN declaration in hbwince.h

line 94 in:
   $Id: hbwince.h 8985 2008-07-21 17:05:26Z druzus $

best regards
Przemek
From capelsoft at terra.es  Mon Jul 21 15:34:40 2008
From: capelsoft at terra.es (=?ISO-8859-2?Q?Jos=E9_Luis_Capel_-?=)
Date: Mon Jul 21 15:34:49 2008
Subject: [Harbour] 2008-07-21 19:05 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <200807211705.m6LH5S45019911@31-mo5-4.acn.waw.pl><818C1201F49F422F8619C4F0CB2EE822@pepeluis>
	<20080721192045.GA20736@34-mo7-2.acn.waw.pl>
Message-ID: <FBCDE1A0BBF54DFD9C778746A3DDB930@pepeluis>

Przemek,

>
> line 94 in:
>   $Id: hbwince.h 8985 2008-07-21 17:05:26Z druzus $
>
After re-updating from snv now is ok.  Many thanks!

Regards,
Jos? Luis Capel

From capelsoft at terra.es  Mon Jul 21 15:37:26 2008
From: capelsoft at terra.es (=?ISO-8859-2?Q?Jos=E9_Luis_Capel_-?=)
Date: Mon Jul 21 15:37:39 2008
Subject: [Harbour] GtWvt: errors compiling with las svn
References: <200807211705.m6LH5S45019911@31-mo5-4.acn.waw.pl><818C1201F49F422F8619C4F0CB2EE822@pepeluis>
	<20080721192045.GA20736@34-mo7-2.acn.waw.pl>
Message-ID: <AC6F893369F54FBD9BF73D3D3C89953A@pepeluis>

Hi,

After last SVN I try to build libs for WinCe using EVC4:

gtwvt.c
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1442) : error C2065: 
'WM_ENTERSIZEMOVE' : undeclared identifier
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1442) : error C2051: case 
expression not constant
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1456) : error C2065: 
'SWP_DEFERERASE' : undeclared identifier
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1458) : error C2065: 
'SW_NORMAL' : undeclared identifier
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1462) : error C2065: 
'WM_EXITSIZEMOVE' : undeclared identifier
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1462) : error C2051: case 
expression not constant
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1473) : error C2065: 
'SC_MAXIMIZE' : undeclared identifier
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1473) : error C2051: case 
expression not constant
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1480) : warning C4013: 
'SetWindowLongPtr' undefined; assuming extern returning int

I am using these sets:

SET HB_ARCHITECTURE=w32
SET HB_GT_LIB=gtgui
SET HB_GT_DEFAULT=gui
SET HB_VISUALC_VER=60
SET HB_BUILD_MODE=c
SET
CLIBFLAGS=-DHB_OS_WIN_32  -DHB_WINCE -DHB_GTGUI_HACK -DHARBOUR_MAIN_WIN -DHB_TR_LEVEL_ALWAYS
 -DUNICODE


Regards,
Jos? Luis Capel 

From druzus at acn.waw.pl  Mon Jul 21 15:54:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 21 15:55:02 2008
Subject: [Harbour] 2008-07-21 21:54 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807211954.m6LJsvQ8021014@31-mo5-4.acn.waw.pl>

2008-07-21 21:54 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtwvt/gtwvt.h
    * added some definitions which seems to be missing in some MSVC-WinCE
      versions

  * harbour/source/rtl/gtwvt/gtwvt.c
    * cleaned SetWindowLongPtr()/SetWindowLong() usage so now all calls
      are protected by the same #if condition

best regards
Przemek
From capelsoft at terra.es  Mon Jul 21 16:37:01 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Mon Jul 21 16:38:04 2008
Subject: [Harbour] 2008-07-21 21:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200807211954.m6LJsvQ8021014@31-mo5-4.acn.waw.pl>
Message-ID: <D6C29DD661DA4DB189C5DF0A41FBB0C6@pepeluis>

Przemek,

> 2008-07-21 21:54 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/gtwvt/gtwvt.h
>    * added some definitions which seems to be missing in some MSVC-WinCE
>      versions
>
>  * harbour/source/rtl/gtwvt/gtwvt.c
>    * cleaned SetWindowLongPtr()/SetWindowLong() usage so now all calls
>      are protected by the same #if condition
>

Many thanks!!

But still getting these errors:

<<<<
Harbour Preprocessor 1.0.0
Copyright 1999-2008, http://www.harbour-project.org
pptable.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtwvt.c
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1452) : warning C4013: 
'SetWindowLongPtr' undefined; assuming extern returning int
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1462) : error C2065: 
'WM_EXITSIZEMOVE' : undeclared identifier
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1462) : error C2051: case 
expression not constant
<<<<

By the way... I want to build WinCe libs using mingw.  I know you've sent an 
email explaining how to do that but, unfortunately I am not able to find 
that.  Can you tell me when did you sent this email for a more accurate 
search?  Or maybe you can re-send this email (if you still got it).

Many thanks for your work and help.
Regards,
Jos? Luis Capel


From druzus at acn.waw.pl  Mon Jul 21 18:00:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 21 18:00:17 2008
Subject: [Harbour] 2008-07-21 21:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <D6C29DD661DA4DB189C5DF0A41FBB0C6@pepeluis>
References: <200807211954.m6LJsvQ8021014@31-mo5-4.acn.waw.pl>
	<D6C29DD661DA4DB189C5DF0A41FBB0C6@pepeluis>
Message-ID: <20080721220009.GA21070@34-mo7-2.acn.waw.pl>

On Mon, 21 Jul 2008, Jos? Luis Capel - wrote:

Hi Jose,

> By the way... I want to build WinCe libs using mingw.  I know you've sent 
> an email explaining how to do that but, unfortunately I am not able to find 
> that.  Can you tell me when did you sent this email for a more accurate 
> search?  Or maybe you can re-send this email (if you still got it).

Look at messages in thread:
http://lists.harbour-project.org/pipermail/harbour/2007-November/004696.html

best regards,
Przemek
From jarabal at gmail.com  Mon Jul 21 21:09:04 2008
From: jarabal at gmail.com (Xavi)
Date: Mon Jul 21 21:09:37 2008
Subject: [Harbour] 2008-07-21 21:54 UTC+0200
	Przemyslaw	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20080721220009.GA21070@34-mo7-2.acn.waw.pl>
References: <200807211954.m6LJsvQ8021014@31-mo5-4.acn.waw.pl>	<D6C29DD661DA4DB189C5DF0A41FBB0C6@pepeluis>
	<20080721220009.GA21070@34-mo7-2.acn.waw.pl>
Message-ID: <48853330.4030009@gmail.com>

Hello Przemek,

It's not important but I think that the remarks are changed in files 
/config/w32/pocc.cf ; /config/w32/xcc.cf and may be cause confusion, 
also in RC2.
<---- /config/w32/pocc.cf  line 5 ---------->
# GNU MAKE file for Pelles ISO C Compiler
<----------------------------------------->

Best regards,
Xavi
From vobrdlik at centrum.cz  Tue Jul 22 02:18:15 2008
From: vobrdlik at centrum.cz (=?windows-1250?Q?Vojt=ECch_Obrdl=EDk?=)
Date: Tue Jul 22 02:18:21 2008
Subject: [Harbour] Multiple definiton DBF() with MingW
Message-ID: <9FE2A1F11BB342DF88681172E4346390@nemzn.local>

Hi,

I'm converting old application to Harbour MiniGUI (new testing version
2.5.2 was recently released with Harbour 1.0.0RC2 Intl. (Rev. 8928) version 
of
compiler) and I've got this linking error (MingW 3.4.5 environment):

c:\HMG\harbour\lib/libhbrdd.a(dbcmd.o):dbcmd.c:(.text+0x130): multiple
definition of `HB_FUN_DBF'
c:\HMG\harbour\lib/libhbclipsm.a(dbf.o):dbf.c:(.text+0x0): first defined
here

Digging the error I've found that obsolete function DBF() is defined in
source/rdd/dmcmd.c and also in contrib/hbclipsm/dbf.c.
Workaround is use Alias() in source, but...

I thing that the one in contrib should be removed -  Victor?

Compilaton with BCC5 is OK - obviously tlink32 resolves symbols in libs
differently.

Sample:
// Error: multiple definition DBF() - in MingW - libhbrdd and libhbclipsm
REQUEST DBFCDX

PROCEDURE Main()
  RDDSetDefault( "DBFCDX" )

  DBCreate( "Test", { { "KOD", "C", 2, 0 } }, "DBFCDX" )
  USE Test
  ? "Database:" + DBF()

RETURN

Regards

Vojtech Obrdlik


From harbour.01 at syenar.hu  Tue Jul 22 04:01:36 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 22 04:01:42 2008
Subject: [Harbour] 2008-07-22 09:50 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ebd1$Blat.v2.6.2$2a2e6efc$12d8dfbce742@127.0.0.1>

2008-07-22 09:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbapifs.h
   * source/rtl/filesys.c
     + Added skeletons for hb_fsGetAttr() and hb_fsGetFileTime()
       TODO: Implementation.

   * contrib/hbclipsm/common.mak
   * contrib/hbclipsm/Makefile
   - contrib/hbclipsm/dbf.c
   	 ! Removed duplicate implementation of DBF() from hbclipsm.lib

   ; TOFIX:
     I'm getting these new warnings under BCC55:
     Warning W8080 source\rtl\filesys.c 2718: '_fstat(int,_stat *)' is declared but never used
     Warning W8080 source\rtl\filesys.c 2718: '_disable()' is declared but never used
     Warning W8080 source\rtl\filesys.c 2718: '_enable()' is declared but never used
     Warning W8080 source\rtl\fssize.c 142: '_fstat(int,_stat *)' is declared but never used
--
Brgds,
Viktor

From druzus at acn.waw.pl  Tue Jul 22 04:36:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 04:36:36 2008
Subject: [Harbour] 2008-07-22 10:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807220836.m6M8aUI3022359@31-mo5-4.acn.waw.pl>

2008-07-22 10:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtwvt/gtwvt.h
    * added yet another one MSVC-WinCE missing definition

best regards
Przemek
From druzus at acn.waw.pl  Tue Jul 22 05:04:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 05:04:09 2008
Subject: [Harbour] 2008-07-22 11:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807220904.m6M944Fv019651@31-mo5-4.acn.waw.pl>

2008-07-22 11:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/genobj32.c
    ! casting

best regards
Przemek
From capelsoft at terra.es  Tue Jul 22 05:43:37 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Tue Jul 22 05:43:45 2008
Subject: [Harbour] Some more warnings and errors with last svn
References: <200807220904.m6M944Fv019651@31-mo5-4.acn.waw.pl>
Message-ID: <D369DA3609DB49AA889E32FF407A4EC0@pepeluis>

Hi,

After updating from svn I tried to build Wince libs using EVC4 and got these 
warnings and error:

<<<<<<<<<
Harbour Preprocessor 1.0.0
Copyright 1999-2008, http://www.harbour-project.org
pptable.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

genobj32.c
p:\programacion\harbour\source\compiler\genobj32.c(549) : warning C4244: '=' 
: conversion from 'short ' to 'unsigned char ', possible loss of data
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

filesys.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtwvt.c
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1452) : warning C4013: 
'SetWindowLongPtr' undefined; assuming extern returning int
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtgui.c
gtdef.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

hbrun.c
external.c
LINK : warning LNK4044: unrecognized option '/MANIFEST:NO'; ignored
gtwvt.lib(gtwvt.obj) : error LNK2019: unresolved external symbol 
SetWindowLongPtr referenced in function hb_gt_wvt_WndProc
bin\vcce\hbrun.exe : fatal error LNK1120: 1 unresolved externals
<<<<<<<<<<

I am not quite sure how to determine exact value for _MSC_VER since this 
piece of code:

// line 1449 $Id: gtwvt.c 8986 2008-07-21 19:54:54Z druzus $
#if defined(_MSC_VER) && (_MSC_VER <= 1200)
            SetWindowLong( pWVT->hWnd, GWL_STYLE, 
WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_THICKFRAME 
 );
#else
            SetWindowLongPtr( pWVT->hWnd, GWL_STYLE, 
WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_THICKFRAME 
 );
#endif

makes that execution goes to SetWindowLongPtr.  And this is the problem. 
Evc4 does not have this function.  Maybe it could be hacked in hbwince.h 
making some kind of #define or maybe it could be solved determining the 
exact value of _MSC_VER for Evc4 and adjusting accordingly the above piece 
of code.

I am not a C expert nor a user C.  So for me it is difficult to help you in 
doing that :-(

Any help I can give you, please, tell me.

Regards,
Jos? Luis Capel

From niki at synel.co.il  Tue Jul 22 06:14:54 2008
From: niki at synel.co.il (Chen Kedem)
Date: Tue Jul 22 06:14:31 2008
Subject: [Harbour] Re: 2008-07-22 09:50 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <1A07FEDC778C3E4AA417F089511F859C031F3B7499@Mail-yoq.SYNEL-COMPANY.LTD>

Viktor,

>  I'm getting these new warnings under BCC55:
> Warning W8080 source\rtl\filesys.c 2718: '_fstat(int,_stat *)' is declared but never used
>  Warning W8080 source\rtl\filesys.c 2718: '_disable()' is declared but never used
>  Warning W8080 source\rtl\filesys.c 2718: '_enable()' is declared but never used
>  Warning W8080 source\rtl\fssize.c 142: '_fstat(int,_stat *)' is declared but never used

It started when you enabled warnings for BCC, it only happen when -v is used.
See my post here:
http://lists.harbour-project.org/pipermail/harbour/2008-June/007555.html


  Chen.
From jfl at mafact.com  Tue Jul 22 06:19:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Tue Jul 22 06:19:22 2008
Subject: [Harbour] Some more warnings and errors with last svn
In-Reply-To: <D369DA3609DB49AA889E32FF407A4EC0@pepeluis>
Message-ID: <5ea943e2.1c8ebe4.306dee1.29@mafact.com>

Hi Jos?,

We have to know with version the compiler is reporting.

Open a command windows and type cl <enter>

It should give you some info about your compiler version !

Ie for MSVC 6.0 t give ;

Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8168 for 80x86
Copyright ... blablabla ...

And version is 1200 !

Regards,

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Jos? Luis Capel -
Envoy??: mardi 22 juillet 2008 11:44
??: Harbour Project Main Developer List.
Objet?: [Harbour] Some more warnings and errors with last svn

Hi,

After updating from svn I tried to build Wince libs using EVC4 and got these 
warnings and error:

<<<<<<<<<
Harbour Preprocessor 1.0.0
Copyright 1999-2008, http://www.harbour-project.org
pptable.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

genobj32.c
p:\programacion\harbour\source\compiler\genobj32.c(549) : warning C4244: '=' 
: conversion from 'short ' to 'unsigned char ', possible loss of data
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

filesys.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtwvt.c
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1452) : warning C4013: 
'SetWindowLongPtr' undefined; assuming extern returning int
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtgui.c
gtdef.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

hbrun.c
external.c
LINK : warning LNK4044: unrecognized option '/MANIFEST:NO'; ignored
gtwvt.lib(gtwvt.obj) : error LNK2019: unresolved external symbol 
SetWindowLongPtr referenced in function hb_gt_wvt_WndProc
bin\vcce\hbrun.exe : fatal error LNK1120: 1 unresolved externals
<<<<<<<<<<

I am not quite sure how to determine exact value for _MSC_VER since this 
piece of code:

// line 1449 $Id: gtwvt.c 8986 2008-07-21 19:54:54Z druzus $
#if defined(_MSC_VER) && (_MSC_VER <= 1200)
            SetWindowLong( pWVT->hWnd, GWL_STYLE, 
WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_THICKFRAME 
 );
#else
            SetWindowLongPtr( pWVT->hWnd, GWL_STYLE, 
WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_THICKFRAME 
 );
#endif

makes that execution goes to SetWindowLongPtr.  And this is the problem. 
Evc4 does not have this function.  Maybe it could be hacked in hbwince.h 
making some kind of #define or maybe it could be solved determining the 
exact value of _MSC_VER for Evc4 and adjusting accordingly the above piece 
of code.

I am not a C expert nor a user C.  So for me it is difficult to help you in 
doing that :-(

Any help I can give you, please, tell me.

Regards,
Jos? Luis Capel

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


From druzus at acn.waw.pl  Tue Jul 22 06:30:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 06:30:56 2008
Subject: [Harbour] 2008-07-22 12:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807221030.m6MAUqYJ029958@31-mo5-4.acn.waw.pl>

2008-07-22 12:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtwvt/gtwvt.c
    * disabled SetWindowLongPtr() in 32bit MSVC WinCE builds

  * harbour/source/rtl/hbffind.c
    * minor cleanup.

  * harbour/source/rtl/filesys.c
    + implemented hb_fsGetAttr() and hb_fsGetFileTime() for DOS, MS-Win,
      OS2 and *nixes. Please test it on different platforms.

best regards
Przemek
From capelsoft at terra.es  Tue Jul 22 06:49:37 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Tue Jul 22 06:49:54 2008
Subject: [Harbour] Some more warnings and errors with last svn
References: <5ea943e2.1c8ebe4.306dee1.29@mafact.com>
Message-ID: <25D0125AD4A5456FBAED393A31355796@pepeluis>

Hi J. Lefebvre,

This is the info:

Microsoft (R) C/C++ Optimizing Compiler Version 12.20.9615 for ARM
Copyright (C) Microsoft Corp 1984-2002. All rights reserved.

So I gess that version for evc4 is 1220... doesn't it ?

Thanks and regards,
Jos? Luis Capel
PS: Is it Jean your name?


----- Original Message ----- 
From: "J. Lefebvre" <jfl@mafact.com>
To: "'Harbour Project Main Developer List.'" <harbour@harbour-project.org>
Sent: Tuesday, July 22, 2008 12:19 PM
Subject: RE: [Harbour] Some more warnings and errors with last svn


Hi Jos?,

We have to know with version the compiler is reporting.

Open a command windows and type cl <enter>

It should give you some info about your compiler version !

Ie for MSVC 6.0 t give ;

Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8168 for 80x86
Copyright ... blablabla ...

And version is 1200 !

Regards,

-----Message d'origine-----
De : harbour-bounces@harbour-project.org 
[mailto:harbour-bounces@harbour-project.org] De la part de Jos? Luis Capel -
Envoy? : mardi 22 juillet 2008 11:44
? : Harbour Project Main Developer List.
Objet : [Harbour] Some more warnings and errors with last svn

Hi,

After updating from svn I tried to build Wince libs using EVC4 and got these
warnings and error:

<<<<<<<<<
Harbour Preprocessor 1.0.0
Copyright 1999-2008, http://www.harbour-project.org
pptable.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

genobj32.c
p:\programacion\harbour\source\compiler\genobj32.c(549) : warning C4244: '='
: conversion from 'short ' to 'unsigned char ', possible loss of data
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

filesys.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtwvt.c
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1452) : warning C4013:
'SetWindowLongPtr' undefined; assuming extern returning int
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtgui.c
gtdef.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

hbrun.c
external.c
LINK : warning LNK4044: unrecognized option '/MANIFEST:NO'; ignored
gtwvt.lib(gtwvt.obj) : error LNK2019: unresolved external symbol
SetWindowLongPtr referenced in function hb_gt_wvt_WndProc
bin\vcce\hbrun.exe : fatal error LNK1120: 1 unresolved externals
<<<<<<<<<<

I am not quite sure how to determine exact value for _MSC_VER since this
piece of code:

// line 1449 $Id: gtwvt.c 8986 2008-07-21 19:54:54Z druzus $
#if defined(_MSC_VER) && (_MSC_VER <= 1200)
            SetWindowLong( pWVT->hWnd, GWL_STYLE,
WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_THICKFRAME
 );
#else
            SetWindowLongPtr( pWVT->hWnd, GWL_STYLE,
WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_THICKFRAME
 );
#endif

makes that execution goes to SetWindowLongPtr.  And this is the problem.
Evc4 does not have this function.  Maybe it could be hacked in hbwince.h
making some kind of #define or maybe it could be solved determining the
exact value of _MSC_VER for Evc4 and adjusting accordingly the above piece
of code.

I am not a C expert nor a user C.  So for me it is difficult to help you in
doing that :-(

Any help I can give you, please, tell me.

Regards,
Jos? Luis Capel

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 

From harbour.01 at syenar.hu  Tue Jul 22 06:53:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 22 06:53:52 2008
Subject: [Harbour] Re: 2008-07-22 09:50 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C031F3B7499@Mail-yoq.SYNEL-COMPANY.LTD>
References: <1A07FEDC778C3E4AA417F089511F859C031F3B7499@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <1E8BEA1B-F92C-4882-94BA-362BAF85D3EB@syenar.hu>

Thanks Chen. I've also enabled -v lately, that explains them.

Not that I understand these warning, but not a big problem anyway.

Brgds,
Viktor

On 2008.07.22., at 12:14, Chen Kedem wrote:

> Viktor,
>
>> I'm getting these new warnings under BCC55:
>> Warning W8080 source\rtl\filesys.c 2718: '_fstat(int,_stat *)' is  
>> declared but never used
>> Warning W8080 source\rtl\filesys.c 2718: '_disable()' is declared  
>> but never used
>> Warning W8080 source\rtl\filesys.c 2718: '_enable()' is declared  
>> but never used
>> Warning W8080 source\rtl\fssize.c 142: '_fstat(int,_stat *)' is  
>> declared but never used
>
> It started when you enabled warnings for BCC, it only happen when -v  
> is used.
> See my post here:
> http://lists.harbour-project.org/pipermail/harbour/2008-June/007555.html
>
>
>  Chen.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jfl at mafact.com  Tue Jul 22 06:55:00 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Tue Jul 22 06:55:55 2008
Subject: [Harbour] Some more warnings and errors with last svn
In-Reply-To: <25D0125AD4A5456FBAED393A31355796@pepeluis>
Message-ID: <7b1f72a8.1c8ebe9.3285e04.4ae1@mafact.com>

Hi Jos?,


Tanks, that's right.

In the meantime, thanks to Przemek who already resolved the problem. :-)

Regards,

JF,

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Jos? Luis Capel -
Envoy??: mardi 22 juillet 2008 12:50
??: Harbour Project Main Developer List.
Objet?: Re: [Harbour] Some more warnings and errors with last svn

Hi J. Lefebvre,

This is the info:

Microsoft (R) C/C++ Optimizing Compiler Version 12.20.9615 for ARM
Copyright (C) Microsoft Corp 1984-2002. All rights reserved.

So I gess that version for evc4 is 1220... doesn't it ?

Thanks and regards,
Jos? Luis Capel
PS: Is it Jean your name?


----- Original Message ----- 
From: "J. Lefebvre" <jfl@mafact.com>
To: "'Harbour Project Main Developer List.'" <harbour@harbour-project.org>
Sent: Tuesday, July 22, 2008 12:19 PM
Subject: RE: [Harbour] Some more warnings and errors with last svn


Hi Jos?,

We have to know with version the compiler is reporting.

Open a command windows and type cl <enter>

It should give you some info about your compiler version !

Ie for MSVC 6.0 t give ;

Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8168 for 80x86
Copyright ... blablabla ...

And version is 1200 !

Regards,

-----Message d'origine-----
De : harbour-bounces@harbour-project.org 
[mailto:harbour-bounces@harbour-project.org] De la part de Jos? Luis Capel -
Envoy? : mardi 22 juillet 2008 11:44
? : Harbour Project Main Developer List.
Objet : [Harbour] Some more warnings and errors with last svn

Hi,

After updating from svn I tried to build Wince libs using EVC4 and got these
warnings and error:

<<<<<<<<<
Harbour Preprocessor 1.0.0
Copyright 1999-2008, http://www.harbour-project.org
pptable.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

genobj32.c
p:\programacion\harbour\source\compiler\genobj32.c(549) : warning C4244: '='
: conversion from 'short ' to 'unsigned char ', possible loss of data
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

filesys.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtwvt.c
p:\programacion\harbour\source\rtl\gtwvt\gtwvt.c(1452) : warning C4013:
'SetWindowLongPtr' undefined; assuming extern returning int
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

gtgui.c
gtdef.c
Microsoft (R) Library Manager Version 6.24.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

hbrun.c
external.c
LINK : warning LNK4044: unrecognized option '/MANIFEST:NO'; ignored
gtwvt.lib(gtwvt.obj) : error LNK2019: unresolved external symbol
SetWindowLongPtr referenced in function hb_gt_wvt_WndProc
bin\vcce\hbrun.exe : fatal error LNK1120: 1 unresolved externals
<<<<<<<<<<

I am not quite sure how to determine exact value for _MSC_VER since this
piece of code:

// line 1449 $Id: gtwvt.c 8986 2008-07-21 19:54:54Z druzus $
#if defined(_MSC_VER) && (_MSC_VER <= 1200)
            SetWindowLong( pWVT->hWnd, GWL_STYLE,
WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_THICKFRAME
 );
#else
            SetWindowLongPtr( pWVT->hWnd, GWL_STYLE,
WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_THICKFRAME
 );
#endif

makes that execution goes to SetWindowLongPtr.  And this is the problem.
Evc4 does not have this function.  Maybe it could be hacked in hbwince.h
making some kind of #define or maybe it could be solved determining the
exact value of _MSC_VER for Evc4 and adjusting accordingly the above piece
of code.

I am not a C expert nor a user C.  So for me it is difficult to help you in
doing that :-(

Any help I can give you, please, tell me.

Regards,
Jos? Luis Capel

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Jul 22 06:56:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 06:56:09 2008
Subject: [Harbour] 2008-07-22 12:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807221056.m6MAu1lj001571@31-mo5-4.acn.waw.pl>

2008-07-22 12:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filesys.c
    * casting for DOS OpenWatcom builds and added missing header file

best regards
Przemek
From capelsoft at terra.es  Tue Jul 22 07:01:26 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Tue Jul 22 07:01:37 2008
Subject: [Harbour] Some more warnings and errors with last svn
References: <5ea943e2.1c8ebe4.306dee1.29@mafact.com>
Message-ID: <0DEB8268CA1948F1B4DB67911789E1A3@pepeluis>

Hi,

And more info about Evc4 than could help in tunning better compilation and
linking proccess: attached output from clarm /? which shows all available
options for this compiler.

Regards,
Jos? Luis Capel 
-------------- next part --------------
                          C/C++ COMPILER OPTIONS

                              -OPTIMIZATION-

/O1 minimize space                       /Oi[-] enable intrinsic functions
/O2 maximize speed                       /Op[-] improve floating-pt consistency
/Oa assume no aliasing                   /Os favor code space
/Ob<n> inline expansion (default n=0)    /Ot favor code speed
/Od disable optimizations (default)      /Ow assume cross-function aliasing
/Og enable global optimization           /Ox maximum opts. (/Ogitb1)

                             -CODE GENERATION-

/QRarch4 ARM4 Architecture               /Gf enable string pooling
/QRarch5 ARM5 Architecture               /GF enable read-only string pooling
/QRarch4T ARM4T Architecture             /Gy separate functions for linker
/QRarch5T ARM5T Architecture             /GR[-] enable C++ RTTI
/QRinterwork-return ARM<-->Thumb calls   /GX[-] enable C++ EH (same as /EHsc)
/QRfpe use floating point emulation      /EHs enable synchronous C++ EH
/QRdsp enable ARM5E DSP instructions     /EHa enable asynchronous C++ EH
/QRxscale optimize for XScale            /EHc extern "C" defaults to nothrow
/QRxscalesched XScale scheduling         /QRimplicit-import- No implicit DLL imports

                              -OUTPUT FILES-

/Fa[file] name assembly listing file     /Fo<file> name object file
/FA[sc] configure assembly listing       /Fp<file> name precompiled header file
/Fd[file] name .PDB file                 /Fr[file] name source browser file
/Fe<file> name executable file           /FR[file] name extended .SBR file
/Fm[file] name map file

                              -PREPROCESSOR-

/C don't strip comments                  /FI<file> name forced include file
/D<name>{=|#}<text> define macro         /U<name> remove predefined macro
/E preprocess to stdout                  /u remove all predefined macros
/EP preprocess to stdout, no #line       /I<dir> add to include search path
/P preprocess to file                    /X ignore "standard places"

                                -LANGUAGE-

/Zi enable debugging information         /Zl omit default library name in .OBJ
/Z7 enable old-style debug info          /Zg generate function prototypes
/Zd line number debugging info only      /Zs syntax check only
/Zp[n] pack structs on n-byte boundary   /vd{0|1} disable/enable vtordisp
/Za disable extensions (implies /Op)     /vm<x> type of pointers to members
/Ze enable extensions (default)          /noBool[-] disable "bool" keyword

                              -MISCELLANEOUS-

/?, /help print this help message        /V<string> set version string
/c compile only, no link                 /w disable all warnings
/H<num> max external name length         /W<n> set warning level (default n=1)
/J default char type is unsigned         /WX treat warnings as errors
/nologo suppress copyright message       /Yc[file] create .PCH file
/Tc<source file> compile file as .c      /Yd put debug info in every .OBJ
/Tp<source file> compile file as .cpp    /Yu[file] use .PCH file
/TC compile all files as .c              /YX[file] automatic .PCH
/TP compile all files as .cpp            /Zm<n> max memory alloc (% of default)

                                 -LINKING-

/MC link with COREDLL.LIB, CORELIBC.LIB  /LDd Create .DLL debug libary
/ML link with COREDLL.LIB, LIBC.LIB      /F<num> set stack size
/LD Create .DLL                          /link [linker options and libraries]

                      -NOT SUPPORTED IN THIS RELEASE-

/Gd __cdecl calling convention           /Gi[-] enable incremental compilation
/Gr __fastcall calling convention        /Gm[-] enable minimal rebuild
/Gz __stdcall calling convention         /ZI enable Edit & Continue debug info
/GA optimize for Windows Application     /MD link with MSVCRT.LIB
/GD optimize for Windows DLL             /MT link with LIBCMT.LIB
/GZ enable runtime debug checks          /MDd link with MSVCRTD.LIB debug lib
/Ge force stack checking for all funcs   /MLd link with LIBCD.LIB debug lib
/Gs[num] disable stack checking calls    /MTd link with LIBCMTD.LIB debug lib
/Gh enable hook function call            /QRfpe- enable hardware floating point
From capelsoft at terra.es  Tue Jul 22 07:24:36 2008
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel_-?=)
Date: Tue Jul 22 07:26:14 2008
Subject: [Harbour] 2008-07-22 12:30 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200807221030.m6MAUqYJ029958@31-mo5-4.acn.waw.pl>
Message-ID: <BD463C98766F41E8A83003B1E810DD93@pepeluis>

Przemek,

Many thanks...

Now I could build libs for evc4.

Regards,
Jos? Luis Capel


----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: <harbour@harbour-project.org>
Sent: Tuesday, July 22, 2008 12:30 PM
Subject: [Harbour] 2008-07-22 12:30 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-07-22 12:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/gtwvt/gtwvt.c
>    * disabled SetWindowLongPtr() in 32bit MSVC WinCE builds
>
>  * harbour/source/rtl/hbffind.c
>    * minor cleanup.
>
>  * harbour/source/rtl/filesys.c
>    + implemented hb_fsGetAttr() and hb_fsGetFileTime() for DOS, MS-Win,
>      OS2 and *nixes. Please test it on different platforms.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From druzus at acn.waw.pl  Tue Jul 22 09:08:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 09:08:30 2008
Subject: [Harbour] 2008-07-22 15:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807221308.m6MD8ODa023417@31-mo5-4.acn.waw.pl>

2008-07-22 15:07 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/files.c
  * harbour/contrib/hbmzip/hbmzip.c
    * use new hb_fs*() functions when native platform code does not exist

best regards
Przemek
From druzus at acn.waw.pl  Tue Jul 22 11:19:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 11:19:14 2008
Subject: [Harbour] 2008-07-22 17:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807221519.m6MFJ8bu003590@31-mo5-4.acn.waw.pl>

2008-07-22 17:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/hbmzip.c
    ! fixed storing/setting file date, time and attributes in *nixes

  * harbour/include/hbapifs.h
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/filesys.c
    ! replaced hack with direct bit conversion in *nixes attributes
      by bit testing

best regards
Przemek
From harbour.01 at syenar.hu  Tue Jul 22 12:31:02 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 22 12:31:10 2008
Subject: [Harbour] harbour-b32/vc.dll vs. harbour.dll
In-Reply-To: <4884D043.80908@interia.pl>
References: <4220CDF3-905F-4313-B221-2A8DD5470F29@syenar.hu>	<20080709094240.GA1307@34-mo7-2.acn.waw.pl>	<958C7152-3438-4ED5-8F9B-3B7002AACBC1@syenar.hu>	<4874B0CF.5030500@dbtopas.lt>	<4874C2A5.4010202@interia.pl>	<4874D1FB.7020308@dbtopas.lt>	<4874D720.9090805@interia.pl>	<4874DEED.2090001@dbtopas.lt>	<4874E3B8.9030204@interia.pl>	<4874EC51.7010907@dbtopas.lt>
	<4875CD06.6010306@interia.pl>
	<07EA1471-C7CC-43FE-9E3E-8B1D3C64AD27@syenar.hu>
	<4884D043.80908@interia.pl>
Message-ID: <F57FA704-F399-4411-B2FA-8D00A8D9B567@syenar.hu>

Hi Marek,

> [ I hope you spent great time during your vacations :) ]

Thanks, it was great, even if I'm a slightly more tired
than before it :)

>> IMO, we should either stick with one compiler when generating
>> "official" harbour.dll (this may mean a separate, compiler  
>> independent
>> .dll-only binary distribution .zip file), or we can try to make them
>> interchangeable, if there is any chance to do it.
>
> IMO the former is only acceptable as long as you consider
> binary distrubutions provided by Harbour team. But some
> users might want to build Harbour from sources using their
> favorite C compiler. What would be the solution for them ?
> How would we protect them ?

One solution might be to name the MSVC one harbour.dll
(if we choose the MSVC build as the official standard),
and name incompatible ones differently (like harbour-b32.dll).

Generically speaking the official Harbour distributed
.dll name should be harbour.dll, naming anything built
locally is the responsibility of the builder, just like
naming it similarly but making it incompatible (which
is not a very good practice of course). This may add
up to the .dll hell if these files get distributed of
course, but that's the nature of this thing in Windows.

To put is shortly: We should distribute harbour.dll
built with [MSVC], everything non-compatible, or locally
built is advised to be named harbour-*.dll.

> The latter is *far* beyond my knowledge. I am not even sure
> if it is doable at all :).

I have no idea either. I just _suspect_ it's doable,
maybe someone has an idea how. [ There are some packages
where building .dlls is supported using multiple compilers,
but I couldn't find which one it is, it was one the 3rd
party packages for our contribs. ]

> [ BTW, I'll be unrechable on a list for at least few weeks -
> if no longer :(. Sorry. I accept each group decision on this
> subject taken in a meantime. ]

I wish you well, and hope to see you back you as soon
as possible.

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Jul 22 13:27:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 13:27:35 2008
Subject: [Harbour] 2008-07-22 19:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807221727.m6MHRPj4025366@31-mo5-4.acn.waw.pl>

2008-07-22 19:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/zip.c
    * set OS version information in ZIP header when ZIP archive is
      created by *nix Harbour build. It's necessary to inform some
      zip packages (f.e. infozip/unzip) that they should respect POSIX
      file permission during decompression.

best regards
Przemek
From druzus at acn.waw.pl  Tue Jul 22 15:26:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 15:26:16 2008
Subject: [Harbour] 2008-07-22 21:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807221926.m6MJQAWA028311@31-mo5-4.acn.waw.pl>

2008-07-22 21:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/zip.c
  * harbour/contrib/hbmzip/unzip.c
    * use hb_xgrab()/hb_xfree() instead of malloc()/free()

best regards
Przemek
From druzus at acn.waw.pl  Tue Jul 22 19:04:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 22 19:05:06 2008
Subject: [Harbour] 2008-07-23 01:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807222304.m6MN4qVG022252@31-mo5-4.acn.waw.pl>

2008-07-23 01:04 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_xmingwce.sh
    * fixed CCPATH setting - it has to be ended with ":"

best regards
Przemek
From druzus at acn.waw.pl  Wed Jul 23 06:19:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 23 06:19:41 2008
Subject: [Harbour] 2008-07-23 12:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807231019.m6NAJZ2u004461@31-mo5-4.acn.waw.pl>

2008-07-23 12:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbwince.c
    * formatting

  * harbour/contrib/hbcurl/hbcurl.c
    + use hash table to keep strings passed to CURL library accessible
      even if HVM destroys them. It should allow to safely use HBCURL
      wrapper also with CURL library older then 7.17.0 though it can
      be a little bit expensive in some cases. The allocated strings
      are freed when CURL pointer is destroyed (directly or by
      CURL_EASY_CLEANUP()) or reset by CURL_EASY_RESET().
      This feature is enabled only when compiled for CURL libraries
      older then 7.17.0 or when user set explicitly compile time macro
      HB_CURL_HASH_STRINGS
      Viktor, you are more familiar with this code so please check it.

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul 23 07:51:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 23 07:51:35 2008
Subject: [Harbour] 2008-07-23 12:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807231019.m6NAJZ2u004461@31-mo5-4.acn.waw.pl>
References: <200807231019.m6NAJZ2u004461@31-mo5-4.acn.waw.pl>
Message-ID: <0071A1D2-0283-4380-B88F-217DCA9087B4@syenar.hu>

>
Hi Przemek,

>  * harbour/contrib/hbcurl/hbcurl.c
>    + use hash table to keep strings passed to CURL library accessible
>      even if HVM destroys them. It should allow to safely use HBCURL
>      wrapper also with CURL library older then 7.17.0 though it can
>      be a little bit expensive in some cases. The allocated strings
>      are freed when CURL pointer is destroyed (directly or by
>      CURL_EASY_CLEANUP()) or reset by CURL_EASY_RESET().
>      This feature is enabled only when compiled for CURL libraries
>      older then 7.17.0 or when user set explicitly compile time macro
>      HB_CURL_HASH_STRINGS
>      Viktor, you are more familiar with this code so please check it.

Many thanks, it looks good to me, except a few minor past an
new things:

1) Re-reading the docs now, it seems that there is at least one place
where your new method to cache strings is needed regardless of libcurl
version: curl_formadd() with CURLFORM_COPYNAME. The docs says we should
copy the string. So this might have been a pending bug in hbcurl.

2) curl_slist_append() does copy the string, so we don't need to deal
with it, at least as per the latest docs on the website.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Jul 23 09:05:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 23 09:05:58 2008
Subject: [Harbour] 2008-07-23 12:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <0071A1D2-0283-4380-B88F-217DCA9087B4@syenar.hu>
References: <200807231019.m6NAJZ2u004461@31-mo5-4.acn.waw.pl>
	<0071A1D2-0283-4380-B88F-217DCA9087B4@syenar.hu>
Message-ID: <20080723130554.GA6203@34-mo7-2.acn.waw.pl>

On Wed, 23 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 1) Re-reading the docs now, it seems that there is at least one place
> where your new method to cache strings is needed regardless of libcurl
> version: curl_formadd() with CURLFORM_COPYNAME. The docs says we should
> copy the string. So this might have been a pending bug in hbcurl.

So I'll change this code and hashing will be enabled for
all builds but in CURL >= 7.17 only for this function.

> 2) curl_slist_append() does copy the string, so we don't need to deal
> with it, at least as per the latest docs on the website.

OK, I'll remove hashing from this function.

BTW this code can be greatly optimized when we add
hb_item{Read,Write}LockCPtr() functions because we
will not have to make string copy. I'll introduce
such functions after 1.0.

best regards,
Przemek

ps. I hope I had good holidays.
From druzus at acn.waw.pl  Wed Jul 23 09:06:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 23 09:06:30 2008
Subject: [Harbour] 2008-07-23 15:06 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807231306.m6ND6OLp006408@31-mo5-4.acn.waw.pl>

2008-07-23 15:06 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbcurl/hbcurl.c
    * activate string hasing in all builds for curl_formadd() with
      CURLFORM_COPYNAME
    * do not use string hasing fro curl_slist_append()

    Many thanks to Viktor for help.

best regards
Przemek
From druzus at acn.waw.pl  Wed Jul 23 15:45:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 23 15:45:10 2008
Subject: [Harbour] 2008-07-23 21:43 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807231945.m6NJj3nl018414@31-mo5-4.acn.waw.pl>

2008-07-23 21:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbsqlit3/sqlite3/sqlite3.c
    * pacified warnings

best regards
Przemek
From dmacias at mail.udg.mx  Wed Jul 23 17:09:29 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Jul 23 17:09:33 2008
Subject: [Harbour] Re: 2008-07-22 12:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48879E09.6030509@mail.udg.mx>

Przemek:

 >2008-07-22 12:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/source/rtl/filesys.c
 >    + implemented hb_fsGetAttr() and hb_fsGetFileTime() for DOS, MS-Win,
 >      OS2 and *nixes. Please test it on different platforms.

What kind of tests ? Can you post some test ?

David Macias

From harbour.01 at syenar.hu  Wed Jul 23 22:38:07 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 23 22:38:12 2008
Subject: [Harbour] 2008-07-24 03:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ed36$Blat.v2.6.2$4e362f90$1ec431d3842@127.0.0.1>

2008-07-24 03:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbcurl/hbcurl.c
     ! Disabled string hashing for curl_formadd() with
       CURLFORM_COPYNAME. I've misread the docs (sorry Przemek), 
       hashing is only needed for CURLFORM_PTRNAME, which we 
       currently don't use. I've disbled some code to avoid 
       unused function warnings, but other than that it may 
       be good to have the possibility for hashing for future 
       functions too.
     ! Fixed/Added support for CURLFORM_COPYNAME parameter 
       with embedded zeroes by passing the string length 
       using CURLFORM_NAMELENGTH. Not tested.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Jul 24 12:02:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 24 12:03:00 2008
Subject: [Harbour] 2008-07-24 18:02 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807241602.m6OG2or6025265@31-mo5-4.acn.waw.pl>

2008-07-24 18:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbinet.c
    ! fixed possible data file corruption due to wrong use of 0 handle.
      0 handle is perfectly valid. By default it points to stdin but
      it can be closed and then reused for any other thing, f.e. data
      file. In such case any data written to socket was written to
      such file and this situation was very easy to replicate with
      old hbinet code.
    ! fixed resource leak due to unclosed handles in few cases
    ! fixed possible double close of the some handle what could cause
      that other object handles reusing the same handle number between
      first and second close (f.e. data files) was wrongly closed
    ! fixed s_inetRecvPattern()/HB_INETRECVLINE() - the end pattern
      was wrongly checked and the code didn't detect end pattern in
      streams like: "...\r\r\n" when end pattern was "\r\n"
      NOTE: this code needs some general cleanup. IMHO it should be
      joined with adding hbinet C API.

best regards
Przemek
From soporte at dsgsoftware.com  Fri Jul 25 04:51:53 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Jul 25 04:52:36 2008
Subject: [Harbour] Bug in hbziparch contrib
Message-ID: <000b01c8ee33$c685cf20$6c01a8c0@PcJuanxp>

Hi all, Viktor,

hbziparc.c has a bug at line 134 :

         bOkAdd = hb_strMatchFile( (const char *) szEntry, (const char *) 
sRegEx );

it should be :

         bOkAdd = hb_strMatchFile( (const char *) szEntry, (const char *) 
szSkleton );

Could someone change it ?

Many thanks
Juan 

From soporte at dsgsoftware.com  Fri Jul 25 05:24:00 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Jul 25 05:24:25 2008
Subject: [Harbour] Bug in hbziparch contrib
References: <000b01c8ee33$c685cf20$6c01a8c0@PcJuanxp>
Message-ID: <000801c8ee38$38a9f1e0$6c01a8c0@PcJuanxp>

Hi all,

BTW I wonder if I should change my app to use hbmzip instead of hbziparch.

Any technical reason ?
Does hbmzip allow to set / get comments on zip archives ?
Does hbmzip allow to zip files with relative path ?

Many thanks
Juan

----- Original Message ----- 
From: "Juan G?lvez" <soporte@dsgsoftware.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, July 25, 2008 10:51 AM
Subject: [Harbour] Bug in hbziparch contrib


> Hi all, Viktor,
>
> hbziparc.c has a bug at line 134 :
>
>         bOkAdd = hb_strMatchFile( (const char *) szEntry, (const char *) 
> sRegEx );
>
> it should be :
>
>         bOkAdd = hb_strMatchFile( (const char *) szEntry, (const char *) 
> szSkleton );
>
> Could someone change it ?
>
> Many thanks
> Juan
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From harbour.01 at syenar.hu  Fri Jul 25 05:32:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 25 05:32:59 2008
Subject: [Harbour] Bug in hbziparch contrib
In-Reply-To: <000801c8ee38$38a9f1e0$6c01a8c0@PcJuanxp>
References: <000b01c8ee33$c685cf20$6c01a8c0@PcJuanxp>
	<000801c8ee38$38a9f1e0$6c01a8c0@PcJuanxp>
Message-ID: <2E6652B1-2644-4938-9B73-19B7BD280CA5@syenar.hu>

Hi Juan,

> BTW I wonder if I should change my app to use hbmzip instead of  
> hbziparch.

I just wanted to recommend it in my changelog entry.

> Any technical reason ?

Well, hbziparch is relying on a relatively heavy ZLIB
interface code (ziparchive), which, to make it worse for
Harbour, is written in C++, this makes it big, creates
portability and other problems. The weakest link is
the hbziparch interface code itself though.

hbmzip offers similar functionality with a more flexible
Harbour API, and with a much lighter and mature interface
code.

> Does hbmzip allow to set / get comments on zip archives ?

I don't know, but probably possible to implement even if
it currently isn't.

> Does hbmzip allow to zip files with relative path ?

I guess so, but best is if you try and report your results.

Brgds,
Viktor

From sscc at mweb.co.za  Fri Jul 25 05:33:07 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Jul 25 05:33:41 2008
Subject: [Harbour] DBFCDX and OrdCustom()
Message-ID: <48899DD3.9000800@mweb.co.za>

Hello Przemyslaw

I wondered if you had seen this message :

http://groups.google.com/group/comp.lang.xharbour/browse_thread/thread/7aa2ef0f105876e8#

which points towards a small bug?

Regards
Alex



From harbour.01 at syenar.hu  Fri Jul 25 05:34:21 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 25 05:34:21 2008
Subject: [Harbour] 2008-07-25 11:27 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ee39$Blat.v2.6.2$9e49ea90$12181cc25740@127.0.0.1>

2008-07-25 11:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbziparch/hbziparc.c
     ! Fixed bug reported by Juan Galvez.
     * Formatting, minor cleanup.
--
Brgds,
Viktor

From soporte at dsgsoftware.com  Fri Jul 25 05:56:27 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Jul 25 05:57:33 2008
Subject: [Harbour] Bug in hbziparch contrib
References: <000b01c8ee33$c685cf20$6c01a8c0@PcJuanxp><000801c8ee38$38a9f1e0$6c01a8c0@PcJuanxp>
	<2E6652B1-2644-4938-9B73-19B7BD280CA5@syenar.hu>
Message-ID: <002401c8ee3c$d949a5b0$6c01a8c0@PcJuanxp>

Hi Viktor,

I'll try to make some test with hbmzip.

Many thanks
Juan

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, July 25, 2008 11:32 AM
Subject: Re: [Harbour] Bug in hbziparch contrib


> Hi Juan,
>
>> BTW I wonder if I should change my app to use hbmzip instead of 
>> hbziparch.
>
> I just wanted to recommend it in my changelog entry.
>
>> Any technical reason ?
>
> Well, hbziparch is relying on a relatively heavy ZLIB
> interface code (ziparchive), which, to make it worse for
> Harbour, is written in C++, this makes it big, creates
> portability and other problems. The weakest link is
> the hbziparch interface code itself though.
>
> hbmzip offers similar functionality with a more flexible
> Harbour API, and with a much lighter and mature interface
> code.
>
>> Does hbmzip allow to set / get comments on zip archives ?
>
> I don't know, but probably possible to implement even if
> it currently isn't.
>
>> Does hbmzip allow to zip files with relative path ?
>
> I guess so, but best is if you try and report your results.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From soporte at dsgsoftware.com  Fri Jul 25 05:57:06 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Jul 25 05:57:36 2008
Subject: [Harbour] 2008-07-25 11:27 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
References: <01c8ee39$Blat.v2.6.2$9e49ea90$12181cc25740@127.0.0.1>
Message-ID: <002501c8ee3c$d96b1060$6c01a8c0@PcJuanxp>

Many thanks

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: <harbour@harbour-project.org>
Sent: Friday, July 25, 2008 11:34 AM
Subject: [Harbour] 2008-07-25 11:27 UTC+0200 Viktor Szakats
(harbour.01syenar hu)


> 2008-07-25 11:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/hbziparch/hbziparc.c
>     ! Fixed bug reported by Juan Galvez.
>     * Formatting, minor cleanup.
> --
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Fri Jul 25 08:29:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jul 25 08:29:16 2008
Subject: [Harbour] DBFCDX and OrdCustom()
In-Reply-To: <48899DD3.9000800@mweb.co.za>
References: <48899DD3.9000800@mweb.co.za>
Message-ID: <20080725122900.GA10665@34-mo7-2.acn.waw.pl>

On Fri, 25 Jul 2008, Alex Strickland wrote:

Hi Alex,

> I wondered if you had seen this message :
> http://groups.google.com/group/comp.lang.xharbour/browse_thread/thread/7aa2ef0f105876e8#

Yes, I did.

> which points towards a small bug?

Just check it with CL53. In CDX is conversion to custom is not
revertable and this is replicated in Harbour. It's only logical
flag and can be easy removed if you do not like it. It's enogh
to delete from dbfcdx1.c[8261] this lines:

         /* This is a hacks to emulate both SIX3 and COMIX behavior
          * which should be cleaned. I intentionally not used
          * HB_SIXCDX macro here [druzus]
          */
         if( pTag->Custom )
            pTag->Template = pTag->MultiKey = TRUE;

or change it to:

         if( pTag->Custom )
            pTag->MultiKey = TRUE;

if need the possibility of adding the same key value with the same
recno to the custom index just like in CL53 and COMIX CDX RDDs.

Please note that CDX does not have real support for DBOI_TEMPLATE and
DBOI_MULTIKEY which I implemented so far only for DNFNTX and DBFNSX.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Jul 25 09:24:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jul 25 09:25:10 2008
Subject: [Harbour] 2008-07-25 15:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807251324.m6PDOxY7011904@31-mo5-4.acn.waw.pl>

2008-07-25 15:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/xhb/Makefile
  * harbour/contrib/xhb/common.mak
  + harbour/contrib/xhb/dirrec.prg
    + added DirectoryRecurse() function. It's not exactly xHarbour
      compatible as I wanted at the beginning. But when I begin
      to carefully check what xHarbour exactly does then I dropped
      the strict compatibility due to problems with xHarbour
      implementation which have to be fixed. I left this note in the
      dirrec.prg header:
         This implementation uses different rules then xHarbour one.
         It does not change current drive or current directory so
         unlike the xHarbour version it's MT safe.
         It also returns relative paths which are more similar to
         DIRECTORY() function results so they can be easy used
         directly in other code, f.e. to create archive without
         absolute paths. Please note that user can easy convert
         relative paths to absolte ones by simple adding curdir()
         and/or cPath parameter passed to DirectoryRecurse() but
         reverted conversion may not be possible in some cases.
         The 3-rd xHarbour parameter <lCaseMach> is ignored because
         harbour uses platform native rules to check filename mask
         respecting SET FILECASE and SET DIRCASE settings.
         xHarbour does not add "D" to attribute list used for directory
         tree scanning so user always have to add it manually and later
         it ignores it so it's not possible to extract file list with
         directories entries. In Harbour it's fixed.

  * harbour/source/rtl/philes.c
    + added hb_osFileMask()

  * harbour/source/rtl/direct.c
    % minor optimization

best regards
Przemek
From cvc at oohg.org  Fri Jul 25 10:03:03 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Fri Jul 25 10:03:03 2008
Subject: [Harbour] problem in report form
Message-ID: <4889DD17.2060404@oohg.org>


Hi all:

in hbreport class

CREATE CLASS HBReportForm

    VAR aReportData    AS ARRAY   INIT {}
    VAR aReportTotals  AS ARRAY   INIT {}
    VAR aGroupTotals   AS ARRAY   INIT {}

areportdata is init as array  but in  line 417

  // Clean up and leave
  ::aReportData   := NIL          // Recover the space
  ::aReportTotals  := NIL
  ::aGroupTotals   := NIL
  ::nPageNumber   := NIL
  ::lFirstPass    := NIL
  ::nLinesLeft    := NIL
  ::lFormFeeds    := NIL
  ::nMaxLinesAvail := NIL

this produce a runtime error

best regards
Ciro






reagrds
Ciro




-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From tgbssk at hotmail.com  Fri Jul 25 12:43:25 2008
From: tgbssk at hotmail.com (--------- Abhimanyu Y. Altekar ---------)
Date: Fri Jul 25 12:42:42 2008
Subject: [Harbour] Any One Used Visual Five Win with xHarbour/Harbour 1.1.0
References: <4889DD17.2060404@oohg.org>
Message-ID: <BAY140-DAV12E682658495700DADB149D5860@phx.gbl>

Hi All

I am using FiveWin for Harbour /xHarbour 7.12 with Visual Five Win 2.4.80
I compiled the sample Project and got errer while linking.

Error: Unresolved external '_HB_FUN_JSET2007TB' referenced from
C:\JKR\VFW\JKLIB\FWPHX-BCC\FWCOREHX.LIB|JKTheme
Error: Unresolved external '_HB_FUN_JSET2007BTN' referenced from
C:\JKR\VFW\JKLIB\FWPHX-BCC\FWCOREHX.LIB|JKTheme

Please let me know what to do

- Regards
--------------------------  My
BLD.LOG -----------------------------------------

Visual FiveWin for Harbour 2.4.80.JK
xHarbour Compiler build 1.1.0 (SimpLex)
Copyright 1999-2007, http://www.xharbour.org http://www.harbour-project.org/
Compiling 'C:\JKR\VFW\PROJECTS\Sample01.prg'...

100 | 100 | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | 1000 |
100 | 200 | 100 | 200 | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900
| 1000 | 1100 | 1200 | 1300 | 1400 | 1500
100 | 200

Lines 250, Functions/Procedures 15
Generating C source output to 'ObjH\Sample01.c'...
Done.
*****
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
ObjH\Sample01.c:
*****
Borland Resource Compiler  Version 5.40
Copyright (c) 1990, 1999 Inprise Corporation.  All rights reserved.
*****
C:\JKR\BCC55\lib\c0w32.obj +
ObjH\SAMPLE01.obj , +
SAMPLE.exe, +
SAMPLE.map, +
JKVFWHX.lib FWCoreHX.lib FWStdHX.lib FWAddHX.lib +
c:\jkr\fwh\lib\FiveHX.lib +
c:\jkr\fwh\lib\FiveHC.lib +
C:\JKR\XHARBOUR2\lib\rtl.lib +
C:\JKR\XHARBOUR2\lib\vm.lib +
C:\JKR\XHARBOUR2\lib\gtgui.lib +
C:\JKR\XHARBOUR2\lib\lang.lib +
C:\JKR\XHARBOUR2\lib\macro.lib +
C:\JKR\XHARBOUR2\lib\rdd.lib +
C:\JKR\XHARBOUR2\lib\dbfntx.lib +
C:\JKR\XHARBOUR2\lib\dbfcdx.lib +
C:\JKR\XHARBOUR2\lib\dbffpt.lib +
C:\JKR\XHARBOUR2\lib\hbsix.lib +
C:\JKR\XHARBOUR2\lib\hbzip.lib +
C:\JKR\XHARBOUR2\lib\pcrepos.lib +
C:\JKR\XHARBOUR2\lib\debug.lib +
C:\JKR\XHARBOUR2\lib\common.lib +
C:\JKR\XHARBOUR2\lib\pp.lib +
C:\JKR\BCC55\lib\cw32.lib +
C:\JKR\BCC55\lib\psdk\odbc32.lib +
C:\JKR\BCC55\lib\import32.lib,, +
C:\JKR\VFW\PROJECTS\SAMPLE.res
*****
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_HB_FUN_JSET2007TB' referenced from
C:\JKR\VFW\JKLIB\FWPHX-BCC\FWCOREHX.LIB|JKTheme
Error: Unresolved external '_HB_FUN_JSET2007BTN' referenced from
C:\JKR\VFW\JKLIB\FWPHX-BCC\FWCOREHX.LIB|JKTheme
***ERROR***

From harbour.01 at syenar.hu  Fri Jul 25 12:47:55 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 25 12:48:02 2008
Subject: [Harbour] 2008-07-25 18:46 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ee76$Blat.v2.6.2$2fef2514$e188b578a7e@127.0.0.1>

2008-07-25 18:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/treport.prg
     ! Fixed RTE by removing some type constraints from object vars 
       which get NILs assigned. Thanks to Ciro Vargas Clemow.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Fri Jul 25 13:20:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Jul 25 13:20:20 2008
Subject: [Harbour] 2008-07-25 19:19 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807251720.m6PHK8tm012753@31-mo5-4.acn.waw.pl>

2008-07-25 19:19 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/hbmzip.c
    + added support to set archive comment:
         HB_ZipClose( hZip, [ cGlobalComment ] ) --> nError
    + added support to get archive comment in append mode:
         HB_ZipOpen( cFileName, [ iMode = HB_ZIP_CREATE ],
                     [ @cGlobalComment ] ) --> hZip
    + added support to set file comment:
         HB_ZipFileCreate( hZip, cZipName, dDate, cTime,
                           nInternalAttr, nExternalAttr,
                           [ nMethod = HB_ZLIB_METHOD_DEFLATE ], 
                           [ nLevel = HB_ZLIB_COMPRESSION_DEFAULT ], 
                           [ cPassword ], [ cComment ] ) --> nError
         HB_ZipStoreFile( hZip, cFileName, [ cZipName ],
                          [ cPassword ], [ cComment ] ) --> nError
    + added new function which allow to extract archive comment:
         HB_UnzipGlobalInfo( hUnzip, @nEntries, @cGlobalComment ) --> nError
    + added support to extract file comment:
         HB_UnzipFileInfo( hUnzip, @cZipName, @dDate, @cTime,
                           @nInternalAttr, @nExternalAttr,
                           @nMethod, @nSize, @nCompressedSize,
                           @cComment ) --> nError

  * harbour/contrib/hbmzip/readme.txt
    + added list of Harbour ZIP/UNZIP functions with parameters

best regards
Przemek
From lorenzo.fiorini at gmail.com  Fri Jul 25 13:39:30 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Jul 25 13:39:36 2008
Subject: [Harbour] getsys.prg hb_GetReadVar issue
Message-ID: <9257026e0807251039h17bbc7bfm69b56599419f0225@mail.gmail.com>

Since hb_GetReadVar is called from tgetlist.prg, getsys.prg gets
"pulled" into the link modules and if you have a modified getsys.prg
and this result in many link time "duplicates".

The solution for me is to put hb_GetReadVar into tgetlist.prg where it's called.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Jul 25 14:47:31 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 25 14:47:41 2008
Subject: [Harbour] 2008-07-25 20:46 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ee86$Blat.v2.6.2$e4fc8c66$1c5842ddd99a@127.0.0.1>

2008-07-25 20:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/tgetlist.prg
     ! TGetList():ReadVar() implemented using duplicated code, 
       instead of creating a dependency to hb_GetReadVar() in getsys.prg.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Jul 25 16:53:35 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Jul 25 16:53:43 2008
Subject: [Harbour] 2008-07-25 22:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ee98$Blat.v2.6.2$81be1c3e$16bc21619bd0@127.0.0.1>

2008-07-25 22:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbextern.ch
     + HB_OSFILEMASK() added.
--
Brgds,
Viktor

From sperling at racsa.co.cr  Fri Jul 25 21:33:21 2008
From: sperling at racsa.co.cr (Jan Sperling)
Date: Fri Jul 25 19:32:01 2008
Subject: [Harbour] missing external funcs
References: <48899DD3.9000800@mweb.co.za>
	<20080725122900.GA10665@34-mo7-2.acn.waw.pl>
Message-ID: <000601c8eebf$971e2ac0$1400a8c0@PORTATIL3>

Hi all:

I?m very new to Harbour.
I?m trying to get Harbour with Windock working, and after some time 
discovering which libs to link, I drilled down my link errors to the 
following two:

make -C adressen 'COMP=msvc'
E:\windock\wd-wdtk-bin\wdtk\examples\make.exe[1]: Entering directory 
`E:/windock/wd-wdtk-bin/wdtk/examples/adressen'
link /nologo /force:multiple /subsystem:WINDOWS 
/nodefaultlib:libc.lib -LIBPATH:../../lib -LIBPATH:E:\\harbour\\msvc/lib -LIBPATH:e:/sdk/lib 
  -out:msvc_adr.exe wdinit.obj bin.msvc/adressen.obj bin.msvc/adrdlg.obj 
adressen.res wdtk.lib windock.lib  debug.lib vm.lib rtl.lib gtwin.lib 
lang.lib rdd.lib vm.lib macro.lib pp.lib dbfntx.lib dbfcdx.lib dbfdbt.lib 
common.lib codepage.lib  mpr.lib comdlg32.lib shell32.lib user32.lib 
gdi32.lib winmm.lib advapi32.lib winspool.lib libcmt.lib ole32.lib 
oleaut32.lib
rtl.lib(win32ole.obj) : warning LNK4006: "void __cdecl 
HB_FUN_MESSAGEBOX(void)" (?HB_FUN_MESSAGEBOX@@YAXXZ) already defined in 
windock.lib(user.obj); second definition ignored
wdtk.lib(stfkt.obj) : error LNK2001: unresolved external symbol "void 
__cdecl HB_FUN_NUMTOKEN(void)" (?HB_FUN_NUMTOKEN@@YAXXZ)
wdtk.lib(nettable.obj) : error LNK2001: unresolved external symbol "void 
__cdecl HB_FUN_NUMTOKEN(void)" (?HB_FUN_NUMTOKEN@@YAXXZ)
windock.lib(sys.obj) : error LNK2019: unresolved external symbol "void * 
hb_hInstance" (?hb_hInstance@@3PAXA) referenced in function "void __cdecl 
HB_FUN_GETINSTANCE(void)" (?HB_FUN_GETINSTANCE@@YAXXZ)
msvc_adr.exe : fatal error LNK1120: 2 unresolved externals
E:\windock\wd-wdtk-bin\wdtk\examples\make.exe[1]: Leaving directory 
`E:/windock/wd-wdtk-bin/wdtk/examples/adressen'


Can somebody please tell me which lib I?m linking in to get those symbols 
resolved?

TIA, Jan Sperling
_____________________________
Jan Sperling Frischmuth
Presidente,
Sperling Consultor?a Inform?tica S.A.

Tels:
(506)2225-9667, (506)2225-9219
(506)2253-2473, (506)2253-2460

Fax: (506)2281-3739
Cel: (506)8381-1488
email:  jan.sperling@grecoavalon.com, sperling@racsa.co.cr

----- Original Message ----- 
From: Przemyslaw Czerpak
To: Harbour Project Main Developer List.
Sent: Friday, July 25, 2008 4:29 AM
Subject: Re: [Harbour] DBFCDX and OrdCustom()


On Fri, 25 Jul 2008, Alex Strickland wrote:

Hi Alex,

> I wondered if you had seen this message :
> http://groups.google.com/group/comp.lang.xharbour/browse_thread/thread/7aa2ef0f105876e8#

Yes, I did.

> which points towards a small bug?

Just check it with CL53. In CDX is conversion to custom is not
revertable and this is replicated in Harbour. It's only logical
flag and can be easy removed if you do not like it. It's enogh
to delete from dbfcdx1.c[8261] this lines:

         /* This is a hacks to emulate both SIX3 and COMIX behavior
          * which should be cleaned. I intentionally not used
          * HB_SIXCDX macro here [druzus]
          */
         if( pTag->Custom )
            pTag->Template = pTag->MultiKey = TRUE;

or change it to:

         if( pTag->Custom )
            pTag->MultiKey = TRUE;

if need the possibility of adding the same key value with the same
recno to the custom index just like in CL53 and COMIX CDX RDDs.

Please note that CDX does not have real support for DBOI_TEMPLATE and
DBOI_MULTIKEY which I implemented so far only for DNFNTX and DBFNSX.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 

From lorenzo.fiorini at gmail.com  Sat Jul 26 02:26:09 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Jul 26 02:26:14 2008
Subject: [Harbour] new tbrwtext.prg to test
Message-ID: <9257026e0807252326h61cd0862g79142306920794c5@mail.gmail.com>

This is the tbrwtext.prg I use. ( the attachment is a renamed zip )

It's simpler and it uses HBDbBrowser() class instead of RTL's
teditor.prg making debug subsystem more self contained.

To test it simply put it in the source/debug dir.

Please report any problem or your comments.

best regards,
Lorenzo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tbrwtext.zap
Type: application/octet-stream
Size: 2995 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080726/b9117402/tbrwtext-0001.obj
From harbour.01 at syenar.hu  Sat Jul 26 06:16:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul 26 06:16:38 2008
Subject: [Harbour] Harbour 1.0.0 Final
Message-ID: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>

Hi all,

Is there anything missing/pending for 1.0.0 Final?

I'd suggest to start the process next week.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Jul 26 06:23:10 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul 26 06:23:08 2008
Subject: [Harbour] 2008-07-26 12:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ef09$Blat.v2.6.2$9a774af4$15e0c6c2b972@127.0.0.1>

2008-07-26 12:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * TODO
     * Updated.
     ; QUESTION: Is this still valid?:
       Assign to: Przemek
       Detail...: Clean RDD code to be safe for return from RT errors
       Status...: Open.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sat Jul 26 08:41:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Jul 26 08:41:29 2008
Subject: [Harbour] 2008-07-26 12:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c8ef09$Blat.v2.6.2$9a774af4$15e0c6c2b972@127.0.0.1>
References: <01c8ef09$Blat.v2.6.2$9a774af4$15e0c6c2b972@127.0.0.1>
Message-ID: <20080726124123.GA19311@34-mo7-2.acn.waw.pl>

On Sat, 26 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

>    * TODO
>      * Updated.
>      ; QUESTION: Is this still valid?:
>        Assign to: Przemek
>        Detail...: Clean RDD code to be safe for return from RT errors
>        Status...: Open.

Yes it is.
There are two related issues:
1. add protection against freeing RDD AREA from user UDFs and/or
   RT error handler.
   Now RDDs do not know anything about such situation and may
   still try to access AREA members after executing user code.
   It's not trivial to add good protection for such situations
   which will always work without some speed overhead or serious
   modification in RDD API though I have some ideas how to create
   small trick which should resolve the problem but I do not want
   to touch it now.

2. clean RDD code to be ready for farther execution (usually clean
   exit) after some RT errors caused by corrupted files or broken
   IO operations. Now it generates internal errors in such case
   just after RT ones. The problem is mostly related to DBFCDX.
   When I was working on DBFNTX I cleaned to code to play well
   in such situations. It's not very complicated job but because
   RDD operations are critical if I'll change it now then we will
   have to test it very extensively. I also plan to make some
   modifications in DBF* index RDDs to avoid duplicate code and
   easier adding new index formats. I would like to join modifications
   in DBFCDX with this new API and this is yet another reason for
   me to not replicate the work.

In summary these are not typical operations and in 99% not critical
for normal code. I think they can be left for the future. AFAIK Clipper
is also not safe in such situations.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Jul 26 10:26:14 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Jul 26 10:26:20 2008
Subject: [Harbour] 2008-07-26 16:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807261426.m6QEQEwl002311@31-mo5-4.acn.waw.pl>

2008-07-26 16:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/zip.c
    ! fixed access to uninitialized member of z_stream by simple
      initialization. Anyhow it's minor bug in MINIZIP code exploited
      HB_ZipDeleteFile() which causes that TEXT flag is not set after
      raw binary file updating. There is also no API call to make it
      manually.
      
  * harbour/contrib/hbmzip/hbmzip.c
  * harbour/contrib/hbmzip/readme.txt
    + added HB_ZipDeleteFile( cZipFile, cFileMask ) --> nError

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/dirscan.prg
    + added HB_DirScan( cPath, cFileMask, cAttr )

  * harbour/source/rtl/strmatch.c
    + added HB_FileMatch( cFile, cPattern )

  * harbour/include/hbextern.ch
    + added HB_DirScan(), HB_FileMatch()

  * harbour/contrib/xhb/dirrec.prg
    * changed to use HB_DirScan()

best regards
Przemek
From druzus at acn.waw.pl  Sat Jul 26 11:05:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Jul 26 11:06:00 2008
Subject: [Harbour] 2008-07-26 17:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807261505.m6QF5to3002795@31-mo5-4.acn.waw.pl>

2008-07-26 17:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/tests/myzip.prg
    + added support for setting global comment
    + added support for scanning subdirectories

best regards
Przemek
From harbour.01 at syenar.hu  Sat Jul 26 12:58:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul 26 12:59:03 2008
Subject: [Harbour] 2008-07-26 12:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080726124123.GA19311@34-mo7-2.acn.waw.pl>
References: <01c8ef09$Blat.v2.6.2$9a774af4$15e0c6c2b972@127.0.0.1>
	<20080726124123.GA19311@34-mo7-2.acn.waw.pl>
Message-ID: <8F451A12-5618-410F-A86C-CAC149271CC9@syenar.hu>

Okay, thanks Przemek, I'd say to leave these after 1.0.

Brgds,
Viktor

On 2008.07.26., at 14:41, Przemyslaw Czerpak wrote:

> On Sat, 26 Jul 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>   * TODO
>>     * Updated.
>>     ; QUESTION: Is this still valid?:
>>       Assign to: Przemek
>>       Detail...: Clean RDD code to be safe for return from RT errors
>>       Status...: Open.
>
> Yes it is.
> There are two related issues:
> 1. add protection against freeing RDD AREA from user UDFs and/or
>   RT error handler.
>   Now RDDs do not know anything about such situation and may
>   still try to access AREA members after executing user code.
>   It's not trivial to add good protection for such situations
>   which will always work without some speed overhead or serious
>   modification in RDD API though I have some ideas how to create
>   small trick which should resolve the problem but I do not want
>   to touch it now.
>
> 2. clean RDD code to be ready for farther execution (usually clean
>   exit) after some RT errors caused by corrupted files or broken
>   IO operations. Now it generates internal errors in such case
>   just after RT ones. The problem is mostly related to DBFCDX.
>   When I was working on DBFNTX I cleaned to code to play well
>   in such situations. It's not very complicated job but because
>   RDD operations are critical if I'll change it now then we will
>   have to test it very extensively. I also plan to make some
>   modifications in DBF* index RDDs to avoid duplicate code and
>   easier adding new index formats. I would like to join modifications
>   in DBFCDX with this new API and this is yet another reason for
>   me to not replicate the work.
>
> In summary these are not typical operations and in 99% not critical
> for normal code. I think they can be left for the future. AFAIK  
> Clipper
> is also not safe in such situations.
>
> best regards,
> Przemek

From harbour.01 at syenar.hu  Sat Jul 26 14:14:15 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul 26 14:14:15 2008
Subject: [Harbour] 2008-07-26 20:13 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8ef4b$Blat.v2.6.2$69ae7c0c$134438ef2cf0@127.0.0.1>

2008-07-26 20:13 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/whatsnew.txt
     + Updated for 1.0.0.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Jul 26 14:21:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Jul 26 14:21:35 2008
Subject: [Harbour] whatsnew 1.0.0
Message-ID: <67CFBB1C-D2C0-42B2-B7AD-BD54C0BEBA98@syenar.hu>

Please review/extend/proofread:

Version 1.0.0 (2008-08-01) tag: 1.0.0

General
=============================
- Internal errors are now logged to file.
- Fixed -gc3 for doubly negated integers.
- Changed hb_xrealloc() to be ANSI-C realloc() compatible.
- Cleanup of MSVC C mode static initialisation code.
- Changed internal representation for file attributes from USHORT to  
ULONG.
- Fixed memory leak in -gw mode.
- Portability fixes (Unicode, 64 bit, Pelles C 32/64 bit, WinCE, eVC4,  
XCC,
   Linux mouse detection, OpenWatcom).
- Deployment fixes.

Core
=============================
- Fixed __HARBOUR__ macro on .prg level, when compiled with -u switch.
- HB_ARRAYID() moved to xhb.lib, synced with xhb and made 64 bit  
compatible.
- file handle usage cleanup and 64 bit compatibility.
- Automatic destructors for .hrb modules.
- Added passing non-string parameters to .hrb functions.
- Fixed casting for indexes with key length greater then 196 bytes
   created on tables with record number smaller then 256 in rddcdx.
- New FS API functions: hb_fsSetFileTime(), hb_fsGetFileTime(),  
hb_fsSetAttr(),
   hb_fsGetAttr().
- New date API function: hb_timeStampEncode().
- Fixed printing under OS/2.
- Implemented DBEDIT() DE_APPEND mode plus some other features and
   compatibility fixes.
- MD5 calculation fixes.
- Added C level hb_hashAddNew().
- Compile time optimization of EMPTY() function.
- Compress trailing spaces during string item serialization.
- Replicated CA-Cl*pper compile time optimization bugs.
- TCP/IP function (HB_INET*()) fixes.
- Added HB_OSFILEMASK(), HB_DIRSCAN(), HB_FILEMATCH() Harbour level  
functions.
- Fixed RTE in HBReport() class.

Contrib
=============================
- Better cross-build support for contribs with external dependencies.
- hbmzip OS/2 support, Unix .zip header fix, using Harbour memory
   management functions, global and file comment support,  
HB_ZIPDELETEFILE()
   function.
- hbziparch fixes and better portability.
- hbcurl fixes, now using Harbour memory allocation functions,
   now older libcurl versions are supported as well, CURL_EASY_GETINFO()
   fixed for unsupported info types.
- 64bit compatibility fixes. hbmysql/SQLLISTF() function now
   uses pointer instead of numeric type.
- Fixed adordd to be _SET_EXACT independent.
- Fixed hbodbc tests to work out of the box.
- hbw32, hbodbc 64 bit fixes.
- Fixed rddads to behave Clipper-like when trying to write
   when on EOF position.
- Added OS version detection functions to hbw32.
- Fixed HB_INC_* envvar usage in *_all.bat files.
- Fixed casting for indexes with key length greater then 196 bytes
   created on tables with record number smaller then 256 in hbbmcdx.
- hbsqlit3 warning fixes and error fixes for some compilers/modes.
- Added DirectoryRecurse()() to xhb.lib.
Brgds,
Viktor

From philb at philb.us  Sat Jul 26 15:16:37 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Jul 26 15:16:50 2008
Subject: [Harbour] whatsnew 1.0.0
In-Reply-To: <67CFBB1C-D2C0-42B2-B7AD-BD54C0BEBA98@syenar.hu>
References: <67CFBB1C-D2C0-42B2-B7AD-BD54C0BEBA98@syenar.hu>
Message-ID: <200807261516.38070.philb@philb.us>

On Saturday 26 July 2008 02:21:28 pm Szak?ts Viktor wrote:
> Please review/extend/proofread:

Have we made the decision to release or have another release candidate.

Are all of these changes confirmed to be working now?

> Version 1.0.0 (2008-08-01) tag: 1.0.0
>
> General
> =============================
> - Internal errors are now logged to file.
> - Fixed -gc3 for doubly negated integers.
> - Changed hb_xrealloc() to be ANSI-C realloc() compatible.
> - Cleanup of MSVC C mode static initialisation code.
> - Changed internal representation for file attributes from USHORT to
> ULONG.
> - Fixed memory leak in -gw mode.
> - Portability fixes (Unicode, 64 bit, Pelles C 32/64 bit, WinCE, eVC4,
> XCC,
>    Linux mouse detection, OpenWatcom).
> - Deployment fixes.
>
> Core
> =============================
> - Fixed __HARBOUR__ macro on .prg level, when compiled with -u switch.
> - HB_ARRAYID() moved to xhb.lib, synced with xhb and made 64 bit
> compatible.
> - file handle usage cleanup and 64 bit compatibility.
> - Automatic destructors for .hrb modules.
> - Added passing non-string parameters to .hrb functions.
> - Fixed casting for indexes with key length greater then 196 bytes
>    created on tables with record number smaller then 256 in rddcdx.
> - New FS API functions: hb_fsSetFileTime(), hb_fsGetFileTime(),
> hb_fsSetAttr(),
>    hb_fsGetAttr().
> - New date API function: hb_timeStampEncode().
> - Fixed printing under OS/2.
> - Implemented DBEDIT() DE_APPEND mode plus some other features and
>    compatibility fixes.
> - MD5 calculation fixes.
> - Added C level hb_hashAddNew().
> - Compile time optimization of EMPTY() function.
> - Compress trailing spaces during string item serialization.
> - Replicated CA-Cl*pper compile time optimization bugs.
> - TCP/IP function (HB_INET*()) fixes.
> - Added HB_OSFILEMASK(), HB_DIRSCAN(), HB_FILEMATCH() Harbour level
> functions.
> - Fixed RTE in HBReport() class.
>
> Contrib
> =============================
> - Better cross-build support for contribs with external dependencies.
> - hbmzip OS/2 support, Unix .zip header fix, using Harbour memory
>    management functions, global and file comment support,
> HB_ZIPDELETEFILE()
>    function.
> - hbziparch fixes and better portability.
> - hbcurl fixes, now using Harbour memory allocation functions,
>    now older libcurl versions are supported as well, CURL_EASY_GETINFO()
>    fixed for unsupported info types.
> - 64bit compatibility fixes. hbmysql/SQLLISTF() function now
>    uses pointer instead of numeric type.
> - Fixed adordd to be _SET_EXACT independent.
> - Fixed hbodbc tests to work out of the box.
> - hbw32, hbodbc 64 bit fixes.
> - Fixed rddads to behave Clipper-like when trying to write
>    when on EOF position.
> - Added OS version detection functions to hbw32.
> - Fixed HB_INC_* envvar usage in *_all.bat files.
> - Fixed casting for indexes with key length greater then 196 bytes
>    created on tables with record number smaller then 256 in hbbmcdx.
> - hbsqlit3 warning fixes and error fixes for some compilers/modes.
> - Added DirectoryRecurse()() to xhb.lib.
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



-- 
Waiting for sunspots.
From druzus at acn.waw.pl  Sun Jul 27 21:26:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Jul 27 22:17:59 2008
Subject: [Harbour] new tbrwtext.prg to test
In-Reply-To: <9257026e0807252326h61cd0862g79142306920794c5@mail.gmail.com>
References: <9257026e0807252326h61cd0862g79142306920794c5@mail.gmail.com>
Message-ID: <20080728012601.GA3567@34-mo7-2.acn.waw.pl>

On Sat, 26 Jul 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> This is the tbrwtext.prg I use. ( the attachment is a renamed zip )
> It's simpler and it uses HBDbBrowser() class instead of RTL's
> teditor.prg making debug subsystem more self contained.
> To test it simply put it in the source/debug dir.
> Please report any problem or your comments.

I tested it and it looks correct though some additional
cleanup should be done in source navigation. F.e. please
check what happens when you make debug step (F8) with code
below. tst() is shown in the first line and then instead
of moving cursor the source is scrolled.
Please compare the behavior to old code and/or Clipper CLD.
If you can make it more Clipper like then I think we should
replace current code with your version.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Jul 27 20:48:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Jul 27 22:18:03 2008
Subject: [Harbour] 2008-07-28 02:47 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807280048.m6S0mDbj000767@31-mo5-4.acn.waw.pl>

2008-07-28 02:47 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/tests/myzip.prg
  * harbour/contrib/hbmzip/tests/myunzip.prg
    * minor cleanup

best regards
Przemek
From soporte at dsgsoftware.com  Mon Jul 28 03:32:34 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Mon Jul 28 03:34:55 2008
Subject: [Harbour] 2008-07-25 19:19 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200807251720.m6PHK8tm012753@31-mo5-4.acn.waw.pl>
Message-ID: <004501c8f084$6cf935c0$6c01a8c0@PcJuanxp>

Przemek,

Many thanks. I'll test it.

Best regards
Juan

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: <harbour@harbour-project.org>
Sent: Friday, July 25, 2008 7:20 PM
Subject: [Harbour] 2008-07-25 19:19 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-07-25 19:19 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/contrib/hbmzip/hbmzip.c
>    + added support to set archive comment:
>         HB_ZipClose( hZip, [ cGlobalComment ] ) --> nError
>    + added support to get archive comment in append mode:
>         HB_ZipOpen( cFileName, [ iMode = HB_ZIP_CREATE ],
>                     [ @cGlobalComment ] ) --> hZip
>    + added support to set file comment:
>         HB_ZipFileCreate( hZip, cZipName, dDate, cTime,
>                           nInternalAttr, nExternalAttr,
>                           [ nMethod = HB_ZLIB_METHOD_DEFLATE ],
>                           [ nLevel = HB_ZLIB_COMPRESSION_DEFAULT ],
>                           [ cPassword ], [ cComment ] ) --> nError
>         HB_ZipStoreFile( hZip, cFileName, [ cZipName ],
>                          [ cPassword ], [ cComment ] ) --> nError
>    + added new function which allow to extract archive comment:
>         HB_UnzipGlobalInfo( hUnzip, @nEntries, @cGlobalComment ) --> 
> nError
>    + added support to extract file comment:
>         HB_UnzipFileInfo( hUnzip, @cZipName, @dDate, @cTime,
>                           @nInternalAttr, @nExternalAttr,
>                           @nMethod, @nSize, @nCompressedSize,
>                           @cComment ) --> nError
>
>  * harbour/contrib/hbmzip/readme.txt
>    + added list of Harbour ZIP/UNZIP functions with parameters
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From harbour.01 at syenar.hu  Mon Jul 28 04:14:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 04:14:46 2008
Subject: [Harbour] whatsnew 1.0.0
In-Reply-To: <200807261516.38070.philb@philb.us>
References: <67CFBB1C-D2C0-42B2-B7AD-BD54C0BEBA98@syenar.hu>
	<200807261516.38070.philb@philb.us>
Message-ID: <D257B9AC-3EC8-43A5-9C3C-6E3C8DCBA4D5@syenar.hu>

>>
Hi Phil,

>> Please review/extend/proofread:
>
> Have we made the decision to release or have another release  
> candidate.

Not yet. [ I'd personally vote for 1.0.0 now, but
discussion is welcome of course. ]

> Are all of these changes confirmed to be working now?

Difficult to tell. Most of these were bugfixes addressing
problems in or since rc2, regarding mostly contrib or
non-mainstream (non-Win32/Linux) build compatibility.

I feel that we could probably go on with further bugfixes
for an indefinite time in these areas, but we should
draw a line if we ever want to release 1.0.0. We can delay
it now, but I personally see no strong reason to do it.
The feature set is complete, the core is stable, and we
may address further bugs with minor releases like 1.0.x,
if needed.

[ Also, resources are scarce and one release takes quite
a time and effort, and I personally pbly won't be able
to contribute binaries for another RC. ]

Brgds,
Viktor

>> Version 1.0.0 (2008-08-01) tag: 1.0.0
>>
>> General
>> =============================
>> - Internal errors are now logged to file.
>> - Fixed -gc3 for doubly negated integers.
>> - Changed hb_xrealloc() to be ANSI-C realloc() compatible.
>> - Cleanup of MSVC C mode static initialisation code.
>> - Changed internal representation for file attributes from USHORT to
>> ULONG.
>> - Fixed memory leak in -gw mode.
>> - Portability fixes (Unicode, 64 bit, Pelles C 32/64 bit, WinCE,  
>> eVC4,
>> XCC,
>>   Linux mouse detection, OpenWatcom).
>> - Deployment fixes.
>>
>> Core
>> =============================
>> - Fixed __HARBOUR__ macro on .prg level, when compiled with -u  
>> switch.
>> - HB_ARRAYID() moved to xhb.lib, synced with xhb and made 64 bit
>> compatible.
>> - file handle usage cleanup and 64 bit compatibility.
>> - Automatic destructors for .hrb modules.
>> - Added passing non-string parameters to .hrb functions.
>> - Fixed casting for indexes with key length greater then 196 bytes
>>   created on tables with record number smaller then 256 in rddcdx.
>> - New FS API functions: hb_fsSetFileTime(), hb_fsGetFileTime(),
>> hb_fsSetAttr(),
>>   hb_fsGetAttr().
>> - New date API function: hb_timeStampEncode().
>> - Fixed printing under OS/2.
>> - Implemented DBEDIT() DE_APPEND mode plus some other features and
>>   compatibility fixes.
>> - MD5 calculation fixes.
>> - Added C level hb_hashAddNew().
>> - Compile time optimization of EMPTY() function.
>> - Compress trailing spaces during string item serialization.
>> - Replicated CA-Cl*pper compile time optimization bugs.
>> - TCP/IP function (HB_INET*()) fixes.
>> - Added HB_OSFILEMASK(), HB_DIRSCAN(), HB_FILEMATCH() Harbour level
>> functions.
>> - Fixed RTE in HBReport() class.
>>
>> Contrib
>> =============================
>> - Better cross-build support for contribs with external dependencies.
>> - hbmzip OS/2 support, Unix .zip header fix, using Harbour memory
>>   management functions, global and file comment support,
>> HB_ZIPDELETEFILE()
>>   function.
>> - hbziparch fixes and better portability.
>> - hbcurl fixes, now using Harbour memory allocation functions,
>>   now older libcurl versions are supported as well,  
>> CURL_EASY_GETINFO()
>>   fixed for unsupported info types.
>> - 64bit compatibility fixes. hbmysql/SQLLISTF() function now
>>   uses pointer instead of numeric type.
>> - Fixed adordd to be _SET_EXACT independent.
>> - Fixed hbodbc tests to work out of the box.
>> - hbw32, hbodbc 64 bit fixes.
>> - Fixed rddads to behave Clipper-like when trying to write
>>   when on EOF position.
>> - Added OS version detection functions to hbw32.
>> - Fixed HB_INC_* envvar usage in *_all.bat files.
>> - Fixed casting for indexes with key length greater then 196 bytes
>>   created on tables with record number smaller then 256 in hbbmcdx.
>> - hbsqlit3 warning fixes and error fixes for some compilers/modes.
>> - Added DirectoryRecurse()() to xhb.lib.
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> -- 
> Waiting for sunspots.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Jul 28 06:38:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 06:38:08 2008
Subject: [Harbour] 2008-07-28 12:37 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807281038.m6SAc2FV010465@31-mo5-4.acn.waw.pl>

2008-07-28 12:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/hbmzip.c
    * converted TABs to SPACEs

  * harbour/source/rtl/hbcrc.c
  * harbour/source/rtl/hbmd5.c
    * added const to some static array declarations

best regards
Przemek
From philb at philb.us  Mon Jul 28 07:33:10 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Jul 28 07:33:22 2008
Subject: [Harbour] whatsnew 1.0.0
In-Reply-To: <D257B9AC-3EC8-43A5-9C3C-6E3C8DCBA4D5@syenar.hu>
References: <67CFBB1C-D2C0-42B2-B7AD-BD54C0BEBA98@syenar.hu>
	<200807261516.38070.philb@philb.us>
	<D257B9AC-3EC8-43A5-9C3C-6E3C8DCBA4D5@syenar.hu>
Message-ID: <200807280733.11061.philb@philb.us>

On Monday 28 July 2008 04:14:38 am Szak?ts Viktor wrote:
> Hi Phil,
>
> >> Please review/extend/proofread:
> >
> > Have we made the decision to release or have another release
> > candidate.
>
> Not yet. [ I'd personally vote for 1.0.0 now, but
> discussion is welcome of course. ]
>
> > Are all of these changes confirmed to be working now?
>
> Difficult to tell. Most of these were bugfixes addressing
> problems in or since rc2, regarding mostly contrib or
> non-mainstream (non-Win32/Linux) build compatibility.
>
> I feel that we could probably go on with further bugfixes
> for an indefinite time in these areas, but we should
> draw a line if we ever want to release 1.0.0. We can delay
> it now, but I personally see no strong reason to do it.
> The feature set is complete, the core is stable, and we
> may address further bugs with minor releases like 1.0.x,
> if needed.
>
> [ Also, resources are scarce and one release takes quite
> a time and effort, and I personally pbly won't be able
> to contribute binaries for another RC. ]
>
> Brgds,
> Viktor

Works for me. Most of the changes in RC2 and RC1 were in contrib, so I think 
we are pretty stable as well.

Proceed as you have time. Release the dragons!

-- 
Waiting for sunspots.
From harbour.01 at syenar.hu  Mon Jul 28 09:10:30 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 09:10:36 2008
Subject: [Harbour] 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f0b3$Blat.v2.6.2$4f89d18c$1020bfb6a29e@127.0.0.1>

2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * harbour-ce-spec
   * harbour-w32-spec
   * include/hbver.h
   * harbour.spec
     * Removed 'rc2' tag in preparation for final release.

   * doc/whatsnew.txt
     ! Minor typos.

   * contrib/hbmysql/make_b32.bat
   * contrib/hbmysql/make_vc.bat
   * contrib/hbapollo/make_b32.bat
   * contrib/hbapollo/make_vc.bat
   * contrib/hbfbird/make_b32.bat
   * contrib/hbfbird/make_vc.bat
   * contrib/hbcurl/make_b32.bat
   * contrib/hbcurl/make_vc.bat
   * contrib/hbhpdf/make_b32.bat
   * contrib/hbhpdf/make_vc.bat
   * contrib/hbpgsql/make_b32.bat
   * contrib/hbpgsql/make_vc.bat
   * contrib/rddads/make_b32.bat
   * contrib/rddads/make_vc.bat
   * contrib/hbfimage/make_b32.bat
   * contrib/hbfimage/make_vc.bat
   * contrib/hbgd/make_b32.bat
   * contrib/hbgd/make_vc.bat
     ! Fixed HB_DIR_* detection.
--
Brgds,
Viktor

From guy.roussin at teledetection.fr  Mon Jul 28 09:48:09 2008
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon Jul 28 09:48:18 2008
Subject: [Harbour] 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c8f0b3$Blat.v2.6.2$4f89d18c$1020bfb6a29e@127.0.0.1>
References: <01c8f0b3$Blat.v2.6.2$4f89d18c$1020bfb6a29e@127.0.0.1>
Message-ID: <488DCE19.3070604@teledetection.fr>

This little patch for debian final release ...
Guy

Szak?ts Viktor a ?crit :
> 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>    * harbour-ce-spec
>    * harbour-w32-spec
>    * include/hbver.h
>    * harbour.spec
>      * Removed 'rc2' tag in preparation for final release.
> 
>    * doc/whatsnew.txt
>      ! Minor typos.
> 
>    * contrib/hbmysql/make_b32.bat
>    * contrib/hbmysql/make_vc.bat
>    * contrib/hbapollo/make_b32.bat
>    * contrib/hbapollo/make_vc.bat
>    * contrib/hbfbird/make_b32.bat
>    * contrib/hbfbird/make_vc.bat
>    * contrib/hbcurl/make_b32.bat
>    * contrib/hbcurl/make_vc.bat
>    * contrib/hbhpdf/make_b32.bat
>    * contrib/hbhpdf/make_vc.bat
>    * contrib/hbpgsql/make_b32.bat
>    * contrib/hbpgsql/make_vc.bat
>    * contrib/rddads/make_b32.bat
>    * contrib/rddads/make_vc.bat
>    * contrib/hbfimage/make_b32.bat
>    * contrib/hbfimage/make_vc.bat
>    * contrib/hbgd/make_b32.bat
>    * contrib/hbgd/make_vc.bat
>      ! Fixed HB_DIR_* detection.
> --
> Brgds,
> Viktor
-------------- next part --------------
Index: debian/changelog
===================================================================
--- debian/changelog	(r??vision 9015)
+++ debian/changelog	(copie de travail)
@@ -1,8 +1,8 @@
-harbour (1.0.0.RC2) unstable; urgency=low
+harbour (1.0.0-1) unstable; urgency=low
 
   * Lot of new stuff see changelog
 
- -- guy.roussin <guy.roussin@teledetection.fr>  Thu, 03 Jul 2008 14:57:48 +0200
+ -- guy.roussin <guy.roussin@teledetection.fr>  Mon, 28 Jul 2008 15:40:38 +0200
 
 harbour (0.45.0-0.1) unstable; urgency=low
 
From druzus at acn.waw.pl  Mon Jul 28 09:55:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 09:55:37 2008
Subject: [Harbour] 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <488DCE19.3070604@teledetection.fr>
References: <01c8f0b3$Blat.v2.6.2$4f89d18c$1020bfb6a29e@127.0.0.1>
	<488DCE19.3070604@teledetection.fr>
Message-ID: <20080728135532.GA28593@34-mo7-2.acn.waw.pl>

On Mon, 28 Jul 2008, Guy Roussin wrote:

Hi Guy,

> This little patch for debian final release ...

Index: debian/changelog
===================================================================
--- debian/changelog    (r??vision 9015)
+++ debian/changelog    (copie de travail)
@@ -1,8 +1,8 @@
-harbour (1.0.0.RC2) unstable; urgency=low
+harbour (1.0.0-1) unstable; urgency=low

   * Lot of new stuff see changelog

I think it's also time to change project status in debian builds to:
+harbour (1.0.0-1) stable; urgency=low

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jul 28 09:56:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 09:56:29 2008
Subject: [Harbour] 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <488DCE19.3070604@teledetection.fr>
References: <01c8f0b3$Blat.v2.6.2$4f89d18c$1020bfb6a29e@127.0.0.1>
	<488DCE19.3070604@teledetection.fr>
Message-ID: <37D7D19A-8DE8-424C-A0CC-4B6CCFE8A9DD@syenar.hu>

Hi Guy, I'm not familiar with debian distros and terms, so
this may sound stupid, but is 'unstable' valid? 1.0.0 is
meant to be a stable version.

Brgds,
Viktor

On 2008.07.28., at 15:48, Guy Roussin wrote:

> This little patch for debian final release ...
> Guy
>
> Szak?ts Viktor a ?crit :
>> 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>   * harbour-ce-spec
>>   * harbour-w32-spec
>>   * include/hbver.h
>>   * harbour.spec
>>     * Removed 'rc2' tag in preparation for final release.
>>   * doc/whatsnew.txt
>>     ! Minor typos.
>>   * contrib/hbmysql/make_b32.bat
>>   * contrib/hbmysql/make_vc.bat
>>   * contrib/hbapollo/make_b32.bat
>>   * contrib/hbapollo/make_vc.bat
>>   * contrib/hbfbird/make_b32.bat
>>   * contrib/hbfbird/make_vc.bat
>>   * contrib/hbcurl/make_b32.bat
>>   * contrib/hbcurl/make_vc.bat
>>   * contrib/hbhpdf/make_b32.bat
>>   * contrib/hbhpdf/make_vc.bat
>>   * contrib/hbpgsql/make_b32.bat
>>   * contrib/hbpgsql/make_vc.bat
>>   * contrib/rddads/make_b32.bat
>>   * contrib/rddads/make_vc.bat
>>   * contrib/hbfimage/make_b32.bat
>>   * contrib/hbfimage/make_vc.bat
>>   * contrib/hbgd/make_b32.bat
>>   * contrib/hbgd/make_vc.bat
>>     ! Fixed HB_DIR_* detection.
>> --
>> Brgds,
>> Viktor
> Index: debian/changelog
> ===================================================================
> --- debian/changelog	(r?vision 9015)
> +++ debian/changelog	(copie de travail)
> @@ -1,8 +1,8 @@
> -harbour (1.0.0.RC2) unstable; urgency=low
> +harbour (1.0.0-1) unstable; urgency=low
>
>   * Lot of new stuff see changelog
>
> - -- guy.roussin <guy.roussin@teledetection.fr>  Thu, 03 Jul 2008  
> 14:57:48 +0200
> + -- guy.roussin <guy.roussin@teledetection.fr>  Mon, 28 Jul 2008  
> 15:40:38 +0200
>
> harbour (0.45.0-0.1) unstable; urgency=low
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Jul 28 10:02:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 10:02:16 2008
Subject: [Harbour] Re: 2008-07-22 12:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48879E09.6030509@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48879E09.6030509@mail.udg.mx>
Message-ID: <20080728140211.GB28593@34-mo7-2.acn.waw.pl>

On Wed, 23 Jul 2008, David Arturo Macias Corona wrote:

Hi David,

> >2008-07-22 12:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> >  * harbour/source/rtl/filesys.c
> >    + implemented hb_fsGetAttr() and hb_fsGetFileTime() for DOS, MS-Win,
> >      OS2 and *nixes. Please test it on different platforms.
> What kind of tests ? Can you post some test ?

I guess the first one you've already done - the modifications can
be compiled under OS2.
The second one is a runtime test. You can use the code below for it.
Just try if it works. Please remember that time resolution depends
on used FS and OS API. In OS2 it's 2 seconds.

best regards,
Przemek


#include "fileio.ch"
proc main()
local cFile := "_tst.tmp"
set date format to "YYYY-MM-DD"
ferase( cFile )
fclose( fcreate( cFile ) )
? HB_FSETDATETIME( cFile, 0d20070521, "21:45:37.123" )
? HB_FSETATTR( cFile, FC_READONLY )
aeval( directory( cFile ), { |x| qout( x[1], x[2], x[3], x[4], x[5] ) } )
? HB_FGETDATETIME( cFile ), "0x" + HB_NUMTOHEX( HB_FGETATTR( cFile ) )
? HB_FSETATTR( cFile, ;
               HB_BITOR( HB_FGETATTR( cFile ), FC_HIDDEN, FC_SYSTEM ) )
aeval( directory( cFile ), { |x| qout( x[1], x[2], x[3], x[4], x[5] ) } )
? HB_FGETDATETIME( cFile ), "0x" + HB_NUMTOHEX( HB_FGETATTR( cFile ) )
return

#pragma begindump

#include "hbapi.h"
#include "hbapiitm.h"
#include "hbapifs.h"
#include "hbapierr.h"
#include "hbdate.h"

HB_FUNC( HB_FSETDATETIME )
{
   char * szFile = hb_parc( 1 );
   if( szFile )
   {
      PHB_ITEM pDate, pTime;
      long lJulian, lMillisec;

      pDate = hb_param( 2, HB_IT_DATE );
      lJulian = pDate ? hb_itemGetDL( pDate ) : 0;
      pTime = hb_param( 3, HB_IT_STRING );
      if( pTime )
      {
         int hour = 0, minute = 0, second = 0, millisec = 0;
         hb_timeStrGet( hb_itemGetCPtr( pTime ), &hour, &minute,
                                                 &second, &millisec );
         lMillisec = hb_timeStampEncode( hour, minute, second, millisec );
      }
      else
         lMillisec = -1;
      hb_retl( hb_fsSetFileTime( ( BYTE * ) szFile, lJulian, lMillisec ) );
   }
   else
      hb_errRT_BASE( EG_ARG, 2021, NULL, HB_ERR_FUNCNAME,
                     HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( HB_FGETDATETIME )
{
   char * szFile = hb_parc( 1 );
   if( szFile )
   {
      long lJulian, lMillisec;
      if( hb_fsGetFileTime( ( BYTE * ) szFile, &lJulian, &lMillisec ) )
      {
         char szDateTime[ 24 ];
         hb_retc( hb_dateTimeStampStr( szDateTime, lJulian, lMillisec ) );
      }
      else
         hb_retc( NULL );
   }
   else
      hb_errRT_BASE( EG_ARG, 2021, NULL, HB_ERR_FUNCNAME,
                     HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( HB_FSETATTR )
{
   char * szFile = hb_parc( 1 );
   if( szFile && ISNUM( 2 ) )
   {
      hb_retl( hb_fsSetAttr( ( BYTE * ) szFile, hb_parnl( 2 ) ) );
   }
   else
      hb_errRT_BASE( EG_ARG, 2021, NULL, HB_ERR_FUNCNAME,
                     HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( HB_FGETATTR )
{
   char * szFile = hb_parc( 1 );
   if( szFile )
   {
      ULONG ulAttr;
      if( hb_fsGetAttr( ( BYTE * ) szFile, &ulAttr ) )
         hb_retnint( ulAttr );
      else
         hb_retni( -1 );
   }
   else
      hb_errRT_BASE( EG_ARG, 2021, NULL, HB_ERR_FUNCNAME,
                     HB_ERR_ARGS_BASEPARAMS );
}
#pragma enddump
From lorenzo.fiorini at gmail.com  Mon Jul 28 10:02:31 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jul 28 10:16:33 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
Message-ID: <9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>

On Sat, Jul 26, 2008 at 12:16 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Is there anything missing/pending for 1.0.0 Final?

I've just updated my local copy at the actual svn and the main
difference I see is still tget.prg.
I use the revision 8390.

The main problem is that fields with a picture like "99.99" can return
values like 1234 if the user doesn't type the dot ( or comma ) and
thus generate RT errors of field size.

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Jul 28 10:23:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 10:23:10 2008
Subject: [Harbour] 2008-07-28 16:22 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807281423.m6SEN5Yl029228@31-mo5-4.acn.waw.pl>

2008-07-28 16:22 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filesys.c
    + use utime() to set file date and time in all dos builds
      not only in DJGPP.

best regards
Przemek
From harbour.01 at syenar.hu  Mon Jul 28 10:25:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 10:25:19 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
Message-ID: <1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>

Hi Lorenzo,

Can you post a small example replicating the problem?

Brgds,
Viktor

On 2008.07.28., at 16:02, Lorenzo Fiorini wrote:

> On Sat, Jul 26, 2008 at 12:16 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> Is there anything missing/pending for 1.0.0 Final?
>
> I've just updated my local copy at the actual svn and the main
> difference I see is still tget.prg.
> I use the revision 8390.
>
> The main problem is that fields with a picture like "99.99" can return
> values like 1234 if the user doesn't type the dot ( or comma ) and
> thus generate RT errors of field size.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From guy.roussin at teledetection.fr  Mon Jul 28 10:31:39 2008
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon Jul 28 10:31:45 2008
Subject: [Harbour] 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20080728135532.GA28593@34-mo7-2.acn.waw.pl>
References: <01c8f0b3$Blat.v2.6.2$4f89d18c$1020bfb6a29e@127.0.0.1>	<488DCE19.3070604@teledetection.fr>
	<20080728135532.GA28593@34-mo7-2.acn.waw.pl>
Message-ID: <488DD84B.8090807@teledetection.fr>

Hi Przemek, Viktor,

I'm not a debian maintainer but i think that harbour package
need to go in the debian unstable branch (sid) even if
harbour is stable itself. Because debian support 10 architectures
(alpha,amd64,arm,hppa,i386,ia64,mips,mipsel,powerpc,sparc)
If thereis no compilation errors and no (critical, grave or seriuos)
bugs the package went in testing (lenny).

And stable after the freezing of testing (dec 2008 ?)

Now we need a debian maintainer ...

Guy



Przemyslaw Czerpak a ?crit :
> On Mon, 28 Jul 2008, Guy Roussin wrote:
> 
> Hi Guy,
> 
>> This little patch for debian final release ...
> 
> Index: debian/changelog
> ===================================================================
> --- debian/changelog    (r??vision 9015)
> +++ debian/changelog    (copie de travail)
> @@ -1,8 +1,8 @@
> -harbour (1.0.0.RC2) unstable; urgency=low
> +harbour (1.0.0-1) unstable; urgency=low
> 
>    * Lot of new stuff see changelog
> 
> I think it's also time to change project status in debian builds to:
> +harbour (1.0.0-1) stable; urgency=low
> 
> best regards,
> Przemek
From druzus at acn.waw.pl  Mon Jul 28 10:42:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 10:42:38 2008
Subject: [Harbour] 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <488DD84B.8090807@teledetection.fr>
References: <01c8f0b3$Blat.v2.6.2$4f89d18c$1020bfb6a29e@127.0.0.1>
	<488DCE19.3070604@teledetection.fr>
	<20080728135532.GA28593@34-mo7-2.acn.waw.pl>
	<488DD84B.8090807@teledetection.fr>
Message-ID: <20080728144232.GA29375@34-mo7-2.acn.waw.pl>

On Mon, 28 Jul 2008, Guy Roussin wrote:

Hi Guy,

> I'm not a debian maintainer but i think that harbour package
> need to go in the debian unstable branch (sid) even if
> harbour is stable itself. Because debian support 10 architectures
> (alpha,amd64,arm,hppa,i386,ia64,mips,mipsel,powerpc,sparc)
> If thereis no compilation errors and no (critical, grave or seriuos)
> bugs the package went in testing (lenny).

I build Harbour on most of the above platforms (AFAIR all)
so I think it should pass compilation tests though Debian has
some strict policy rules for which we may need to update the code.
It will be good the receive basic information about the tests
results ASAP.

> And stable after the freezing of testing (dec 2008 ?)
> Now we need a debian maintainer ...

Yes we do. Does any one knows someone or can contact with Debian
to update the Harbour version they keep in their repository and
start these tests?
AFAIR they still some very old Harbour version.

BTW I can update linking library list to clean the warnings
about unused shared libraries.

Does debhelper reports anything else?

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Jul 28 10:43:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 10:43:55 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
Message-ID: <9C7D627E-31AA-4D52-A20A-51B8ED7760AE@syenar.hu>


On 2008.07.28., at 16:02, Lorenzo Fiorini wrote:

> On Sat, Jul 26, 2008 at 12:16 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> Is there anything missing/pending for 1.0.0 Final?
>
> I've just updated my local copy at the actual svn and the main
> difference I see is still tget.prg.
> I use the revision 8390.
>
> The main problem is that fields with a picture like "99.99" can return
> values like 1234 if the user doesn't type the dot ( or comma ) and
> thus generate RT errors of field size.

I did a quick test in rto_get.prg with picture "99.99" and
typing "1234", but Harbour returned 12.34, exactly the same
as Clipper, so so far I couldn't replicate this effect.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul 28 10:44:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 10:44:07 2008
Subject: [Harbour] 2008-07-28 15:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <488DD84B.8090807@teledetection.fr>
References: <01c8f0b3$Blat.v2.6.2$4f89d18c$1020bfb6a29e@127.0.0.1>	<488DCE19.3070604@teledetection.fr>
	<20080728135532.GA28593@34-mo7-2.acn.waw.pl>
	<488DD84B.8090807@teledetection.fr>
Message-ID: <B3EAAEA4-CA7C-4F5F-914F-864BC715569F@syenar.hu>

Okay, this sounds reasonable to me, that's why I was asking it.

Brgds,
Viktor

On 2008.07.28., at 16:31, Guy Roussin wrote:

> Hi Przemek, Viktor,
>
> I'm not a debian maintainer but i think that harbour package
> need to go in the debian unstable branch (sid) even if
> harbour is stable itself. Because debian support 10 architectures
> (alpha,amd64,arm,hppa,i386,ia64,mips,mipsel,powerpc,sparc)
> If thereis no compilation errors and no (critical, grave or seriuos)
> bugs the package went in testing (lenny).
>
> And stable after the freezing of testing (dec 2008 ?)
>
> Now we need a debian maintainer ...
>
> Guy
>
>
>
> Przemyslaw Czerpak a ?crit :
>> On Mon, 28 Jul 2008, Guy Roussin wrote:
>> Hi Guy,
>>> This little patch for debian final release ...
>> Index: debian/changelog
>> ===================================================================
>> --- debian/changelog    (r??vision 9015)
>> +++ debian/changelog    (copie de travail)
>> @@ -1,8 +1,8 @@
>> -harbour (1.0.0.RC2) unstable; urgency=low
>> +harbour (1.0.0-1) unstable; urgency=low
>>   * Lot of new stuff see changelog
>> I think it's also time to change project status in debian builds to:
>> +harbour (1.0.0-1) stable; urgency=low
>> best regards,
>> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Mon Jul 28 10:44:35 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jul 28 10:44:41 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
	<1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>
Message-ID: <9257026e0807280744r5d1fc892mebe928989e9ae937@mail.gmail.com>

On Mon, Jul 28, 2008 at 4:25 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Can you post a small example replicating the problem?

PROCEDURE MAIN
 local getlist := {}
 local c1 := 99.99
 clear screen
 @ 1,1 get c1 pict "@ZE 99.99"
 read
 @ 3,1 say c1
 wait
RETURN

if you type 1234 you'll get 1234 while in C53b and previous tget.prg
you'll get 12.34.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Mon Jul 28 10:46:42 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jul 28 10:46:46 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <9C7D627E-31AA-4D52-A20A-51B8ED7760AE@syenar.hu>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
	<9C7D627E-31AA-4D52-A20A-51B8ED7760AE@syenar.hu>
Message-ID: <9257026e0807280746l4dc0b406n9eda9dcc7bb3b93b@mail.gmail.com>

On Mon, Jul 28, 2008 at 4:43 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I did a quick test in rto_get.prg with picture "99.99" and
> typing "1234", but Harbour returned 12.34, exactly the same
> as Clipper, so so far I couldn't replicate this effect.

It is the picture function @ZE that makes the difference.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Jul 28 10:49:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 10:50:08 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <9257026e0807280744r5d1fc892mebe928989e9ae937@mail.gmail.com>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
	<1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>
	<9257026e0807280744r5d1fc892mebe928989e9ae937@mail.gmail.com>
Message-ID: <A4DF58C2-2821-4809-B34C-9B3B55CAF1DC@syenar.hu>

Thanks, the culprit is the 'Z' picture.

Brgds,
Viktor

On 2008.07.28., at 16:44, Lorenzo Fiorini wrote:

> On Mon, Jul 28, 2008 at 4:25 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> Can you post a small example replicating the problem?
>
> PROCEDURE MAIN
> local getlist := {}
> local c1 := 99.99
> clear screen
> @ 1,1 get c1 pict "@ZE 99.99"
> read
> @ 3,1 say c1
> wait
> RETURN
>
> if you type 1234 you'll get 1234 while in C53b and previous tget.prg
> you'll get 12.34.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Jul 28 11:15:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 11:15:53 2008
Subject: [Harbour] 2008-07-28 17:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807281515.m6SFFlpT032426@31-mo5-4.acn.waw.pl>

2008-07-28 17:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    ! set default color before raw scrolling in console emulation
      mode

best regards
Przemek
From druzus at acn.waw.pl  Mon Jul 28 11:29:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 11:29:09 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <A4DF58C2-2821-4809-B34C-9B3B55CAF1DC@syenar.hu>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
	<1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>
	<9257026e0807280744r5d1fc892mebe928989e9ae937@mail.gmail.com>
	<A4DF58C2-2821-4809-B34C-9B3B55CAF1DC@syenar.hu>
Message-ID: <20080728152904.GA32586@34-mo7-2.acn.waw.pl>

On Mon, 28 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Thanks, the culprit is the 'Z' picture.

Rather 'E'. Picture '@E 99.99' is enough to replicate the problem.
Please also note that during typing comma ',' is replaced by dot '.'
and there is also problem with returned value. If you type only
'1' and ENTER then the return value is 1 instead of 1.00 so the
number is not formatted to the picture. Probably resolving the
problem with ',' replaced by '.' will also resolve other side effects.

best regards,
Przemek
From makis1970 at gmail.com  Mon Jul 28 11:48:34 2008
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Mon Jul 28 11:53:01 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <20080728152904.GA32586@34-mo7-2.acn.waw.pl>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>	<1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>	<9257026e0807280744r5d1fc892mebe928989e9ae937@mail.gmail.com>	<A4DF58C2-2821-4809-B34C-9B3B55CAF1DC@syenar.hu>
	<20080728152904.GA32586@34-mo7-2.acn.waw.pl>
Message-ID: <001a01c8f0c9$66018ed0$3204ac70$@com>

Hi Przemek,
This is similar with something I was searching the last days. Under DOS and
independent from the writing language when you press "." from the numeric
keypad you are always getting "." but under windows the char is language
dependant. Is it possible to add something like HB_ExtLastKey that will
return the pressed key or even better a way to overcomes the windows
translation? The funny thing about this is that if we change the decimal
symbol from the regional and language options-customize from "." to "," the
Excell writes always the corresponding value (numeric keypad), but under
notepad , (x)Harbour we are getting a value that corresponds to the
language.

Brgds,
Mike Evans


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, July 28, 2008 6:29 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Harbour 1.0.0 Final

On Mon, 28 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Thanks, the culprit is the 'Z' picture.

Rather 'E'. Picture '@E 99.99' is enough to replicate the problem.
Please also note that during typing comma ',' is replaced by dot '.'
and there is also problem with returned value. If you type only
'1' and ENTER then the return value is 1 instead of 1.00 so the
number is not formatted to the picture. Probably resolving the
problem with ',' replaced by '.' will also resolve other side effects.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Jul 28 12:20:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 12:20:36 2008
Subject: [Harbour] 2008-07-28 18:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>

2008-07-28 18:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/tget.prg
    ! fixed translation comma/dot translation for pictures with "@E"
      Viktor, please test it - I'm not very familiar with GET code
      and it's possible that I made sth wrong

best regards
Przemek
From harbour.01 at syenar.hu  Mon Jul 28 12:22:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 12:22:36 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <20080728152904.GA32586@34-mo7-2.acn.waw.pl>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
	<1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>
	<9257026e0807280744r5d1fc892mebe928989e9ae937@mail.gmail.com>
	<A4DF58C2-2821-4809-B34C-9B3B55CAF1DC@syenar.hu>
	<20080728152904.GA32586@34-mo7-2.acn.waw.pl>
Message-ID: <664220FA-35D1-4984-93F9-8789E91ECDF1@syenar.hu>

>> Thanks, the culprit is the 'Z' picture.

Yes, you're right, I mixed them.

>> Rather 'E'. Picture '@E 99.99' is enough to replicate the problem.
> Please also note that during typing comma ',' is replaced by dot '.'
> and there is also problem with returned value. If you type only
> '1' and ENTER then the return value is 1 instead of 1.00 so the
> number is not formatted to the picture. Probably resolving the
> problem with ',' replaced by '.' will also resolve other side effects.

Okay. I don't want to touch this code at this point,
as I feel to make more harm than good. If anyone wants
to jump on these, it's alright though. The only thing I'd
suggest is to add test cases to rto_get.prg for all the
cases covered.

[ I'll add some ASAP. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul 28 12:46:00 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 12:46:06 2008
Subject: [Harbour] 2008-07-28 18:44 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f0d1$Blat.v2.6.2$6a404b6e$1e64cfc2334c@127.0.0.1>

2008-07-28 18:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * debian/changelog
     * Applied Guy's patch.

   * tests/rto_get.prg
     + Added two more test cases.
     ; They look good with latest tget.prg change.
--
Brgds,
Viktor

From info at fsgiudice.com  Mon Jul 28 13:22:10 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jul 28 13:22:20 2008
Subject: [Harbour] Error in Memo functions handling a soft CR
In-Reply-To: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
References: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
Message-ID: <488E0042.8090705@fsgiudice.com>

Hi Przemek,

I have found an error in memo functions.

If line is exactly of nLineLength + 1 space + SOFTCR then error raises up.

Checked with clipper 5.2c

Try this:

#define HB_HARDCR               ( Chr( 13 ) + Chr( 10 ) )
#define HB_SOFTCR               ( Chr( 141 ) + Chr( 10 ) )

PROCEDURE Main()

   LOCAL cText
   LOCAL nLineLenght := 70

   // this string has to be exactly of 70 chars + 1 space + SOFTCR + 
other chars
   cText := "LINE 1 - This is a line longer than line width, so it is 
splitted into " + HB_SOFTCR + ;
            "two lines" + HB_HARDCR

   ? MLPos( cText, nLineLenght, 2 ), "Should be 74"
   ? MLCToPos( cText, nLineLenght, 2, 0 ), "Should be 74"

   ? MemoLine( cText, nLineLenght, 1 )
   ? MemoLine( cText, nLineLenght, 2 )
   ? SubStr( cText, MLCToPos( cText, nLineLenght, 2, 0 ) )
   aPos := MPosToLC( cText, nLineLenght, 72 )
   ? "Line ", aPos[ 1 ], ", Col ", aPos[ 2 ], " (Should be 2, 0)"

RETURN


From info at fsgiudice.com  Mon Jul 28 13:25:46 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Jul 28 13:25:54 2008
Subject: [Harbour] Error in Memo functions handling a soft CR
In-Reply-To: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
References: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
Message-ID: <488E011A.3090304@fsgiudice.com>

Hi Przemek,

Sorry, previous message sent without greetings.

Best Regards

Francesco


From harbour.01 at syenar.hu  Mon Jul 28 13:39:51 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 13:40:01 2008
Subject: [Harbour] 2008-07-28 18:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
References: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
Message-ID: <0FCAAC2F-1210-4D2C-890C-E468444F6045@syenar.hu>

Thanks Przemek. According to rto_get.prg and some
quick tests in my app, it does seem to work fine.

Brgds,
Viktor

On 2008.07.28., at 18:20, Przemyslaw Czerpak wrote:

> 2008-07-28 18:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/tget.prg
>    ! fixed translation comma/dot translation for pictures with "@E"
>      Viktor, please test it - I'm not very familiar with GET code
>      and it's possible that I made sth wrong
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Jul 28 14:43:49 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 14:43:54 2008
Subject: [Harbour] 2008-07-28 20:41 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f0e1$Blat.v2.6.2$dfdc9fe8$196846c036bc@127.0.0.1>

2008-07-28 20:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * tests/ainstest.prg
   * tests/array16.prg
   * tests/arrays.prg
   * tests/atest.prg
   * tests/clasinit.prg
   * tests/classch.prg
   * tests/classes.prg
   * tests/dates.prg
   * tests/db_brows.prg
   * tests/ddate.prg
   * tests/debugtst.prg
   * tests/dynobj.prg
   * tests/files.prg
   * tests/gfx.prg
   * tests/inline.prg
   * tests/keywords.prg
   * tests/objects.prg
   * tests/onidle.prg
   * tests/readhrb.prg
   * tests/rtfclass.prg
   * tests/speed.prg
   * tests/switch.prg
   * tests/test_all.prg
   * tests/testbrw.prg
   * tests/testcgi.prg
   * tests/testcls.prg
   * tests/testget.prg
   * tests/testhtml.prg
   * tests/testidle.prg
   * tests/testinit.prg
   * tests/testntx.prg
   * tests/testpers.prg
   * tests/testrdd2.prg
   * tests/teststr.prg
   * tests/tstblock.prg
   * tests/tstmacro.prg
   * tests/videotst.prg
   * tests/vidtest.prg
   * tests/wcecon.prg
     * Cleanups. SVN header, '=' operator usage.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Jul 28 15:31:32 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Jul 28 15:31:36 2008
Subject: [Harbour] 2008-07-28 18:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
References: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
Message-ID: <9257026e0807281231u5bf57ba9g98be0f3ab9ae59af@mail.gmail.com>

On Mon, Jul 28, 2008 at 6:20 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> 2008-07-28 18:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/tget.prg
>    ! fixed translation comma/dot translation for pictures with "@E"
>      Viktor, please test it - I'm not very familiar with GET code
>      and it's possible that I made sth wrong

It seems ok in my apps.

regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Jul 28 18:10:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 18:10:18 2008
Subject: [Harbour] DJGPP warning
Message-ID: <A4645703-444B-4BEC-9C07-5EC4F5BD017D@syenar.hu>

../../filesys.c: In function 'hb_fsGetAttr':
../../filesys.c:991: warning: pointer targets in passing argument 1 of  
'_chmod' differ in signedness

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Jul 28 18:11:09 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Jul 28 18:11:14 2008
Subject: [Harbour] 2008-07-29 00:10 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f0fe$Blat.v2.6.2$d6beac5e$1bf8a400fb42@127.0.0.1>

2008-07-29 00:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/hbhpdf/Makefile
     ! Refixed to exclude hbhpdf from DOS builds.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Jul 28 22:58:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 22:58:57 2008
Subject: [Harbour] 2008-07-29 04:58 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807290258.m6T2wpZB006266@31-mo5-4.acn.waw.pl>

2008-07-29 04:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filesys.c
    ! fixed casting in DOS builds

best regards
Przemek
From druzus at acn.waw.pl  Mon Jul 28 23:30:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Jul 28 23:31:01 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <001a01c8f0c9$66018ed0$3204ac70$@com>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
	<1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>
	<9257026e0807280744r5d1fc892mebe928989e9ae937@mail.gmail.com>
	<A4DF58C2-2821-4809-B34C-9B3B55CAF1DC@syenar.hu>
	<20080728152904.GA32586@34-mo7-2.acn.waw.pl>
	<001a01c8f0c9$66018ed0$3204ac70$@com>
Message-ID: <20080729033055.GA6107@34-mo7-2.acn.waw.pl>

On Mon, 28 Jul 2008, Mike Evans (Gmail) wrote:

Hi Mike,

> This is similar with something I was searching the last days. Under DOS and
> independent from the writing language when you press "." from the numeric
> keypad you are always getting "." but under windows the char is language
> dependant. Is it possible to add something like HB_ExtLastKey that will
> return the pressed key or even better a way to overcomes the windows
> translation? The funny thing about this is that if we change the decimal
> symbol from the regional and language options-customize from "." to "," the
> Excell writes always the corresponding value (numeric keypad), but under
> notepad , (x)Harbour we are getting a value that corresponds to the
> language.

It's yet another problem: MS-Win keyboard handling.
It is as is and we have to accept it or we can add workaround
for some chosen keyboard drivers. Unfortunately in some
countries it may create more new troubles then fix known problems.
If we find some MS-Win user with enough experience to chose
some solutions which will be portable then we can hardcode it.
Otherwise I can only suggest some workarounds which may but does
not have to help some people. In this case we can hardcode in
GTWIN and GTWVT the behavior of numpad dot key using its scan
code but I do not know if it's good idea in non Latin/Greek based
countries (???) which may need some different behavior. Opinions?

Please also note that the computer world is changing. The time
of PC keyboard "standard" is finishing and new devices uses it's
own keyboards very often not compatible so code which is to strictly
hardware oriented has problems. And I'm not talking about famous
MS-Win dedicated keyboard with 3 keys only ;-)

   +====================+\
   |   +------+-----+   |o|
   |   | CTRL | ALT |   | |
   |   +-+----+---+-+   | |
   |     | DELETE |     | |
   |     +--------+     | |
   +====================+ |
    \____________________\|

best regards,
Przemek
From druzus at acn.waw.pl  Tue Jul 29 00:12:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 29 00:12:35 2008
Subject: [Harbour] Error in Memo functions handling a soft CR
In-Reply-To: <488E0042.8090705@fsgiudice.com>
References: <200807281620.m6SGKT6f007010@31-mo5-4.acn.waw.pl>
	<488E0042.8090705@fsgiudice.com>
Message-ID: <20080729041228.GA7513@34-mo7-2.acn.waw.pl>

On Mon, 28 Jul 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> I have found an error in memo functions.
> If line is exactly of nLineLength + 1 space + SOFTCR then error raises up.
> Checked with clipper 5.2c
> Try this:
[...]

Thanks for the example.
Looks that I missed some rules bound with ML*() functions
which are not replicated in current code.
I'll check it and try to fix ASAP.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jul 29 03:18:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 03:18:30 2008
Subject: [Harbour] Harbour 1.0.0 Final
In-Reply-To: <20080729033055.GA6107@34-mo7-2.acn.waw.pl>
References: <5CE0A291-2A82-4948-A1F1-AD8B666D251C@syenar.hu>
	<9257026e0807280702v29fd7d43u66e63942a797a0b0@mail.gmail.com>
	<1FACCB7A-770C-4968-BBDC-17D7EF549950@syenar.hu>
	<9257026e0807280744r5d1fc892mebe928989e9ae937@mail.gmail.com>
	<A4DF58C2-2821-4809-B34C-9B3B55CAF1DC@syenar.hu>
	<20080728152904.GA32586@34-mo7-2.acn.waw.pl>
	<001a01c8f0c9$66018ed0$3204ac70$@com>
	<20080729033055.GA6107@34-mo7-2.acn.waw.pl>
Message-ID: <80F5E638-7E40-453B-A878-C16F4D24EE78@syenar.hu>

>
Hi Przemek,

> It's yet another problem: MS-Win keyboard handling.
> It is as is and we have to accept it or we can add workaround
> for some chosen keyboard drivers. Unfortunately in some
> countries it may create more new troubles then fix known problems.
> If we find some MS-Win user with enough experience to chose
> some solutions which will be portable then we can hardcode it.
> Otherwise I can only suggest some workarounds which may but does
> not have to help some people. In this case we can hardcode in
> GTWIN and GTWVT the behavior of numpad dot key using its scan
> code but I do not know if it's good idea in non Latin/Greek based
> countries (???) which may need some different behavior. Opinions?

I wouldn't confuse this matter any more than it is already.

> Please also note that the computer world is changing. The time
> of PC keyboard "standard" is finishing and new devices uses it's
> own keyboards very often not compatible so code which is to strictly
> hardware oriented has problems. And I'm not talking about famous
> MS-Win dedicated keyboard with 3 keys only ;-)
>
>   +====================+\
>   |   +------+-----+   |o|
>   |   | CTRL | ALT |   | |
>   |   +-+----+---+-+   | |
>   |     | DELETE |     | |
>   |     +--------+     | |
>   +====================+ |
>    \____________________\|

K_CTRL_ALT_DEL :)

Brgds,
Viktor

From dmacias at mail.udg.mx  Tue Jul 29 03:37:41 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Jul 29 03:37:44 2008
Subject: [Harbour] Re: 2008-07-22 12:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <488EC8C5.2060504@mail.udg.mx>

Przemek:

 >I guess the first one you've already done - the modifications can
 >be compiled under OS2.
 >The second one is a runtime test. You can use the code below for it.
 >Just try if it works. Please remember that time resolution depends
 >on used FS and OS API. In OS2 it's 2 seconds.

I do not know what are you doing, but results are below  :-)

Where are output of second aeval() ?
aeval( directory( cFile ), { |x| qout( x[1], x[2], x[3], x[4], x[5] ) } )

Yes, is HIDDEN/SYSTEM/READONLY:
21/05/07  9:45p             0    124 -shr  _tst.tmp

David Macias

.T.
.T.
_tst.tmp          0 2007-05-21 21:45:36 R
2007-05-21 21:45:36.000 0x1
.T.
2007-05-21 21:45:36.000 0x7

From harbour.01 at syenar.hu  Tue Jul 29 04:39:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 04:39:41 2008
Subject: [Harbour] Pelles C 5.00.13 64bit problems
Message-ID: <F04D7A9F-54E9-4CD4-A732-E13D0521B5D2@syenar.hu>

Hi all,

in hbct:
atnum.c(254): fatal error: Internal error: reduce_tree().

hbinet.c related binaries fail to link because:
POLINK: error: Unresolved external symbol '__WSAFDISet'.

[ These rather look like Pelles C problems than Harbour ones. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul 29 04:41:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 04:41:24 2008
Subject: [Harbour] 2008-07-29 04:58 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807290258.m6T2wpZB006266@31-mo5-4.acn.waw.pl>
References: <200807290258.m6T2wpZB006266@31-mo5-4.acn.waw.pl>
Message-ID: <DA1F20AC-35A5-4460-8AE8-C616B42B1E39@syenar.hu>

Thanks a lot.

Brgds,
Viktor

On 2008.07.29., at 4:58, Przemyslaw Czerpak wrote:

> 2008-07-29 04:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/filesys.c
>    ! fixed casting in DOS builds
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Jul 29 09:17:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 09:17:11 2008
Subject: [Harbour] MSVC recent warning + BCC58 old one
Message-ID: <A3E8315F-F4B9-496B-9C34-67E9EC404C37@syenar.hu>

Hi all,

1) MSVC new one:
source\rtl\gtwvt\gtwvt.c(2187) : warning C4244: 'argument' :  
conversion from 'HB_LONG' to 'LONG', possible loss of data

2) BCC58 old one:
Warning W8017 C:\devl\BCC58\Include\stdint.h 77: Redefinition of  
'INT16_MIN' is not identical
Warning W8017 C:\devl\BCC58\Include\stdint.h 78: Redefinition of  
'INT32_MIN' is not identical
Warning W8017 C:\devl\BCC58\Include\stdint.h 79: Redefinition of  
'INT64_MIN' is not identical
Warning W8017 C:\devl\BCC58\Include\stdint.h 82: Redefinition of  
'INT16_MAX' is not identical
Warning W8017 C:\devl\BCC58\Include\stdint.h 83: Redefinition of  
'INT32_MAX' is not identical
Warning W8017 C:\devl\BCC58\Include\stdint.h 84: Redefinition of  
'INT64_MAX' is not identical
Warning W8017 C:\devl\BCC58\Include\stdint.h 87: Redefinition of  
'UINT16_MAX' is not identical
Warning W8017 C:\devl\BCC58\Include\stdint.h 88: Redefinition of  
'UINT32_MAX' is not identical
Warning W8017 C:\devl\BCC58\Include\stdint.h 89: Redefinition of  
'UINT64_MAX' is not identical

Couldn't we use HB_ prefixed versions of *_MAX inside Harbour to avoid  
the above problem?

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul 29 09:24:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 09:25:07 2008
Subject: [Harbour] POCC 4.5/5.0 warnings
Message-ID: <F958F357-F462-4306-88AE-A4400C7AF922@syenar.hu>

Hi all,

1) Both POCC 4.5 and 5.0:
../../extrap.c(258): warning #2115: Local 'ef' is initialized but  
never used.
../../deflate.c(327): warning #2115: Local 'hash_head' is initialized  
but never used.
../../print.c(94): warning #2115: Local 'uiPort' is initialized but  
never used.
../../print.c(145): warning #2115: Local 'uiPort' is initialized but  
never used.

2) POCC 5.0 only:
../../disksphb.c(284): warning #2154: Unreachable code.
contrib\hbsqlit3\sqlite3\sqlite3.c(14282): warning #2115: Local  
'errorflag' is initialized but never used.
contrib\hbsqlit3\sqlite3\sqlite3.c(22950): warning #2115: Local  
'isTemp' is initialized but never used.
contrib\hbsqlit3\sqlite3\sqlite3.c(38120): warning #2115: Local 'db'  
is initialized but never used.
contrib\hbsqlit3\sqlite3\sqlite3.c(41579): warning #2115: Local 'vals'  
is initialized but never used.
contrib\hbsqlit3\sqlite3\sqlite3.c(53300): warning #2115: Local 'pOld'  
is initialized but never used.
contrib\hbsqlit3\sqlite3\sqlite3.c(59144): warning #2115: Local  
'regRecord' is initialized but never used.
contrib\hbsqlit3\sqlite3\sqlite3.c(59143): warning #2115: Local  
'regData' is initialized but never used.

3) POCC 5.0 64 bit only:
../../gtwvg.c(2629): warning #2006: [ISO] Conversion from 'HWND' to  
'long int' is compiler dependent.
../../gtwvg.c(2629): warning #2052: Conversion from 'HWND' to 'long  
int' is undefined.
../../gtwvg.c(3317): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../gtwvg.c(3317): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../gtwvg.c(3323): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../gtwvg.c(3323): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(365): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../wvgcore.c(365): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(453): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../wvgcore.c(453): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(479): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../wvgcore.c(479): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(567): warning #2006: [ISO] Conversion from 'void *' to  
'int' is compiler dependent.
../../wvgcore.c(567): warning #2052: Conversion from 'void *' to 'int'  
is undefined.
../../wvgcore.c(2853): warning #2006: [ISO] Conversion from 'HFONT' to  
'unsigned long int' is compiler dependent.
../../wvgcore.c(2853): warning #2052: Conversion from 'HFONT' to  
'unsigned long int' is undefined.
../../wvgcore.c(3016): warning #2006: [ISO] Conversion from 'HBITMAP'  
to 'unsigned long int' is compiler dependent.
../../wvgcore.c(3016): warning #2052: Conversion from 'HBITMAP' to  
'unsigned long int' is undefined.
../../wvgutils.c(603): warning #2006: [ISO] Conversion from 'HCURSOR'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(603): warning #2052: Conversion from 'HCURSOR' to  
'unsigned long int' is undefined.
../../wvgutils.c(703): warning #2006: [ISO] Conversion from 'HMENU' to  
'long int' is compiler dependent.
../../wvgutils.c(703): warning #2052: Conversion from 'HMENU' to 'long  
int' is undefined.
../../wvgutils.c(711): warning #2006: [ISO] Conversion from 'HMENU' to  
'long int' is compiler dependent.
../../wvgutils.c(711): warning #2052: Conversion from 'HMENU' to 'long  
int' is undefined.
../../wvgutils.c(718): warning #2006: [ISO] Conversion from 'HMENU' to  
'long int' is compiler dependent.
../../wvgutils.c(718): warning #2052: Conversion from 'HMENU' to 'long  
int' is undefined.
../../wvgutils.c(924): warning #2006: [ISO] Conversion from 'HMENU' to  
'unsigned long int' is compiler dependent.
../../wvgutils.c(924): warning #2052: Conversion from 'HMENU' to  
'unsigned long int' is undefined.
../../wvgutils.c(961): warning #2006: [ISO] Conversion from 'void *'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(961): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../wvgutils.c(1066): warning #2006: [ISO] Conversion from 'HWND' to  
'unsigned long int' is compiler dependent.
../../wvgutils.c(1066): warning #2052: Conversion from 'HWND' to  
'unsigned long int' is undefined.
../../wvgutils.c(1095): warning #2006: [ISO] Conversion from 'void *'  
to 'int' is compiler dependent.
../../wvgutils.c(1095): warning #2052: Conversion from 'void *' to  
'int' is undefined.
../../wvgutils.c(1279): warning #2006: [ISO] Conversion from 'unsigned  
short int *' to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1279): warning #2052: Conversion from 'unsigned short  
int *' to 'unsigned long int' is undefined.
../../wvgutils.c(1279): warning #2006: [ISO] Conversion from 'unsigned  
short int *' to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1279): warning #2052: Conversion from 'unsigned short  
int *' to 'unsigned long int' is undefined.
../../wvgutils.c(1292): warning #2006: [ISO] Conversion from 'unsigned  
short int *' to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1292): warning #2052: Conversion from 'unsigned short  
int *' to 'unsigned long int' is undefined.
../../wvgutils.c(1388): warning #2006: [ISO] Conversion from 'HCURSOR'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1388): warning #2052: Conversion from 'HCURSOR' to  
'unsigned long int' is undefined.
../../wvgutils.c(1501): warning #2006: [ISO] Conversion from 'void *'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1501): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../wvgutils.c(1515): warning #2006: [ISO] Conversion from 'void *'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1515): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../wvgutils.c(1614): warning #2006: [ISO] Conversion from 'HWND' to  
'unsigned long int' is compiler dependent.
../../wvgutils.c(1614): warning #2052: Conversion from 'HWND' to  
'unsigned long int' is undefined.
../../wvgutils.c(1656): warning #2006: [ISO] Conversion from 'HCURSOR'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1656): warning #2052: Conversion from 'HCURSOR' to  
'unsigned long int' is undefined.
../../wvgutils.c(1688): warning #2006: [ISO] Conversion from 'HBITMAP'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1688): warning #2052: Conversion from 'HBITMAP' to  
'unsigned long int' is undefined.
../../wvgutils.c(1722): warning #2006: [ISO] Conversion from 'HDC' to  
'unsigned long int' is compiler dependent.
../../wvgutils.c(1722): warning #2052: Conversion from 'HDC' to  
'unsigned long int' is undefined.
../../wvgutils.c(1749): warning #2006: [ISO] Conversion from 'HBRUSH'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1749): warning #2052: Conversion from 'HBRUSH' to  
'unsigned long int' is undefined.
../../wvgutils.c(1798): warning #2006: [ISO] Conversion from 'HWND' to  
'long int' is compiler dependent.
../../wvgutils.c(1798): warning #2052: Conversion from 'HWND' to 'long  
int' is undefined.
../../wvgutils.c(1827): warning #2006: [ISO] Conversion from 'HFONT'  
to 'unsigned long int' is compiler dependent.
../../wvgutils.c(1827): warning #2052: Conversion from 'HFONT' to  
'unsigned long int' is undefined.
../../wvgutils.c(2165): warning #2006: [ISO] Conversion from 'HWND' to  
'long int' is compiler dependent.
../../wvgutils.c(2165): warning #2052: Conversion from 'HWND' to 'long  
int' is undefined.
../../hb_btree.c(643): warning #2006: [ISO] Conversion from 'void *'  
to 'unsigned long int' is compiler dependent.
../../hb_btree.c(643): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../hb_btree.c(739): warning #2006: [ISO] Conversion from  
'ioBuffer_T *' to 'unsigned long int' is compiler dependent.
../../hb_btree.c(739): warning #2052: Conversion from 'ioBuffer_T *'  
to 'unsigned long int' is undefined.
../../odbc.c(509): warning #2006: [ISO] Conversion from 'char *' to  
'long int' is compiler dependent.
../../odbc.c(509): warning #2052: Conversion from 'char *' to 'long  
int' is undefined.
../../odbc.c(517): warning #2006: [ISO] Conversion from 'char *' to  
'long int' is compiler dependent.
../../odbc.c(517): warning #2052: Conversion from 'char *' to 'long  
int' is undefined.
../../ole2.c(335): warning #2006: [ISO] Conversion from 'LPDISPATCH'  
to 'long int' is compiler dependent.
../../ole2.c(335): warning #2052: Conversion from 'LPDISPATCH' to  
'long int' is undefined.
contrib\hbsqlit3\sqlite3\sqlite3.c(38229): warning #2006: [ISO]  
Conversion from 'char *' to 'int' is compiler dependent.
contrib\hbsqlit3\sqlite3\sqlite3.c(38229): warning #2052: Conversion  
from 'char *' to 'int' is undefined.
contrib\hbsqlit3\sqlite3\sqlite3.c(38908): warning #2006: [ISO]  
Conversion from 'const char *' to 'int' is compiler dependent.
contrib\hbsqlit3\sqlite3\sqlite3.c(38908): warning #2052: Conversion  
from 'const char *' to 'int' is undefined.
contrib\hbsqlit3\sqlite3\sqlite3.c(58275): warning #2006: [ISO]  
Conversion from 'void *' to 'int' is compiler dependent.
contrib\hbsqlit3\sqlite3\sqlite3.c(58275): warning #2052: Conversion  
from 'void *' to 'int' is undefined.
contrib\hbsqlit3\sqlite3\sqlite3.c(67521): warning #2006: [ISO]  
Conversion from 'char *' to 'int' is compiler dependent.
contrib\hbsqlit3\sqlite3\sqlite3.c(67521): warning #2052: Conversion  
from 'char *' to 'int' is undefined.
../../dllcall.c(507): warning #2006: [ISO] Conversion from 'void *' to  
'unsigned long int' is compiler dependent.
../../dllcall.c(507): warning #2052: Conversion from 'void *' to  
'unsigned long int' is undefined.
../../w32_ole.c(759): warning #2006: [ISO] Conversion from  
'LPDISPATCH' to 'long int' is compiler dependent.
../../w32_ole.c(759): warning #2052: Conversion from 'LPDISPATCH' to  
'long int' is undefined.
../../w32_ole.c(1089): warning #2006: [ISO] Conversion from  
'LPDISPATCH' to 'long int' is compiler dependent.
../../w32_ole.c(1089): warning #2052: Conversion from 'LPDISPATCH' to  
'long int' is undefined.
../../w32_ole.c(1468): warning #2006: [ISO] Conversion from 'void *'  
to 'long int' is compiler dependent.
../../w32_ole.c(1468): warning #2052: Conversion from 'void *' to  
'long int' is undefined.
../../w32_ole.c(1521): warning #2006: [ISO] Conversion from 'void *'  
to 'long int' is compiler dependent.
../../w32_ole.c(1521): warning #2052: Conversion from 'void *' to  
'long int' is undefined.
../../w32_regc.c(94): warning #2006: [ISO] Conversion from 'HKEY' to  
'unsigned long int' is compiler dependent.
../../w32_regc.c(94): warning #2052: Conversion from 'HKEY' to  
'unsigned long int' is undefined.
../../w32_regc.c(116): warning #2006: [ISO] Conversion from 'HKEY' to  
'unsigned long int' is compiler dependent.
../../w32_regc.c(116): warning #2052: Conversion from 'HKEY' to  
'unsigned long int' is undefined.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul 29 09:56:39 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 09:56:51 2008
Subject: [Harbour] Aggregated warnings + contrib removal suggestions
Message-ID: <D1D7E253-3896-4905-AFFB-38323E060320@syenar.hu>

Hi all,

I've attached a full list of raw 'warning' messages in
all of the following builds (rev 9021):

BCC55
BCC58
MinGW 4.12
MSVS 2005
MSVS 2005 C++,
MSVS 2008
MSVS 2008 C++
Pelles C 4.5
Pelles C 5.0
Pelles C 5.0 64 bit
MSVS 2008 C++ 64 bit
DJGPP 4.23 32 bit

As a conclusion, it looks like there are some more
problematic contribs, which I'd like to hereby propose
to discuss further inclusion of the following contribs:

- hbsqlit2  - The interface code is tidy, but the included
               sqlite2 source isn't, moreover, we have hbsqlit3.
- hbwhat32  - It has several warnings and possible bugs and
               it's incompatible with 64 bit Windows.
- hbw32ddr  - This DirectDraw code is rather a code example
               than a full-blown DirectDraw interface
               library, so I'd suggest to move it to /contrib/examples.
- hbziparch - It's C++, we have hbmzip as a successor, the
               interface code is very untidy and the include ZipArchive
               source is not portable enough.

I'd personally propose to remove hbsqlit2, hbziparch, move
hbw32ddr to examples and discuss what to do with hbwhat32.

Notice these these 4 contribs are already excluded from
GNU builds. I'd like to do the same for non-GNU make files
to clean all default builds in the meantime.

Also, there are some contribs which need further work to make
them compile cleanly under 64 bit Windows, just like the core
itself.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul 29 09:57:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 09:58:11 2008
Subject: [Harbour] Aggregated warnings + contrib removal suggestions (with
	attachment)
Message-ID: <5DDEFC3F-D03A-4A81-81C5-703B1FD6DE1A@syenar.hu>

Hi all,

[ I've missed the attachment previously, sorry. ]

I've attached a full list of raw 'warning' messages in
all of the following builds (rev 9021):

BCC55
BCC58
MinGW 4.12
MSVS 2005
MSVS 2005 C++,
MSVS 2008
MSVS 2008 C++
Pelles C 4.5
Pelles C 5.0
Pelles C 5.0 64 bit
MSVS 2008 C++ 64 bit
DJGPP 4.23 32 bit

As a conclusion, it looks like there are some more
problematic contribs, which I'd like to hereby propose
to discuss further inclusion of the following contribs:

- hbsqlit2  - The interface code is tidy, but the included
              sqlite2 source isn't, moreover, we have hbsqlit3.
- hbwhat32  - It has several warnings and possible bugs and
              it's incompatible with 64 bit Windows.
- hbw32ddr  - This DirectDraw code is rather a code example
              than a full-blown DirectDraw interface
              library, so I'd suggest to move it to /contrib/examples.
- hbziparch - It's C++, we have hbmzip as a successor, the
              interface code is very untidy and the include ZipArchive
              source is not portable enough.

I'd personally propose to remove hbsqlit2, hbziparch, move
hbw32ddr to examples and discuss what to do with hbwhat32.

Notice these these 4 contribs are already excluded from
GNU builds. I'd like to do the same for non-GNU make files
to clean all default builds in the meantime.

Also, there are some contribs which need further work to make
them compile cleanly under 64 bit Windows, just like the core
itself.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: warnings.zip
Type: application/zip
Size: 17401 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080729/bbcc902f/warnings.zip
-------------- next part --------------

From rodrmigu at gmail.com  Tue Jul 29 10:20:44 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Tue Jul 29 10:20:49 2008
Subject: [Harbour] How to prevent contribs to not be compiled?
Message-ID: <80b05d460807290720ncad9f4fl47d987b74ba7bae5@mail.gmail.com>

All,

Is there any way to prevent the contribs to not be part of my build? Or is
there any way that I can provide a list of contrib to be compiled with
harbour, like enviroment variable?

Thanks in advance
Rodrigo Moreno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080729/cc90aac7/attachment-0001.html
From mbelgrano at deltain.it  Tue Jul 29 10:23:26 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul 29 10:23:39 2008
Subject: [Harbour] Question regarding ct3 window function
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EE9B@SRV02.deltain.net>

CT windows function is good for modernize application with command like
wopen,wmode,wboard,wmode

is possible having  set a mode where coordinates (row,col) are relative
to current window (useful for porting existing application) ?
actual coordinate addressing in ct3 is MainCoord Mode : coordinates
(row,col) are relative to Main window (actual work in ct standard now )

Will wopen open a true windows (native with title and border)?

is possible define a Screen area different from Application area?
will be usefully in Mobile application 

is planed to add to standard harbour?

Massimo Belgrano


From lorenzo.fiorini at gmail.com  Tue Jul 29 10:27:23 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jul 29 10:27:29 2008
Subject: [Harbour] hbinet.c issue under Mac OS X
Message-ID: <9257026e0807290727g59d71704hf346b3a37c2baf73@mail.gmail.com>

Under Mac OS X 10.5 HB_InetConnect() doesn't connect to HB_InetServer().
The same code works well under Linux and Windows.
I have a simple test that reproduce it, but I know that there are
"few" Mac OS X users here.

Is there anyone interested?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Jul 29 10:32:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 10:32:21 2008
Subject: [Harbour] How to prevent contribs to not be compiled?
In-Reply-To: <80b05d460807290720ncad9f4fl47d987b74ba7bae5@mail.gmail.com>
References: <80b05d460807290720ncad9f4fl47d987b74ba7bae5@mail.gmail.com>
Message-ID: <D2EBE031-0EE5-4FFE-9448-62B5816A3571@syenar.hu>

Hi,

Yes, you can set the envvar HB_CONTRIBLIBS
with the list of your chosen contribs.

(You can also set it to a dummy value to not
build anything - or you choose one small contrib,
like hbmisc or hbbtree.)

[ The above is for the GNU-make system only of course. ]

Brgds,
Viktor

On 2008.07.29., at 16:20, Rodrigo Miguel wrote:

> All,
>
> Is there any way to prevent the contribs to not be part of my build?  
> Or is there any way that I can provide a list of contrib to be  
> compiled with harbour, like enviroment variable?
>
> Thanks in advance
> Rodrigo Moreno
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rodrmigu at gmail.com  Tue Jul 29 11:01:56 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Tue Jul 29 11:02:00 2008
Subject: [Harbour] Re: How to prevent contribs to not be compiled?
Message-ID: <80b05d460807290801u8df04far236bd4d491360cdd@mail.gmail.com>

Hi

> Yes, you can set the envvar HB_CONTRIBLIBS
> with the list of your chosen contribs.

That will work for me...

Thanks
Rodrigo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20080729/f8d1e862/attachment.html
From lorenzo.fiorini at gmail.com  Tue Jul 29 11:18:12 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Jul 29 11:18:16 2008
Subject: [Harbour] Re: hbinet.c issue under Mac OS X
In-Reply-To: <9257026e0807290727g59d71704hf346b3a37c2baf73@mail.gmail.com>
References: <9257026e0807290727g59d71704hf346b3a37c2baf73@mail.gmail.com>
Message-ID: <9257026e0807290818ica9158fo7f8d35ce2b8eaf6a@mail.gmail.com>

On Tue, Jul 29, 2008 at 4:27 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Under Mac OS X 10.5 HB_InetConnect() doesn't connect to HB_InetServer().
> The same code works well under Linux and Windows.

Sorry I was not correct here. Real apps work but the test fails in Win
like it fails in Mac OS X.

Strangely enough it works if I use telnet localhost port so the
problem seems in the client part.

best regards,
Lorenzo
From mbelgrano at deltain.it  Tue Jul 29 11:30:50 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul 29 11:31:00 2008
Subject: [Harbour] Re: hbinet.c issue under Mac OS X
In-Reply-To: <9257026e0807290818ica9158fo7f8d35ce2b8eaf6a@mail.gmail.com>
References: <9257026e0807290727g59d71704hf346b3a37c2baf73@mail.gmail.com>
	<9257026e0807290818ica9158fo7f8d35ce2b8eaf6a@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EEA3@SRV02.deltain.net>

Or in a local firewall
Can you post your code?

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo
Fiorini
Sent: Tuesday, July 29, 2008 5:18 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] Re: hbinet.c issue under Mac OS X

On Tue, Jul 29, 2008 at 4:27 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Under Mac OS X 10.5 HB_InetConnect() doesn't connect to
HB_InetServer().
> The same code works well under Linux and Windows.

Sorry I was not correct here. Real apps work but the test fails in Win
like it fails in Mac OS X.

Strangely enough it works if I use telnet localhost port so the
problem seems in the client part.

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Tue Jul 29 11:37:10 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 11:37:16 2008
Subject: [Harbour] 2008-07-29 17:31 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f190$Blat.v2.6.2$f74cbc08$23c1fb1bd1c@127.0.0.1>

2008-07-29 17:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/make_b32_all.bat
   * contrib/make_vc_all.bat
   * contrib/make_gcc_all.sh
     * Disabled following contribs, to be in sync with the default 
       GNU-make setup:
       hbsqlit2 - Too many warnings in unsupported foreign code. Replacement: hbsqlit3
       hbw32ddr - C++, not maintained, incomplete, warnings.
       hbwhat32 - Problems and warnings, non 64 bit compatible.
       hbziparch - C++, foreign code not well portable, interface 
                   code not Harbour quality. Replacement: hbmzip
     ; NOTE: We should consider what to do with these contribs.
--
Brgds,
Viktor

From cvc at oohg.org  Tue Jul 29 11:44:26 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Tue Jul 29 11:44:39 2008
Subject: [Harbour] problem in memoedit
Message-ID: <488F3ADA.3080901@oohg.org>



hi all:

in this sample

cls
request dbfntx
use segu002p
memoedit(ult_doc,10,10,20,70,.t.)
quit


the cursor disappear and it's very difficult modify the text, because I don't 
know where is the cursor.

Another thing is that when I press ESC the text (abort (y/n)?) is showed.

best regards
Ciro



-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From harbour.01 at syenar.hu  Tue Jul 29 12:04:06 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 12:04:12 2008
Subject: [Harbour] 2008-07-29 18:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f194$Blat.v2.6.2$ba7475ec$1600ce8bbb68@127.0.0.1>

2008-07-29 18:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/memoedit.prg
     ! Fixed so that "Abort (Y/N)" confirmation gets only popped 
       up if _SET_SCOREBOARD is .T.. This way it's C5.x compatible.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Tue Jul 29 12:22:57 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Jul 29 12:23:23 2008
Subject: [Harbour] problem in memoedit
In-Reply-To: <488F3ADA.3080901@oohg.org>
References: <488F3ADA.3080901@oohg.org>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815EEA5@SRV02.deltain.net>

It depend from content your field utl_doc
Write it to disk with memowrit("c:\how.txt",ult_doc) and verify its
contents
It can be Too large or Damaged

Memoedit without userfunction request abort (y/n)?) after pressing esc

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Ciro Vargas
Clemow
Sent: Tuesday, July 29, 2008 5:44 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] problem in memoedit



hi all:

in this sample

cls
request dbfntx
use segu002p
memoedit(ult_doc,10,10,20,70,.t.)
quit


the cursor disappear and it's very difficult modify the text, because I
don't 
know where is the cursor.

Another thing is that when I press ESC the text (abort (y/n)?) is
showed.

best regards
Ciro



-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the
no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more
powerfull )


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From roberbox at gmail.com  Tue Jul 29 12:58:08 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Tue Jul 29 12:58:37 2008
Subject: [Harbour] Starnge behavior in RC2 (MingW build)
Message-ID: <488F4C20.6010603@gmail.com>

Hi All,

This is not exactly a bug, but IMHO a different thing should happen to 
alert the user.

I've included (by accidebnt) some random characters at the end of an 
include file belonging to my program.

The program compiles ok and run without problems, but the following is 
shown during compilation:

//---
WARNING! Memory allocated but not released: 40 bytes (1 blocks)
harbour.c:319: HB_TR_ERROR Block 1 0090F310 (size 40) 
"\00\00\00\00\00\00\00\00\
00\00\01\00\2D\F3\90\00\28\F3\90\00\01\00\00\00\02\00\02\00\00\00\00\00\10\F3\90
\00\10\F3\90\00"
//---

Perhaps a different message, indicating an error in an include file 
should be show.

Regards,

Roberto.

From harbour.01 at syenar.hu  Tue Jul 29 13:14:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 13:15:30 2008
Subject: [Harbour] Starnge behavior in RC2 (MingW build)
In-Reply-To: <488F4C20.6010603@gmail.com>
References: <488F4C20.6010603@gmail.com>
Message-ID: <C97874A0-6B22-4798-9D56-A818F853BF17@syenar.hu>

Hi Roberto,

It may help if you could send an example of that
include file. This is a clear bug.

Brgds,
Viktor

On 2008.07.29., at 18:58, Roberto Lopez wrote:

> Hi All,
>
> This is not exactly a bug, but IMHO a different thing should happen  
> to alert the user.
>
> I've included (by accidebnt) some random characters at the end of an  
> include file belonging to my program.
>
> The program compiles ok and run without problems, but the following  
> is shown during compilation:
>
> //---
> WARNING! Memory allocated but not released: 40 bytes (1 blocks)
> harbour.c:319: HB_TR_ERROR Block 1 0090F310 (size 40)  
> "\00\00\00\00\00\00\00\00\
> 00\00\01\00\2D 
> \F3\90\00\28\F3\90\00\01\00\00\00\02\00\02\00\00\00\00\00\10\F3\90
> \00\10\F3\90\00"
> //---
>
> Perhaps a different message, indicating an error in an include file  
> should be show.
>
> Regards,
>
> Roberto.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From abe.buch at att.net  Tue Jul 29 13:55:05 2008
From: abe.buch at att.net (Abeb)
Date: Tue Jul 29 13:55:09 2008
Subject: [Harbour] Telepathy (Serial Communications)
Message-ID: <18717926.post@talk.nabble.com>


i get these symbols Undefined.
is Telepaty ready for use (in windows environment)?
Thanks

 P_OUTFREE()
 P_CTRLCTS()
 P_ISDCD()
 P_ISRI()
 P_ISDSR()
 P_ISCTS()
 TP_CLEAROUT()
 TP_SETPORT()
 TP_CTRLDCD()
 TP_CTRLDSR()
 TP_OUTCHRS()
 TP_UNINSTALL()

-- 
View this message in context: http://www.nabble.com/Telepathy-%28Serial-Communications%29-tp18717926p18717926.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Jul 29 14:41:14 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 29 14:41:20 2008
Subject: [Harbour] 2008-07-29 20:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807291841.m6TIfEl1013419@31-mo5-4.acn.waw.pl>

2008-07-29 20:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/mlcfunc.c
    ! skip SOFTCR when it's on the end of extracted line.
    ; NOTE: MPOSTOLC() is not exactly CA-Cl*pper compatible
            The returned value is intentionally updated to be
            MLCTOPOS() so conversions are revertable. For me
            it's a bug in CA-Cl*pper.

best regards
Przemek
From e.m.giordano at emagsoftware.it  Tue Jul 29 15:46:59 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jul 29 15:47:07 2008
Subject: [Harbour] 2008-07-29 17:31 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
References: <01c8f190$Blat.v2.6.2$f74cbc08$23c1fb1bd1c@127.0.0.1>
Message-ID: <F1A4F8E700414A439B77ECA11B50F18C@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: <harbour@harbour-project.org>
Data invio: marted? 29 luglio 2008 17.37
Oggetto: [Harbour] 2008-07-29 17:31 UTC+0200 Viktor Szakats 
(harbour.01syenar hu)


> 2008-07-29 17:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/make_b32_all.bat
>   * contrib/make_vc_all.bat
>   * contrib/make_gcc_all.sh
>     * Disabled following contribs, to be in sync with the default
>       GNU-make setup:
>       hbsqlit2 - Too many warnings in unsupported foreign code. 
> Replacement: hbsqlit3
>       hbw32ddr - C++, not maintained, incomplete, warnings.
>       hbwhat32 - Problems and warnings, non 64 bit compatible.
>       hbziparch - C++, foreign code not well portable, interface
>                   code not Harbour quality. Replacement: hbmzip
>     ; NOTE: We should consider what to do with these contribs.

What is the easier way to compile hbziparch now?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Tue Jul 29 15:57:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 15:57:23 2008
Subject: [Harbour] 2008-07-29 17:31 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
In-Reply-To: <F1A4F8E700414A439B77ECA11B50F18C@emag>
References: <01c8f190$Blat.v2.6.2$f74cbc08$23c1fb1bd1c@127.0.0.1>
	<F1A4F8E700414A439B77ECA11B50F18C@emag>
Message-ID: <CA425450-6A46-425E-96DD-719F61DCBE8E@syenar.hu>

Hi Enrico,

You go to /contrib/hbziparch and run your make*.* of choice.

Brgds,
Viktor

On 2008.07.29., at 21:46, Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Szak?ts Viktor" <harbour.01@syenar.hu 
> >
> A: <harbour@harbour-project.org>
> Data invio: marted? 29 luglio 2008 17.37
> Oggetto: [Harbour] 2008-07-29 17:31 UTC+0200 Viktor Szakats (harbour. 
> 01syenar hu)
>
>
>> 2008-07-29 17:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * contrib/make_b32_all.bat
>>  * contrib/make_vc_all.bat
>>  * contrib/make_gcc_all.sh
>>    * Disabled following contribs, to be in sync with the default
>>      GNU-make setup:
>>      hbsqlit2 - Too many warnings in unsupported foreign code.  
>> Replacement: hbsqlit3
>>      hbw32ddr - C++, not maintained, incomplete, warnings.
>>      hbwhat32 - Problems and warnings, non 64 bit compatible.
>>      hbziparch - C++, foreign code not well portable, interface
>>                  code not Harbour quality. Replacement: hbmzip
>>    ; NOTE: We should consider what to do with these contribs.
>
> What is the easier way to compile hbziparch now?
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic

From e.m.giordano at emagsoftware.it  Tue Jul 29 16:03:54 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Jul 29 16:04:00 2008
Subject: [Harbour] 2008-07-29 17:31 UTC+0200 Viktor Szakats
	(harbour.01syenar hu)
References: <01c8f190$Blat.v2.6.2$f74cbc08$23c1fb1bd1c@127.0.0.1>
	<F1A4F8E700414A439B77ECA11B50F18C@emag>
	<CA425450-6A46-425E-96DD-719F61DCBE8E@syenar.hu>
Message-ID: <817D4CCA0F3A4E9B9BAE191923BCA9A8@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
Cc: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 29 luglio 2008 21.57
Oggetto: Re: [Harbour] 2008-07-29 17:31 UTC+0200 Viktor Szakats 
(harbour.01syenar hu)


> > What is the easier way to compile hbziparch now?
>
> Hi Enrico,
>
> You go to /contrib/hbziparch and run your make*.* of choice.

Thank you, it works.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From info at fsgiudice.com  Tue Jul 29 17:06:08 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jul 29 17:06:18 2008
Subject: [Harbour] 2008-07-29 20:40 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <200807291841.m6TIfEl1013419@31-mo5-4.acn.waw.pl>
References: <200807291841.m6TIfEl1013419@31-mo5-4.acn.waw.pl>
Message-ID: <488F8640.8000904@fsgiudice.com>

Hi Przemek,

Przemyslaw Czerpak ha scritto:
> 2008-07-29 20:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/mlcfunc.c
>     ! skip SOFTCR when it's on the end of extracted line.
>     ; NOTE: MPOSTOLC() is not exactly CA-Cl*pper compatible
>             The returned value is intentionally updated to be
>             MLCTOPOS() so conversions are revertable. For me
>             it's a bug in CA-Cl*pper.
> 

first of all, thank you.

It is partially working.
Now I found a bug with an endless loop using the code below. I'm digging 
inside c code and I have found that in MPosToLC(), putting a var dumping 
at line 428 using

printf( "ulLine = %i, ulOffset = %i, ulEOL = %i, ulLen = %i, ulPos = 
%i\n\r", ulLine, ulOffset, ulEOL, ulLen, ulPos );

I get:

ulLine = 1, ulOffset = 73, ulEOL = 0, ulLen = 84, ulPos = 71
ulLine = 1, ulOffset = 60, ulEOL = 0, ulLen = 278, ulPos = 146
ulLine = 2, ulOffset = 60, ulEOL = 0, ulLen = 278, ulPos = 146
ulLine = 3, ulOffset = 60, ulEOL = 0, ulLen = 278, ulPos = 146
ulLine = 4, ulOffset = 60, ulEOL = 0, ulLen = 278, ulPos = 146
ulLine = 5, ulOffset = 60, ulEOL = 0, ulLen = 278, ulPos = 146
ulLine = 6, ulOffset = 60, ulEOL = 0, ulLen = 278, ulPos = 146
...................

Tested against Clipper 5.2c as before.

Best Regards

Francesco

PS: Sorry for text in italian, but it was my test sample

------------------------

#define HB_HARDCR               ( Chr( 13 ) + Chr( 10 ) )
#define HB_SOFTCR               ( Chr( 141 ) + Chr( 10 ) )

PROCEDURE Main()

   LOCAL cText
   LOCAL aPos

   cText := "LINEA 1: questa e' una prova per vedere andando a capo cosa 
" + HB_SOFTCR + ;
            "succede." + HB_HARDCR +;
            "LINEA 2: questa e' una riga che non va a capo." + HB_HARDCR +;
            "LINEA 3: questa e' <TEST> una riga che non va a capo." + 
HB_HARDCR +;
            "LINEA 4: questa riga va a capo, per cui ora vedo cosa " + 
HB_SOFTCR + ;
            "succede." + HB_HARDCR +;
            "LINEA 5: questa riga non va a capo." + HB_HARDCR

   ? Len( cText )

   aPos := MPosToLC( cText, 60, 147, 0, .F. )
   ? "Line ", aPos[ 1 ], ", Col ", aPos[ 2 ], " (Should be 4, 26)"

RETURN

From druzus at acn.waw.pl  Tue Jul 29 18:21:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 29 18:21:59 2008
Subject: [Harbour] 2008-07-30 00:21 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807292221.m6TMLrwp019257@31-mo5-4.acn.waw.pl>

2008-07-30 00:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/mlcfunc.c
    ! fixed possible infinite introduce in previous commit

best regards
Przemek
From info at fsgiudice.com  Tue Jul 29 18:40:05 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Jul 29 18:40:14 2008
Subject: [Harbour] 2008-07-30 00:21 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <200807292221.m6TMLrwp019257@31-mo5-4.acn.waw.pl>
References: <200807292221.m6TMLrwp019257@31-mo5-4.acn.waw.pl>
Message-ID: <488F9C45.1090107@fsgiudice.com>

Hi Przemek,

Przemyslaw Czerpak ha scritto:
> 2008-07-30 00:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/mlcfunc.c
>     ! fixed possible infinite introduce in previous commit
> 

perfect, thank you.

Best Regards

Francesco

From druzus at acn.waw.pl  Tue Jul 29 18:40:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Jul 29 18:40:19 2008
Subject: [Harbour] 2008-07-29 20:40 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <488F8640.8000904@fsgiudice.com>
References: <200807291841.m6TIfEl1013419@31-mo5-4.acn.waw.pl>
	<488F8640.8000904@fsgiudice.com>
Message-ID: <20080729224013.GA14805@34-mo7-2.acn.waw.pl>

On Tue, 29 Jul 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> It is partially working.

It's not exactly the same as in Clipper. F.e. try this code:

   #define CRLF      ( Chr( 13 ) + Chr( 10 ) )
   #define SOFTCR    ( Chr( 141 ) + Chr( 10 ) )
   proc main()
   local cText, aPos, nOffset
   #ifdef _SET_EOL
      set( _SET_EOL, CRLF )
   #endif
   cText := "1234567890 " + SOFTCR + "1234567890" + CRLF
   nOffset := 14
   aPos := mpostolc( cText, 10, nOffset )
   ? nOffset, "=>", aPos[1], aPos[2], ;
              "=>", mlctopos( cText, 10, aPos[1], aPos[2] )
   return

I made the mpostolc()/mlctopos() revertible when in Clipper
they aren't. I do not know why it behaves in such way in Clipper.

> Now I found a bug with an endless loop using the code below. I'm digging 
> inside c code and I have found that in MPosToLC(), putting a var dumping 
[...]
> Tested against Clipper 5.2c as before.

Thank you very much for tests and for the info. Should be fixed now.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Jul 29 19:16:07 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 19:16:08 2008
Subject: [Harbour] 2008-07-30 01:15 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f1d1$Blat.v2.6.2$145eb8b0$168492c52120@127.0.0.1>

2008-07-30 01:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtwvt/gtwvt.c
     ! Fixed recent MSVC warning. Please test on WinCE/pre-1200 
       MSVC versions.
--
Brgds,
Viktor

From roberbox at gmail.com  Tue Jul 29 21:06:16 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Tue Jul 29 21:06:41 2008
Subject: [Harbour] Starnge behavior in RC2 (MingW build)
In-Reply-To: <C97874A0-6B22-4798-9D56-A818F853BF17@syenar.hu>
References: <488F4C20.6010603@gmail.com>
	<C97874A0-6B22-4798-9D56-A818F853BF17@syenar.hu>
Message-ID: <488FBE88.3020806@gmail.com>

Szak?ts Viktor wrote:

> It may help if you could send an example of that
> include file. This is a clear bug.

Well.. it happens with all include files and programs that I've tested.

Any include file containing a valid directive ending with random 
characters will generate the problem.

This is a simple console test that reproduce it:

----------------------- Test.prg -------------------------

#include 'test.ch'

function Main()

	SetMode(25,80)

	CLS

	@ 10,10 say 'Hello'

	alert('Hello')

return nil

----------------------- Test.ch -------------------------

#translate RegistryWrite ( <arg1> , <arg2> ) ;
=> ;
w32_regwrite ( <arg1> , <arg2> )


0

----------------------- end -------------------------

Regards,

Roberto.
From harbour.01 at syenar.hu  Tue Jul 29 21:11:41 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 21:11:38 2008
Subject: [Harbour] 2008-07-30 03:11 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f1e1$Blat.v2.6.2$395b27b0$134854a8cfc2@127.0.0.1>

2008-07-30 03:11 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/memoedit.prg
     ! Fixed to never popup "Abort (Y/N)" when pressing <Esc> 
       in case a user function is used with MemoEdit().
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Jul 29 21:16:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 21:17:08 2008
Subject: [Harbour] Starnge behavior in RC2 (MingW build)
In-Reply-To: <488FBE88.3020806@gmail.com>
References: <488F4C20.6010603@gmail.com>
	<C97874A0-6B22-4798-9D56-A818F853BF17@syenar.hu>
	<488FBE88.3020806@gmail.com>
Message-ID: <064C01EA-A01A-4DAE-8857-CA675AC20FDC@syenar.hu>

Hi Roberto,

I've tested your code with latest clean build and I
couldn't reproduce the leak. This is my result:

test.ch(6) Error E0020  Incomplete statement or unbalanced delimiters'.

Can you try with a fresh checkout and build?

Brgds,
Viktor

On 2008.07.30., at 3:06, Roberto Lopez wrote:

> Szak?ts Viktor wrote:
>
>> It may help if you could send an example of that
>> include file. This is a clear bug.
>
> Well.. it happens with all include files and programs that I've  
> tested.
>
> Any include file containing a valid directive ending with random  
> characters will generate the problem.
>
> This is a simple console test that reproduce it:
>
> ----------------------- Test.prg -------------------------
>
> #include 'test.ch'
>
> function Main()
>
> 	SetMode(25,80)
>
> 	CLS
>
> 	@ 10,10 say 'Hello'
>
> 	alert('Hello')
>
> return nil
>
> ----------------------- Test.ch -------------------------
>
> #translate RegistryWrite ( <arg1> , <arg2> ) ;
> => ;
> w32_regwrite ( <arg1> , <arg2> )
>
>
> 0
>
> ----------------------- end -------------------------
>
> Regards,
>
> Roberto.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Jul 29 21:31:52 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Jul 29 21:31:49 2008
Subject: [Harbour] 2008-07-30 03:31 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f1e4$Blat.v2.6.2$0b5d2892$1e68bc625754@127.0.0.1>

2008-07-30 03:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * source/rtl/gtwvt/gtwvt.c
     ! Fixed one MSVC 64 bit warning.
--
Brgds,
Viktor

From roberbox at gmail.com  Tue Jul 29 21:49:47 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Tue Jul 29 21:50:10 2008
Subject: [Harbour] Starnge behavior in RC2 (MingW build)
In-Reply-To: <064C01EA-A01A-4DAE-8857-CA675AC20FDC@syenar.hu>
References: <488F4C20.6010603@gmail.com>	<C97874A0-6B22-4798-9D56-A818F853BF17@syenar.hu>	<488FBE88.3020806@gmail.com>
	<064C01EA-A01A-4DAE-8857-CA675AC20FDC@syenar.hu>
Message-ID: <488FC8BB.2090707@gmail.com>

Szak?ts Viktor wrote:

> I've tested your code with latest clean build and I
> couldn't reproduce the leak. This is my result:
> 
> test.ch(6) Error E0020  Incomplete statement or unbalanced delimiters'.
> 
> Can you try with a fresh checkout and build?

I'll try to do it ASAP. Anyway, I'm using RC2 (MingW) build published at 
SourceForge, so, since its working fine for you with current code, I'm 
sure that the problem no longer exists.

Thanks a lot for your attention.

Regards,

Roberto.

From niki at synel.co.il  Wed Jul 30 02:56:13 2008
From: niki at synel.co.il (Chen Kedem)
Date: Wed Jul 30 02:54:19 2008
Subject: [Harbour] CFLAGS and harbour dll
Message-ID: <4890108D.145F@synel.co.il>

I just tryed to build harbour dll with Borland C++Builder 5.0 (win32)
and CodeGuard for the first time, I set the following:

set HB_BUILD_DLL=yes
set CFLAGS=-v -y -vG -Od

and run make_b32.bat

I get the following errors:

Error: Unresolved external '_CG_DESC' referenced from E:\HRB\OBJ\DLL\B32\MAINDLLH.OBJ
Error: Unresolved external '_CG_A_PD' referenced from E:\HRB\OBJ\DLL\B32\ESTACK.OBJ
Error: Unresolved external '_CG_GDA_EGXSY' referenced from E:\HRB\OBJ\DLL\B32\HBSTR.OBJ
Error: Unresolved external '_CG_A_PY' referenced from E:\HRB\OBJ\DLL\B32\HBSTR.OBJ
Error: Unresolved external '_CG_DA_EPXSY' referenced from E:\HRB\OBJ\DLL\B32\HBSTR.OBJ
Error: Unresolved external '_CG_DA_EPY' referenced from E:\HRB\OBJ\DLL\B32\HBSTR.OBJ
Error: Unresolved external '_CG_A_BP' referenced from E:\HRB\OBJ\DLL\B32\HBFFIND.OBJ
Error: Unresolved external '_CG_LDA_EOXSY' referenced from E:\HRB\OBJ\DLL\B32\HBVER.OBJ
Error: Unresolved external '_CG_LA_BP' referenced from E:\HRB\OBJ\DLL\B32\HBVER.OBJ
Error: Unresolved external '_CG_A_PQ' referenced from E:\HRB\OBJ\DLL\B32\CMDARG.OBJ
Error: Unresolved external '_CG_DA_BEPXSY' referenced from E:\HRB\OBJ\DLL\B32\WAFUNC.OBJ
Error: Unresolved external '_CG_GDA_EGY' referenced from E:\HRB\OBJ\DLL\B32\WORKAREA.OBJ
Error: Unresolved external '_CG_GA_BP' referenced from E:\HRB\OBJ\DLL\B32\HBTRACE.OBJ
Error: Unresolved external '_CG_GA_GY' referenced from E:\HRB\OBJ\DLL\B32\PPCORE.OBJ

Which shows that the object was created with the CodeGuard flag but
the link was not. Which environment should I set?
(without setting HB_BUILD_DLL it all works well).

Tested with ChangeLog 2008-07-30 03:11 UTC+0200 Viktor Szakats


  Chen.
From niki at synel.co.il  Wed Jul 30 03:01:33 2008
From: niki at synel.co.il (Chen Kedem)
Date: Wed Jul 30 02:59:36 2008
Subject: [Harbour] doc/dirstruc.txt needs an update
Message-ID: <489011CD.6EB2@synel.co.il>

I'm about to leave for vacation and don't have time to do it myself.
doc/dirstruc.txt need to be updated for the directory changes made
in the past 7 months.

Thanks,

  Chen.
From soporte at dsgsoftware.com  Wed Jul 30 04:38:36 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Wed Jul 30 04:38:48 2008
Subject: [Harbour] hbmzip contrib issue
Message-ID: <001101c8f21f$adb35c20$6c01a8c0@PcJuanxp>

Hi all,

I'm testing my app with hbmzip instead of hbziparch and I found that unzip 
functions don't respect the character set used in zipped files.

For example If I try to unzip a file *gu?a.dbf* then I get a file *guia.dbf* 
(notice the accent).

Any solution ?

Best regards
Juan 

From druzus at acn.waw.pl  Wed Jul 30 04:57:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 30 04:57:51 2008
Subject: [Harbour] hbmzip contrib issue
In-Reply-To: <001101c8f21f$adb35c20$6c01a8c0@PcJuanxp>
References: <001101c8f21f$adb35c20$6c01a8c0@PcJuanxp>
Message-ID: <20080730085744.GA9441@34-mo7-2.acn.waw.pl>

On Wed, 30 Jul 2008, Juan G?lvez wrote:

Hi Juan,

> I'm testing my app with hbmzip instead of hbziparch and I found that unzip 
> functions don't respect the character set used in zipped files.
> For example If I try to unzip a file *gu?a.dbf* then I get a file 
> *guia.dbf* (notice the accent).
> Any solution ?

hbmzip does not touch file names at all. It stores them as is without
any translations. It works perfectly for me in my Linux box.
So your problem is probbly different:
1. you need some translations (f.e. ANSI<->OEM conversions)
2. hbmzip uses fopen() (BTW it will be good to replace it
   with hb_fopen() to respect file name translation) for file
   access. It's possible that CRTL in your C compilers makes
   some translations using information set in locale.

Please make some tests. F.e. use myzip/myunzip examples to compress
and decompress file and compare results.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Jul 30 05:07:23 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 30 05:07:31 2008
Subject: [Harbour] Telepathy (Serial Communications)
In-Reply-To: <18717926.post@talk.nabble.com>
References: <18717926.post@talk.nabble.com>
Message-ID: <47FE1831-068F-4098-8DDE-DE3C3063637A@syenar.hu>

Hi,

It seems that the set of implemented functions differ
by platform. This is indeed confusing, and IMO wrong.

The other thing I've noticed now is that even the
function names are not Telepath(y) compatible. TP
has tp_ as a prefix while Harbour uses p_. I wonder
why was this decision made, and if we should correct it?

Aside from the prefix the function names differ in
several other ways too (P_INITPORTSPEED(), P_READPORT(),
P_WRITEPORT() didn't exist in TP f.e.).

IMO we should either rename this lib to hbcom, or
try to make it more Telepath(y) like.

Brgds,
Viktor

On 2008.07.29., at 19:55, Abeb wrote:

>
> i get these symbols Undefined.
> is Telepaty ready for use (in windows environment)?
> Thanks
>
> P_OUTFREE()
> P_CTRLCTS()
> P_ISDCD()
> P_ISRI()
> P_ISDSR()
> P_ISCTS()
> TP_CLEAROUT()
> TP_SETPORT()
> TP_CTRLDCD()
> TP_CTRLDSR()
> TP_OUTCHRS()
> TP_UNINSTALL()
>
> -- 
> View this message in context: http://www.nabble.com/Telepathy-%28Serial-Communications%29-tp18717926p18717926.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Jul 30 05:11:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 30 05:11:09 2008
Subject: [Harbour] Telepathy (Serial Communications)
In-Reply-To: <18717926.post@talk.nabble.com>
References: <18717926.post@talk.nabble.com>
Message-ID: <8C3FFE4B-C375-40BF-8312-55C1603C9F5B@syenar.hu>

Please take my previous e-mail regarding hbtpathy
cancelled, I've accidentally disregarded the .prg
in the hbtpaty dir, which actually implements the
TP compatibility layer.

Brgds,
Viktor

-----------------------

Hi,

It seems that the set of implemented functions differ
by platform. This is indeed confusing, and IMO wrong.

The other thing I've noticed now is that even the
function names are not Telepath(y) compatible. TP
has tp_ as a prefix while Harbour uses p_. I wonder
why was this decision made, and if we should correct it?

Aside from the prefix the function names differ in
several other ways too (P_INITPORTSPEED(), P_READPORT(),
P_WRITEPORT() didn't exist in TP f.e.).

IMO we should either rename this lib to hbcom, or
try to make it more Telepath(y) like.

Brgds,
Viktor

On 2008.07.29., at 19:55, Abeb wrote:

>
> i get these symbols Undefined.
> is Telepaty ready for use (in windows environment)?
> Thanks
>
> P_OUTFREE()
> P_CTRLCTS()
> P_ISDCD()
> P_ISRI()
> P_ISDSR()
> P_ISCTS()
> TP_CLEAROUT()
> TP_SETPORT()
> TP_CTRLDCD()
> TP_CTRLDSR()
> TP_OUTCHRS()
> TP_UNINSTALL()
>
> -- 
> View this message in context: http://www.nabble.com/Telepathy-%28Serial-Communications%29-tp18717926p18717926.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Jul 30 05:17:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 30 05:17:17 2008
Subject: [Harbour] 2008-07-30 11:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807300917.m6U9HCJ2023822@31-mo5-4.acn.waw.pl>

2008-07-30 11:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/xhb/dirrec.prg
    ! initialize cAttr parameter

  * harbour/contrib/hbmzip/ioapi.c
    * use hb_fopen() instead of fopen() to respect filename conversions:
      _SET_FILECASE, _SET_DIRCASE, _SET_DIRSEPARATOR, _SET_TRIMFILENAME

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul 30 05:20:11 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 30 05:20:09 2008
Subject: [Harbour] 2008-07-30 11:18 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f225$Blat.v2.6.2$77921234$1afcf545bce4@127.0.0.1>

2008-07-30 11:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * doc/dirstruc.txt
     * Some (incomplete) updates to the dir structure layout.

   * contrib/hbtpathy/tplinux.c
   * contrib/hbtpathy/tpwin32.c
     * Minor formatting.

   * contrib/hbtpathy/telepath.prg
     + Added TP_UNINSTALL() dummy compatibility function.
--
Brgds,
Viktor

From soporte at dsgsoftware.com  Wed Jul 30 06:15:01 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Wed Jul 30 06:15:28 2008
Subject: [Harbour] Re: hbmzip contrib issue
Message-ID: <000c01c8f22d$2f0f2170$6c01a8c0@PcJuanxp>

Hi Przemek,

>hbmzip does not touch file names at all. It stores them as is without
>any translations. It works perfectly for me in my Linux box.
>So your problem is probbly different:
>1. you need some translations (f.e. ANSI<->OEM conversions)
>2. hbmzip uses fopen() (BTW it will be good to replace it
>   with hb_fopen() to respect file name translation) for file
>   access. It's possible that CRTL in your C compilers makes
>   some translations using information set in locale.
>Please make some tests. F.e. use myzip/myunzip examples to compress
>and decompress file and compare results.

I've tested myzip/myunzip from WinXP console to zip/unzip a gu?a.dbf file 
with your latest changelog.

Although the test work correctly, I think there's something wrong because if 
I open the zip file with WinZip it shows and extract the file as gu?a.dbf 
(OEM name).

What do you think about ?

Many thanks
Juan 

From druzus at acn.waw.pl  Wed Jul 30 09:38:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 30 09:38:22 2008
Subject: [Harbour] Starnge behavior in RC2 (MingW build)
In-Reply-To: <488FC8BB.2090707@gmail.com>
References: <488F4C20.6010603@gmail.com>
	<C97874A0-6B22-4798-9D56-A818F853BF17@syenar.hu>
	<488FBE88.3020806@gmail.com>
	<064C01EA-A01A-4DAE-8857-CA675AC20FDC@syenar.hu>
	<488FC8BB.2090707@gmail.com>
Message-ID: <20080730133816.GA1952@34-mo7-2.acn.waw.pl>

On Tue, 29 Jul 2008, Roberto Lopez wrote:

Hi Roberto,

> I'll try to do it ASAP. Anyway, I'm using RC2 (MingW) build published at 
> SourceForge, so, since its working fine for you with current code, I'm 
> sure that the problem no longer exists.

It does not work correctly. The problem can be exploited by
code which uses simple identifier or literal value in the
last line and there is no EOL after it. F.e.:

proc main()
? "hello"
12345 // [NO EOL HERE]

Just simply I pacified last error message what disables expression
garbage collector. I do not execute it when there is no error to
not hide memory leaks in valid code.

I'll fix it in a while. Many thanks for information.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Jul 30 09:40:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 30 09:40:06 2008
Subject: [Harbour] 2008-07-30 15:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807301340.m6UDe0Za018287@31-mo5-4.acn.waw.pl>

2008-07-30 15:39 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
    ! fixed wrongly hidden error message - it was causing memory leak
      Thanks to Roberto for information.

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul 30 09:57:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 30 09:57:45 2008
Subject: [Harbour] Release 1.0.0 Final #1
Message-ID: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>

Hi all,

I'd like to ask everyone to try as many kinds of
builds as possible and report any results on the
list, so that we can clear up problems before
tagging 1.0.0.

Passed:
- Windows
	BCC55
	BCC58
	MinGW 4.12
	MSVS 2005
	MSVS 2005 C++,
	MSVS 2008
	MSVS 2008 C++
	Pelles C 4.5
	Pelles C 5.0
	Pelles C 5.0 64 bit (with a few problems)
	MSVS 2008 C++ 64 bit
- DOS
	DJGPP 4.23 32 bit

Brgds,
Viktor

From cvc at oohg.org  Wed Jul 30 10:29:43 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Wed Jul 30 10:29:58 2008
Subject: [Harbour] Release 1.0.0 Final #1
In-Reply-To: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
References: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
Message-ID: <48907AD7.1000100@oohg.org>

Szak?ts Viktor escribi?:


Hi Victor:


Wich Batch file must be use to build harbour for pelles C ?

best regards
Ciro

> Hi all,
> 
> I'd like to ask everyone to try as many kinds of
> builds as possible and report any results on the
> list, so that we can clear up problems before
> tagging 1.0.0.
> 
> Passed:
> - Windows
>     BCC55
>     BCC58
>     MinGW 4.12
>     MSVS 2005
>     MSVS 2005 C++,
>     MSVS 2008
>     MSVS 2008 C++
>     Pelles C 4.5
>     Pelles C 5.0
>     Pelles C 5.0 64 bit (with a few problems)
>     MSVS 2008 C++ 64 bit


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From druzus at acn.waw.pl  Wed Jul 30 10:31:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 30 10:31:35 2008
Subject: [Harbour] 2008-07-30 16:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807301431.m6UEVTBV025822@31-mo5-4.acn.waw.pl>

2008-07-30 16:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour-ce-spec
  * harbour/harbour-w32-spec
  * harbour/harbour.spec
    ! set 0 as package release number - the release signature is necessary
      in RPM format and cannot be removed

best regards
Przemek
From harbour.01 at syenar.hu  Wed Jul 30 10:33:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 30 10:33:49 2008
Subject: [Harbour] Release 1.0.0 Final #1
In-Reply-To: <48907AD7.1000100@oohg.org>
References: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
	<48907AD7.1000100@oohg.org>
Message-ID: <499D1303-655E-4746-9F53-E3E697AAE2A3@syenar.hu>

Hi Ciro,

make_gnu.bat. You'll need the GNU make.exe (f.e. the MinGW one)
to be in the path.

Brgds,
Viktor

On 2008.07.30., at 16:29, Ciro Vargas Clemow wrote:

> Szak?ts Viktor escribi?:
>
>
> Hi Victor:
>
>
> Wich Batch file must be use to build harbour for pelles C ?
>
> best regards
> Ciro
>
>> Hi all,
>> I'd like to ask everyone to try as many kinds of
>> builds as possible and report any results on the
>> list, so that we can clear up problems before
>> tagging 1.0.0.
>> Passed:
>> - Windows
>>    BCC55
>>    BCC58
>>    MinGW 4.12
>>    MSVS 2005
>>    MSVS 2005 C++,
>>    MSVS 2008
>>    MSVS 2008 C++
>>    Pelles C 4.5
>>    Pelles C 5.0
>>    Pelles C 5.0 64 bit (with a few problems)
>>    MSVS 2008 C++ 64 bit
>
>
> --  
> http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp /  
> the no2imp and clip2win home )
>
> http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more  
> powerfull )
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Jul 30 10:47:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 30 10:47:39 2008
Subject: [Harbour] 2008-07-30 16:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807301431.m6UEVTBV025822@31-mo5-4.acn.waw.pl>
References: <200807301431.m6UEVTBV025822@31-mo5-4.acn.waw.pl>
Message-ID: <DD592D72-ABBC-4618-B2DA-62342D70AB95@syenar.hu>

I was hoping someone will take a look at this,
because it looked suspiciously wrong to me after
removing 'rc2'. Thanks!

Brgds,
Viktor

On 2008.07.30., at 16:31, Przemyslaw Czerpak wrote:

> 2008-07-30 16:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/harbour-ce-spec
>  * harbour/harbour-w32-spec
>  * harbour/harbour.spec
>    ! set 0 as package release number - the release signature is  
> necessary
>      in RPM format and cannot be removed
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From miguelangel at marchuet.net  Wed Jul 30 10:57:30 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul 30 10:52:19 2008
Subject: [Harbour] Release 1.0.0 Final #1
In-Reply-To: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
References: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
Message-ID: <4890815A.6020801@marchuet.net>

Please you can wait for release

mzip needs to solve large names under windows platforms
and compatible passwords with winzip password length need 10 char.

Best regards,
Miguel Angel Marchuet

Szak?ts Viktor escribi?:
> Hi all,
> 
> I'd like to ask everyone to try as many kinds of
> builds as possible and report any results on the
> list, so that we can clear up problems before
> tagging 1.0.0.
> 
> Passed:
> - Windows
>     BCC55
>     BCC58
>     MinGW 4.12
>     MSVS 2005
>     MSVS 2005 C++,
>     MSVS 2008
>     MSVS 2008 C++
>     Pelles C 4.5
>     Pelles C 5.0
>     Pelles C 5.0 64 bit (with a few problems)
>     MSVS 2008 C++ 64 bit
> - DOS
>     DJGPP 4.23 32 bit
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> __________ Informaci?n de NOD32, revisi?n 3303 (20080728) __________
> 
> Este mensaje ha sido analizado con NOD32 antivirus system
> http://www.nod32.com
> 
> 
> 

From harbour.01 at syenar.hu  Wed Jul 30 11:36:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Jul 30 11:36:58 2008
Subject: [Harbour] Release 1.0.0 Final #1
In-Reply-To: <4890815A.6020801@marchuet.net>
References: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
	<4890815A.6020801@marchuet.net>
Message-ID: <30146BC1-F258-499F-8377-B040E0902033@syenar.hu>

Hi Miguel,

We're going on with the release, if these problems get
fixed in the meantime the better, but these are not
showstoppers (I'm not even sure they are needed for
a portable .zip implementation and/or are easy fixes,
but rather new features). Also we should be careful
about WinZip specific features, as these can be not
well supported in other implementations.

[ It's a problem though that for some reason hbmzip's
encryption is not even compatible with info-zip. ]

hbziparch is still there for those who need it while
hbmzip gets all the polish.

Brgds,
Viktor

On 2008.07.30., at 16:57, Miguel Angel Marchuet wrote:

> Please you can wait for release
>
> mzip needs to solve large names under windows platforms
> and compatible passwords with winzip password length need 10 char.
>
> Best regards,
> Miguel Angel Marchuet
>
> Szak?ts Viktor escribi?:
>> Hi all,
>> I'd like to ask everyone to try as many kinds of
>> builds as possible and report any results on the
>> list, so that we can clear up problems before
>> tagging 1.0.0.
>> Passed:
>> - Windows
>>    BCC55
>>    BCC58
>>    MinGW 4.12
>>    MSVS 2005
>>    MSVS 2005 C++,
>>    MSVS 2008
>>    MSVS 2008 C++
>>    Pelles C 4.5
>>    Pelles C 5.0
>>    Pelles C 5.0 64 bit (with a few problems)
>>    MSVS 2008 C++ 64 bit
>> - DOS
>>    DJGPP 4.23 32 bit
>> Brgds,
>> Viktor
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> __________ Informaci?n de NOD32, revisi?n 3303 (20080728) __________
>> Este mensaje ha sido analizado con NOD32 antivirus system
>> http://www.nod32.com
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From roberbox at gmail.com  Wed Jul 30 11:38:17 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Wed Jul 30 11:38:22 2008
Subject: [Harbour] Starnge behavior in RC2 (MingW build)
In-Reply-To: <20080730133816.GA1952@34-mo7-2.acn.waw.pl>
References: <488F4C20.6010603@gmail.com>	<C97874A0-6B22-4798-9D56-A818F853BF17@syenar.hu>	<488FBE88.3020806@gmail.com>	<064C01EA-A01A-4DAE-8857-CA675AC20FDC@syenar.hu>	<488FC8BB.2090707@gmail.com>
	<20080730133816.GA1952@34-mo7-2.acn.waw.pl>
Message-ID: <48908AE9.9070201@gmail.com>

Przemyslaw Czerpak wrote:

> It does not work correctly. The problem can be exploited by
> code which uses simple identifier or literal value in the
> last line and there is no EOL after it. F.e.:
<...>
 > proc main()
 > ? "hello"
 > 12345 // [NO EOL HERE]

Ok. I've forgot to mention that there were not EOL in my tests.

> I'll fix it in a while. Many thanks for information.

Thanks to you for the quick response.

Regards,

Roberto.
From lorenzo.fiorini at gmail.com  Wed Jul 30 12:20:56 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Jul 30 12:21:04 2008
Subject: [Harbour] Release 1.0.0 Final #1
In-Reply-To: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
References: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
Message-ID: <9257026e0807300920l7a362dd1y6fbc5dc9db0cc8b3@mail.gmail.com>

On Wed, Jul 30, 2008 at 3:57 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I'd like to ask everyone to try as many kinds of
> builds as possible and report any results on the
> list, so that we can clear up problems before
> tagging 1.0.0.

At changelog 2008-07-30 16:30 UTC+0200 Przemyslaw Czerpak
(druzus/at/priv.onet.pl)

using HB_CONTRIBLIBS=hbzlib hbct hbgd hbpgsql hblog hbxml hbtip

Passed:
- Windows
   msys/mingw 3.4.5 make_gnu.sh build
- Mac OS X 10.5.4 full updated
   xcode 3.0 gcc make_gnu.sh build
- Linux Fedora 9.0
  gcc 4.3.0 make_gnu.sh build

clean builds without warnings.

best regards,
Lorenzo
From miguelangel at marchuet.net  Wed Jul 30 12:57:41 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Jul 30 12:52:28 2008
Subject: [Harbour] about mzip
Message-ID: <48909D85.30803@marchuet.net>

file name needs to be translated always to oem chars over 126
to storage it in zip compatible.

and revert conversion when unzip it

Best regards,
Miguel Angel Marchuet
From druzus at acn.waw.pl  Wed Jul 30 19:41:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Jul 30 19:41:31 2008
Subject: [Harbour] Release 1.0.0 Final #1
In-Reply-To: <30146BC1-F258-499F-8377-B040E0902033@syenar.hu>
References: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
	<4890815A.6020801@marchuet.net>
	<30146BC1-F258-499F-8377-B040E0902033@syenar.hu>
Message-ID: <20080730234124.GA27523@34-mo7-2.acn.waw.pl>

On Wed, 30 Jul 2008, Szak?ts Viktor wrote:
> [ It's a problem though that for some reason hbmzip's
> encryption is not even compatible with info-zip. ]

It's PKZIP compatible and info-zip should understand it.
I've just check that it doesn't but because hbmzip can
decompress encrypted PKZIP archives then I guess the problem
is caused by some missing or wrongly set flags in ZIP header
so other ZIP tools does not recognize encryption method.
I'll check it.

best regards,
Przemek
From sscc at mweb.co.za  Thu Jul 31 02:05:42 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Jul 31 02:05:52 2008
Subject: [Harbour] "RETURN MyClass{ ... }" syntax
Message-ID: <48915636.308@mweb.co.za>

Hi

To support this syntax TopClass (C4W) has:

#xcommand RETURN <name>{ [<p,...>] } ;
        => RETURN <name>():New( <p> )

Perhaps someone could add it to HBClass.ch. It would fit with some
similar #xtranslates under the HB_CLS_VO section.

BTW what does the ! below mean? :

#xtranslate  ( <!name!>{ [<p,...>] }        =>  ( <name>():New( <p> )

Regards
Alex

From soporte at dsgsoftware.com  Thu Jul 31 03:03:49 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Jul 31 03:04:23 2008
Subject: [Harbour] hbcompat.ch
Message-ID: <000501c8f2db$a7e93fa0$6c01a8c0@PcJuanxp>

Hi all,

I've noticed equivalence for HB_WildMatch() in xHarbour is WildMatch().

Could someone add the translate in hbcompat.ch ?

#xtranslate WildMatch([<x,...>]) => HB_WildMatch(<x>)

Best regards
Juan

From harbour.01 at syenar.hu  Thu Jul 31 03:36:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 03:36:45 2008
Subject: [Harbour] hbcompat.ch
In-Reply-To: <000501c8f2db$a7e93fa0$6c01a8c0@PcJuanxp>
References: <000501c8f2db$a7e93fa0$6c01a8c0@PcJuanxp>
Message-ID: <2F1C33C0-930D-476B-97B1-D1734FE5B5D6@syenar.hu>

Hi Juan,

WildMatch() is already implemented as a function in xhb.lib.

BTW, there are a lot of other compatibility functions (h*(),
inet*(), hb_checksum(), hb_deserialnext()) implemented as
such instead of simple #defines, xhb users would have to
decide which is the better for them.

[ as opposed to #defines, functions work also in macros,
but they need linkage of xhb.lib ]

Brgds,
Viktor

On 2008.07.31., at 9:03, Juan G?lvez wrote:

> Hi all,
>
> I've noticed equivalence for HB_WildMatch() in xHarbour is  
> WildMatch().
>
> Could someone add the translate in hbcompat.ch ?
>
> #xtranslate WildMatch([<x,...>]) => HB_WildMatch(<x>)
>
> Best regards
> Juan
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From soporte at dsgsoftware.com  Thu Jul 31 03:58:51 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Jul 31 03:59:12 2008
Subject: [Harbour] hbcompat.ch
References: <000501c8f2db$a7e93fa0$6c01a8c0@PcJuanxp>
	<2F1C33C0-930D-476B-97B1-D1734FE5B5D6@syenar.hu>
Message-ID: <001001c8f2e3$50a70440$6c01a8c0@PcJuanxp>

Hi Viktor

>WildMatch() is already implemented as a function in xhb.lib.

Yes. I know it.

>BTW, there are a lot of other compatibility functions (h*(),
>inet*(), hb_checksum(), hb_deserialnext()) implemented as
>such instead of simple #defines, xhb users would have to
>decide which is the better for them.

Many of them are also in hbcompat.ch. I think there's nothing wrong in 
including it in both places ...

>[ as opposed to #defines, functions work also in macros,
>but they need linkage of xhb.lib ]

>Brgds,
>Viktor

Regards
Juan 

From druzus at acn.waw.pl  Thu Jul 31 04:07:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 04:08:04 2008
Subject: [Harbour] "RETURN MyClass{ ... }" syntax
In-Reply-To: <48915636.308@mweb.co.za>
References: <48915636.308@mweb.co.za>
Message-ID: <20080731080758.GA1348@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Alex Strickland wrote:

Hi Alex,

> To support this syntax TopClass (C4W) has:
> #xcommand RETURN <name>{ [<p,...>] } ;
>        => RETURN <name>():New( <p> )
> Perhaps someone could add it to HBClass.ch. It would fit with some
> similar #xtranslates under the HB_CLS_VO section.
> 
> BTW what does the ! below mean? :
> #xtranslate  ( <!name!>{ [<p,...>] }        =>  ( <name>():New( <p> )

<!markerid!> can accept only valid identifiers.
Because new PP can work correctly with match marker at the begining
of expression then it's possible to create one rule for all situations
where <name>{ <params,...> } is used. It's enough to make:
   #xtranslate <!name!>{ [<p,...>] }  => <name>():New( <p> )
f.e.:

   #xtranslate <!name!>{ [<p,...>] }  => <name>():New( <p> )
   proc main()
      local o
      o:=tbrowse{1,2,3,4}
      ? o:className()
   return

This one rule efectively replaces the four similar rule from
hbclass.ch and your above command sow it will work correctly
also in other places, like:

   with object tbrowse{1,2,3,4}
      [...]
   endwith

or:
   if tbrowse{1,2,3,4}:colcount == 0
      [...]
   endif

So for full support for <className>{ <params,...> } syntax in
all places it's enough to add this #xtranslate to hbclass.ch.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 04:13:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 04:13:19 2008
Subject: [Harbour] hbcompat.ch
In-Reply-To: <001001c8f2e3$50a70440$6c01a8c0@PcJuanxp>
References: <000501c8f2db$a7e93fa0$6c01a8c0@PcJuanxp>
	<2F1C33C0-930D-476B-97B1-D1734FE5B5D6@syenar.hu>
	<001001c8f2e3$50a70440$6c01a8c0@PcJuanxp>
Message-ID: <39ECF36C-FB96-4880-B9B3-C372B02EFFEF@syenar.hu>

Hi Juan,

Okay I'll commit 3 new translations as soon as the SVN
server gets working again.

Brgds,
Viktor

On 2008.07.31., at 9:58, Juan G?lvez wrote:

> Hi Viktor
>
>> WildMatch() is already implemented as a function in xhb.lib.
>
> Yes. I know it.
>
>> BTW, there are a lot of other compatibility functions (h*(),
>> inet*(), hb_checksum(), hb_deserialnext()) implemented as
>> such instead of simple #defines, xhb users would have to
>> decide which is the better for them.
>
> Many of them are also in hbcompat.ch. I think there's nothing wrong  
> in including it in both places ...
>
>> [ as opposed to #defines, functions work also in macros,
>> but they need linkage of xhb.lib ]
>
>> Brgds,
>> Viktor
>
> Regards
> Juan
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From soporte at dsgsoftware.com  Thu Jul 31 04:24:38 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Jul 31 04:25:11 2008
Subject: [Harbour] hbmzip contrib issue
Message-ID: <002701c8f2e6$f2159640$6c01a8c0@PcJuanxp>

Hi Przemek,

Don't worry about this subject. Indeed it was a translation issue and it can 
be resolved easily :

HB_ZipStoreFile( hZip, cFilePath, HB_AnsiToOem( cFilePath ), cPassword )

HB_UnzipExtractCurrentFile( hZip, HB_OemToAnsi( cFilePath ), cPassword )

Best regards
Juan

----- Original Message ----- 
From: "Juan G?lvez" <soporte@dsgsoftware.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, July 30, 2008 12:15 PM
Subject: Re: hbmzip contrib issue


> Hi Przemek,
>
>>hbmzip does not touch file names at all. It stores them as is without
>>any translations. It works perfectly for me in my Linux box.
>>So your problem is probbly different:
>>1. you need some translations (f.e. ANSI<->OEM conversions)
>>2. hbmzip uses fopen() (BTW it will be good to replace it
>>   with hb_fopen() to respect file name translation) for file
>>   access. It's possible that CRTL in your C compilers makes
>>   some translations using information set in locale.
>>Please make some tests. F.e. use myzip/myunzip examples to compress
>>and decompress file and compare results.
>
> I've tested myzip/myunzip from WinXP console to zip/unzip a gu?a.dbf file 
> with your latest changelog.
>
> Although the test work correctly, I think there's something wrong because 
> if I open the zip file with WinZip it shows and extract the file as 
> gu?a.dbf (OEM name).
>
> What do you think about ?
>
> Many thanks
> Juan 

From harbour.01 at syenar.hu  Thu Jul 31 04:32:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 04:32:26 2008
Subject: [Harbour] hbmzip contrib issue
In-Reply-To: <002701c8f2e6$f2159640$6c01a8c0@PcJuanxp>
References: <002701c8f2e6$f2159640$6c01a8c0@PcJuanxp>
Message-ID: <0598459B-3713-4EBE-90BF-111BA1360694@syenar.hu>

If it has no side-effects, maybe we could add this conversion
to these functions.

Brgds,
Viktor

On 2008.07.31., at 10:24, Juan G?lvez wrote:

> Hi Przemek,
>
> Don't worry about this subject. Indeed it was a translation issue  
> and it can be resolved easily :
>
> HB_ZipStoreFile( hZip, cFilePath, HB_AnsiToOem( cFilePath ),  
> cPassword )
>
> HB_UnzipExtractCurrentFile( hZip, HB_OemToAnsi( cFilePath ),  
> cPassword )
>
> Best regards
> Juan
>
> ----- Original Message ----- From: "Juan G?lvez" <soporte@dsgsoftware.com 
> >
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org 
> >
> Sent: Wednesday, July 30, 2008 12:15 PM
> Subject: Re: hbmzip contrib issue
>
>
>> Hi Przemek,
>>
>>> hbmzip does not touch file names at all. It stores them as is  
>>> without
>>> any translations. It works perfectly for me in my Linux box.
>>> So your problem is probbly different:
>>> 1. you need some translations (f.e. ANSI<->OEM conversions)
>>> 2. hbmzip uses fopen() (BTW it will be good to replace it
>>>  with hb_fopen() to respect file name translation) for file
>>>  access. It's possible that CRTL in your C compilers makes
>>>  some translations using information set in locale.
>>> Please make some tests. F.e. use myzip/myunzip examples to compress
>>> and decompress file and compare results.
>>
>> I've tested myzip/myunzip from WinXP console to zip/unzip a  
>> gu?a.dbf file with your latest changelog.
>>
>> Although the test work correctly, I think there's something wrong  
>> because if I open the zip file with WinZip it shows and extract the  
>> file as gu?a.dbf (OEM name).
>>
>> What do you think about ?
>>
>> Many thanks
>> Juan
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Jul 31 04:54:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 04:54:47 2008
Subject: [Harbour] hbmzip contrib issue
In-Reply-To: <0598459B-3713-4EBE-90BF-111BA1360694@syenar.hu>
References: <002701c8f2e6$f2159640$6c01a8c0@PcJuanxp>
	<0598459B-3713-4EBE-90BF-111BA1360694@syenar.hu>
Message-ID: <20080731085442.GA1856@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:
> If it has no side-effects, maybe we could add this conversion
> to these functions.

Not for all platforms. In *nixes file names should be stored in
native ISO CPs (if we want to be compatible with other ZIP tools)
which is more similar to ANSI in Windows so such conversion should
be done only in MS-Win builds.

If you can confirm that other Windows ZIP tools store filenames
inside ZIP using OEM encoding then I'll add automatic translation
for this platforms inside hbmzip C code.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 05:02:30 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 05:02:38 2008
Subject: [Harbour] hbmzip contrib issue
In-Reply-To: <20080731085442.GA1856@34-mo7-2.acn.waw.pl>
References: <002701c8f2e6$f2159640$6c01a8c0@PcJuanxp>
	<0598459B-3713-4EBE-90BF-111BA1360694@syenar.hu>
	<20080731085442.GA1856@34-mo7-2.acn.waw.pl>
Message-ID: <C94C8C88-9EF5-48FD-8562-2D8F81AE598B@syenar.hu>

Hi Przemek,

I've only meant Windows platform this time. If we later
find out any conversion needs for other platforms, we may
add them later.

Brgds,
Viktor

On 2008.07.31., at 10:54, Przemyslaw Czerpak wrote:

> On Thu, 31 Jul 2008, Szak?ts Viktor wrote:
>> If it has no side-effects, maybe we could add this conversion
>> to these functions.
>
> Not for all platforms. In *nixes file names should be stored in
> native ISO CPs (if we want to be compatible with other ZIP tools)
> which is more similar to ANSI in Windows so such conversion should
> be done only in MS-Win builds.
>
> If you can confirm that other Windows ZIP tools store filenames
> inside ZIP using OEM encoding then I'll add automatic translation
> for this platforms inside hbmzip C code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jul 31 05:40:21 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 05:47:21 2008
Subject: [Harbour] 2008-07-31 10:10 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f2f1$Blat.v2.6.2$72f9f2c4$34b836bfbcb2@127.0.0.1>

2008-07-31 10:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * contrib/xhb/hbcompat.ch
     + Added translations for WildMatch(), hb_DeserialNext(), 
       hb_Checksum().
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Jul 31 08:08:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 08:08:11 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>

2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/zip.c
    ! set valid ZIP signature in header file (2.0)

  * harbour/contrib/hbmzip/hbmzip.c
    ! fixed ZIP encryption header by adding CRC32 checksum
      Now other tools should properly recognize password encrypted
      archives created by HBMZIP library. Please test.
    ! changed parameters of HB_ZipFileCreate() function to pass CRC32
      for password encrypted files:
         HB_ZipFileCreate( hZip, cZipName, dDate, cTime,
                           nInternalAttr, nExternalAttr,
                           [ nMethod = HB_ZLIB_METHOD_DEFLATE ], 
                           [ nLevel = HB_ZLIB_COMPRESSION_DEFAULT ], 
                           [ cPassword, ulFileCRC32 ], [ cComment ] ) ->
                     nError
    + added new function to calculate CRC32 value from file body:
         HB_zipFileCRC32( cFileName ) -> nError
    + added translation for file attributes when DOS archive is
      decompressed in *nix environment

  * harbour/contrib/hbmzip/readme.txt
    * updated list of Harbour [UN]ZIP functions and parameters

best regards
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 08:22:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 08:23:03 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
Message-ID: <70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>

Hi Przemek,

1) I did a quick test, but unzip doesn't seem to accept
    any passwords for something zipped with myzip.
    Also, I've zipped something with a password using zip,
    and tried to unzip it with myunzip, but it didn't
    work either. Maybe I'm doing something wrong.

2) I'm not sure I understand hb_zipfilecreate()'s new
    parameter. What file's CRC32 should be passed there?

Brgds,
Viktor

On 2008.07.31., at 14:08, Przemyslaw Czerpak wrote:

> 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/contrib/hbmzip/zip.c
>    ! set valid ZIP signature in header file (2.0)
>
>  * harbour/contrib/hbmzip/hbmzip.c
>    ! fixed ZIP encryption header by adding CRC32 checksum
>      Now other tools should properly recognize password encrypted
>      archives created by HBMZIP library. Please test.
>    ! changed parameters of HB_ZipFileCreate() function to pass CRC32
>      for password encrypted files:
>         HB_ZipFileCreate( hZip, cZipName, dDate, cTime,
>                           nInternalAttr, nExternalAttr,
>                           [ nMethod = HB_ZLIB_METHOD_DEFLATE ],
>                           [ nLevel = HB_ZLIB_COMPRESSION_DEFAULT ],
>                           [ cPassword, ulFileCRC32 ], [ cComment ] )  
> ->
>                     nError
>    + added new function to calculate CRC32 value from file body:
>         HB_zipFileCRC32( cFileName ) -> nError
>    + added translation for file attributes when DOS archive is
>      decompressed in *nix environment
>
>  * harbour/contrib/hbmzip/readme.txt
>    * updated list of Harbour [UN]ZIP functions and parameters
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Jul 31 08:38:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 08:38:48 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
Message-ID: <9879F4F3-34E7-4DCE-8919-ABBBB0484A9B@syenar.hu>

>
Hi Przemek,

> 1) I did a quick test, but unzip doesn't seem to accept
>   any passwords for something zipped with myzip.
>   Also, I've zipped something with a password using zip,
>   and tried to unzip it with myunzip, but it didn't
>   work either. Maybe I'm doing something wrong.

One correction: myunzip _does_ work on passworded zipped
files. (I just missed to specify *.* to it)

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Jul 31 08:50:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 08:50:49 2008
Subject: [Harbour] 2008-07-31 14:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807311250.m6VCohC9008051@31-mo5-4.acn.waw.pl>

2008-07-31 14:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/hbmzip.c
  * harbour/contrib/hbmzip/readme.txt
    * changed parameters of HB_UnzipFileInfo()
      Now in 10-th parameter is @lCrypted and 11-th is @cComment

  * harbour/contrib/hbmzip/tests/myunzip.prg
    + show archive and file comment
    + show encrypted files ('*' after file name)

best regards
Przemek
From druzus at acn.waw.pl  Thu Jul 31 09:22:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 09:22:12 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
Message-ID: <20080731132207.GA9094@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 1) I did a quick test, but unzip doesn't seem to accept
>    any passwords for something zipped with myzip.

Please be sure that you are using current SVN code.
I made test with UNZIP in my linux box and PKUNZIP
in DOS emulator and both nicely decompress password
encrypted archives created by myzip.prg
I was using:
   UnZip 5.51 of 22 May 2004, by Info-ZIP
   UnZip 5.52 of 28 February 2005, by Info-ZIP
   PKUNZIP 2.04g

>    Also, I've zipped something with a password using zip,
>    and tried to unzip it with myunzip, but it didn't
>    work either. Maybe I'm doing something wrong.

It extracts correctly for me but as I can see in your other
mail you already resolved the problem.

> 2) I'm not sure I understand hb_zipfilecreate()'s new
>    parameter. What file's CRC32 should be passed there?

hb_zipfilecreate() is used when you want to store file in
ZIP archive yourself passing the data to this file directly
with all other information like file data and attribute.
In such case if you want to encrypt file using password and
you want that other tools will be able to extract it then
you have to also pass CRC32 calculated for data you will
later write to ZIP file using HB_ZipFileWrite().
If this data is in constant value then use HB_CRC32() function
to calculate it otherwise if it is in file then you can use
HB_zipFileCRC32(). HB_ZipFileCreate() does not know data
you will write so it cannot calculate it itself and because
this CRC32 value is part of encryption key then it's necessary
to know it at the beginning and it cannot be updated later
(at least without yet another pass which will decode and encode
again with new key having valid CRC32).
HB_ZipStoreFile() does not need CRC32 passed by user because
it calculates it from given source file.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 10:29:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 10:30:18 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080731132207.GA9094@34-mo7-2.acn.waw.pl>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
Message-ID: <98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>

>>
Hi Przemek,

>> 1) I did a quick test, but unzip doesn't seem to accept
>>
>>   any passwords for something zipped with myzip.
>
> Please be sure that you are using current SVN code.
> I made test with UNZIP in my linux box and PKUNZIP
> in DOS emulator and both nicely decompress password
> encrypted archives created by myzip.prg
> I was using:
>   UnZip 5.51 of 22 May 2004, by Info-ZIP
>   UnZip 5.52 of 28 February 2005, by Info-ZIP
>   PKUNZIP 2.04g

I did these, after doing a complete checkout to an empty dir
and a full rebuild:

del hello.zip
myzip hello.zip myzip.tds --pass abc
unzip hello.zip
pkunzip -sabc hello.zip

It then asks me for the password, I type it it, it says it's invalid,
and asks again. unzip is 5.52, same as yours, but Win32 version,
pkunzip 2.04g DOS version.

What am I doing wrong?

>> 2) I'm not sure I understand hb_zipfilecreate()'s new
>>   parameter. What file's CRC32 should be passed there?
>
> hb_zipfilecreate() is used when you want to store file in
> ZIP archive yourself passing the data to this file directly
> with all other information like file data and attribute.
> In such case if you want to encrypt file using password and
> you want that other tools will be able to extract it then
> you have to also pass CRC32 calculated for data you will
> later write to ZIP file using HB_ZipFileWrite().
> If this data is in constant value then use HB_CRC32() function
> to calculate it otherwise if it is in file then you can use
> HB_zipFileCRC32(). HB_ZipFileCreate() does not know data
> you will write so it cannot calculate it itself and because
> this CRC32 value is part of encryption key then it's necessary
> to know it at the beginning and it cannot be updated later
> (at least without yet another pass which will decode and encode
> again with new key having valid CRC32).
> HB_ZipStoreFile() does not need CRC32 passed by user because
> it calculates it from given source file.

Okay, I see now, many thanks.

Brgds,
Viktor

From soporte at dsgsoftware.com  Thu Jul 31 10:42:19 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Jul 31 10:42:38 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl><70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu><20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
Message-ID: <000801c8f31b$abdd1b00$6c01a8c0@PcJuanxp>

Hi Przemek, Viktor,

Perhaps these considerations about my test.zip created with hbmzip can help 
:

1) Winzip shows all files in zip as cripted ("*").
2) If I set the correct password then Winzip only unzip the first file of 
the zip.
3) Rest of files are unzipped with no password.

Best regards
Juan

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, July 31, 2008 4:29 PM
Subject: Re: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


>>>
> Hi Przemek,
>
>>> 1) I did a quick test, but unzip doesn't seem to accept
>>>
>>>   any passwords for something zipped with myzip.
>>
>> Please be sure that you are using current SVN code.
>> I made test with UNZIP in my linux box and PKUNZIP
>> in DOS emulator and both nicely decompress password
>> encrypted archives created by myzip.prg
>> I was using:
>>   UnZip 5.51 of 22 May 2004, by Info-ZIP
>>   UnZip 5.52 of 28 February 2005, by Info-ZIP
>>   PKUNZIP 2.04g
>
> I did these, after doing a complete checkout to an empty dir
> and a full rebuild:
>
> del hello.zip
> myzip hello.zip myzip.tds --pass abc
> unzip hello.zip
> pkunzip -sabc hello.zip
>
> It then asks me for the password, I type it it, it says it's invalid,
> and asks again. unzip is 5.52, same as yours, but Win32 version,
> pkunzip 2.04g DOS version.
>
> What am I doing wrong?
>
>>> 2) I'm not sure I understand hb_zipfilecreate()'s new
>>>   parameter. What file's CRC32 should be passed there?
>>
>> hb_zipfilecreate() is used when you want to store file in
>> ZIP archive yourself passing the data to this file directly
>> with all other information like file data and attribute.
>> In such case if you want to encrypt file using password and
>> you want that other tools will be able to extract it then
>> you have to also pass CRC32 calculated for data you will
>> later write to ZIP file using HB_ZipFileWrite().
>> If this data is in constant value then use HB_CRC32() function
>> to calculate it otherwise if it is in file then you can use
>> HB_zipFileCRC32(). HB_ZipFileCreate() does not know data
>> you will write so it cannot calculate it itself and because
>> this CRC32 value is part of encryption key then it's necessary
>> to know it at the beginning and it cannot be updated later
>> (at least without yet another pass which will decode and encode
>> again with new key having valid CRC32).
>> HB_ZipStoreFile() does not need CRC32 passed by user because
>> it calculates it from given source file.
>
> Okay, I see now, many thanks.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From druzus at acn.waw.pl  Thu Jul 31 11:14:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 11:14:13 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
Message-ID: <20080731151408.GA10354@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I did these, after doing a complete checkout to an empty dir
> and a full rebuild:

Maybe a stupid question but did you recompile myzip.prg?
It's not create automatically.

> del hello.zip
> myzip hello.zip myzip.tds --pass abc
> unzip hello.zip
> pkunzip -sabc hello.zip
> 
> It then asks me for the password, I type it it, it says it's invalid,
> and asks again. unzip is 5.52, same as yours, but Win32 version,
> pkunzip 2.04g DOS version.

And what pkunzip did?

It's working for me so I'm surprised. Maybe the problem is somewhere
else. Can you send myzip.tds and hello.zip to me?

best regards,
Przemek
From druzus at acn.waw.pl  Thu Jul 31 11:42:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 11:42:10 2008
Subject: [Harbour] 2008-07-31 17:41 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807311542.m6VFg5RQ011763@31-mo5-4.acn.waw.pl>

2008-07-31 17:41 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/classes.c
    + adding 2-nd parameter to __clsGetProperties()
      When it's TRUE then __clsGetProperties() returns also exported
      messages which have corresponding assign messages (with "_" prefix)

  * harbour/source/rtl/objfunc.prg
    + added __objGetProperties( oObject, [ lAllExported = .F. ] ) ->
                  aMsgAndValues
      This function returns list of PROPERTY message with their values,
      when 2-nd parameter is true it also returns exported messages which
      which have corresponding assign messages (with "_" prefix)
      This function is designed to use in object inspectors.

best regards
Przemek
From soporte at dsgsoftware.com  Thu Jul 31 11:43:02 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Jul 31 11:43:09 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
Message-ID: <001001c8f324$2145bd90$6c01a8c0@PcJuanxp>

Please, forget this message and excuse for create confusion.

Now, hbmzip library seems to work very well.

Many thanks
Juan

----- Original Message ----- 
From: "Juan G?lvez" <soporte@dsgsoftware.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, July 31, 2008 4:42 PM
Subject: Re: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> Hi Przemek, Viktor,
>
> Perhaps these considerations about my test.zip created with hbmzip can 
> help :
>
> 1) Winzip shows all files in zip as cripted ("*").
> 2) If I set the correct password then Winzip only unzip the first file of 
> the zip.
> 3) Rest of files are unzipped with no password.
>
> Best regards
> Juan
>
> ----- Original Message ----- 
> From: "Szak?ts Viktor" <harbour.01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Sent: Thursday, July 31, 2008 4:29 PM
> Subject: Re: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw 
> Czerpak(druzus/at/priv.onet.pl)
>
>
>>>>
>> Hi Przemek,
>>
>>>> 1) I did a quick test, but unzip doesn't seem to accept
>>>>
>>>>   any passwords for something zipped with myzip.
>>>
>>> Please be sure that you are using current SVN code.
>>> I made test with UNZIP in my linux box and PKUNZIP
>>> in DOS emulator and both nicely decompress password
>>> encrypted archives created by myzip.prg
>>> I was using:
>>>   UnZip 5.51 of 22 May 2004, by Info-ZIP
>>>   UnZip 5.52 of 28 February 2005, by Info-ZIP
>>>   PKUNZIP 2.04g
>>
>> I did these, after doing a complete checkout to an empty dir
>> and a full rebuild:
>>
>> del hello.zip
>> myzip hello.zip myzip.tds --pass abc
>> unzip hello.zip
>> pkunzip -sabc hello.zip
>>
>> It then asks me for the password, I type it it, it says it's invalid,
>> and asks again. unzip is 5.52, same as yours, but Win32 version,
>> pkunzip 2.04g DOS version.
>>
>> What am I doing wrong?
>>
>>>> 2) I'm not sure I understand hb_zipfilecreate()'s new
>>>>   parameter. What file's CRC32 should be passed there?
>>>
>>> hb_zipfilecreate() is used when you want to store file in
>>> ZIP archive yourself passing the data to this file directly
>>> with all other information like file data and attribute.
>>> In such case if you want to encrypt file using password and
>>> you want that other tools will be able to extract it then
>>> you have to also pass CRC32 calculated for data you will
>>> later write to ZIP file using HB_ZipFileWrite().
>>> If this data is in constant value then use HB_CRC32() function
>>> to calculate it otherwise if it is in file then you can use
>>> HB_zipFileCRC32(). HB_ZipFileCreate() does not know data
>>> you will write so it cannot calculate it itself and because
>>> this CRC32 value is part of encryption key then it's necessary
>>> to know it at the beginning and it cannot be updated later
>>> (at least without yet another pass which will decode and encode
>>> again with new key having valid CRC32).
>>> HB_ZipStoreFile() does not need CRC32 passed by user because
>>> it calculates it from given source file.
>>
>> Okay, I see now, many thanks.
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From rportnoff at spendmap.com  Wed Jul 30 11:24:53 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Thu Jul 31 11:45:00 2008
Subject: [Harbour] Release 1.0.0 Final #1
In-Reply-To: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
References: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
Message-ID: <B0082412468@ms1.3peaks.com>

Hi Viktor,

Attached are two logs (one for HARBOUR and one for RDDADS) which 
contain some warnings when built using MSVC 12.00.8804.

Regards,
Randy.


At 09:57 AM 7/30/2008, you wrote:
>Hi all,
>
>I'd like to ask everyone to try as many kinds of
>builds as possible and report any results on the
>list, so that we can clear up problems before
>tagging 1.0.0.
>
>Passed:
>- Windows
>         BCC55
>         BCC58
>         MinGW 4.12
>         MSVS 2005
>         MSVS 2005 C++,
>         MSVS 2008
>         MSVS 2008 C++
>         Pelles C 4.5
>         Pelles C 5.0
>         Pelles C 5.0 64 bit (with a few problems)
>         MSVS 2008 C++ 64 bit
>- DOS
>         DJGPP 4.23 32 bit
>
>Brgds,
>Viktor
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
	cl.exe -c -I..\..\include -Ogt2yb1p -GX- -G6 -YX -FD -Gs -W3 -nologo -TC -DHB_GUI -DHB_API_MACROS -DHB_FM_STATISTICS_OFF -I"C:\AXS32" -DHB_GUI -DHB_API_MACROS -DHB_FM_STATISTICS_OFF -Fo..\..\obj\vc\\\ .\ads1.c .\adsfunc.c .\adsmgmnt.c 
ads1.c
adsfunc.c
.\ads1.c(2285) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2639) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2639) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2639) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2639) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2639) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2912) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2943) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2943) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2943) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(2943) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(4289) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(4390) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(4474) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(118) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(121) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(124) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(157) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(158) : warning C4761: integral size mismatch in argument; conversion supplied
.\ads1.c(159) : warning C4761: integral size mismatch in argument; conversion supplied
adsmgmnt.c
.\adsfunc.c(404) : warning C4761: integral size mismatch in argument; conversion supplied
.\adsfunc.c(1879) : warning C4761: integral size mismatch in argument; conversion supplied
	if exist "..\..\lib\vc\\rddads.lib" del "..\..\lib\vc\\rddads.lib" > nul
	lib.exe /out:..\..\lib\vc\\rddads.lib @c:\tempfile\nma03916.
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

..\..\obj\vc\\ads1.obj ..\..\obj\vc\\adsfunc.obj ..\..\obj\vc\\adsmgmnt.obj 
-------------- next part --------------
expropt1.c
expropt2.c
hbarch.c
hbfsapi.c
hbfopen.c
hbgete.c
hbwince.c
hbhash.c
hbdate.c
hbstr.c
hbtrace.c
hbver.c
hbverdsp.c
reserved.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

hbpp.c
source\pp\ppcore.c(5080) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(1555) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(1376) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(3729) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(3734) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(3971) : warning C4761: integral size mismatch in argument; conversion supplied
Harbour Preprocessor 1.0.0
Copyright 1999-2008, http://www.harbour-project.org
pptable.c
ppcore.c
pplib.c
source\pp\ppcore.c(5080) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(1555) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(1376) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(3729) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(3734) : warning C4761: integral size mismatch in argument; conversion supplied
source\pp\ppcore.c(3971) : warning C4761: integral size mismatch in argument; conversion supplied
pplib2.c
pplib3.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

        1 file(s) copied.
        1 file(s) copied.
hbmain.c
complex.c
source\compiler\hbmain.c(903) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\hbmain.c(3325) : warning C4761: integral size mismatch in argument; conversion supplied
cmdcheck.c
hbcomp.c
hbcmplib.c
hbdbginf.c
hbdead.c
hbstripl.c
hbusage.c
hbident.c
hbgenerr.c
hblbl.c
hbpcode.c
hbfunchk.c
hbfix.c
hbopt.c
ppcomp.c
genc.c
gencc.c
gencobj.c
genobj32.c
source\compiler\genobj32.c(549) : warning C4244: '=' : conversion from 'short ' to 'unsigned char ', possible loss of data
genhrb.c
source\compiler\genobj32.c(292) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(292) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(297) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(317) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(328) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(331) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(334) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(389) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(396) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(406) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(412) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(432) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(439) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(464) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(466) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(482) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(511) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(578) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(595) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(609) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(621) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(630) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(635) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(651) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(662) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(676) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genobj32.c(685) : warning C4761: integral size mismatch in argument; conversion supplied
source\compiler\genhrb.c(105) : warning C4244: '=' : conversion from 'short ' to 'unsigned char ', possible loss of data
expropta.c
exproptb.c
include\hbexprb.c(1522) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(1573) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4703) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4717) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4749) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4817) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4835) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4853) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4862) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4925) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4938) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4954) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4962) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(5030) : warning C4761: integral size mismatch in argument; conversion supplied
harboury.c
harbour.y(1361) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(1364) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(1368) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(1369) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(1370) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(1371) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(1372) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(1373) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(1593) : warning C4761: integral size mismatch in argument; conversion supplied
harbour.y(2540) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

harbour.c
harbinit.c
arrays.c
arrayshb.c
asort.c
break.c
classes.c
cmdarg.c
source\vm\classes.c(2928) : warning C4761: integral size mismatch in argument; conversion supplied
source\vm\classes.c(2934) : warning C4761: integral size mismatch in argument; conversion supplied
source\vm\classes.c(3783) : warning C4761: integral size mismatch in argument; conversion supplied
source\vm\classes.c(3976) : warning C4761: integral size mismatch in argument; conversion supplied
source\vm\classes.c(4009) : warning C4761: integral size mismatch in argument; conversion supplied
codebloc.c
debug.c
dynlibhb.c
dynsym.c
source\vm\dynlibhb.c(211) : warning C4761: integral size mismatch in argument; conversion supplied
estack.c
eval.c
evalhb.c
source\vm\eval.c(348) : warning C4761: integral size mismatch in argument; conversion supplied
extend.c
source\vm\evalhb.c(80) : warning C4761: integral size mismatch in argument; conversion supplied
extrap.c
fm.c
garbage.c
source\vm\fm.c(995) : warning C4761: integral size mismatch in argument; conversion supplied
hashes.c
hashfunc.c
hvm.c
initexit.c
source\vm\hvm.c(490) : warning C4761: integral size mismatch in argument; conversion supplied
source\vm\hvm.c(6341) : warning C4761: integral size mismatch in argument; conversion supplied
source\vm\hvm.c(6702) : warning C4761: integral size mismatch in argument; conversion supplied
initsymb.c
itemapi.c
macro.c
memvars.c
memvclip.c
pcount.c
proc.c
pvalue.c
runner.c
vm.c
source\vm\runner.c(567) : warning C4761: integral size mismatch in argument; conversion supplied
source\vm\runner.c(235) : warning C4761: integral size mismatch in argument; conversion supplied
source\vm\runner.c(781) : warning C4761: integral size mismatch in argument; conversion supplied
mainstd.c
mainwin.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

achoice.c
adir.c
alert.c
altd.c
browdb.c
browdbx.c
browse.c
checkbox.c
color53.c
dbedit.c
devoutp.c
dircmd.c
dirscan.c
einstv52.c
einstvar.c
einstvau.c
errorsys.c
fieldbl.c
getlist.c
getsys.c
getsys53.c
gui.c
hbini.c
input.c
listbox.c
memoedit.c
memvarbl.c
menuto.c
menusys.c
objfunc.c
perfuncs.c
persist.c
profiler.c
pushbtn.c
radiobtn.c
radiogrp.c
readkey.c
readvar.c
scrollbr.c
setfunc.c
setta.c
symbol.c
tbcolumn.c
tbrowse.c
tbrowsys.c
tclass.c
teditor.c
text.c
tget.c
tgetint.c
tgetlist.c
tlabel.c
tmenuitm.c
tmenusys.c
tobject.c
tpopup.c
treport.c
tscalar.c
ttextlin.c
ttopbar.c
typefile.c
typefilx.c
valtoexp.c
wait.c
abs.c
accept.c
ampm.c
at.c
binnum.c
binnumx.c
box.c
cdpapi.c
source\rtl\box.c(81) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(81) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(81) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(81) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(87) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(87) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(87) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(87) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(93) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(93) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(93) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\box.c(93) : warning C4761: integral size mismatch in argument; conversion supplied
chrasc.c
colorind.c
console.c
copyfile.c
source\rtl\console.c(462) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\console.c(462) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\console.c(423) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\console.c(442) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\console.c(450) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\console.c(543) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\console.c(543) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\console.c(554) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\console.c(554) : warning C4761: integral size mismatch in argument; conversion supplied
datec.c
dates.c
dateshb.c
datesx.c
defpath.c
defpathu.c
descend.c
dirdrive.c
direct.c
diskspac.c
disksphb.c
do.c
empty.c
source\rtl\do.c(108) : warning C4761: integral size mismatch in argument; conversion supplied
errorapi.c
errorapu.c
source\rtl\errorapi.c(197) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\errorapi.c(199) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\errorapi.c(219) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\errorapi.c(221) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\errorapi.c(241) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\errorapi.c(243) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\errorapi.c(600) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\errorapi.c(964) : warning C4761: integral size mismatch in argument; conversion supplied
errorint.c
file.c
filehb.c
filesys.c
fkmax.c
source\rtl\filesys.c(2293) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\filesys.c(2328) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\filesys.c(2685) : warning C4761: integral size mismatch in argument; conversion supplied
fnsplit.c
fserror.c
fssize.c
fstemp.c
gete.c
gt.c
gtapi.c
gtchrmap.c
source\rtl\gtapi.c(162) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtapi.c(179) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtapi.c(196) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtapi.c(515) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtapi.c(711) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtapi.c(728) : warning C4761: integral size mismatch in argument; conversion supplied
gtapiu.c
gtclip.c
gtfunc.c
gtkbstat.c
gtkeycod.c
gtsys.c
gttone.c
gx.c
source\rtl\gttone.c(187) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gttone.c(188) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gttone.c(195) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gttone.c(204) : warning C4761: integral size mismatch in argument; conversion supplied
hardcr.c
hbadler.c
hbbit.c
hbcrc.c
hbhex.c
hbmd5.c
hbffind.c
hbfile.c
hbgtcore.c
hbinet.c
source\rtl\hbgtcore.c(780) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(908) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(908) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(917) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(917) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1474) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1474) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1721) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1722) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1735) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1748) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1760) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1762) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbgtcore.c(1763) : warning C4761: integral size mismatch in argument; conversion supplied
hbstrsh.c
source\rtl\hbinet.c(1551) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbinet.c(1707) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbinet.c(1759) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbinet.c(1820) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\hbinet.c(1922) : warning C4761: integral size mismatch in argument; conversion supplied
hbrandom.c
hbregex.c
hbregexc.c
hbrunfun.c
hbtoken.c
hbzlib.c
idle.c
inkey.c
inkeyapi.c
is.c
isprint.c
itemseri.c
langapi.c
left.c
len.c
lennum.c
math.c
maxrow.c
source\rtl\math.c(352) : warning C4761: integral size mismatch in argument; conversion supplied
memofile.c
minmax.c
mlcfunc.c
mod.c
mouse53.c
mouseapi.c
mousex.c
mtran.c
natmsg.c
natmsgu.c
source\rtl\natmsg.c(116) : warning C4761: integral size mismatch in argument; conversion supplied
net.c
oemansi.c
oemansix.c
oldbox.c
oldclear.c
source\rtl\oldbox.c(72) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(72) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(72) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(72) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(86) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(86) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(86) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(86) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(100) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(100) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(100) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldbox.c(100) : warning C4761: integral size mismatch in argument; conversion supplied
pad.c
source\rtl\oldclear.c(61) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldclear.c(61) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldclear.c(62) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldclear.c(62) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldclear.c(62) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\oldclear.c(62) : warning C4761: integral size mismatch in argument; conversion supplied
padc.c
padl.c
padr.c
philes.c
philes53.c
source\rtl\philes.c(62) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\philes.c(94) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\philes.c(213) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\philes.c(261) : warning C4761: integral size mismatch in argument; conversion supplied
philesx.c
source\rtl\philes53.c(65) : warning C4761: integral size mismatch in argument; conversion supplied
rat.c
replic.c
right.c
round.c
run.c
samples.c
saverest.c
scroll.c
scrrow.c
source\rtl\scroll.c(109) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\scroll.c(109) : warning C4761: integral size mismatch in argument; conversion supplied
secondfs.c
seconds.c
set.c
setcolor.c
source\rtl\set.c(506) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\set.c(868) : warning C4761: integral size mismatch in argument; conversion supplied
setcurs.c
source\rtl\setcolor.c(77) : warning C4761: integral size mismatch in argument; conversion supplied
setkey.c
source\rtl\setcurs.c(79) : warning C4761: integral size mismatch in argument; conversion supplied
setpos.c
source\rtl\setkey.c(192) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\setkey.c(213) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\setkey.c(233) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\setkey.c(246) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\setkey.c(322) : warning C4761: integral size mismatch in argument; conversion supplied
setposbs.c
source\rtl\setpos.c(70) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\setpos.c(70) : warning C4761: integral size mismatch in argument; conversion supplied
shadow.c
source\rtl\setposbs.c(70) : warning C4761: integral size mismatch in argument; conversion supplied
shadowu.c
source\rtl\shadow.c(63) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(63) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(63) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(63) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(63) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(73) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(73) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(73) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(73) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\shadow.c(73) : warning C4761: integral size mismatch in argument; conversion supplied
soundex.c
space.c
spfiles.c
str.c
strpeek.c
strcase.c
strmatch.c
strtran.c
strzero.c
stuff.c
substr.c
tone.c
trace.c
transfrm.c
trim.c
tscalara.c
tscalarb.c
tscalarc.c
tscalard.c
tscalarh.c
tscalarl.c
tscalarn.c
tscalarp.c
tscalars.c
tscalaru.c
type.c
val.c
valtostr.c
valtype.c
version.c
word.c
xhelp.c
xsavescr.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

        1 file(s) copied.
        1 file(s) copied.
macroy.c
macroa.c
macrob.c
macrolex.c
include\hbexprb.c(4703) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4717) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4817) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4835) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4925) : warning C4761: integral size mismatch in argument; conversion supplied
include\hbexprb.c(4938) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

dbgbrwsr.c
dbghelp.c
dbgmenu.c
dbgtmenu.c
dbgtmitm.c
dbgtwin.c
debugger.c
dbgtarr.c
dbgtobj.c
dbgthsh.c
tbrwtext.c
dbgwa.c
dbgentry.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

msgbe866.c
msgbewin.c
msgbg866.c
msgbgiso.c
msgbgmik.c
msgbgwin.c
msgca.c
msgcs852.c
msgcsiso.c
msgcskam.c
msgcswin.c
msgde.c
msgdewin.c
msgel.c
msgelwin.c
msgeo.c
msges.c
msgeswin.c
msgeu.c
msgfr.c
msggl.c
msghe862.c
msghewin.c
msghr437.c
msghr852.c
msghriso.c
msghrwin.c
msghu852.c
msghucwi.c
msghuiso.c
msghuwin.c
msgid.c
msgis850.c
msgit.c
msgko.c
msgltwin.c
msgnl.c
msgpl852.c
msgpliso.c
msgplmaz.c
msgplwin.c
msgpt.c
msgro.c
msgru866.c
msgrukoi.c
msgruwin.c
msgskiso.c
msgskwin.c
msgskkam.c
msgsk852.c
msgsl437.c
msgsl852.c
msgsliso.c
msgslwin.c
msgsr852.c
msgsriso.c
msgsrwin.c
msgtr857.c
msgtrwin.c
msgua866.c
msguakoi.c
msguawin.c
msgzhb5.c
msgzhgb.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

cpbg866.c
cpbgiso.c
cpbgmik.c
cpbgwin.c
cpcs852.c
cpcsiso.c
cpcskam.c
cpcswin.c
cpde850.c
cpdeiso.c
cpdewin.c
cpel737.c
cpelwin.c
cpes850.c
cpesmwin.c
cpeswin.c
cpfr850.c
cphr1250.c
cphr437.c
cphr852.c
cphu852.c
cphu852s.c
cphuiso.c
cphuisos.c
cphuwin.c
cphuwins.c
cpit437.c
cpit850.c
cpitisb.c
cpitiso.c
cpltwin.c
cppl852.c
cppliso.c
cpplmaz.c
cpplwin.c
cppt850.c
cpptiso.c
cpru866.c
cpruiso.c
cprukoi.c
cpruwin.c
cpsk852.c
cpskiso.c
cpskkam.c
cpskwin.c
cpsl437.c
cpsl852.c
cpsliso.c
cpslwin.c
cpsrwin.c
cpsv850.c
cpsvclip.c
cpsvwin.c
cptr857.c
cptrwin.c
cpua866.c
cpuakoi.c
cpuawin.c
uc1250.c
uc1251.c
uc1252.c
uc1253.c
uc1254.c
uc1257.c
uc737.c
uc850.c
uc852.c
uc857.c
uc866.c
uc8859_1.c
uc8859_2.c
uc8859_5.c
uc88591b.c
uckoi8.c
uckoi8u.c
ucmaz.c
uckam.c
ucmik.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

_hbpcreg.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
chartabs.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrecomp.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcreconf.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcredfa.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcreexec.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrefind.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrefinf.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcreget.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcreinfo.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcremktb.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrenewl.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcreoutf.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrerefc.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrestud.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcretabs.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcretryf.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrever.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrevutf.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
pcrexcls.c
source\hbpcre\_hbconf.h(11) : warning C4616: #pragma warning : warning number '0' out of range, must be between '1' and '4'
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

adler32.c
compress.c
crc32.c
deflate.c
gzio.c
infback.c
inffast.c
inflate.c
inftrees.c
trees.c
uncompr.c
zutil.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

dbdelim.c
dbsdf.c
dbjoin.c
dbjoinx.c
dbtotal.c
dbtotalx.c
dbfuncs.c
dbfuncsx.c
dblist.c
dblistx.c
dbsort.c
dbsortx.c
dbstrux.c
dbstruxu.c
dbstruxx.c
dbupdat.c
dbupdatx.c
rddord.c
rddordu.c
rddsys.c
dbcmd.c
dbcmd53.c
source\rdd\dbcmd.c(398) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd.c(461) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd.c(841) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd.c(1485) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd.c(1522) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd.c(1679) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd.c(1692) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd.c(2028) : warning C4761: integral size mismatch in argument; conversion supplied
dbcmdhb.c
source\rdd\dbcmd53.c(163) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd53.c(353) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd53.c(387) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd53.c(413) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd53.c(437) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd53.c(471) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbcmd53.c(501) : warning C4761: integral size mismatch in argument; conversion supplied
dbcmdx.c
dbdrop.c
source\rdd\dbcmdx.c(115) : warning C4761: integral size mismatch in argument; conversion supplied
dbexists.c
fieldhb.c
hbdbsort.c
workarea.c
wacore.c
wafunc.c
dbf1.c
source\rdd\wafunc.c(771) : warning C4761: integral size mismatch in argument; conversion supplied
dbnubs.c
source\rdd\dbf1.c(3516) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbf1.c(3696) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbf1.c(4794) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbf1.c(5191) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbf1.c(5271) : warning C4761: integral size mismatch in argument; conversion supplied
delim1.c
dbsql.c
source\rdd\delim1.c(1377) : warning C4761: integral size mismatch in argument; conversion supplied
sdf1.c
source\rdd\dbsql.c(369) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbsql.c(187) : warning C4761: integral size mismatch in argument; conversion supplied
rddinfo.c
source\rdd\sdf1.c(172) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\sdf1.c(1110) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

nulsys.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

dbfntx0.c
dbfntx1.c
source\rdd\dbfntx\dbfntx1.c(908) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(2276) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(2524) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(2536) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(930) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(2914) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(2976) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(2989) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(3061) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(6157) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(6294) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(5206) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(3414) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(3418) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(4214) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfntx\dbfntx1.c(7272) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

dbfcdx1.c
sixcdx1.c
source\rdd\dbfcdx\dbfcdx1.c(7187) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(7418) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(7537) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5462) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5462) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5467) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5499) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5499) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5528) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5528) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8580) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8580) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(9151) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(9151) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8848) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8848) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8894) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8894) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(7187) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(7418) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(7537) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5462) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5462) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5467) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5499) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5499) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5528) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(5528) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8580) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8580) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(9151) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(9151) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8848) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8848) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8894) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbfcdx\dbfcdx1.c(8894) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

dbffpt1.c
source\rdd\dbffpt\dbffpt1.c(1075) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(2560) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(297) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(3058) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(3083) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(3980) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(4063) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(321) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(4239) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(4244) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(4299) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(4709) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(4724) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(3373) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(4920) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(4930) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\dbffpt\dbffpt1.c(1121) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

sxcompat.c
sxini.c
sxtrig.c
sxcompr.c
source\rdd\hbsix\sxcompr.c(532) : warning C4244: '=' : conversion from 'long ' to 'short ', possible loss of data
source\rdd\hbsix\sxcompr.c(533) : warning C4244: '=' : conversion from 'long ' to 'short ', possible loss of data
source\rdd\hbsix\sxcompr.c(539) : warning C4244: '=' : conversion from 'long ' to 'short ', possible loss of data
source\rdd\hbsix\sxcompr.c(540) : warning C4244: '=' : conversion from 'long ' to 'short ', possible loss of data
sxcrypt.c
sxdate.c
sxsem.c
sxfname.c
sxtable.c
sxord.c
sxutil.c
source\rdd\hbsix\sxord.c(278) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\hbsix\sxord.c(324) : warning C4761: integral size mismatch in argument; conversion supplied
sxredir.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

hsx.c
cftsfunc.c
source\rdd\hsx\hsx.c(1451) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

usrrdd.c
source\rdd\usrrdd\usrrdd.c(3278) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3385) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3393) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3404) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3428) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3458) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3458) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3474) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3543) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3750) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3780) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(3971) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(4127) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(4215) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(4215) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(4224) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(4224) : warning C4761: integral size mismatch in argument; conversion supplied
source\rdd\usrrdd\usrrdd.c(4269) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

gtcgi.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

gtstd.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

gtpca.c
source\rtl\gtpca\gtpca.c(804) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtpca\gtpca.c(819) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

gtwin.c
source\rtl\gtwin\gtwin.c(1739) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtwin\gtwin.c(1739) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtwin\gtwin.c(1739) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtwin\gtwin.c(1739) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

gtwvt.c
source\rtl\gtwvt\gtwvt.c(1349) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtwvt\gtwvt.c(1349) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtwvt\gtwvt.c(1349) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtwvt\gtwvt.c(1358) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtwvt\gtwvt.c(1358) : warning C4761: integral size mismatch in argument; conversion supplied
source\rtl\gtwvt\gtwvt.c(1358) : warning C4761: integral size mismatch in argument; conversion supplied
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

gtgui.c
gtdef.c
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

hbrun.c
external.c
hbdot.c
hbtest.c
rt_hvm.c
rt_hvma.c
rt_math.c
rt_date.c
rt_str.c
rt_stra.c
rt_trans.c
rt_array.c
rt_file.c
rt_misc.c
rt_class.c
rt_miscc.c
hbpptest.c
hbdoc.c
genasc.c
genhpc.c
genhtm.c
genchm.c
genng.c
genos2.c
genrtf.c
gentrf.c
genpdf1.c
teeasc.c
html.c
ng.c
os2.c
rtf.c
troff.c
fclass1.c
ffile1.c
ft_funcs.c
hbmake.c
hbmutils.c
checks.c
pickarry.c
pickfile.c
prb_stak.c
radios.c
tmake.c
hbmlang.c
readline.c
utils\hbmake\hbmlang.c(240) : warning C4761: integral size mismatch in argument; conversion supplied
utils\hbmake\hbmlang.c(285) : warning C4761: integral size mismatch in argument; conversion supplied
utils\hbmake\hbmlang.c(297) : warning C4761: integral size mismatch in argument; conversion supplied
hbverfix.c
From harbour.01 at syenar.hu  Thu Jul 31 11:54:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 11:54:59 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080731151408.GA10354@34-mo7-2.acn.waw.pl>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
Message-ID: <7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>

>> I did these, after doing a complete checkout to an empty dir
>> and a full rebuild:
>
> Maybe a stupid question but did you recompile myzip.prg?
> It's not create automatically.

Yes, of course, I started with a brand new dir.

Now, I was suspecting that an older hbmzip.lib is picked
up, but I did some test to ensure this is not the case,
besides renaming my production harbour binary dir
(but it's not in the path anyway).

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: hello.zip
Type: application/zip
Size: 1745 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080731/b3d516a7/hello.zip
-------------- next part --------------

From druzus at acn.waw.pl  Thu Jul 31 12:24:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 12:24:24 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
Message-ID: <20080731162418.GA11949@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Now, I was suspecting that an older hbmzip.lib is picked
> up, but I did some test to ensure this is not the case,
> besides renaming my production harbour binary dir
> (but it's not in the path anyway).

I tired to extract hello.zip you attached but I cannot even using
myunzip.prg and --pass abc. What password did you used?
Can you tried to extract files created by myzip.prg using myunzip.prg?
It looks that current myzp works also for Juan and WinZIP so I'm
a little bit confused with your results.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 12:42:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 12:42:39 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080731162418.GA11949@34-mo7-2.acn.waw.pl>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
Message-ID: <237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>

Hi Przemek,

Now I'm also confused, because myunzip cannot extra it either
(created a zero length file).
Now I did the .zip again (theoretically with no difference),
I'm attaching it. myunzip is able to unzip it, but unzip isn't.

The password is: abc

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: hello.zip
Type: application/zip
Size: 1745 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20080731/6f8b4ddb/hello.zip
-------------- next part --------------


On 2008.07.31., at 18:24, Przemyslaw Czerpak wrote:

> On Thu, 31 Jul 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Now, I was suspecting that an older hbmzip.lib is picked
>> up, but I did some test to ensure this is not the case,
>> besides renaming my production harbour binary dir
>> (but it's not in the path anyway).
>
> I tired to extract hello.zip you attached but I cannot even using
> myunzip.prg and --pass abc. What password did you used?
> Can you tried to extract files created by myzip.prg using myunzip.prg?
> It looks that current myzp works also for Juan and WinZIP so I'm
> a little bit confused with your results.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From soporte at dsgsoftware.com  Thu Jul 31 12:51:03 2008
From: soporte at dsgsoftware.com (=?ISO-8859-2?Q?Juan_G=E1lvez?=)
Date: Thu Jul 31 12:51:20 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl><70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu><20080731132207.GA9094@34-mo7-2.acn.waw.pl><98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu><20080731151408.GA10354@34-mo7-2.acn.waw.pl><7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
Message-ID: <002101c8f32d$a7a95730$6c01a8c0@PcJuanxp>

Hi Przemek,

I'm sorry but I'm also a little bit confused and I think definitively 
there's something wrong / strange when I try to use a *password* zip file 
created by hbmzip with an external application (WinZip).

My test.zip has about 500 files (dbf, cdx, fpt ...) and they're zipped / 
unzipped with hbmzip with no problem.

When I try to unzip them with WinZip then it shows "password incorrect" for 
most of them. Finally I only get about 180 files ...

Of course, zip files with no password work well.

Best regards
Juan

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, July 31, 2008 6:24 PM
Subject: Re: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> On Thu, 31 Jul 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Now, I was suspecting that an older hbmzip.lib is picked
>> up, but I did some test to ensure this is not the case,
>> besides renaming my production harbour binary dir
>> (but it's not in the path anyway).
>
> I tired to extract hello.zip you attached but I cannot even using
> myunzip.prg and --pass abc. What password did you used?
> Can you tried to extract files created by myzip.prg using myunzip.prg?
> It looks that current myzp works also for Juan and WinZIP so I'm
> a little bit confused with your results.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From harbour.01 at syenar.hu  Thu Jul 31 12:54:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 12:54:23 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
Message-ID: <DBEAE4B1-35BB-4A12-9367-9A73B93E0294@syenar.hu>

Some additional info:
- 7-Zip 4.57 GUI is able to extract myzip.prg from hello.zip with  
'abc' password.
- unzip.exe is able to extract sample encrypted .zip created with  
zip.exe.

[[[ BTW, 7z support would be nice in Harbour since it hasn't some of the
limits of .zip and std encryption is a lot stronger. ]]]

Brgds,
Viktor

On 2008.07.31., at 18:42, Szak?ts Viktor wrote:

> Hi Przemek,
>
> Now I'm also confused, because myunzip cannot extra it either
> (created a zero length file).
> Now I did the .zip again (theoretically with no difference),
> I'm attaching it. myunzip is able to unzip it, but unzip isn't.
>
> The password is: abc
>
> Brgds,
> Viktor
>
> <hello.zip>
>
> On 2008.07.31., at 18:24, Przemyslaw Czerpak wrote:
>
>> On Thu, 31 Jul 2008, Szak?ts Viktor wrote:
>>
>> Hi Viktor,
>>
>>> Now, I was suspecting that an older hbmzip.lib is picked
>>> up, but I did some test to ensure this is not the case,
>>> besides renaming my production harbour binary dir
>>> (but it's not in the path anyway).
>>
>> I tired to extract hello.zip you attached but I cannot even using
>> myunzip.prg and --pass abc. What password did you used?
>> Can you tried to extract files created by myzip.prg using  
>> myunzip.prg?
>> It looks that current myzp works also for Juan and WinZIP so I'm
>> a little bit confused with your results.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From harbour.01 at syenar.hu  Thu Jul 31 13:01:54 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 13:01:49 2008
Subject: [Harbour] 2008-07-31 18:58 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f32f$Blat.v2.6.2$22612646$20281d2f8aaa@127.0.0.1>

2008-07-31 18:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbextern.ch
     + EXTERNAL __OBJGETPROPERTIES

   * doc/whatsnew.txt
     + Updated with new functions.

   * source/hbpcre/_hbconf.h
     ! Silenced a #pragma warning for MSVC 12.x.
     ; NOTE: Some notable MSVC 12.x warnings in Harbour code:
       source\rdd\hbsix\sxcompr.c(532) : warning C4244: '=' : conversion from 'long ' to 'short ', possible loss of data
       source\rdd\hbsix\sxcompr.c(533) : warning C4244: '=' : conversion from 'long ' to 'short ', possible loss of data
       source\rdd\hbsix\sxcompr.c(539) : warning C4244: '=' : conversion from 'long ' to 'short ', possible loss of data
       source\rdd\hbsix\sxcompr.c(540) : warning C4244: '=' : conversion from 'long ' to 'short ', possible loss of data
       There are 3 more known warnings, the rest is common integer difference warning.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul 31 15:06:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 15:06:36 2008
Subject: [Harbour] Release 1.0.0 Final #1
In-Reply-To: <B0082412468@ms1.3peaks.com>
References: <48E7CD13-947F-4AB1-B252-832C42D8EC68@syenar.hu>
	<B0082412468@ms1.3peaks.com>
Message-ID: <CB376690-71F3-46B0-B726-31FA95A1614C@syenar.hu>

Hi Randy,

Thanks a lot. Some of these warnings are known ones, most of them
is complaining about integer size differences, which we have a lot.

I've committed a fix.

Brgds,
Viktor

On 2008.07.30., at 17:24, Randy Portnoff wrote:

> Hi Viktor,
>
> Attached are two logs (one for HARBOUR and one for RDDADS) which  
> contain some warnings when built using MSVC 12.00.8804.
>
> Regards,
> Randy.
>
>
> At 09:57 AM 7/30/2008, you wrote:
>> Hi all,
>>
>> I'd like to ask everyone to try as many kinds of
>> builds as possible and report any results on the
>> list, so that we can clear up problems before
>> tagging 1.0.0.
>>
>> Passed:
>> - Windows
>>        BCC55
>>        BCC58
>>        MinGW 4.12
>>        MSVS 2005
>>        MSVS 2005 C++,
>>        MSVS 2008
>>        MSVS 2008 C++
>>        Pelles C 4.5
>>        Pelles C 5.0
>>        Pelles C 5.0 64 bit (with a few problems)
>>        MSVS 2008 C++ 64 bit
>> - DOS
>>        DJGPP 4.23 32 bit
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> < 
> RDDADS 
> .LOG><HARBOUR.LOG>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Jul 31 16:03:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 16:03:10 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
Message-ID: <20080731200305.GA13088@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Now I'm also confused, because myunzip cannot extra it either
> (created a zero length file).
> Now I did the .zip again (theoretically with no difference),
> I'm attaching it. myunzip is able to unzip it, but unzip isn't.

My unzip too. It looks that zip file you created is wrong.
What compiler do you use? Can you try to repeat your test
with some other build?
I've just compressed using myzip.prg --pass abc whole Harbour .svn
tree with binaries (.obj,.lib,.a,.exe) for about 10 different C compilers
inside and then decompress them using unzip without any problems.

Then I repeated the test using myzip.prg compiled for Win32 (MinGW
cross build) and unzip was decompressing few files then asked for a
password because the previously enter one (abc) detected as incorrect.
It was repeated few times for other files so some files were lost.
These random result suggests that there is sth wrong with some code
but the problem cannot be replicated in Linux builds - so far I was
not able to create broken archive. I have some ideas about possible
reasons like not exactly ANSI-C compliant fread() which may cause
such effects. I'll try to make some tests ASAP and if it's the
source of problem then I'll add workaround for it ASAP.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 16:39:43 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 16:39:53 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080731200305.GA13088@34-mo7-2.acn.waw.pl>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
	<20080731200305.GA13088@34-mo7-2.acn.waw.pl>
Message-ID: <C6840563-2F53-4E06-A5B8-BE0DF99C8EFA@syenar.hu>

Hi Przemek,

For these tests I was using BCC 5.5.1, with these
switches (notably debug switches):
C_USR=-DUNICODE -v -y

I've now retried with a fully default build, with
no custom switches, but the effect is still there.

Even more strangely, I'm getting the same (wrong)
results with an MSVS 2005 (MSVC++ 14) build.

I've also checked MSVS 2008, to no avail.

This is pretty strange.

[ I'll try to do MinGW tests, but that will take
long as it was years ago when I have linked a test
.exe with it. ]

Brgds,
Viktor

On 2008.07.31., at 22:03, Przemyslaw Czerpak wrote:

> On Thu, 31 Jul 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Now I'm also confused, because myunzip cannot extra it either
>> (created a zero length file).
>> Now I did the .zip again (theoretically with no difference),
>> I'm attaching it. myunzip is able to unzip it, but unzip isn't.
>
> My unzip too. It looks that zip file you created is wrong.
> What compiler do you use? Can you try to repeat your test
> with some other build?
> I've just compressed using myzip.prg --pass abc whole Harbour .svn
> tree with binaries (.obj,.lib,.a,.exe) for about 10 different C  
> compilers
> inside and then decompress them using unzip without any problems.
>
> Then I repeated the test using myzip.prg compiled for Win32 (MinGW
> cross build) and unzip was decompressing few files then asked for a
> password because the previously enter one (abc) detected as incorrect.
> It was repeated few times for other files so some files were lost.
> These random result suggests that there is sth wrong with some code
> but the problem cannot be replicated in Linux builds - so far I was
> not able to create broken archive. I have some ideas about possible
> reasons like not exactly ANSI-C compliant fread() which may cause
> such effects. I'll try to make some tests ASAP and if it's the
> source of problem then I'll add workaround for it ASAP.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Jul 31 16:47:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 16:47:33 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <C6840563-2F53-4E06-A5B8-BE0DF99C8EFA@syenar.hu>
References: <200807311208.m6VC85Jn006944@31-mo5-4.acn.waw.pl>
	<70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
	<20080731200305.GA13088@34-mo7-2.acn.waw.pl>
	<C6840563-2F53-4E06-A5B8-BE0DF99C8EFA@syenar.hu>
Message-ID: <20080731204724.GA22036@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> For these tests I was using BCC 5.5.1, with these
> switches (notably debug switches):
> C_USR=-DUNICODE -v -y
> I've now retried with a fully default build, with
> no custom switches, but the effect is still there.
> Even more strangely, I'm getting the same (wrong)
> results with an MSVS 2005 (MSVC++ 14) build.
> I've also checked MSVS 2008, to no avail.
> This is pretty strange.
> [ I'll try to do MinGW tests, but that will take
> long as it was years ago when I have linked a test
> .exe with it. ]

You do not have too. I've just located the reason of problem.
Just simply I was not writting anything for DOS/Windows for
too long time. On this systems fopen() without "b" flag strip
'\r' from the stream so CRC was wrongly calculated for such
files. I'll commit fix in a while.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Jul 31 16:50:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 16:50:26 2008
Subject: [Harbour] 2008-07-31 22:49 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807312050.m6VKoL7Z022157@31-mo5-4.acn.waw.pl>

2008-07-31 22:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmzip/hbmzip.c
    ! added "b" to fopen() flags to force binary mode in all systems 
      during CRC32 calculation

best regards
Przemek
From druzus at acn.waw.pl  Thu Jul 31 16:51:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 16:51:48 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080731204724.GA22036@34-mo7-2.acn.waw.pl>
References: <70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
	<20080731200305.GA13088@34-mo7-2.acn.waw.pl>
	<C6840563-2F53-4E06-A5B8-BE0DF99C8EFA@syenar.hu>
	<20080731204724.GA22036@34-mo7-2.acn.waw.pl>
Message-ID: <20080731205133.GB22036@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Przemyslaw Czerpak wrote:

Hi Viktor,

> You do not have too. I've just located the reason of problem.
> Just simply I was not writting anything for DOS/Windows for
> too long time. On this systems fopen() without "b" flag strip
> '\r' from the stream so CRC was wrongly calculated for such
> files. I'll commit fix in a while.

Please try after:

   2008-07-31 22:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
     * harbour/contrib/hbmzip/hbmzip.c
       ! added "b" to fopen() flags to force binary mode in all systems 
         during CRC32 calculation

Sorry for troubles. It was my really stupid mistake.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Jul 31 17:02:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 17:02:30 2008
Subject: [Harbour] 2008-07-31 23:02 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200807312102.m6VL2P3U002760@31-mo5-4.acn.waw.pl>

2008-07-31 23:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/hbsix/sxcompr.c
    * pacified warnings

best regards
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 17:18:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 17:18:27 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080731205133.GB22036@34-mo7-2.acn.waw.pl>
References: <70C5404E-BE99-41F6-8A03-8AF2866D348F@syenar.hu>
	<20080731132207.GA9094@34-mo7-2.acn.waw.pl>
	<98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
	<20080731200305.GA13088@34-mo7-2.acn.waw.pl>
	<C6840563-2F53-4E06-A5B8-BE0DF99C8EFA@syenar.hu>
	<20080731204724.GA22036@34-mo7-2.acn.waw.pl>
	<20080731205133.GB22036@34-mo7-2.acn.waw.pl>
Message-ID: <C309DF71-C42F-45E8-AAEB-F2014122E6B5@syenar.hu>

Hi Przemek,

Many thanks for the hunt and fix, it now works perfectly.

Now the remaining mystery is how 7-Zip could extract
the wrong file anyway :)

BTW, I wonder if we couldn't rather use hb_fs*() functions
instead of fopen/fread. (in places where this wouldn't
badly affect performance, like hb_zipGetFileInfo().) Or would
it have some other side effects?

Brgds,
Viktor

On 2008.07.31., at 22:51, Przemyslaw Czerpak wrote:

> On Thu, 31 Jul 2008, Przemyslaw Czerpak wrote:
>
> Hi Viktor,
>
>> You do not have too. I've just located the reason of problem.
>> Just simply I was not writting anything for DOS/Windows for
>> too long time. On this systems fopen() without "b" flag strip
>> '\r' from the stream so CRC was wrongly calculated for such
>> files. I'll commit fix in a while.
>
> Please try after:
>
>   2008-07-31 22:49 UTC+0200 Przemyslaw Czerpak (druzus/at/ 
> priv.onet.pl)
>     * harbour/contrib/hbmzip/hbmzip.c
>       ! added "b" to fopen() flags to force binary mode in all systems
>         during CRC32 calculation
>
> Sorry for troubles. It was my really stupid mistake.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Jul 31 17:31:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 17:31:13 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <C309DF71-C42F-45E8-AAEB-F2014122E6B5@syenar.hu>
References: <98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
	<20080731200305.GA13088@34-mo7-2.acn.waw.pl>
	<C6840563-2F53-4E06-A5B8-BE0DF99C8EFA@syenar.hu>
	<20080731204724.GA22036@34-mo7-2.acn.waw.pl>
	<20080731205133.GB22036@34-mo7-2.acn.waw.pl>
	<C309DF71-C42F-45E8-AAEB-F2014122E6B5@syenar.hu>
Message-ID: <20080731213107.GA22237@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Now the remaining mystery is how 7-Zip could extract
> the wrong file anyway :)

It was not wrong. Just simply 7-Zip like myunzip does not
compare CRC32 stored in compressed header with CRC32 in
file ZIP entry ignoring it.

> BTW, I wonder if we couldn't rather use hb_fs*() functions
> instead of fopen/fread. (in places where this wouldn't
> badly affect performance, like hb_zipGetFileInfo().) Or would
> it have some other side effects?

The ZIP code uses internally byte read so we will have to
add buffered IO operations working like in stdio to not kill
the performance. I plan to add sth like that in the future
with more general usage, f.e. also for inet sockets.
The C functions will have .prg wrappers operating on POINTER
items too. It will also greatly simplified improving the speed
many other things, f.e. text file processing with functions
like hb_readline().

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 17:41:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 17:41:20 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20080731213107.GA22237@34-mo7-2.acn.waw.pl>
References: <98288EF1-8701-4CBA-8F84-30B6BDDDB1AF@syenar.hu>
	<20080731151408.GA10354@34-mo7-2.acn.waw.pl>
	<7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
	<20080731200305.GA13088@34-mo7-2.acn.waw.pl>
	<C6840563-2F53-4E06-A5B8-BE0DF99C8EFA@syenar.hu>
	<20080731204724.GA22036@34-mo7-2.acn.waw.pl>
	<20080731205133.GB22036@34-mo7-2.acn.waw.pl>
	<C309DF71-C42F-45E8-AAEB-F2014122E6B5@syenar.hu>
	<20080731213107.GA22237@34-mo7-2.acn.waw.pl>
Message-ID: <0FF34C7C-A65B-45A0-AA01-2AFC0A50125C@syenar.hu>

>>
Hi Przemek,

>> Now the remaining mystery is how 7-Zip could extract
>> the wrong file anyway :)
>
> It was not wrong. Just simply 7-Zip like myunzip does not
> compare CRC32 stored in compressed header with CRC32 in
> file ZIP entry ignoring it.

Okay I got it now, so a special CRC32 is (or may be) used
to check if the result was indeed correct. [ Now I wonder,
why the normal CRC32 - which is calculated anyway - wasn't
good for this purpose for zips, and they've opted for a
separate one, sacrificing performance on compression. ]

>> BTW, I wonder if we couldn't rather use hb_fs*() functions
>> instead of fopen/fread. (in places where this wouldn't
>> badly affect performance, like hb_zipGetFileInfo().) Or would
>> it have some other side effects?
>
> The ZIP code uses internally byte read so we will have to
> add buffered IO operations working like in stdio to not kill
> the performance. I plan to add sth like that in the future
> with more general usage, f.e. also for inet sockets.
> The C functions will have .prg wrappers operating on POINTER
> items too. It will also greatly simplified improving the speed
> many other things, f.e. text file processing with functions
> like hb_readline().

Yes, I had this in mind on performance. However in hb_zipGetFileInfo(),
there the read is done by 16KB chunks, so this may not be affected
by switching to hb_fsRead().

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul 31 17:41:43 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 17:41:49 2008
Subject: [Harbour] Re: MSVC recent warning + BCC58 old one
In-Reply-To: <A3E8315F-F4B9-496B-9C34-67E9EC404C37@syenar.hu>
References: <A3E8315F-F4B9-496B-9C34-67E9EC404C37@syenar.hu>
Message-ID: <F8592AD0-0348-44AE-BF7E-ECFDF28E42AB@syenar.hu>

Hi Przemek,

> 2) BCC58 old one:
> Warning W8017 C:\devl\BCC58\Include\stdint.h 77: Redefinition of  
> 'INT16_MIN' is not identical
> Warning W8017 C:\devl\BCC58\Include\stdint.h 78: Redefinition of  
> 'INT32_MIN' is not identical
> Warning W8017 C:\devl\BCC58\Include\stdint.h 79: Redefinition of  
> 'INT64_MIN' is not identical
> Warning W8017 C:\devl\BCC58\Include\stdint.h 82: Redefinition of  
> 'INT16_MAX' is not identical
> Warning W8017 C:\devl\BCC58\Include\stdint.h 83: Redefinition of  
> 'INT32_MAX' is not identical
> Warning W8017 C:\devl\BCC58\Include\stdint.h 84: Redefinition of  
> 'INT64_MAX' is not identical
> Warning W8017 C:\devl\BCC58\Include\stdint.h 87: Redefinition of  
> 'UINT16_MAX' is not identical
> Warning W8017 C:\devl\BCC58\Include\stdint.h 88: Redefinition of  
> 'UINT32_MAX' is not identical
> Warning W8017 C:\devl\BCC58\Include\stdint.h 89: Redefinition of  
> 'UINT64_MAX' is not identical
>
> Couldn't we use HB_ prefixed versions of *_MAX inside Harbour to  
> avoid the above problem?

What do you think about it? Is this nonsense?

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Jul 31 17:59:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 17:59:45 2008
Subject: [Harbour] 2008-07-31 14:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <0FF34C7C-A65B-45A0-AA01-2AFC0A50125C@syenar.hu>
References: <7A14C186-544A-471E-B207-2754E3391F80@syenar.hu>
	<20080731162418.GA11949@34-mo7-2.acn.waw.pl>
	<237D824B-E1B5-4E10-BDB6-4597DFE87240@syenar.hu>
	<20080731200305.GA13088@34-mo7-2.acn.waw.pl>
	<C6840563-2F53-4E06-A5B8-BE0DF99C8EFA@syenar.hu>
	<20080731204724.GA22036@34-mo7-2.acn.waw.pl>
	<20080731205133.GB22036@34-mo7-2.acn.waw.pl>
	<C309DF71-C42F-45E8-AAEB-F2014122E6B5@syenar.hu>
	<20080731213107.GA22237@34-mo7-2.acn.waw.pl>
	<0FF34C7C-A65B-45A0-AA01-2AFC0A50125C@syenar.hu>
Message-ID: <20080731215939.GA29994@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Okay I got it now, so a special CRC32 is (or may be) used
> to check if the result was indeed correct. [ Now I wonder,
> why the normal CRC32 - which is calculated anyway - wasn't
> good for this purpose for zips, and they've opted for a
> separate one, sacrificing performance on compression. ]

Because 'normal' CRC32 is calculated online during compression
with minimal speed overhead and the second one is used in encrypted
header becoming part of encryption key so it has to be known at the
beginning before you begin to compress file. In fact any values can
be used in encrypted header (original version implemented by Mindaugas
was using 0) but as you can see other tools refuse to decrypt
such files and always expects CRC32 only. Probably PKWARE chose
CRC32 which forces additional file scan pass) because they always
made two file scan passes to collect information about file body
and tune compression algorithm so it was not causing additional
overhead for them.

> >The ZIP code uses internally byte read so we will have to
> >add buffered IO operations working like in stdio to not kill
> >the performance. I plan to add sth like that in the future
> >with more general usage, f.e. also for inet sockets.
> >The C functions will have .prg wrappers operating on POINTER
> >items too. It will also greatly simplified improving the speed
> >many other things, f.e. text file processing with functions
> >like hb_readline().
> Yes, I had this in mind on performance. However in hb_zipGetFileInfo(),
> there the read is done by 16KB chunks, so this may not be affected
> by switching to hb_fsRead().

The CRC32 calculation procedure yes but this is minor to other
IO operation inside ZLIB/MINIZIP code. I rather prefer to replace all
IO functions then only few of them and mix stdio with raw file
access.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Jul 31 19:43:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 19:43:44 2008
Subject: [Harbour] Re: MSVC recent warning + BCC58 old one
In-Reply-To: <F8592AD0-0348-44AE-BF7E-ECFDF28E42AB@syenar.hu>
References: <A3E8315F-F4B9-496B-9C34-67E9EC404C37@syenar.hu>
	<F8592AD0-0348-44AE-BF7E-ECFDF28E42AB@syenar.hu>
Message-ID: <20080731234336.GA30109@34-mo7-2.acn.waw.pl>

On Thu, 31 Jul 2008, Szak?ts Viktor wrote:

Hi Viktor,

> >2) BCC58 old one:
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 77: Redefinition of  
> >'INT16_MIN' is not identical
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 78: Redefinition of  
> >'INT32_MIN' is not identical
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 79: Redefinition of  
> >'INT64_MIN' is not identical
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 82: Redefinition of  
> >'INT16_MAX' is not identical
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 83: Redefinition of  
> >'INT32_MAX' is not identical
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 84: Redefinition of  
> >'INT64_MAX' is not identical
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 87: Redefinition of  
> >'UINT16_MAX' is not identical
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 88: Redefinition of  
> >'UINT32_MAX' is not identical
> >Warning W8017 C:\devl\BCC58\Include\stdint.h 89: Redefinition of  
> >'UINT64_MAX' is not identical
> >Couldn't we use HB_ prefixed versions of *_MAX inside Harbour to  
> >avoid the above problem?
> What do you think about it? Is this nonsense?

We try to use original stdint.h definitions and we define above
only if compiler does not support them so using HB_ prefix does
not resolves the problem. I strongly prefer to use original
definitions because on some platforms (f.e. MIPS390) their values
are not the same as for x86.
Now we should enable:
   #include <stdint.h>
for BCC >= 5.8 (defined( __BORLANDC__ ) && __BORLANDC__ >= 1410) because
it supports these definitions. Unfortunately as far as I remember BCC
INT32_MIN definition exploits bug in BCC which later causes other warnings.
Please try to compile this code:

   #include <stdint.h>
   int f( void )
   {
      return INT32_MIN;
   }

As you can see it's nothing more then BCC bug.
The only one solution I know is changing in hbdefs.h:

   #if defined( __XCC__ ) || defined( __MINGW32__ ) || \
       ( defined( __GNUC__ ) && \
         ( defined( HB_OS_LINUX ) || defined( HB_OS_DARWIN ) ) )
   #  include <stdint.h>
   #elif defined( __BORLANDC__ )
   #  include "bcstdint.h"
   #endif

to:

   #if defined( __XCC__ ) || defined( __MINGW32__ ) || \
       ( defined( __BORLANDC__ ) && __BORLANDC__ >= 1410 ) || \
       ( defined( __GNUC__ ) && \
         ( defined( HB_OS_LINUX ) || defined( HB_OS_DARWIN ) ) )
   #  include <stdint.h>
      /* workaround for BCC bug */
   #  if ( defined( __BORLANDC__ ) && __BORLANDC__ >= 1410 )
   #     undef INT32_MIN
   #     define INT32_MIN ((int32_t) -0x8000000)
   #  endif
   #endif

probably instead of:

   #     define INT32_MIN ((int32_t) -0x8000000)

it will be better/cleaner for x86 based platforms to use:

   #     define INT32_MIN ((int32_t) (-INT32_MAX-1))

and then we can wait for fixed <stdint.h> in new BCC version
to add upper __BORLANDC__ version number to protect this
workaround.

If with above modification you can cleanly compile Harbour using
BCC5.8 then please commit them.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Jul 31 20:13:53 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 20:13:49 2008
Subject: [Harbour] 2008-08-01 02:09 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c8f36b$Blat.v2.6.2$7b0e5048$37d8d69d7bea@127.0.0.1>

2008-08-01 02:09 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbdefs.h
     ! Patch added to workaround following phoney warnings 
       when using BCC 5.8 compiler (tested with 5.8.2):
       Warning W8017 C:\devl\BCC58\Include\stdint.h 77: Redefinition of 'INT16_MIN' is not identical
       Warning W8017 C:\devl\BCC58\Include\stdint.h 78: Redefinition of 'INT32_MIN' is not identical
       Warning W8017 C:\devl\BCC58\Include\stdint.h 79: Redefinition of 'INT64_MIN' is not identical
       Warning W8017 C:\devl\BCC58\Include\stdint.h 82: Redefinition of 'INT16_MAX' is not identical
       Warning W8017 C:\devl\BCC58\Include\stdint.h 83: Redefinition of 'INT32_MAX' is not identical
       Warning W8017 C:\devl\BCC58\Include\stdint.h 84: Redefinition of 'INT64_MAX' is not identical
       Warning W8017 C:\devl\BCC58\Include\stdint.h 87: Redefinition of 'UINT16_MAX' is not identical
       Warning W8017 C:\devl\BCC58\Include\stdint.h 88: Redefinition of 'UINT32_MAX' is not identical
       Warning W8017 C:\devl\BCC58\Include\stdint.h 89: Redefinition of 'UINT64_MAX' is not identical

       Many thanks to Przemek for this patch.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Jul 31 20:42:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Jul 31 20:42:10 2008
Subject: [Harbour] BCC 5.8 two remaining warnings
Message-ID: <0A1D0F9F-8BD8-444E-8A64-76C0C4510234@syenar.hu>

Hi Przemek,

By cleaning the many warnings, two new ones got revealed:

Warning W8056 source\rdd\dbf1.c 2379: Integer arithmetic overflow in  
function hb_dbfPutValue
Warning W8056 source\rdd\dbf1.c 2398: Integer arithmetic overflow in  
function hb_dbfPutValue

Both lines use the HB_DBL_LIM_64() macro.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Jul 31 21:06:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Jul 31 21:06:55 2008
Subject: [Harbour] 2008-08-01 03:06 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200808010106.m7116oc6022937@31-mo5-4.acn.waw.pl>

2008-08-01 03:06 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbpp.h
  * harbour/include/hbexprb.c
  * harbour/source/pp/ppcore.c
  * harbour/source/vm/evalhb.c
  * harbour/source/vm/runner.c
  * harbour/source/vm/hvm.c
  * harbour/source/vm/fm.c
  * harbour/source/vm/eval.c
  * harbour/source/vm/dynlibhb.c
  * harbour/source/vm/classes.c
  * harbour/source/rdd/hbsix/sxord.c
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/harbour.y
    * pacified warnings

best regards
Przemek
