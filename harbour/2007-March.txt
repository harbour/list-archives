From dmacias at mail.udg.mx  Thu Mar  1 06:22:41 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Mar  1 06:22:44 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <20070228150247.561BD3F3C04@antivirus2.noc.udg.mx>
References: <20070228150247.561BD3F3C04@antivirus2.noc.udg.mx>
Message-ID: <45E6B781.70105@mail.udg.mx>


> Could you try to SET DIRSEP=\
> before you start the build (maybe in your make_gnu.cmd), and see if
> it helps.
>
>   Chen.
>   

Yes, it work
---------------------------------------
make[3]: Entering directory `/hbbuild/harbour/source/compiler/os2/gcc'
copy ..\..\harbour.yyc harboury.c
        1 file(s) copied.
copy ..\..\harbour.yyh harboury.h
        1 file(s) copied.
---------------------------------------

How can be included in "standard" Harbour build for OS/2 ?
In this way no one user will have problems to build if does not know 
about SET DIRSEP

This error started in Harbour beta 1, previous Harbour release does not 
show it


Next error is in hbopt.c, so Harbour build can not be completed
-------------------------------------
make[3]: *** [hbopt.o] Error 1
-------------------------------------

Below are all results

Gracias,
David Macias


../../hbopt.c: In function `hb_p_pushlocal':
../../hbopt.c:94: error: `SCHAR' undeclared (first use in this function)
../../hbopt.c:94: error: (Each undeclared identifier is reported only once
../../hbopt.c:94: error: for each function it appears in.)
../../hbopt.c:94: error: parse error before "pFunc"
../../hbopt.c:95: error: parse error before ')' token
../../hbopt.c: At top level:
../../hbopt.c:107: error: parse error before '+' token
../../hbopt.c:107: warning: type defaults to `int' in declaration of 
`hb_compNOO
Pfill'
../../hbopt.c:107: error: conflicting types for `hb_compNOOPfill'
../../../../include/hbcomp.h:304: error: previous declaration of 
`hb_compNOOPfil
l'
../../hbopt.c:107: warning: data definition has no type or storage class
../../hbopt.c: In function `hb_p_pushlocalnear':
../../hbopt.c:116: error: `SCHAR' undeclared (first use in this function)
../../hbopt.c:116: error: parse error before "pFunc"
../../hbopt.c:113: warning: unused parameter `cargo'
make[3]: *** [hbopt.o] Error 1
make[2]: *** [descend] Error 2

../../hbgtcore.c:2526: warning: initialization from incompatible pointer 
type
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1

../../mainpm.c: In function `main':
../../mainpm.c:64: warning: useless keyword or type name in empty 
declaration
../../mainpm.c:64: warning: empty declaration
../../mainpm.c:73: error: `iErrorCode' undeclared (first use in this 
function)
../../mainpm.c:73: error: (Each undeclared identifier is reported only once
../../mainpm.c:73: error: for each function it appears in.)
make[3]: *** [mainpm.o] Error 1
make[2]: *** [descend] Error 2

../../dbcmd.c: In function `HB_FUN_DBSEEK':
../../dbcmd.c:2158: warning: signed and unsigned type in conditional 
expression
../../dbcmd.c: In function `HB_FUN_ORDCREATE':
../../dbcmd.c:2856: warning: signed and unsigned type in conditional 
expression
../../dbf1.c: In function `hb_dbfGetValue':
../../dbf1.c:1486: error: `SCHAR' undeclared (first use in this function)
../../dbf1.c:1486: error: (Each undeclared identifier is reported only once
../../dbf1.c:1486: error: for each function it appears in.)
../../dbf1.c:1486: error: parse error before "pArea"
../../dbf1.c:1519: error: parse error before "pArea"
make[3]: *** [dbf1.o] Error 1
make[2]: *** [descend] Error 2
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[1]: *** [first] Error 2

make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[1]: *** [first] Error 2
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1

make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/compiler/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../os2pm.c: In function `HB_FUN_WINSENDMSG':
../../os2pm.c:294: warning: signed and unsigned type in conditional 
expression
../../os2pm.c:295: warning: signed and unsigned type in conditional 
expression
make[3]: ../../../../../source/compiler/os2/gcc/harbour.exe: Command not 
found
make[2]: *** [descend] Error 1
make[1]: *** [first] Error 2
make: *** [first] Error 2




From druzus at priv.onet.pl  Thu Mar  1 08:13:56 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar  1 08:14:31 2007
Subject: [Harbour] ChangeLog 2007-03-01 14:10 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070301131356.GA19752@localhost.localdomain>

2007-03-01 14:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/global.cf
  * harbour/contrib/hgf/os2pm/os2pm.c
  * harbour/include/hbdefs.h
  * harbour/include/hbgtcore.h
  * harbour/source/rdd/dbcmd.c
  * harbour/source/vm/mainpm.c
    * cleaned OS2 build errors and warnings reported by David Macias.
      Modifications not tested - OS2 users will have to make tests and
      reports problems.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Mar  1 08:14:22 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar  1 08:14:58 2007
Subject: [Harbour] ChangeLog BETA1 2007-03-01 14:10 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070301131422.GB19752@localhost.localdomain>

2007-03-01 14:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/global.cf
  * harbour/contrib/hgf/os2pm/os2pm.c
  * harbour/include/hbdefs.h
  * harbour/include/hbgtcore.h
  * harbour/source/rdd/dbcmd.c
  * harbour/source/vm/mainpm.c
    * cleaned OS2 build errors and warnings reported by David Macias.
      Modifications not tested - OS2 users will have to make tests and
      reports problems.

best regards,
Przemek
From philb at philb.us  Thu Mar  1 08:20:20 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Mar  1 08:20:42 2007
Subject: [Harbour] Time for Beta 2 tagging yet?
In-Reply-To: <20070301043808.GB32446@localhost.localdomain>
References: <200702212335.38382.philb@philb.us>
	<20070301043808.GB32446@localhost.localdomain>
Message-ID: <200703010820.20832.philb@philb.us>

On Wednesday 28 February 2007 23:38, Przemyslaw Czerpak wrote:
> On Wed, 21 Feb 2007, Phil Barnett wrote:
> > What do you think?
> > Is it time for a BETA2 tag and builds?
>
> Now I think it is.
> We can wait day or two and if nothing new will appear we can
> create BETA2 tag and release new binaries.

Very good. I trust your judgement.

-- 
Balmer is basically saying: We know there's a problem but we're not going to 
tell you what it is because we want to ambush you in the future.
From druzus at priv.onet.pl  Thu Mar  1 18:42:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar  1 18:43:29 2007
Subject: [Harbour] ChangeLog 2007-03-02 00:40 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070301234253.GA8302@localhost.localdomain>

2007-03-02 00:40 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/ppcore.c
    * clear included file counter in hb_pp_reset()
    * insert space after stream comment /* */ - it's not Clipper
      compatible but it's necessary as long as we have automatic
      identifier concatenation

best regards,
Przemek
From druzus at priv.onet.pl  Thu Mar  1 18:44:30 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar  1 18:45:05 2007
Subject: [Harbour] ChangeLog BETA1 2007-03-02 00:40 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070301234430.GB8302@localhost.localdomain>

2007-03-02 00:40 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/ppcore.c
    * clear included file counter in hb_pp_reset()
    * insert space after stream comment /* */ - it's not Clipper
      compatible but it's necessary as long as we have automatic
      identifier concatenation

best regards,
Przemek
From dmacias at mail.udg.mx  Fri Mar  2 07:01:00 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Mar  2 07:01:07 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <20070301170006.7DDE9409103@antivirus2.noc.udg.mx>
References: <20070301170006.7DDE9409103@antivirus2.noc.udg.mx>
Message-ID: <45E811FC.1080006@mail.udg.mx>

Przemek:


> 2007-03-01 14:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/config/os2/global.cf
>   * harbour/contrib/hgf/os2pm/os2pm.c
>   * harbour/include/hbdefs.h
>   * harbour/include/hbgtcore.h
>   * harbour/source/rdd/dbcmd.c
>   * harbour/source/vm/mainpm.c
>     * cleaned OS2 build errors and warnings reported by David Macias.
>       Modifications not tested - OS2 users will have to make tests and
>       reports problems.
>
>   

Excelent work
With your changes now current Harbour devel branch build entirely under OS/2

No errors   :-)

Just remain two warnings:
----------------------------------------------
[E:\hbbuild\harbour]make -r           1>make_gnu.log
../../gtos2.c: In function `hb_gt_os2_Init':
../../gtos2.c:506: warning: dereferencing type-punned pointer will break 
strict-
aliasing rules
../../gtos2.c:516: warning: dereferencing type-punned pointer will break 
strict-
aliasing rules
----------------------------------------------


Below are included:
- Results of hbtest.exe under OS/2
  ( Test calls failed:         27 ( 0.64 % ) )
- Results of hbtest.exe under Win32:bcc55
  ( Test calls failed:         30 ( 0.71 % ) )

Differences are:
-------------------------------------
!  722 MAIN_HVMA(501)  RTSTR( 00000500000000000000 )          
       Result: " 16  500000000000000"
     Expected: " 21       500000000000000"
!  723 MAIN_HVMA(502)  RTSTR( 0500000000000000 )              
       Result: " 16  500000000000000"
     Expected: " 17   500000000000000"
! 1067 MAIN_MATH(359)  Str(1234567890 * 1234567890 )          
       Result: " 1524157875019052100"
     Expected: " 1524157875019052000"
-------------------------------------

Gracias,
David Macias



Harbour Regression Test Suite
Copyright 1999-2000, http://www.harbour-project.org
---------------------------------------------------------------------------
      Version: Harbour devel build 1.1-0 Intl.
     Compiler: EMX GNU C 3.3.5 (32 bit)
           OS: OS/2 4.50
   Date, Time: 2007.03.02 05:45:20
       Output: (stdout)
Shortcut opt.: ON
     Switches: 
===========================================================================
R No.  Line            TestCall()                               -> 
Result                                                                                
| 
Expected                                                                             

---------------------------------------------------------------------------
!  592 MAIN_HVMA(339)  saArray[ 1000 ]                        
       Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N:1000 "
     Expected: "E BASE 1132 Bound error array access "
!  593 MAIN_HVMA(340)  saArray[ 1000 ] := 1                   
       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
     Expected: "E BASE 1133 Bound error array assign "
! 1427 MAIN_STR(275)   AllTrim( NIL )                         
       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1428 MAIN_STR(276)   AllTrim( 100 )                         
       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1500 MAIN_STR(376)   StrTran( NIL )                         
       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1501 MAIN_STR(377)   StrTran( 100 )                         
       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1502 MAIN_STR(379)   StrTran( "AA", 1 )                     
       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2239 MAIN_TRANS(414) Transform(".", "@E" )                  
       Result: ""
     Expected: " "
! 2241 MAIN_TRANS(416) Transform("..", "@E" )                 
       Result: ""
     Expected: ","+Chr(0)+""
! 2243 MAIN_TRANS(418) Transform(",.,", "@E" )                
       Result: ".,."
     Expected: ",,."
! 2244 MAIN_TRANS(419) Transform(".,.", "@E" )                
       Result: ".,"
     Expected: ""+Chr(0)+".."
! 2245 MAIN_TRANS(420) Transform("OPI", "@E ." )              
       Result: "."
     Expected: ""+Chr(0)+",."
! 2246 MAIN_TRANS(421) Transform("JKL", "@E ," )              
       Result: ","
     Expected: ""+Chr(0)+"P."
! 2563 MAIN_ARRAY(107) aFill( NIL )                           
       Result: "E BASE 9999 Argument error AFILL A:1:U:NIL "
     Expected: "E BASE 9999 Argument error AFILL "
! 2607 MAIN_ARRAY(167) aSize( NIL )                           
       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2608 MAIN_ARRAY(168) aSize( {} )                            
       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2609 MAIN_ARRAY(169) aSize( ErrorNew() )                    
       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2610 MAIN_ARRAY(171) aSize( NIL, 0 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2613 MAIN_ARRAY(174) aSize( NIL, 1 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2619 MAIN_ARRAY(180) aSize( NIL, -1 )                       
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2634 MAIN_ARRAY(205) Array( -1 )                            
       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
     Expected: "E BASE 1131 Bound error array dimension "
! 2635 MAIN_ARRAY(206) Array( 1, 0, -10 )                     
       Result: "E BASE 1131 Bound error array dimension A:3:N:1;N:0;N:-10 "
     Expected: "E BASE 1131 Bound error array dimension "
! 3035 MAIN_MISC(285)  HB_SToD("99990101")                    
       Result: HB_SToD("99990101")
     Expected: HB_SToD("        ")
! 3043 MAIN_MISC(293)  HB_SToD("19 90905")                    
       Result: HB_SToD("        ")
     Expected: HB_SToD("17490905")
! 3044 MAIN_MISC(294)  HB_SToD("199 0905")                    
       Result: HB_SToD("        ")
     Expected: HB_SToD("19740905")
! 4245 MAIN_LAST(179)  __MRestore( "$NOTHERE.MEM", .F. )      
       Result: "E BASE 2005 Open error $NOTHERE.MEM 
A:2:C:$NOTHERE.MEM;L:.F. F:DR"
     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4247 MAIN_LAST(183)  __MSave( BADFNAME(), "*", .T. )        
       Result: "E BASE 2006 Create error *BADNAM*.MEM 
A:3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
     Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
===========================================================================
Test calls passed:       4220 ( 99.36 % )
Test calls failed:         27 ( 0.64 % )
                   ----------
            Total:       4247 ( Time elapsed: 0.38 seconds )

WARNING ! Failures detected





Harbour Regression Test Suite
Copyright 1999-2000, http://www.harbour-project.org
---------------------------------------------------------------------------
      Version: Harbour devel build 1.1-0 Intl.
     Compiler: Borland C++ 5.5.1 (32 bit)
           OS: Windows XP 5.1.2600 Service Pack 2
   Date, Time: 2007.03.02 05:48:06
       Output: (stdout)
Shortcut opt.: ON
     Switches: 
===========================================================================
R No.  Line            TestCall()                               -> 
Result                                                                                
| 
Expected                                                                             

---------------------------------------------------------------------------
!  592 MAIN_HVMA(339)  saArray[ 1000 ]                        
       Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N:1000 "
     Expected: "E BASE 1132 Bound error array access "
!  593 MAIN_HVMA(340)  saArray[ 1000 ] := 1                   
       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
     Expected: "E BASE 1133 Bound error array assign "
!  722 MAIN_HVMA(501)  RTSTR( 00000500000000000000 )          
       Result: " 16  500000000000000"
     Expected: " 21       500000000000000"
!  723 MAIN_HVMA(502)  RTSTR( 0500000000000000 )              
       Result: " 16  500000000000000"
     Expected: " 17   500000000000000"
! 1067 MAIN_MATH(359)  Str(1234567890 * 1234567890 )          
       Result: " 1524157875019052100"
     Expected: " 1524157875019052000"
! 1427 MAIN_STR(275)   AllTrim( NIL )                         
       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1428 MAIN_STR(276)   AllTrim( 100 )                         
       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1500 MAIN_STR(376)   StrTran( NIL )                         
       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1501 MAIN_STR(377)   StrTran( 100 )                         
       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1502 MAIN_STR(379)   StrTran( "AA", 1 )                     
       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2239 MAIN_TRANS(414) Transform(".", "@E" )                  
       Result: ""
     Expected: " "
! 2241 MAIN_TRANS(416) Transform("..", "@E" )                 
       Result: ""
     Expected: ","+Chr(0)+""
! 2243 MAIN_TRANS(418) Transform(",.,", "@E" )                
       Result: ".,."
     Expected: ",,."
! 2244 MAIN_TRANS(419) Transform(".,.", "@E" )                
       Result: ".,"
     Expected: ""+Chr(0)+".."
! 2245 MAIN_TRANS(420) Transform("OPI", "@E ." )              
       Result: "."
     Expected: ""+Chr(0)+",."
! 2246 MAIN_TRANS(421) Transform("JKL", "@E ," )              
       Result: ","
     Expected: ""+Chr(0)+"P."
! 2563 MAIN_ARRAY(107) aFill( NIL )                           
       Result: "E BASE 9999 Argument error AFILL A:1:U:NIL "
     Expected: "E BASE 9999 Argument error AFILL "
! 2607 MAIN_ARRAY(167) aSize( NIL )                           
       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2608 MAIN_ARRAY(168) aSize( {} )                            
       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2609 MAIN_ARRAY(169) aSize( ErrorNew() )                    
       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2610 MAIN_ARRAY(171) aSize( NIL, 0 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2613 MAIN_ARRAY(174) aSize( NIL, 1 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2619 MAIN_ARRAY(180) aSize( NIL, -1 )                       
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2634 MAIN_ARRAY(205) Array( -1 )                            
       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
     Expected: "E BASE 1131 Bound error array dimension "
! 2635 MAIN_ARRAY(206) Array( 1, 0, -10 )                     
       Result: "E BASE 1131 Bound error array dimension A:3:N:1;N:0;N:-10 "
     Expected: "E BASE 1131 Bound error array dimension "
! 3035 MAIN_MISC(285)  HB_SToD("99990101")                    
       Result: HB_SToD("99990101")
     Expected: HB_SToD("        ")
! 3043 MAIN_MISC(293)  HB_SToD("19 90905")                    
       Result: HB_SToD("        ")
     Expected: HB_SToD("17490905")
! 3044 MAIN_MISC(294)  HB_SToD("199 0905")                    
       Result: HB_SToD("        ")
     Expected: HB_SToD("19740905")
! 4245 MAIN_LAST(179)  __MRestore( "$NOTHERE.MEM", .F. )      
       Result: "E BASE 2005 Open error $NOTHERE.MEM 
A:2:C:$NOTHERE.MEM;L:.F. F:DR"
     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4247 MAIN_LAST(183)  __MSave( BADFNAME(), "*", .T. )        
       Result: "E BASE 2006 Create error *BADNAM*.MEM 
A:3:C:*BADNAM*.MEM;C:*;L:.T. F:DR"
     Expected: "E BASE 2006 Create error *BADNAM*.MEM F:DR"
===========================================================================
Test calls passed:       4217 ( 99.29 % )
Test calls failed:         30 ( 0.71 % )
                   ----------
            Total:       4247 ( Time elapsed: 0.27 seconds )

WARNING ! Failures detected



From druzus at priv.onet.pl  Fri Mar  2 08:19:31 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar  2 08:20:08 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <45E811FC.1080006@mail.udg.mx>
References: <20070301170006.7DDE9409103@antivirus2.noc.udg.mx>
	<45E811FC.1080006@mail.udg.mx>
Message-ID: <20070302131931.GA32607@localhost.localdomain>

On Fri, 02 Mar 2007, David Arturo Macias Corona wrote:
> Just remain two warnings:
> ----------------------------------------------
> [E:\hbbuild\harbour]make -r           1>make_gnu.log
> ../../gtos2.c: In function `hb_gt_os2_Init':
> ../../gtos2.c:506: warning: dereferencing type-punned pointer will break 
> strict-
> aliasing rules
> ../../gtos2.c:516: warning: dereferencing type-punned pointer will break 
> strict-
> aliasing rules

I can pacify these warnings but I have a question to OS2 programmers.
Why we are allocating memory for structures passed to KbdCharIn() by
DosAllocMem(). Is it necessary and KbdCharIn() cannot work with C stack
pointers, f.e.:

    {
        KBDKEYINFO keyInfo;
        HKBD hKbd;

        memset( &keyInfo, 0, sizeof( keyInfo ) );
        memset( &hKbd, 0, sizeof( hKbd ) );

        KbdCharIn( &keyInfo, IO_NOWAIT, &hKbd );

    }

I was looking in the internet for some informations but seems that
there was few version of console API in OS2 so it's possible that
only in some chosen cases it's necessary. I would like to know if
it reallt is.

> ----------------------------------------------
> Below are included:
> - Results of hbtest.exe under OS/2
>  ( Test calls failed:         27 ( 0.64 % ) )
> - Results of hbtest.exe under Win32:bcc55
>  ( Test calls failed:         30 ( 0.71 % ) )
> 
> Differences are:
> -------------------------------------
> !  722 MAIN_HVMA(501)  RTSTR( 00000500000000000000 )          
>       Result: " 16  500000000000000"
>     Expected: " 21       500000000000000"
> !  723 MAIN_HVMA(502)  RTSTR( 0500000000000000 )              
>       Result: " 16  500000000000000"
>     Expected: " 17   500000000000000"
> ! 1067 MAIN_MATH(359)  Str(1234567890 * 1234567890 )          
>       Result: " 1524157875019052100"
>     Expected: " 1524157875019052000"
> -------------------------------------

This happens when system does not support 64bit integers.
In such case big integer numbers are stored as DOUBLE value
what gives Clipper compatible results but reduce precision.
Your OS2 build was created with HB_LONG_LONG_OFF.

best regards,
Przemek
From m.renzi at maticasrl.it  Fri Mar  2 12:04:59 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Fri Mar  2 12:07:23 2007
Subject: R: [Harbour] xHarbour GET & Mouse;
In-Reply-To: <000701c75b56$ed95c8c0$d600080a@maxsoft>
References: <20070228071207.GA29202@localhost.localdomain><000001c75b2a$4168f4e0$d600080a@maxsoft><20070228150055.GA9387@localhost.localdomain><000b01c75b4b$59f2fd00$d600080a@maxsoft><00ad01c75b50$250340f0$0100a8c0@emag><000601c75b54$21042a10$d600080a@maxsoft>
	<000701c75b56$ed95c8c0$d600080a@maxsoft>
Message-ID: <000401c75cec$e9568ff0$d600080a@maxsoft>

Hi all.
I like to know if it's possible activate the mouse on xHarbour application
to change focus on the specified GET.
Thank you all
Max


From dmacias at mail.udg.mx  Sat Mar  3 06:41:31 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Mar  3 06:41:33 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <20070302170018.173E541BF35@antivirus2.noc.udg.mx>
References: <20070302170018.173E541BF35@antivirus2.noc.udg.mx>
Message-ID: <45E95EEB.1080200@mail.udg.mx>

Przemek:


> On Fri, 02 Mar 2007, David Arturo Macias Corona wrote:
>   
>> Just remain two warnings:
>> ----------------------------------------------
>> [E:\hbbuild\harbour]make -r           1>make_gnu.log
>> ../../gtos2.c: In function `hb_gt_os2_Init':
>> ../../gtos2.c:506: warning: dereferencing type-punned pointer will break 
>> strict-
>> aliasing rules
>> ../../gtos2.c:516: warning: dereferencing type-punned pointer will break 
>> strict-
>> aliasing rules
>>     
>
> I can pacify these warnings but I have a question to OS2 programmers.
> Why we are allocating memory for structures passed to KbdCharIn() by
> DosAllocMem(). Is it necessary and KbdCharIn() cannot work with C stack
> pointers, f.e.:
>
>     {
>         KBDKEYINFO keyInfo;
>         HKBD hKbd;
>
>         memset( &keyInfo, 0, sizeof( keyInfo ) );
>         memset( &hKbd, 0, sizeof( hKbd ) );
>
>         KbdCharIn( &keyInfo, IO_NOWAIT, &hKbd );
>
>     }
>
> I was looking in the internet for some informations but seems that
> there was few version of console API in OS2 so it's possible that
> only in some chosen cases it's necessary. I would like to know if
> it reallt is.
>
>   

Maybe Maurilio Longo have the answer


>>
>> Differences are:
>> -------------------------------------
>> !  722 MAIN_HVMA(501)  RTSTR( 00000500000000000000 )          
>>       Result: " 16  500000000000000"
>>     Expected: " 21       500000000000000"
>> !  723 MAIN_HVMA(502)  RTSTR( 0500000000000000 )              
>>       Result: " 16  500000000000000"
>>     Expected: " 17   500000000000000"
>> ! 1067 MAIN_MATH(359)  Str(1234567890 * 1234567890 )          
>>       Result: " 1524157875019052100"
>>     Expected: " 1524157875019052000"
>> -------------------------------------
>>     
>
> This happens when system does not support 64bit integers.
> In such case big integer numbers are stored as DOUBLE value
> what gives Clipper compatible results but reduce precision.
> Your OS2 build was created with HB_LONG_LONG_OFF.
>
>   

Yes, I used HB_LONG_LONG_OFF

If I do not use it, build results are:
------------------------------------------------------------------
[E:\hbbuild\harbour]make -r           1>make_gnu.log
../../hbstr.c: In function `hb_str2number':
../../hbstr.c:544: error: `LONGLONG_MAX' undeclared (first use in this 
function)

../../hbstr.c:544: error: (Each undeclared identifier is reported only once
../../hbstr.c:544: error: for each function it appears in.)
make[3]: *** [hbstr.o] Error 1
make[2]: *** [descend] Error 2
------------------------------------------------------------------

You sugested to use it in:
      Wed, 8 Feb 2006 13:39:52 +0100

Below are original message

Gracias,
David Macias



------------------------------

Message: 28
Date: Wed, 8 Feb 2006 13:39:52 +0100
From: Przemyslaw Czerpak <druzus@priv.onet.pl>
Subject: Re: [Harbour] Re: ChangeLog 2006-02-04 17:05 UTC+0100
    Przemyslaw
To: "Harbour Project Main Developer List."
    <harbour@harbour-project.org>
Message-ID: <20060208123952.GA25417@localhost.localdomain>
Content-Type: text/plain; charset=iso-8859-2

On Wed, 08 Feb 2006, David Arturo Macias Corona wrote:
 > Below is included a report of tests using:
 > - Latest Harbour CVS source code
 > - OS/2: "The Operating System/2 Version is 4.50"
 > - gcc 3.3.5: "gcc (GCC) 3.3.5 (Innotek Build 2005-01-17 06:42)"
 > - make_gnu.cmd
 >
 > ../../hbstr.c: In function `hb_str2number':
 > ../../hbstr.c:491: error: `LONGLONG_MAX' undeclared (first use in this
 > function)

Hi David,

Many thanks for tests.

I do not know why but OS2 users disabled LONGLONG support so to build
Harbour on OS2 you have to set:
    set C_USR=-DHB_LONG_LONG_OFF

 > ../../harbour.c:3566: error: conflicting types for `hb_compIsJump'
 > ../../../../include/hbcomp.h:453: error: previous declaration of
 > `hb_compIsJump'

My typo, BOOL/int modification. In harbour.c line 3566 should be:
BOOL hb_compIsJump( PFUNCTION pFunc, ULONG ulPos )


 > ../../hbgtcore.c:1832: warning: initialization from incompatible pointer
 > type

The same as above BOOL / int mistake.

 > ../../net.c: In function `HB_FUN_NETNAME':
 > ../../net.c:110: warning: implicit declaration of function 
`__gethostname'

This will have to clean OS2 users - I found the following note in xHarbour
source code:

   /* 25/03/2004 - <maurilio.longo@libero.it>
      not needed anymore as of GCC 3.2.2

   #if defined(__EMX__)
      #include <emx/syscalls.h>
      #define gethostname __gethostname
   #endif
   */

So I guess you should also disable this code in source/rtl/net.c
I'll commit such modification to CVS but please confirm the results.

 > ../../os2pm.c: In function `WndProc':
 > ../../os2pm.c:91: warning: dereferencing `void *' pointer
 > ../../os2pm.c:91: error: request for member `pSymbol' in something not a
 > structu
 > re or union
 > ../../os2pm.c:99: error: `hb_stack' undeclared (first use in this 
function)
 > ../../os2pm.c:99: error: (Each undeclared identifier is reported only 
once
 > ../../os2pm.c:99: error: for each function it appears in.)

It's a contrib code which should be updated. I'll do that
but you will have to check the results.
BTW This code call HVM functions. I do not know when it can
be activated but if assynchrously to main code then it can
overwrite the stack return item so it should call
    hb_vmPushState();
    [...]
    hb_vmPopState();

to save/restore HVM state and make HVM safe for reentrance.

Seems that no one try to build OS2 Harbour version for quite long time.
I'll commit this modification in a while so please set environment
variable C_USR by:
    set C_USR=-DHB_LONG_LONG_OFF
and please try once again to build Harbour.

best regards,
Przemek


From rob at steinmetznet.com  Sun Mar  4 00:37:26 2007
From: rob at steinmetznet.com (Robert Steinmetz)
Date: Sun Mar  4 00:37:31 2007
Subject: [Harbour] Porting Foxplus applications
Message-ID: <45EA5B16.8070707@steinmetznet.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: rob.vcf
Type: text/x-vcard
Size: 313 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070303/35f3c99e/rob.vcf
From e.m.giordano at emagsoftware.it  Sun Mar  4 04:06:48 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Mar  4 04:07:24 2007
Subject: [Harbour] Porting Foxplus applications
References: <45EA5B16.8070707@steinmetznet.com>
Message-ID: <003d01c75e3c$70f8f100$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Robert Steinmetz" <rob@steinmetznet.com>
A: <harbour@harbour-project.org>
Data invio: domenica 4 marzo 2007 6.37
Oggetto: [Harbour] Porting Foxplus applications


> These two lines generate errors;
> 
>   ON ERROR DO ACC_ERR WITH ERROR(),MESSAGE(),SYS(16)
> 
>   ON KEY = 315 DO ACCHELP WITH SYS(16),1,SYS(18)

There are no such commands in Harbour (neither in Clipper), as far as I know.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From philb at philb.us  Sun Mar  4 04:07:53 2007
From: philb at philb.us (Phil Barnett)
Date: Sun Mar  4 04:10:07 2007
Subject: [Harbour] Time for BETA2 tagging?
Message-ID: <200703040407.53620.philb@philb.us>


Ok, settled enough to go to Beta2 state?

-- 
Balmer is basically saying: We know there's a problem but we're not going to 
tell you what it is because we want to ambush you in the future.
From antonioharbour at gmail.com  Sun Mar  4 04:15:41 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar  4 04:15:57 2007
Subject: [Harbour] Porting Foxplus applications
In-Reply-To: <003d01c75e3c$70f8f100$0100a8c0@emag>
Message-ID: <45ea8e49.495760ae.238e.ffffacec@mx.google.com>

Enrico, Robert,

> > These two lines generate errors;
> > 
> >   ON ERROR DO ACC_ERR WITH ERROR(),MESSAGE(),SYS(16)
> > 
> >   ON KEY = 315 DO ACCHELP WITH SYS(16),1,SYS(18)
> 
> There are no such commands in Harbour (neither in Clipper), 
> as far as I know.

IMO, they may be easily implemented using the preprocessor and some user
defined functions :-)

regards,

Antonio

From e.m.giordano at emagsoftware.it  Sun Mar  4 04:23:20 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Mar  4 04:23:54 2007
Subject: [Harbour] Porting Foxplus applications
References: <45ea8e49.495760ae.238e.ffffacec@mx.google.com>
Message-ID: <004c01c75e3e$bffb01b0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Antonio Linares" <antonioharbour@gmail.com>
A: "'Harbour Project Main Developer List.'" <harbour@harbour-project.org>
Data invio: domenica 4 marzo 2007 10.15
Oggetto: RE: [Harbour] Porting Foxplus applications


> Enrico, Robert,
> 
> > > These two lines generate errors;
> > > 
> > >   ON ERROR DO ACC_ERR WITH ERROR(),MESSAGE(),SYS(16)
> > > 
> > >   ON KEY = 315 DO ACCHELP WITH SYS(16),1,SYS(18)
> > 
> > There are no such commands in Harbour (neither in Clipper), 
> > as far as I know.
> 
> IMO, they may be easily implemented using the preprocessor and some user
> defined functions :-)

Probably. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at priv.onet.pl  Sun Mar  4 08:12:10 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Mar  4 08:12:46 2007
Subject: [Harbour] ChangeLog 2007-03-04 14:00 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070304131210.GA11585@localhost.localdomain>

2007-03-04 14:00 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapifs.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbpp.h
  * harbour/source/common/hbfsapi.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/harbour.c
  * harbour/source/compiler/hbusage.c
  * harbour/source/compiler/ppcomp.c
  * harbour/source/pp/ppcore.c
    * cleanup .ppo file creation
    + new compiler switch: p+ to enable preprocessor tracing
      when used information about applied rules is stored in .ppt file
  * harbour/include/hbdefs.h
  * harbour/source/rtl/gtos2/gtos2.c
    * OS2 build cleanup

best regards,
Przemek
From druzus at priv.onet.pl  Sun Mar  4 08:18:57 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Mar  4 08:19:34 2007
Subject: [Harbour] ChangeLog BETA1 2007-03-04 14:00 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070304131857.GB11585@localhost.localdomain>

2007-03-04 14:00 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapifs.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbpp.h
  * harbour/source/common/hbfsapi.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/harbour.c
  * harbour/source/compiler/hbusage.c
  * harbour/source/compiler/ppcomp.c
  * harbour/source/pp/ppcore.c
    * cleanup .ppo file creation
    + new compiler switch: p+ to enable preprocessor tracing
      when used information about applied rules is stored in .ppt file
  * harbour/include/hbdefs.h
  * harbour/source/rtl/gtos2/gtos2.c
    * OS2 build cleanup

best regards,
Przemek
From druzus at priv.onet.pl  Sun Mar  4 08:27:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Mar  4 08:28:14 2007
Subject: [Harbour] Time for BETA2 tagging?
In-Reply-To: <200703040407.53620.philb@philb.us>
References: <200703040407.53620.philb@philb.us>
Message-ID: <20070304132738.GC11585@localhost.localdomain>

On Sun, 04 Mar 2007, Phil Barnett wrote:
> Ok, settled enough to go to Beta2 state?

I've just committed recent OS2 cleanups and -p+ preprocessor switch
which should help users in debugging preprocessor rules and I'm ready.
I do not have any other things I'd like to see in BETA2.

best regards,
Przemek
From rob at steinmetznet.com  Sun Mar  4 11:06:48 2007
From: rob at steinmetznet.com (Robert Steinmetz)
Date: Sun Mar  4 11:06:55 2007
Subject: [Harbour] Porting Foxplus applications
In-Reply-To: <004c01c75e3e$bffb01b0$0100a8c0@emag>
References: <45ea8e49.495760ae.238e.ffffacec@mx.google.com>
	<004c01c75e3e$bffb01b0$0100a8c0@emag>
Message-ID: <45EAEE98.1040607@steinmetznet.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: rob.vcf
Type: text/x-vcard
Size: 313 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070304/0c90477f/rob-0001.vcf
From maurilio.longo at libero.it  Mon Mar  5 03:23:25 2007
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Mar  5 03:24:19 2007
Subject: [Harbour] Re: Problems to build Harbour
References: <20070302170018.173E541BF35@antivirus2.noc.udg.mx>
	<45E95EEB.1080200@mail.udg.mx>
Message-ID: <45EBD37D.9C23B8F6@libero.it>

David, Przemyslaw,

I started several times to build harbour on os/2 again and then I had to stop
because of other issues with more priority :/

That said, in gtos2.c I'm using DosAllocMem() to have tilable (OBJ_TILE)
memory, that is memory which can be accessed by 16 bit protect mode code (like
most of os/2 device drivers are).

So, no, you should not use C stack memory, since it can cause exceptions.

I hope this clarifies a little and to be able to rebuild harbour one of these
days :)

Best regards.

Maurilio.

PS. I don't know whether, with latest GCC, 64bit support can be enabled again
(this would require some changes to file api as well to enable 64bit aware
file operations).

David Arturo Macias Corona ha scritto:
> 
> Przemek:
> 
> > On Fri, 02 Mar 2007, David Arturo Macias Corona wrote:
> >
> >> Just remain two warnings:
> >> ----------------------------------------------
> >> [E:\hbbuild\harbour]make -r           1>make_gnu.log
> >> ../../gtos2.c: In function `hb_gt_os2_Init':
> >> ../../gtos2.c:506: warning: dereferencing type-punned pointer will break
> >> strict-
> >> aliasing rules
> >> ../../gtos2.c:516: warning: dereferencing type-punned pointer will break
> >> strict-
> >> aliasing rules
> >>
> >
> > I can pacify these warnings but I have a question to OS2 programmers.
> > Why we are allocating memory for structures passed to KbdCharIn() by
> > DosAllocMem(). Is it necessary and KbdCharIn() cannot work with C stack
> > pointers, f.e.:
> >
> >     {
> >         KBDKEYINFO keyInfo;
> >         HKBD hKbd;
> >
> >         memset( &keyInfo, 0, sizeof( keyInfo ) );
> >         memset( &hKbd, 0, sizeof( hKbd ) );
> >
> >         KbdCharIn( &keyInfo, IO_NOWAIT, &hKbd );
> >
> >     }
> >
> > I was looking in the internet for some informations but seems that
> > there was few version of console API in OS2 so it's possible that
> > only in some chosen cases it's necessary. I would like to know if
> > it reallt is.
> >
> >
> 
> Maybe Maurilio Longo have the answer
> 
> >>
> >> Differences are:
> >> -------------------------------------
> >> !  722 MAIN_HVMA(501)  RTSTR( 00000500000000000000 )
> >>       Result: " 16  500000000000000"
> >>     Expected: " 21       500000000000000"
> >> !  723 MAIN_HVMA(502)  RTSTR( 0500000000000000 )
> >>       Result: " 16  500000000000000"
> >>     Expected: " 17   500000000000000"
> >> ! 1067 MAIN_MATH(359)  Str(1234567890 * 1234567890 )
> >>       Result: " 1524157875019052100"
> >>     Expected: " 1524157875019052000"
> >> -------------------------------------
> >>
> >
> > This happens when system does not support 64bit integers.
> > In such case big integer numbers are stored as DOUBLE value
> > what gives Clipper compatible results but reduce precision.
> > Your OS2 build was created with HB_LONG_LONG_OFF.
> >
> >
> 
> Yes, I used HB_LONG_LONG_OFF
> 
> If I do not use it, build results are:
> ------------------------------------------------------------------
> [E:\hbbuild\harbour]make -r           1>make_gnu.log
> ../../hbstr.c: In function `hb_str2number':
> ../../hbstr.c:544: error: `LONGLONG_MAX' undeclared (first use in this
> function)
> 
> ../../hbstr.c:544: error: (Each undeclared identifier is reported only once
> ../../hbstr.c:544: error: for each function it appears in.)
> make[3]: *** [hbstr.o] Error 1
> make[2]: *** [descend] Error 2
> ------------------------------------------------------------------
> 
> You sugested to use it in:
>       Wed, 8 Feb 2006 13:39:52 +0100
> 
> Below are original message
> 
> Gracias,
> David Macias
> 
> ------------------------------
> 
> Message: 28
> Date: Wed, 8 Feb 2006 13:39:52 +0100
> From: Przemyslaw Czerpak <druzus@priv.onet.pl>
> Subject: Re: [Harbour] Re: ChangeLog 2006-02-04 17:05 UTC+0100
>     Przemyslaw
> To: "Harbour Project Main Developer List."
>     <harbour@harbour-project.org>
> Message-ID: <20060208123952.GA25417@localhost.localdomain>
> Content-Type: text/plain; charset=iso-8859-2
> 
> On Wed, 08 Feb 2006, David Arturo Macias Corona wrote:
>  > Below is included a report of tests using:
>  > - Latest Harbour CVS source code
>  > - OS/2: "The Operating System/2 Version is 4.50"
>  > - gcc 3.3.5: "gcc (GCC) 3.3.5 (Innotek Build 2005-01-17 06:42)"
>  > - make_gnu.cmd
>  >
>  > ../../hbstr.c: In function `hb_str2number':
>  > ../../hbstr.c:491: error: `LONGLONG_MAX' undeclared (first use in this
>  > function)
> 
> Hi David,
> 
> Many thanks for tests.
> 
> I do not know why but OS2 users disabled LONGLONG support so to build
> Harbour on OS2 you have to set:
>     set C_USR=-DHB_LONG_LONG_OFF
> 
>  > ../../harbour.c:3566: error: conflicting types for `hb_compIsJump'
>  > ../../../../include/hbcomp.h:453: error: previous declaration of
>  > `hb_compIsJump'
> 
> My typo, BOOL/int modification. In harbour.c line 3566 should be:
> BOOL hb_compIsJump( PFUNCTION pFunc, ULONG ulPos )
> 
>  > ../../hbgtcore.c:1832: warning: initialization from incompatible pointer
>  > type
> 
> The same as above BOOL / int mistake.
> 
>  > ../../net.c: In function `HB_FUN_NETNAME':
>  > ../../net.c:110: warning: implicit declaration of function
> `__gethostname'
> 
> This will have to clean OS2 users - I found the following note in xHarbour
> source code:
> 
>    /* 25/03/2004 - <maurilio.longo@libero.it>
>       not needed anymore as of GCC 3.2.2
> 
>    #if defined(__EMX__)
>       #include <emx/syscalls.h>
>       #define gethostname __gethostname
>    #endif
>    */
> 
> So I guess you should also disable this code in source/rtl/net.c
> I'll commit such modification to CVS but please confirm the results.
> 
>  > ../../os2pm.c: In function `WndProc':
>  > ../../os2pm.c:91: warning: dereferencing `void *' pointer
>  > ../../os2pm.c:91: error: request for member `pSymbol' in something not a
>  > structu
>  > re or union
>  > ../../os2pm.c:99: error: `hb_stack' undeclared (first use in this
> function)
>  > ../../os2pm.c:99: error: (Each undeclared identifier is reported only
> once
>  > ../../os2pm.c:99: error: for each function it appears in.)
> 
> It's a contrib code which should be updated. I'll do that
> but you will have to check the results.
> BTW This code call HVM functions. I do not know when it can
> be activated but if assynchrously to main code then it can
> overwrite the stack return item so it should call
>     hb_vmPushState();
>     [...]
>     hb_vmPopState();
> 
> to save/restore HVM state and make HVM safe for reentrance.
> 
> Seems that no one try to build OS2 Harbour version for quite long time.
> I'll commit this modification in a while so please set environment
> variable C_USR by:
>     set C_USR=-DHB_LONG_LONG_OFF
> and please try once again to build Harbour.
> 
> best regards,
> Przemek

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From m.renzi at maticasrl.it  Mon Mar  5 03:34:26 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Mon Mar  5 03:36:52 2007
Subject: [Harbour] KeySend() CA-Tools utils;
In-Reply-To: <45EBD37D.9C23B8F6@libero.it>
References: <20070302170018.173E541BF35@antivirus2.noc.udg.mx><45E95EEB.1080200@mail.udg.mx>
	<45EBD37D.9C23B8F6@libero.it>
Message-ID: <006701c75f01$15de3a80$d600080a@maxsoft>

Morning all.
I'm tring convert a Clipper application but I've some problem on KeySend()
Ca-Tools function.
Did you have convert it?
I've convert it in:
function KEYSEND(cStringa)
  KEYBOARD cStringa
  Return

Thank you all

Max


From dmacias at mail.udg.mx  Mon Mar  5 06:21:28 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Mar  5 06:21:32 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <45EBFD38.5020104@mail.udg.mx>

Przemek:
> 2007-03-04 14:00 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/gtos2/gtos2.c
>     * OS2 build cleanup
>
>   
[...]

> I've just committed recent OS2 cleanups and -p+ preprocessor switch
> which should help users in debugging preprocessor rules and I'm ready.
> I do not have any other things I'd like to see in BETA2.
>
>
>   

These are results of current Harbour devel branch build under OS/2:
---------------------------------------------------------
[E:\hbbuild\harbour]make -r           1>make_gnu.log

[E:\hbbuild\harbour]goto END
---------------------------------------------------------

0 errors, 0 warnings

For me, is first time in Harbour history I see this case   :-)
Thanks for your excelent work


hbtest.exe results are same as before


For "install", these are results:
---------------------------------------------------------
[E:\hbbuild\harbour]make -r install          1>make_gnu.log
SYS1086: The following character string is too long:

make[1]: *** [install] Error 1
---------------------------------------------------------

and cause seem to be this line (1078 columns):
---------------------------------------------------------
CMD.EXE /c FOR %f IN (clipdefs.h extend.h hbapi.h hbapicdp.h hbapicls.h 
hbapierr.h hbapifs.h hbapigt.h hbapiitm.h hbapilng.h hbapirdd.h hbcomp.h 
hbcompdf.h hbdate.h hbdbf.h hbdbferr.h hbdbsort.h hbdefs.h hberrors.h 
hbexprop.h hbfixdj.h hbgtcore.h hbhash.h hbinit.h hbmacro.h hbmath.h 
hbpcode.h hbpp.h hbrddcdx.h hbrdddbf.h hbrdddbt.h hbrddfpt.h hbrdddel.h 
hbrddntx.h hbrddsdf.h hbrddwrk.h hbset.h hbsetup.h hbstack.h hbsxfunc.h 
hbtrace.h hbtypes.h hbver.h hbvm.h hbvmopt.h hbvmpub.h hbxvm.h hb_io.h  
achoice.ch assert.ch box.ch button.ch blob.ch color.ch common.ch 
dbedit.ch dbinfo.ch dbstruct.ch directry.ch error.ch fileio.ch 
getexit.ch hbclass.ch hbcommon.ch hbdebug.ch hbextern.ch hbgetcmt.ch 
hbgfx.ch hbgfxdef.ch hbgtinfo.ch hbinkey.ch hblang.ch hbmacro.ch 
hbmath.ch hbmemory.ch hbmemvar.ch hboo.ch hbpers.ch hbsetup.ch 
hbstdgen.ch inkey.ch memoedit.ch ord.ch rddsys.ch reserved.ch set.ch 
setcurs.ch simpleio.ch std.ch tbrowse.ch usrrdd.ch  error.api extend.api 
filesys.api fm.api gt.api hbundoc.api item.api rdd.api vm.api ) DO IF 
EXIST \hh\include\. COPY %f \hh\include\
---------------------------------------------------------

Obviously there are some limits in OS/2

Gracias,
David Macias

From dmacias at mail.udg.mx  Mon Mar  5 07:27:44 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Mar  5 07:27:44 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <45EC0CC0.7040001@mail.udg.mx>

Przemek:

> I do not have any other things I'd like to see in BETA2.
>


These are results of current Harbour devel branch build under Win32:BCC551:
---------------------------------------------------------

obj\b32\harboury.c:
Warning W8004 harboury.c 3775: 'yymsg' is assigned a value that is never 
used in function yydestruct
Warning W8008 harboury.c 6837: Condition is always false in function 
hb_compparse
Warning W8066 harboury.c 6838: Unreachable code in function hb_compparse
Warning W8004 harboury.c 6765: 'hb_compnerrs' is assigned a value that 
is never used in function hb_compparse
Warning W8004 harboury.c 3973: 'yyptr' is assigned a value that is never 
used in function hb_compparse

[...]

obj\b32\macroy.c:
Warning W8004 macroy.c 1709: 'yymsg' is assigned a value that is never 
used in function yydestruct
Warning W8066 macro.y 268: Unreachable code in function hb_macroparse
Warning W8066 macro.y 273: Unreachable code in function hb_macroparse
Warning W8008 macroy.c 2940: Condition is always false in function 
hb_macroparse
Warning W8066 macroy.c 2941: Unreachable code in function hb_macroparse
Warning W8004 macroy.c 2868: 'hb_macronerrs' is assigned a value that is 
never used in function hb_macroparse
Warning W8004 macroy.c 1897: 'yyptr' is assigned a value that is never 
used in function hb_macroparse

---------------------------------------------------------


Gracias,
David Macias


From druzus at priv.onet.pl  Mon Mar  5 07:35:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 07:35:58 2007
Subject: [Harbour] KeySend() CA-Tools utils;
In-Reply-To: <006701c75f01$15de3a80$d600080a@maxsoft>
References: <45EBD37D.9C23B8F6@libero.it>
	<006701c75f01$15de3a80$d600080a@maxsoft>
Message-ID: <20070305123523.GA10130@localhost.localdomain>

On Mon, 05 Mar 2007, Massimo Renzi (MaticaSrl) wrote:
> Morning all.
> I'm tring convert a Clipper application but I've some problem on KeySend()
> Ca-Tools function.
> Did you have convert it?
> I've convert it in:
> function KEYSEND(cStringa)
>   KEYBOARD cStringa
>   Return

KeySend() and corresponding CT3 keyboard function has not been implemented
in Harbour yet.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 07:53:07 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 07:53:48 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <45EBFD38.5020104@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<45EBFD38.5020104@mail.udg.mx>
Message-ID: <20070305125307.GB10130@localhost.localdomain>

On Mon, 05 Mar 2007, David Arturo Macias Corona wrote:
> hbtest.exe results are same as before

If your C compiler supports 'long long' then you can you try to
create OS2 binaries without HB_LONG_LONG_OFF macro.

> For "install", these are results:
> ---------------------------------------------------------
> [E:\hbbuild\harbour]make -r install          1>make_gnu.log
> SYS1086: The following character string is too long:
> make[1]: *** [install] Error 1
> ---------------------------------------------------------
> and cause seem to be this line (1078 columns):
> ---------------------------------------------------------
> CMD.EXE /c FOR %f IN (clipdefs.h extend.h hbapi.h hbapicdp.h hbapicls.h 
> hbapierr.h hbapifs.h hbapigt.h hbapiitm.h hbapilng.h hbapirdd.h hbcomp.h 
> hbcompdf.h hbdate.h hbdbf.h hbdbferr.h hbdbsort.h hbdefs.h hberrors.h 
> hbexprop.h hbfixdj.h hbgtcore.h hbhash.h hbinit.h hbmacro.h hbmath.h 
> hbpcode.h hbpp.h hbrddcdx.h hbrdddbf.h hbrdddbt.h hbrddfpt.h hbrdddel.h 
> hbrddntx.h hbrddsdf.h hbrddwrk.h hbset.h hbsetup.h hbstack.h hbsxfunc.h 
> hbtrace.h hbtypes.h hbver.h hbvm.h hbvmopt.h hbvmpub.h hbxvm.h hb_io.h  
> achoice.ch assert.ch box.ch button.ch blob.ch color.ch common.ch 
> dbedit.ch dbinfo.ch dbstruct.ch directry.ch error.ch fileio.ch 
> getexit.ch hbclass.ch hbcommon.ch hbdebug.ch hbextern.ch hbgetcmt.ch 
> hbgfx.ch hbgfxdef.ch hbgtinfo.ch hbinkey.ch hblang.ch hbmacro.ch 
> hbmath.ch hbmemory.ch hbmemvar.ch hboo.ch hbpers.ch hbsetup.ch 
> hbstdgen.ch inkey.ch memoedit.ch ord.ch rddsys.ch reserved.ch set.ch 
> setcurs.ch simpleio.ch std.ch tbrowse.ch usrrdd.ch  error.api extend.api 
> filesys.api fm.api gt.api hbundoc.api item.api rdd.api vm.api ) DO IF 
> EXIST \hh\include\. COPY %f \hh\include\
> ---------------------------------------------------------
> Obviously there are some limits in OS/2

Command line size limitation.

I'll commit xHarbour version of install command for OS2 CMD.EXE

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 07:59:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 08:00:23 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <45EC0CC0.7040001@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<45EC0CC0.7040001@mail.udg.mx>
Message-ID: <20070305125947.GA10256@localhost.localdomain>

On Mon, 05 Mar 2007, David Arturo Macias Corona wrote:
> These are results of current Harbour devel branch build under Win32:BCC551:
> ---------------------------------------------------------
> obj\b32\harboury.c:
> Warning W8004 harboury.c 3775: 'yymsg' is assigned a value that is never 
> used in function yydestruct
> Warning W8008 harboury.c 6837: Condition is always false in function 
> hb_compparse
> Warning W8066 harboury.c 6838: Unreachable code in function hb_compparse
> Warning W8004 harboury.c 6765: 'hb_compnerrs' is assigned a value that 
> is never used in function hb_compparse
> Warning W8004 harboury.c 3973: 'yyptr' is assigned a value that is never 
> used in function hb_compparse
> [...]
> obj\b32\macroy.c:
> Warning W8004 macroy.c 1709: 'yymsg' is assigned a value that is never 
> used in function yydestruct
> Warning W8066 macro.y 268: Unreachable code in function hb_macroparse
> Warning W8066 macro.y 273: Unreachable code in function hb_macroparse
> Warning W8008 macroy.c 2940: Condition is always false in function 
> hb_macroparse
> Warning W8066 macroy.c 2941: Unreachable code in function hb_macroparse
> Warning W8004 macroy.c 2868: 'hb_macronerrs' is assigned a value that is 
> never used in function hb_macroparse
> Warning W8004 macroy.c 1897: 'yyptr' is assigned a value that is never 
> used in function hb_macroparse

These are expected results for BCC32 builds. The warnings cannot be clear
without manual updating of files generated by bison. 2/3 warnings can be
hidden by adding some additional dummy code but not all and IMHO it's not
good idea to create code overhead only to avoid some warnings.
In final 1.0 version I can update .yyc files manually so warnings will
disappear but now it's a waste of time.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 08:04:14 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 08:04:49 2007
Subject: [Harbour] ChangeLog BETA1 2007-03-05 04:10 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070305130414.GB10256@localhost.localdomain>

2007-03-05 04:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexpra.c
    ! fixed GPF when _GET_() parameter is passed in parenthesis

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 08:04:37 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 08:05:12 2007
Subject: [Harbour] ChangeLog BETA1 2007-03-05 14:00 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070305130437.GC10256@localhost.localdomain>

2007-03-05 04:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexpra.c
    ! fixed GPF when _GET_() parameter is passed in parenthesis

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 08:05:36 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 08:06:14 2007
Subject: [Harbour] ChangeLog 2007-03-05 04:10 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070305130536.GD10256@localhost.localdomain>

2007-03-05 04:10 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexpra.c
    ! fixed GPF when _GET_() parameter is passed in parenthesis

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 08:06:02 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 08:06:38 2007
Subject: [Harbour] ChangeLog 2007-03-05 14:00 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070305130602.GE10256@localhost.localdomain>

2007-03-05 14:00 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/os2/install.cf
    * workaround for command line size limitation borrowed from xHarbour

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 08:15:57 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 08:16:31 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <45EBD37D.9C23B8F6@libero.it>
References: <20070302170018.173E541BF35@antivirus2.noc.udg.mx>
	<45E95EEB.1080200@mail.udg.mx> <45EBD37D.9C23B8F6@libero.it>
Message-ID: <20070305131557.GA10760@localhost.localdomain>

On Mon, 05 Mar 2007, Maurilio Longo wrote:
> David, Przemyslaw,
> I started several times to build harbour on os/2 again and then I had to stop
> because of other issues with more priority :/
> That said, in gtos2.c I'm using DosAllocMem() to have tilable (OBJ_TILE)
> memory, that is memory which can be accessed by 16 bit protect mode code (like
> most of os/2 device drivers are).
> So, no, you should not use C stack memory, since it can cause exceptions.

Thank you for information. I was afraid that it can be caused by sth like
that but I hoped memory remapping is done automatically inside KbdCharIn()
function what seems to be more natural for library functions. Just like
it's done in DOS when you use some C compilers to generate 32bit code.

> I hope this clarifies a little and to be able to rebuild harbour one of these
> days :)

It's enough, thank you. It's a minor thing without any effect for overall
performance so we can leave it as is and forget about it.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 17:30:19 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 17:31:06 2007
Subject: [Harbour] ChangeLog 2007-03-05 23:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070305223019.GA31485@localhost.localdomain>

2007-03-05 23:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
  * harbour/include/hbexprb.c
  * harbour/source/compiler/hbgenerr.c
    * do not generate warnings about meaningless expression usage
      in code optimized by short logical expression evaluation, f.e.:
         proc main()
         (f1() .or. (f2(), .t.))
         return

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar  5 17:30:45 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar  5 17:31:27 2007
Subject: [Harbour] ChangeLog BETA1 2007-03-05 23:30 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070305223045.GB31485@localhost.localdomain>

2007-03-05 23:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
  * harbour/include/hbexprb.c
  * harbour/source/compiler/hbgenerr.c
    * do not generate warnings about meaningless expression usage
      in code optimized by short logical expression evaluation, f.e.:
         proc main()
         (f1() .or. (f2(), .t.))
         return

best regards,
Przemek
From philb at philb.us  Tue Mar  6 01:06:26 2007
From: philb at philb.us (Phil Barnett)
Date: Tue Mar  6 01:09:55 2007
Subject: [Harbour] ChangeLog BETA1 2007-03-05 23:30 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070305223045.GB31485@localhost.localdomain>
References: <20070305223045.GB31485@localhost.localdomain>
Message-ID: <200703060106.26205.philb@philb.us>

On Monday 05 March 2007 17:30, Przemyslaw Czerpak wrote:
> 2007-03-05 23:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbcompdf.h
>   * harbour/include/hbexprb.c
>   * harbour/source/compiler/hbgenerr.c
>     * do not generate warnings about meaningless expression usage
>       in code optimized by short logical expression evaluation, f.e.:
>          proc main()
>          (f1() .or. (f2(), .t.))
>          return
>
> best regards,
> Przemek

Przemek,

Go ahead and do the BETA2 tagging whenever you are ready.

Thanks.

-- 
Balmer is basically saying: We know there's a problem but we're not going to 
tell you what it is because we want to ambush you in the future.
From druzus at priv.onet.pl  Tue Mar  6 20:09:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Mar  6 20:10:25 2007
Subject: [Harbour] ChangeLog BETA1 2007-03-05 23:30 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <200703060106.26205.philb@philb.us>
References: <20070305223045.GB31485@localhost.localdomain>
	<200703060106.26205.philb@philb.us>
Message-ID: <20070307010947.GA3610@localhost.localdomain>

On Tue, 06 Mar 2007, Phil Barnett wrote:
> Przemek,
> Go ahead and do the BETA2 tagging whenever you are ready.

If no one will report any new problems I'll tag BETA2 in 15 hours.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Mar  6 20:24:54 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Mar  6 20:25:30 2007
Subject: [Harbour] New subdirectory in harbour/source
Message-ID: <20070307012454.GB3610@localhost.localdomain>

Hi All,

I've just finished resolving name conflicts between compiler and
macro compiler and now I can create from devel branch single binary
with integrated compiler, preprocessor, HVM and RTL(s).
To make build process easier now from files in harbour/source/compiler/
new library 'compiler' is created and I added new new directory
harbour/source/main with very small harbour.c file which executes
compMain() function from 'compiler' library and contain also some
common to HVM/RTL functions like: hb_xgrab()/hb_xfree(),... which
are used in standalone compiler version.

Before I'll commit I'd like to agree the name of new subdirectory (main)
Directories cannot be cleanly removed from CVS so if you have other
propositions please send them ASAP before my commit.

best regards,
Przemek
From sscc at mweb.co.za  Tue Mar  6 20:36:33 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Mar  6 20:36:49 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <20070307012454.GB3610@localhost.localdomain>
References: <20070307012454.GB3610@localhost.localdomain>
Message-ID: <45EE1721.7020706@mweb.co.za>

Przemyslaw Czerpak wrote:

> Before I'll commit I'd like to agree the name of new subdirectory (main)
> Directories cannot be cleanly removed from CVS so if you have other
> propositions please send them ASAP before my commit.

Perhaps compmain?

BTW I compiled Harbour from latest CVS yesterday using MSVC6, and 
although I haven't performed any tests the build went without any 
problems except warnings about casts.

Regards
Alex

From rob at steinmetznet.com  Tue Mar  6 21:49:49 2007
From: rob at steinmetznet.com (Robert Steinmetz)
Date: Tue Mar  6 21:50:31 2007
Subject: [Harbour] Porting foxplus applications to Harbour
Message-ID: <45EE284D.7010901@steinmetznet.com>

I have a Foxplus application I would like to port to Linux. 

Harbour seems a likely and Open Source way to do it. I'll also need to brush up on my xbase programming and debugging skills.

I have so far identified three functions which are not implemented in Harbour;

*ON ERROR *DO ACC_ERR WITH ERROR(),MESSAGE(),SYS(16)
    
*ON KEY* = 315 DO ACCHELP WITH SYS(16),1,SYS(18)

*FOXYEAR* = 2080

FOXYEAR is similar to EPOCH, not exactly the same but source code can be easily modified.

As far as I know the other two don't have exact analogues in Clipper, There are possibly a few others.

There may be some other syntax issues, but until I can get the expressions to compile into .c files, that doesn't matter.

I would be willing to contribute a "reasonable" amount of cash to implementing these fox functions. If there is any interested please contact me by email.   

-- 
*Robert Steinmetz, AIA*
Principal
*Steinmetz & Associates*
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rob.vcf
Type: text/x-vcard
Size: 313 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070306/665ae6f2/rob.vcf
From antonioharbour at gmail.com  Wed Mar  7 03:34:17 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Mar  7 03:34:35 2007
Subject: [Harbour] hb_symEval
Message-ID: <45ee7916.1427b403.3f5e.fffffd8b@mx.google.com>

Przemek,

Could we have a exported function to return hb_symEval ? Thanks,

Regards,

Antonio

From harbour.01 at syenar.hu  Wed Mar  7 04:01:34 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Mar  7 04:01:41 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <20070307012454.GB3610@localhost.localdomain>
References: <20070307012454.GB3610@localhost.localdomain>
Message-ID: <8F31CD0E-8AE3-4C9F-AE0F-04F2BB146EB3@syenar.hu>

Hi Przemek,

Maybe "harbour/utils/hbcomp/" (or similar, beginning
with "hb") because, after all, the compiler executable
is just one of the tools provided by Harbour, and all
these tools reside in "harbour/utils/".

Can be main too if we agree on it, but I'd find it cleaner
to have everything generating an executable to be in
"utils".

Brgds,
Viktor

On 2007.03.07., at 2:24, Przemyslaw Czerpak wrote:

> Hi All,
>
> I've just finished resolving name conflicts between compiler and
> macro compiler and now I can create from devel branch single binary
> with integrated compiler, preprocessor, HVM and RTL(s).
> To make build process easier now from files in harbour/source/ 
> compiler/
> new library 'compiler' is created and I added new new directory
> harbour/source/main with very small harbour.c file which executes
> compMain() function from 'compiler' library and contain also some
> common to HVM/RTL functions like: hb_xgrab()/hb_xfree(),... which
> are used in standalone compiler version.
>
> Before I'll commit I'd like to agree the name of new subdirectory  
> (main)
> Directories cannot be cleanly removed from CVS so if you have other
> propositions please send them ASAP before my commit.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From niki at synel.co.il  Wed Mar  7 04:42:27 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Mar  7 04:41:11 2007
Subject: [Harbour] New subdirectory in harbour/source
Message-ID: <45EE8903.74AA@synel.co.il>

Przemek,

> ...I can create from devel branch single binary
> with integrated compiler, preprocessor, HVM and RTL(s)

What is the different between this new binary and the harbour.exe
(or the equivalent used in other OS) we have today?


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From druzus at priv.onet.pl  Wed Mar  7 05:07:35 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar  7 05:08:10 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <45EE8903.74AA@synel.co.il>
References: <45EE8903.74AA@synel.co.il>
Message-ID: <20070307100735.GA4056@localhost.localdomain>

On Wed, 07 Mar 2007, Chen Kedem wrote:
> > ...I can create from devel branch single binary
> > with integrated compiler, preprocessor, HVM and RTL(s)
> What is the different between this new binary and the harbour.exe
> (or the equivalent used in other OS) we have today?

compiler.lib can be linked with any other .prg code.
F.e. you can create .prg code interpreter in just few lines.

    proc main( cFile )
        local cHrb := hb_compile( cFIle, HB_COMP_HRBBODY ), hHrb
        hHrb := __hrbload( cHrb );
        __hrbDo( hHrb )
        __hrbUnLoad( hHrb )
    return

I haven't created wrappers for compiler functions to .prg functions
so hb_compile() is my imagination now but it's a minor problem and
such functions can be created in few minutes.
If you look at contrib/dot/pp.prg or xbase-script in xHarbour then
with compiler library you will be able to create such programs in
just few lines and the final result will be sth unreachable for
xBase-script because before execution we will create PCODE exactly
the same as in normal compilation so executed with full speed and
all supported by Harbour features.
Also now when compiler is MT safe and we fixed all know memory leaks
we can try to integrate Harbour with some other products, f.e. we
can create mod_hb for Apache WWW server so it will support .prg code
just like any other script language.
Using compiler.lib it's possible to create some server which can accept
user code compile it and register as its own. F.e. think about sth like
ADS server but it will be possible to send UDFs to server as .prg code
from clients.
Etc. It's possible to use it in many different way.
Please only note that compiler.lib is on pure GPL license and I expect
that people will respect this fact in their code.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Mar  7 05:08:57 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar  7 05:09:33 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <8F31CD0E-8AE3-4C9F-AE0F-04F2BB146EB3@syenar.hu>
References: <20070307012454.GB3610@localhost.localdomain>
	<8F31CD0E-8AE3-4C9F-AE0F-04F2BB146EB3@syenar.hu>
Message-ID: <20070307100857.GB4056@localhost.localdomain>

On Wed, 07 Mar 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> Maybe "harbour/utils/hbcomp/" (or similar, beginning
> with "hb") because, after all, the compiler executable
> is just one of the tools provided by Harbour, and all
> these tools reside in "harbour/utils/".
> Can be main too if we agree on it, but I'd find it cleaner
> to have everything generating an executable to be in
> "utils".

Seems reasonable for me.
I will wait for other opinions for few hours yet but now
harbour/utils/hbcomp/ is preferable.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Mar  7 05:19:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar  7 05:20:18 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <45EE1721.7020706@mweb.co.za>
References: <20070307012454.GB3610@localhost.localdomain>
	<45EE1721.7020706@mweb.co.za>
Message-ID: <20070307101943.GC4056@localhost.localdomain>

On Wed, 07 Mar 2007, Alex Strickland wrote:
> Przemyslaw Czerpak wrote:
> >Before I'll commit I'd like to agree the name of new subdirectory (main)
> >Directories cannot be cleanly removed from CVS so if you have other
> >propositions please send them ASAP before my commit.
> Perhaps compmain?

or even simple 'compiler' if we use utils directory.
Now Victor's procposition with:
    utils/hbcomp
is prefered.

> BTW I compiled Harbour from latest CVS yesterday using MSVC6, and 
> although I haven't performed any tests the build went without any 
> problems except warnings about casts.

Thanks for confirmation. Most of the MSVC warnings can be cleaned
but for some platforms with strange basic types size it's good
to have not casted code so compiler can catch all dangerous places.
In some spare time I'll look at it.

best regards,
Przemek
From niki at synel.co.il  Wed Mar  7 05:24:31 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Mar  7 05:23:22 2007
Subject: [Harbour] Porting foxplus applications to Harbour
Message-ID: <45EE92DF.1610@synel.co.il>

Robert Steinmetz wrote:
> I have so far identified three functions which are not implemented
> in Harbour;
>
> ON ERROR *DO ACC_ERR WITH ERROR(),MESSAGE(),SYS(16)
>
> ON KEY* = 315 DO ACCHELP WITH SYS(16),1,SYS(18)

http://msdn2.microsoft.com/en-us/library/xt97ck56(VS.80).aspx

According to MSDN:
SYS(16) return the "executing program file name" (string)
SYS(18) return the name of the current control (string)
MESSAGE() retuen the current error meggage (string)
ERROR() return the number of the current error (number)

the ON ERROR might be change into ERRORBLOCK( bHandler )

the ON KEY might be changed into SETKEY( nKey, bAction )
I don't know what is key 315 in foxplus.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From druzus at priv.onet.pl  Wed Mar  7 09:07:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar  7 09:08:04 2007
Subject: [Harbour] hb_symEval
In-Reply-To: <45ee7916.1427b403.3f5e.fffffd8b@mx.google.com>
References: <45ee7916.1427b403.3f5e.fffffd8b@mx.google.com>
Message-ID: <20070307140728.GA6408@localhost.localdomain>

On Wed, 07 Mar 2007, Antonio Linares wrote:
> Przemek,
> Could we have a exported function to return hb_symEval ? Thanks,

Yes we can but why you need it?
We already have hb_vmEvalBlock() and hb_vmEvalBlockV() so it's not necessary
to access hb_symEval to evaluate codeblocks.
If you want to eliminate creating PHB_ITEMs in your C code which passes
parameters to evaluated block then we added hb_vmPushEvalSym() for such
situation, f.e.:

    hb_vmPushEvalSym();
    hb_vmPush( pBlock );

    hb_vmPushInteger( 1 );
    hb_vmPushDouble( 2.345, 3 );
    hb_vmPushString( "abcd", 4 );

    hb_vmSend( 3 );

best regards,
Przemek
From dbtopas at dbtopas.lt  Wed Mar  7 10:39:02 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Mar  7 10:36:59 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <20070307100735.GA4056@localhost.localdomain>
References: <45EE8903.74AA@synel.co.il>
	<20070307100735.GA4056@localhost.localdomain>
Message-ID: <45EEDC96.3010302@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Please only note that compiler.lib is on pure GPL license and I expect
> that people will respect this fact in their code.


Hello,


I'm not guru of licensing topic. Can anyone comment this?

I've read GPL licence a lof of time, but it's still difficult for me to
understand, what it really means in case of compiler and servers. And I
have a lot of questions:

1) if someone will write NETRDD which has possibility to send UDF and
will use compiler.lib for compilation of UDF. Can NETRDD be used in
propiertary applications?

2) can I write a propiertary CMS (content management system) which uses
mod_hb for Apache. Can I install mod_hb together with CMS if it is not
installed before?

3) can I write propiertary source editor which calls harbour.exe to
compile .prg files and highlights error lines in the editor?

4) can I write other propiertary software which calls harbour.exe to
compile .prg plugins and uses compiled plugins .hrb files for its own 
functionality extension? What if I add sentence with declaration that 
this is two different products installed: propietary software and 
harbour compiler?

5) Does linking of compiler.lib (or dynamic linking of compiler.dll) is
different from calling harbour.exe in case of plugins?

6) can compiler.lib and ace32.lib be linked into same application?

7) why compiler has different licensing?


Best regards,
Mindaugas
From antonioharbour at gmail.com  Wed Mar  7 10:54:46 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Mar  7 10:55:34 2007
Subject: [Harbour] hb_symEval
In-Reply-To: <20070307140728.GA6408@localhost.localdomain>
Message-ID: <45eee04f.2bcdf826.7111.52d9@mx.google.com>

Przemek, 

> We already have hb_vmEvalBlock() and hb_vmEvalBlockV() so it's not
necessary to access hb_symEval to evaluate codeblocks.

Ok, so this code:

                    hb_vmPushSymbol( &hb_symEval );
                    hb_vmPush( _param( 5, BLOCK ) );
                    hb_vmPush( hb_stackReturnItem() );
                    hb_vmFunction( 1 );

Should change into:

                    hb_vmPushEvalSym();
                    hb_vmPush( _param( 5, BLOCK ) );
                    hb_vmPush( hb_stackReturnItem() );
                    hb_vmFunction( 1 );

Is it ok ? Thanks,

Antonio

From gerinfo at machadoribeiro.com.br  Wed Mar  7 13:34:12 2007
From: gerinfo at machadoribeiro.com.br (=?ISO-8859-1?Q?Andr=E9_Louis_Dutheil?=)
Date: Wed Mar  7 13:34:50 2007
Subject: [Harbour] Porting foxplus applications to Harbour
In-Reply-To: <45EE284D.7010901@steinmetznet.com>
References: <45EE284D.7010901@steinmetznet.com>
Message-ID: <45EF05A4.4030302@machadoribeiro.com.br>

Hi Robert,
Did you try something like that:

#xcommand ON KEY = <n1> DO ACCHELP WITH SYS( <n2> ), <n3>, SYS(< n4> ) => ;
        if( lastKey() = <n1>, ACCHELP( <n2>, <n3>, <n4> ), NIL )

I have no knowledge of Foxplus so I understand that ON KEY means "last 
key pressed".
Depending on what this command is entended to do you could also try the 
function setKey( nKey, { || Function( params ) } )

If  FOXYEAR similar to SET EPOCH try:
#xcommand FOXYEAR = <n1> => set( 5, <n1> )

If that works what is the "reasonable" amount of cash you are talkink about?

Rgds.
-- 
------------------------------------------------------------------------
*/Andr? Louis Dutheil/ *
Gerente de Inform?tica
Machado Ribeiro editora e distribuidora ltda
Fone: 71 3483.5822 Celular: 71 9979.3348
------------------------------------------------------------------------



Robert Steinmetz escreveu:
> I have a Foxplus application I would like to port to Linux.
> Harbour seems a likely and Open Source way to do it. I'll also need to 
> brush up on my xbase programming and debugging skills.
>
> I have so far identified three functions which are not implemented in 
> Harbour;
>
> *ON ERROR *DO ACC_ERR WITH ERROR(),MESSAGE(),SYS(16)
>    *ON KEY* = 315 DO ACCHELP WITH SYS(16),1,SYS(18)
>
> *FOXYEAR* = 2080
>
> FOXYEAR is similar to EPOCH, not exactly the same but source code can 
> be easily modified.
>
> As far as I know the other two don't have exact analogues in Clipper, 
> There are possibly a few others.
>
> There may be some other syntax issues, but until I can get the 
> expressions to compile into .c files, that doesn't matter.
>
> I would be willing to contribute a "reasonable" amount of cash to 
> implementing these fox functions. If there is any interested please 
> contact me by email.  
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> __________ NOD32 2100 (20070307) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>   



From randy at palmasdev.com  Wed Mar  7 13:37:22 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Mar  7 13:36:55 2007
Subject: [Harbour] The Harbour compiler is fast!
In-Reply-To: <45ee7916.1427b403.3f5e.fffffd8b@mx.google.com>
Message-ID: <5.2.0.9.0.20070307133451.00cf8818@pop3.pathcom.com>

Hi all,

I used to use Build 43 but am now using Beta 1 - The compiler is at least 
twice as fast!

Good work!!!

Regards,
Randy.

From rob at steinmetznet.com  Wed Mar  7 15:26:08 2007
From: rob at steinmetznet.com (Robert Steinmetz AIA)
Date: Wed Mar  7 15:26:48 2007
Subject: [Harbour] Porting foxplus applications to Harbour
In-Reply-To: <45EE92DF.1610@synel.co.il>
References: <45EE92DF.1610@synel.co.il>
Message-ID: <45EF1FE0.9030903@steinmetznet.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: rob.vcf
Type: text/x-vcard
Size: 248 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070307/bea2a77d/rob.vcf
From druzus at priv.onet.pl  Wed Mar  7 15:29:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar  7 15:30:00 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <45EEDC96.3010302@dbtopas.lt>
References: <45EE8903.74AA@synel.co.il>
	<20070307100735.GA4056@localhost.localdomain>
	<45EEDC96.3010302@dbtopas.lt>
Message-ID: <20070307202924.GA7739@localhost.localdomain>

On Wed, 07 Mar 2007, Mindaugas Kavaliauskas wrote:
> >Please only note that compiler.lib is on pure GPL license and I expect
> >that people will respect this fact in their code.
> Hello,
> I'm not guru of licensing topic. Can anyone comment this?
> I've read GPL licence a lof of time, but it's still difficult for me to
> understand, what it really means in case of compiler and servers. And I
> have a lot of questions:
> 1) if someone will write NETRDD which has possibility to send UDF and
> will use compiler.lib for compilation of UDF. Can NETRDD be used in
> propiertary applications?

This will depend on NETRDD license - client and server part and it's
possible.

> 2) can I write a propiertary CMS (content management system) which uses
> mod_hb for Apache. Can I install mod_hb together with CMS if it is not
> installed before?

Yes, but mod_hb has to be created from officialy distributed Harbour source
code or you should include source code for all modifications in mod_hb you
created.

> 3) can I write propiertary source editor which calls harbour.exe to
> compile .prg files and highlights error lines in the editor?

Yes.

> 4) can I write other propiertary software which calls harbour.exe to
> compile .prg plugins and uses compiled plugins .hrb files for its own 
> functionality extension?

Yes.

> What if I add sentence with declaration that 
> this is two different products installed: propietary software and 
> harbour compiler?

Nothing. Do it if you want.

> 5) Does linking of compiler.lib (or dynamic linking of compiler.dll) is
> different from calling harbour.exe in case of plugins?

Yes. See the difference between GPL and LGPL.

> 6) can compiler.lib and ace32.lib be linked into same application?

You can always link anything what you like - GPL does not reduce your
rights. But if you want to distribute final binaries as closed source
program then it will be illegal.

> 7) why compiler has different licensing?

We allow to create closed source applications with Harbour but we
want to forbid situation when someone takes current Harbour code
add some modifications and distribute this version as closed source
compiler with new name. We want to be able to benefit from any Harbour
variations which may appear in the future just like someone benefits
from our work. All such modified binaries have to be distributed with
source code to be legal or the source code has to be freely accessible
(f.e. xHarbour source code in SF CVS).

BTW I would like to note that any Harbour binaries created from
modified code should contain the source code. IMHO distributors
should leave an information that binaries are created from CVS
version: (date or tag) and if the CVS code was modified in any
way then include the output of cvs diff command, f.e.:
    cvs diff -u > cvs.diff
I'll be very happy if everybody begin to respect the above. It's very
serious problem when core developers does not respect it.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Mar  7 19:02:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar  7 19:03:00 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <20070307100857.GB4056@localhost.localdomain>
References: <20070307012454.GB3610@localhost.localdomain>
	<8F31CD0E-8AE3-4C9F-AE0F-04F2BB146EB3@syenar.hu>
	<20070307100857.GB4056@localhost.localdomain>
Message-ID: <20070308000224.GA10076@localhost.localdomain>

On Wed, 07 Mar 2007, Przemyslaw Czerpak wrote:
> > Maybe "harbour/utils/hbcomp/" (or similar, beginning
> > with "hb") because, after all, the compiler executable
> > is just one of the tools provided by Harbour, and all
> > these tools reside in "harbour/utils/".
> > Can be main too if we agree on it, but I'd find it cleaner
> > to have everything generating an executable to be in
> > "utils".
> Seems reasonable for me.
> I will wait for other opinions for few hours yet but now
> harbour/utils/hbcomp/ is preferable.

Victor there is one serious problem with the above.
I will have to hack the build process. It will be
necessary to create: common, pp and compiler libraries
from source directory, then jump to utils to build
the compiler, next come back to source to finish other
libraries which needs working compiler and finally build
rest of utils. I can make necessary modifications but
IMHO the final result will not be cleaner and the whole
build process will look strangely hacked for someone who
will try to analyze it.
I'd like to return to idea of subdirectory in source/ f.e.:
source/hbcomp/
What do you think?

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Mar  7 19:18:55 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Mar  7 19:19:09 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <20070308000224.GA10076@localhost.localdomain>
References: <20070307012454.GB3610@localhost.localdomain>
	<8F31CD0E-8AE3-4C9F-AE0F-04F2BB146EB3@syenar.hu>
	<20070307100857.GB4056@localhost.localdomain>
	<20070308000224.GA10076@localhost.localdomain>
Message-ID: <973FCDF5-A580-4CDA-B3EA-703EFEA8ED65@syenar.hu>

Hi Przemek,

> Victor there is one serious problem with the above.
> I will have to hack the build process. It will be
> necessary to create: common, pp and compiler libraries
> from source directory, then jump to utils to build
> the compiler, next come back to source to finish other
> libraries which needs working compiler and finally build
> rest of utils. I can make necessary modifications but
> IMHO the final result will not be cleaner and the whole
> build process will look strangely hacked for someone who
> will try to analyze it.

You're right, the lib/util build processes heavily depend on the
compiler tool, I forgot to take this into account.

> I'd like to return to idea of subdirectory in source/ f.e.:
> source/hbcomp/
> What do you think?

I'd stay with either your original proposal which is clean
and simple, or source/harbour (this way the name is
more telling about what it is, and still simple).

I'd put here a shameless plug for SVN, which makes
it very easy to rename directories anytime :) We could
revisit the migration.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Mar  7 19:19:55 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Mar  7 19:20:31 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <20070307100735.GA4056@localhost.localdomain>
References: <45EE8903.74AA@synel.co.il>
	<20070307100735.GA4056@localhost.localdomain>
Message-ID: <9A017CC8-479C-4FB6-81DD-022D2360E57B@syenar.hu>

This is very nice.... lots of possibilities.

On 2007.03.07., at 11:07, Przemyslaw Czerpak wrote:

> On Wed, 07 Mar 2007, Chen Kedem wrote:
>>> ...I can create from devel branch single binary
>>> with integrated compiler, preprocessor, HVM and RTL(s)
>> What is the different between this new binary and the harbour.exe
>> (or the equivalent used in other OS) we have today?
>
> compiler.lib can be linked with any other .prg code.
> F.e. you can create .prg code interpreter in just few lines.
>
>     proc main( cFile )
>         local cHrb := hb_compile( cFIle, HB_COMP_HRBBODY ), hHrb
>         hHrb := __hrbload( cHrb );
>         __hrbDo( hHrb )
>         __hrbUnLoad( hHrb )
>     return
>
> I haven't created wrappers for compiler functions to .prg functions
> so hb_compile() is my imagination now but it's a minor problem and
> such functions can be created in few minutes.
> If you look at contrib/dot/pp.prg or xbase-script in xHarbour then
> with compiler library you will be able to create such programs in
> just few lines and the final result will be sth unreachable for
> xBase-script because before execution we will create PCODE exactly
> the same as in normal compilation so executed with full speed and
> all supported by Harbour features.
> Also now when compiler is MT safe and we fixed all know memory leaks
> we can try to integrate Harbour with some other products, f.e. we
> can create mod_hb for Apache WWW server so it will support .prg code
> just like any other script language.
> Using compiler.lib it's possible to create some server which can  
> accept
> user code compile it and register as its own. F.e. think about sth  
> like
> ADS server but it will be possible to send UDFs to server as .prg code
> from clients.
> Etc. It's possible to use it in many different way.
> Please only note that compiler.lib is on pure GPL license and I expect
> that people will respect this fact in their code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Wed Mar  7 22:09:08 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar  7 22:09:44 2007
Subject: [Harbour] ChangeLog BETA2 2007-03-08 03:00 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070308030908.GA11965@localhost.localdomain>

2007-03-08 03:00 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
  * harbour/doc/whatsnew.txt
  * harbour/include/hbver.h
    * updated version number to 0.99.2 and tagged beta branch as "beta2"

best regards,
Przemek
From niki at synel.co.il  Thu Mar  8 01:35:16 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Mar  8 01:34:00 2007
Subject: [Harbour] New subdirectory in harbour/source
References: <45EE8903.74AA@synel.co.il>
Message-ID: <45EFAEA4.535E@synel.co.il>

Przemek,

>> I will wait for other opinions for few hours yet but now
>> harbour/utils/hbcomp/ is preferable.
>
> Victor there is one serious problem with the above.
> I will have to hack the build process. It will be
> necessary to create: common, pp and compiler libraries
> from source directory, then jump to utils to build
> the compiler, next come back to source to finish other
> libraries which needs working compiler and finally build
> rest of utils.

Whan it is the time to build the tools, all the obj and lib of other
parts are already done. So you just have to add any additional code
that is needed for compiler.lib and build the lib.

Why the above is not true? unless you need to recomplie existing
compiler/pp/marco/... parts with some other conditional switch,
in order to create this library.

Can you try to outline the files and parts that need to be link
together so we might see what can be done about it? maybe some
post-build operation?

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From niki at synel.co.il  Thu Mar  8 02:02:51 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Mar  8 02:01:44 2007
Subject: [Harbour] New subdirectory in harbour/source
References: <45EE8903.74AA@synel.co.il> <45EFAEA4.535E@synel.co.il>
Message-ID: <45EFB51B.64FC@synel.co.il>

I wrote:
> Whan it is the time to build the tools, all the obj and lib of
> other parts are already done.
:
> Why the above is not true?

Unless you want/need to call the compiler.lib from other parts while
building harbour. This way the code is just in this lib and is not
duplicated in other libraries.

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From druzus at priv.onet.pl  Thu Mar  8 06:15:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar  8 06:16:19 2007
Subject: [Harbour] New subdirectory in harbour/source
In-Reply-To: <45EFAEA4.535E@synel.co.il>
References: <45EE8903.74AA@synel.co.il> <45EFAEA4.535E@synel.co.il>
Message-ID: <20070308111544.GA23253@localhost.localdomain>

On Thu, 08 Mar 2007, Chen Kedem wrote:
> > Victor there is one serious problem with the above.
> > I will have to hack the build process. It will be
> > necessary to create: common, pp and compiler libraries
> > from source directory, then jump to utils to build
> > the compiler, next come back to source to finish other
> > libraries which needs working compiler and finally build
> > rest of utils.
> Whan it is the time to build the tools, all the obj and lib of other
> parts are already done. So you just have to add any additional code
> that is needed for compiler.lib and build the lib.
> Why the above is not true? unless you need to recomplie existing
> compiler/pp/marco/... parts with some other conditional switch,
> in order to create this library.

To build tools in utils directory it's necessary to create all
libraries in source directory. To create libraries in source
directories we need working compiler binaries because some of
the libraries are created from .prg code. If we move comppiler
binaries to utils directory then we will not be able to finish
compilation of libraries in source directory because we will
need compiler. After build COMPILER, PP, COMMON libraries we will
have to jump to utils/hbcomp to create compiler then return to
source to compiler RTL, VM, RDD and other libraries and finally
go to utils to finish tools which needs RTL, VM, RDD, ...

> Can you try to outline the files and parts that need to be link
> together so we might see what can be done about it? maybe some
> post-build operation?

The modifications in directory structures are very small.
>From source/compiler/ directory 'compiler' library is created
(now compiler binaries: harbour.exe) and then from new directory
source/main/ compiler binaries harbour.exe (linked with COMMON,
PP, COMPILER), rest is te same.
source/main will have two files:

Makefile:
=========
ROOT = ../../
C_SOURCES=
C_MAIN=harbour.c
LIBS=pp common compiler
include $(TOP)$(ROOT)config/bin.cf


harbour.c:
==========
#include "hbcomp.h"
int main( int argc, char * argv[] )
{
   return compMain( argc, argv );
}

[ hb_xgrab()/hb_xfree()/... ]

That's all.
I can commit it in a while.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Mar  8 22:44:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar  8 22:45:25 2007
Subject: [Harbour] ChangeLog 2007-03-09 04:40 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070309034449.GA5417@localhost.localdomain>

2007-03-09 04:40 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/makefile.bc
  * harbour/makefile.vc
  * harbour/bin/hb-func.sh
  * harbour/config/global.cf
  * harbour/include/error.ch
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbexpra.c
  * harbour/include/hbexprb.c
  - harbour/include/hbexprc.c
  * harbour/include/hbexprop.h
  * harbour/include/hbmacro.h
  * harbour/source/Makefile
  * harbour/source/common/expropt1.c
  * harbour/source/common/expropt2.c
  * harbour/source/compiler/Makefile
  - harbour/source/compiler/exproptc.c
  - harbour/source/compiler/harbour.c
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/hbcomp.c
  * harbour/source/compiler/hbgenerr.c
  + harbour/source/compiler/hbmain.c
  * harbour/source/compiler/hbpcode.c
  * harbour/source/macro/Makefile
  * harbour/source/macro/macro.y
  * harbour/source/macro/macro.yyc
  - harbour/source/macro/macroc.c
  + harbour/source/main/Makefile
  + harbour/source/main/harbour.c
  * harbour/source/vm/macro.c
    * resolved name conflicts between compiler and macro compiler.
      Now new compiler library is created.
      There are some things which can be improved and cleaned yet
      but it's enough to create single binaries with compiler+HVM+RTLs.
      I updated non GNU make files but I cannot tested the modifications
      - please check and fix me if necessary

best regards,
Przemek
From druzus at priv.onet.pl  Thu Mar  8 22:46:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar  8 22:46:58 2007
Subject: [Harbour] hb_symEval
In-Reply-To: <45eee04f.2bcdf826.7111.52d9@mx.google.com>
References: <20070307140728.GA6408@localhost.localdomain>
	<45eee04f.2bcdf826.7111.52d9@mx.google.com>
Message-ID: <20070309034623.GB5417@localhost.localdomain>

On Wed, 07 Mar 2007, Antonio Linares wrote:
> Ok, so this code:
>                     hb_vmPushSymbol( &hb_symEval );
>                     hb_vmPush( _param( 5, BLOCK ) );
>                     hb_vmPush( hb_stackReturnItem() );
>                     hb_vmFunction( 1 );
> Should change into:
>                     hb_vmPushEvalSym();
>                     hb_vmPush( _param( 5, BLOCK ) );
>                     hb_vmPush( hb_stackReturnItem() );
>                     hb_vmFunction( 1 );
> Is it ok ? Thanks,

Yes, it is OK.

best regards,
Przemek
From antonioharbour at gmail.com  Fri Mar  9 05:28:08 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Mar  9 05:28:17 2007
Subject: [Harbour] build error on Mac OSX
Message-ID: <A5E52AAB-A9CD-45BA-A693-8EE88AB37BCE@gmail.com>

Przemek,

I appreciate if you could review this:

cc -no-cpp-precomp -I. -I../../include -I../../../../include -fno- 
common -Wall -W -Wno-long-double -DHB_OS_DARWIN  -c ../../harbour.c - 
oharbour.o
../../harbour.c: In function 'hb_xquery':
../../harbour.c:238: error: 'HB_MEM_USED' undeclared (first use in  
this function)
../../harbour.c:238: error: (Each undeclared identifier is reported  
only once
../../harbour.c:238: error: for each function it appears in.)
../../harbour.c:242: error: 'HB_MEM_USEDMAX' undeclared (first use in  
this function)

Thanks,

Antonio
From druzus at priv.onet.pl  Fri Mar  9 06:59:48 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar  9 07:00:22 2007
Subject: [Harbour] ChangeLog 2007-03-09 13:00 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070309115948.GA9411@localhost.localdomain>

2007-03-09 13:00 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbmain.c
    * removed #include "hbmemory.ch"
  * harbour/source/main/harbour.c
    * added #include "hbmemory.ch"

best regards,
Przemek
From druzus at priv.onet.pl  Fri Mar  9 07:00:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar  9 07:00:58 2007
Subject: [Harbour] build error on Mac OSX
In-Reply-To: <A5E52AAB-A9CD-45BA-A693-8EE88AB37BCE@gmail.com>
References: <A5E52AAB-A9CD-45BA-A693-8EE88AB37BCE@gmail.com>
Message-ID: <20070309120023.GB9411@localhost.localdomain>

On Fri, 09 Mar 2007, Antonio Linares wrote:
> Przemek,
> I appreciate if you could review this:
> cc -no-cpp-precomp -I. -I../../include -I../../../../include -fno- 
> common -Wall -W -Wno-long-double -DHB_OS_DARWIN  -c ../../harbour.c - 
> oharbour.o
> ../../harbour.c: In function 'hb_xquery':
> ../../harbour.c:238: error: 'HB_MEM_USED' undeclared (first use in  
> this function)
> ../../harbour.c:238: error: (Each undeclared identifier is reported  
> only once
> ../../harbour.c:238: error: for each function it appears in.)
> ../../harbour.c:242: error: 'HB_MEM_USEDMAX' undeclared (first use in  
> this function)

Should be fixed after
    2007-03-09 13:00 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

best regards,
Przemek
From randy at palmasdev.com  Fri Mar  9 09:09:21 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Mar  9 09:08:53 2007
Subject: [Harbour] Off topic: Graphing/charting tool for Win32
In-Reply-To: <20070309115948.GA9411@localhost.localdomain>
Message-ID: <5.2.0.9.0.20070309090652.00d343d0@pop3.pathcom.com>

Hi all,

Do any of you know of a developer tool for a Win32 application that will 
allow for the creation of graphs and charts (gauges would be nice also) - 
However, I would prefer a DLL interface (_not_ COM, .NET, ActiveX, Java or 
otherwise) which allows for royalty-free redistribution?

TIA.

Regards,
Randy.

P.S. Please reply to me privately so as not to bother others on the list.

From antonioharbour at gmail.com  Fri Mar  9 08:15:33 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Mar  9 09:16:11 2007
Subject: [Harbour] build error on Mac OSX
In-Reply-To: <20070309120023.GB9411@localhost.localdomain>
Message-ID: <45f16c08.2ba0cd9a.307e.336b@mx.google.com>

Przemek,

Is ok now, thanks

Antonio

From dmacias at mail.udg.mx  Fri Mar  9 22:48:55 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Mar  9 22:48:57 2007
Subject: [Harbour] Re: Build errors
In-Reply-To: <20070309170032.D59C01E0DE2@antivirus2.noc.udg.mx>
References: <20070309170032.D59C01E0DE2@antivirus2.noc.udg.mx>
Message-ID: <45F22AA7.3070604@mail.udg.mx>

Current Harbour devel branch raise many errors building under OS/2

These are some of them copied from screen (firsts of them where scrolled):

../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewString referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewVar referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewCodeBlock referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprAddCodeblockExpr referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewList referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewArray referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewNil referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewNil referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewArgList referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
symbol _hb
_compExprNewMethodCall referenced from text segment
../../../../source/compiler/os2/gcc/compiler.a(gencc.o): Undefined 
symbol _hb_ge
t_le_int64 referenced from text segment
make[3]: *** [harbour.exe] Error 1
make[2]: *** [descend] Error 2

Gracias,
David Macias

From druzus at priv.onet.pl  Sat Mar 10 08:28:14 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Mar 10 08:28:50 2007
Subject: [Harbour] Re: Build errors
In-Reply-To: <45F22AA7.3070604@mail.udg.mx>
References: <20070309170032.D59C01E0DE2@antivirus2.noc.udg.mx>
	<45F22AA7.3070604@mail.udg.mx>
Message-ID: <20070310132814.GA16918@localhost.localdomain>

On Fri, 09 Mar 2007, David Arturo Macias Corona wrote:
> Current Harbour devel branch raise many errors building under OS/2
> These are some of them copied from screen (firsts of them where scrolled):
> ../../../../source/compiler/os2/gcc/compiler.a(expropta.o): Undefined 
> symbol _hb_compExprNewString referenced from text segment

in source/main/Makefile
change:

LIBS=\
	pp       \
	common   \
	compiler \

to:

LIBS=\
	compiler \
	pp       \
	common   \

and check if it helps. As I can see GCC/LD rules in OS2 make files
do not use library grouping.

best regards,
Przemek
From dmacias at mail.udg.mx  Sun Mar 11 07:02:16 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Mar 11 07:02:17 2007
Subject: [Harbour] Re: Build errors
In-Reply-To: <20070310170019.610991FFBAA@antivirus2.noc.udg.mx>
References: <20070310170019.610991FFBAA@antivirus2.noc.udg.mx>
Message-ID: <45F3E1B8.5020602@mail.udg.mx>


> in source/main/Makefile
> change:
>
> LIBS=\
> 	pp       \
> 	common   \
> 	compiler \
>
> to:
>
> LIBS=\
> 	compiler \
> 	pp       \
> 	common   \
>
> and check if it helps. As I can see GCC/LD rules in OS2 make files
> do not use library grouping.
>
>
>   

Yes, with that changes it work fine

Thanks Przemek

Gracias,
David Macias





From antonioharbour at gmail.com  Sun Mar 11 07:12:11 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 07:12:18 2007
Subject: [Harbour] Harbour setup for Mac OSX
Message-ID: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>

I have built a package using OSX free & built-in PackageMaker to  
automatically install Harbour 1.1 on Mac OSX, here you have some  
screenshots:

[URL=http://imageshack.us][IMG]http://img169.imageshack.us/ 
img169/6108/picture1gt0.png[/IMG][/URL]

[URL=http://imageshack.us][IMG]http://img297.imageshack.us/ 
img297/7789/picture2sn9.png[/IMG][/URL]

Please let me know if you are interested to include it in Harbour  
downloads from SourceForge,

regards,

Antonio


From harbour.01 at syenar.hu  Sun Mar 11 07:21:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 07:21:35 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
Message-ID: <C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>

Hi Antonio,

Nice. I'm certainly interested.

Brgds,
Viktor

On 2007.03.11., at 12:12, Antonio Linares wrote:

> I have built a package using OSX free & built-in PackageMaker to  
> automatically install Harbour 1.1 on Mac OSX, here you have some  
> screenshots:
>
> [URL=http://imageshack.us][IMG]http://img169.imageshack.us/ 
> img169/6108/picture1gt0.png[/IMG][/URL]
>
> [URL=http://imageshack.us][IMG]http://img297.imageshack.us/ 
> img297/7789/picture2sn9.png[/IMG][/URL]
>
> Please let me know if you are interested to include it in Harbour  
> downloads from SourceForge,
>
> regards,
>
> Antonio
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Mar 11 07:39:11 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 07:39:22 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
Message-ID: <41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>

> Nice. I'm certainly interested.

You may download it from here www.filefactory.com/file/2593f8

Its my first OSX package, hopefully its fine :-)

regards,

Antonio


From harbour.01 at syenar.hu  Sun Mar 11 07:46:51 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 07:46:59 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
Message-ID: <DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>

Thanks.

I got this:
Mar 11 12:44:41 silver : BomFileError 13: Permission denied - ///bin/ 
harbour
Mar 11 12:44:41 silver : Install failed: Some files for Harbour may  
not have been written correctly.

Probably because I'm not an admin user.
Installers used to ask for admin credentials.

Brgds,
Viktor

On 2007.03.11., at 12:39, Antonio Linares wrote:

>> Nice. I'm certainly interested.
>
> You may download it from here www.filefactory.com/file/2593f8
>
> Its my first OSX package, hopefully its fine :-)
>
> regards,
>
> Antonio
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Mar 11 07:49:58 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 07:50:06 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
Message-ID: <3752BD6B-2E5F-4C96-A0B8-F1A04087304E@gmail.com>

Viktor,

> I got this:
> Mar 11 12:44:41 silver : BomFileError 13: Permission denied - /// 
> bin/harbour
> Mar 11 12:44:41 silver : Install failed: Some files for Harbour may  
> not have been written correctly.
>
> Probably because I'm not an admin user.
> Installers used to ask for admin credentials.

It looks as I have set a wrong destination directory. I am going to  
fix it and provide a new setup, Thanks

regards,

Antonio


From antonioharbour at gmail.com  Sun Mar 11 08:05:18 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 08:05:24 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
Message-ID: <4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>

Viktor,

This one seems to work better:

http://www.filefactory.com/file/76fac8/

I appreciate your feedback,

Please notice that it installs to /usr/local/harbour

regards,

Antonio

From harbour.01 at syenar.hu  Sun Mar 11 08:15:35 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 08:15:51 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
Message-ID: <F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>

The install went fine, I told it to put the files under my Desktop,  
it asked for admin login.

There is one problem: I could not run the harbour executable, since I  
have
a Powerbook G4, and the package is Intel only.

Do you think it's possible to create PPC binary? (a universal package  
seems out of question)

Brgds,
Viktor

On 2007.03.11., at 13:05, Antonio Linares wrote:

> Viktor,
>
> This one seems to work better:
>
> http://www.filefactory.com/file/76fac8/
>
> I appreciate your feedback,
>
> Please notice that it installs to /usr/local/harbour
>
> regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Mar 11 08:23:16 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 08:23:26 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
Message-ID: <39D6A6FF-6441-446A-A611-FFF4DF17E93B@gmail.com>

Viktor,

> The install went fine, I told it to put the files under my Desktop,  
> it asked for admin login.

ok, thanks for the feedback,

> There is one problem: I could not run the harbour executable, since  
> I have
> a Powerbook G4, and the package is Intel only.
>
> Do you think it's possible to create PPC binary? (a universal  
> package seems out of question)

Yes, its easy to create both Intel and PPC. I guess we need to create  
a more elaborated setup package so the user may select Intel or PPC.

We could deliver universal binaries, but the libraries have to be  
different for Intel and PPC. I have never heard of universal binaries  
for libraries

If you want the package builder file, to modify it, test it, etc.  
just say it :-)

regards,

Antonio
From antonioharbour at gmail.com  Sun Mar 11 09:18:56 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 09:19:09 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
Message-ID: <082B27E1-AC67-4277-A5F3-5866FCE9DB44@gmail.com>

Viktor, Przemek,

Could you please modify make_gnu.sh for Darwin, so it uses these flags ?

-arch ppc -arch i386

This way we will have universal binaries for Harbour and the  
libraries (it seems so) too :-)

Thanks,

Antonio
From antonioharbour at gmail.com  Sun Mar 11 11:20:08 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 11:20:17 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
Message-ID: <D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>

Viktor,

I managed to modify config/darwin/gcc.cf to include the required  
flags, and it properly got built, so here it is the Harbour setup for  
Mac OSX universal binaries (Harbour and the libraries too!) :-)   I  
will commit the changes in few minutes

http://www.filefactory.com/file/0d762a/

I appreciate if you could test it on your PPC machine, thanks

regards,

Antonio
From antonioharbour at gmail.com  Sun Mar 11 11:49:39 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 11:49:50 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
Message-ID: <0BF5F518-EEC5-479D-9921-5D8F463DCC60@gmail.com>

I am trying to commit from Darwin but I am not familiar with it,

all the change needed is this line in config/darwin/gcc.cf

CFLAGS += -DHB_OS_DARWIN
++CFLAGS += -arch ppc -arch i386

I appreciate if someone can commit it,

regards,

Antonio
From harbour.01 at syenar.hu  Sun Mar 11 12:12:06 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 12:12:13 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
Message-ID: <752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>

Seems to work great, as far as the basic stuff goes,
but I'm having a hard time building a small test executable...
Compiling a .prg to .c was ok, but after that I'm missing
a good build script.

bld.sh doesn't support Darwin, it doesn't even run actually.

Brgds,
Viktor

On 2007.03.11., at 16:20, Antonio Linares wrote:

> Viktor,
>
> I managed to modify config/darwin/gcc.cf to include the required  
> flags, and it properly got built, so here it is the Harbour setup  
> for Mac OSX universal binaries (Harbour and the libraries  
> too!) :-)   I will commit the changes in few minutes
>
> http://www.filefactory.com/file/0d762a/
>
> I appreciate if you could test it on your PPC machine, thanks
>
> regards,
>
> Antonio
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Mar 11 12:14:39 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 12:14:58 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
Message-ID: <8CC17520-4772-476E-891B-19167451F633@gmail.com>

Viktor,

> Seems to work great, as far as the basic stuff goes,
> but I'm having a hard time building a small test executable...
> Compiling a .prg to .c was ok, but after that I'm missing
> a good build script.

I have included a build.sh at samples directory. Its quite simple and  
works very well, i.e.:

./build.sh hello

regards,

Antonio


From harbour.01 at syenar.hu  Sun Mar 11 12:28:36 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 12:28:42 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <8CC17520-4772-476E-891B-19167451F633@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
	<8CC17520-4772-476E-891B-19167451F633@gmail.com>
Message-ID: <C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>

Great! I think we should make this part of the bld.sh in bin/.
I had to remove "-arch i386" because it caused link time errors below:
(I have XCode 2.4 installed and OS X 10.4.8 with all updates)

/usr/bin/ld: for architecture i386
/usr/bin/ld: warning fat file: /usr/lib/gcc/i686-apple- 
darwin8/4.0.1/../../../libSystem.dylib does not contain an  
architecture that matches the specified -arch flag: i386 (file ignored)
/usr/bin/ld: Undefined symbols:
___keymgr_dwarf2_register_sections
__cthread_init_routine
_atexit
_errno
_exit
_mach_init_routine
_fmod
_memset
_pow
_snprintf
_strcmp
_finite
_modf
_memchr
_memmove
_strncpy
_atoi
_strchr
_printf
_fclose
_fopen
_fprintf
_free
_malloc
_realloc
___tolower
___toupper
_strpbrk
___sF
_fileno
__DefaultRuneLocale
__NSGetEnviron
_chdir
_close
_dup2
_execve
_fcntl
_fork
_fsync
_ftruncate
_getcwd
_getgid
_getpid
_getuid
_isatty
_lseek
_mkdir
_open
_pipe
_read
_remove
_rename
_rmdir
_setgid
_setuid
_strrchr
_sysconf
_write
___error
_clock
_memcpy
_times
_usleep
_exp
_log
_gettimeofday
_localtime
_closedir
_fnmatch
_opendir
_readdir
_stat
_tzset
_getenv
_mkstemp
_rand
_srand
_time
_ioctl
_sigaction
_strncat
_tcgetattr
_tcsetattr
_waitpid
_ceil
_strncmp
___maskrune
_dup
_fflush
_vfprintf
_uname
collect2: ld returned 1 exit status
lipo: can't open input file: /var/tmp//ccoP7OCB.out (No such file or  
directory)



On 2007.03.11., at 17:14, Antonio Linares wrote:

> Viktor,
>
>> Seems to work great, as far as the basic stuff goes,
>> but I'm having a hard time building a small test executable...
>> Compiling a .prg to .c was ok, but after that I'm missing
>> a good build script.
>
> I have included a build.sh at samples directory. Its quite simple  
> and works very well, i.e.:
>
> ./build.sh hello
>
> regards,
>
> Antonio
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Mar 11 12:31:56 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 12:32:03 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
	<8CC17520-4772-476E-891B-19167451F633@gmail.com>
	<C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>
Message-ID: <3917A783-58A8-44C6-8F33-77688FEACCDF@gmail.com>

Viktor,

So have you been able to build some executables and run them ? :-)

regards,

Antonio

From harbour.01 at syenar.hu  Sun Mar 11 12:36:42 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 12:36:50 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <3917A783-58A8-44C6-8F33-77688FEACCDF@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
	<8CC17520-4772-476E-891B-19167451F633@gmail.com>
	<C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>
	<3917A783-58A8-44C6-8F33-77688FEACCDF@gmail.com>
Message-ID: <4A3F6FDF-DE29-432F-A8BA-8E9735DACBAF@syenar.hu>

Sure I have my "hello world" app (or as Borat said "hello worlds")
up and running :)

I tried with ac_test.but I seem to miss the proper GT driver here.

Which one can be used in OSX?

Brgds,
Viktor

On 2007.03.11., at 17:31, Antonio Linares wrote:

> Viktor,
>
> So have you been able to build some executables and run them ? :-)
>
> regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Mar 11 12:44:19 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 12:44:28 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <4A3F6FDF-DE29-432F-A8BA-8E9735DACBAF@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
	<8CC17520-4772-476E-891B-19167451F633@gmail.com>
	<C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>
	<3917A783-58A8-44C6-8F33-77688FEACCDF@gmail.com>
	<4A3F6FDF-DE29-432F-A8BA-8E9735DACBAF@syenar.hu>
Message-ID: <C21648E7-5533-40FF-B719-1D52CB0E532A@syenar.hu>

Antonio,

Looks like I'm missing gtcrs lib.
Could you include it?

Brgds,
Viktor

On 2007.03.11., at 17:36, Szak?ts Viktor wrote:

> Sure I have my "hello world" app (or as Borat said "hello worlds")
> up and running :)
>
> I tried with ac_test.but I seem to miss the proper GT driver here.
>
> Which one can be used in OSX?
>
> Brgds,
> Viktor
>
> On 2007.03.11., at 17:31, Antonio Linares wrote:
>
>> Viktor,
>>
>> So have you been able to build some executables and run them ? :-)
>>
>> regards,
>>
>> Antonio
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From antonioharbour at gmail.com  Sun Mar 11 12:43:54 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 12:44:35 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <4A3F6FDF-DE29-432F-A8BA-8E9735DACBAF@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
	<8CC17520-4772-476E-891B-19167451F633@gmail.com>
	<C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>
	<3917A783-58A8-44C6-8F33-77688FEACCDF@gmail.com>
	<4A3F6FDF-DE29-432F-A8BA-8E9735DACBAF@syenar.hu>
Message-ID: <97616B9D-7596-4FE6-BEA0-8F329DA897DF@gmail.com>

Viktor,

> Sure I have my "hello world" app (or as Borat said "hello worlds")
> up and running :)

cool :)  we have universal binaries and libraries :)

> I tried with ac_test.but I seem to miss the proper GT driver here.
> Which one can be used in OSX?

I have just used gtstd but I have done very little work on console mode.

We use Cocoa most of the time to create OSX GUI apps as we are  
building our product FiveMac

regards,

Antonio
From antonioharbour at gmail.com  Sun Mar 11 12:54:16 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 12:54:34 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <C21648E7-5533-40FF-B719-1D52CB0E532A@syenar.hu>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
	<8CC17520-4772-476E-891B-19167451F633@gmail.com>
	<C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>
	<3917A783-58A8-44C6-8F33-77688FEACCDF@gmail.com>
	<4A3F6FDF-DE29-432F-A8BA-8E9735DACBAF@syenar.hu>
	<C21648E7-5533-40FF-B719-1D52CB0E532A@syenar.hu>
Message-ID: <4D158799-4862-4C1D-921E-408E57B171DB@gmail.com>

Viktor,

> Looks like I'm missing gtcrs lib.
> Could you include it?

Done,

   http://www.filefactory.com/file/c70c22/

regards,

Antonio


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070311/979a08dd/attachment-0001.html
From harbour.01 at syenar.hu  Sun Mar 11 12:54:49 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 12:54:57 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <97616B9D-7596-4FE6-BEA0-8F329DA897DF@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
	<8CC17520-4772-476E-891B-19167451F633@gmail.com>
	<C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>
	<3917A783-58A8-44C6-8F33-77688FEACCDF@gmail.com>
	<4A3F6FDF-DE29-432F-A8BA-8E9735DACBAF@syenar.hu>
	<97616B9D-7596-4FE6-BEA0-8F329DA897DF@gmail.com>
Message-ID: <BD1986D1-21D3-4494-9BBB-81FB09085CBF@syenar.hu>

> cool :)  we have universal binaries and libraries :)

Yeah this was quick :)

>> I tried with ac_test.but I seem to miss the proper GT driver here.
>> Which one can be used in OSX?
>
> I have just used gtstd but I have done very little work on console  
> mode.
>
> We use Cocoa most of the time to create OSX GUI apps as we are  
> building our product FiveMac

Sure, now I remember the screenshots you posted not long ago.
(I'm still stuck with CUI though.)

I figured that gtcrs is needed under OSX.

Brgds,
Viktor


From harbour.01 at syenar.hu  Sun Mar 11 13:20:33 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 11 13:20:43 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <4D158799-4862-4C1D-921E-408E57B171DB@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<D8392000-1D06-41B4-8B64-D14F59B8DF45@gmail.com>
	<752A4E7F-0543-4160-B420-5A939FA3DC87@syenar.hu>
	<8CC17520-4772-476E-891B-19167451F633@gmail.com>
	<C68D5E99-129F-4010-B8CB-812BA46949B5@syenar.hu>
	<3917A783-58A8-44C6-8F33-77688FEACCDF@gmail.com>
	<4A3F6FDF-DE29-432F-A8BA-8E9735DACBAF@syenar.hu>
	<C21648E7-5533-40FF-B719-1D52CB0E532A@syenar.hu>
	<4D158799-4862-4C1D-921E-408E57B171DB@gmail.com>
Message-ID: <5FC2038D-0A3F-4BF9-AAA1-5FCB31EBF90B@syenar.hu>

It worked w/o any problem using ncurses.

See: http://www.syenar.hu/hbosx.png

Well, the only problem I noticed is that the app was consuming
too much CPU while left there waiting for the next key.

Brgds,
Viktor

On 2007.03.11., at 17:54, Antonio Linares wrote:

> Viktor,
>
>> Looks like I'm missing gtcrs lib.
>> Could you include it?
>
> Done,
>
>   http://www.filefactory.com/file/c70c22/
>
> regards,
>
> Antonio
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Sun Mar 11 15:56:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Mar 11 15:57:01 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <0BF5F518-EEC5-479D-9921-5D8F463DCC60@gmail.com>
References: <8C7D5843-6724-4038-A5E4-E273BF7877E0@gmail.com>
	<C178C469-9B6E-4B35-BA04-0E7EF9C9026B@syenar.hu>
	<41EB4DD7-8537-425A-AF7A-56D599DFBCB5@gmail.com>
	<DC18B1A4-7EB1-4FA3-9D62-85EB34A22DE5@syenar.hu>
	<4AF72A54-5E7A-4BDE-9498-FB03BC2447DC@gmail.com>
	<F4662F0F-F690-450A-A782-E0BE68B6E223@syenar.hu>
	<0BF5F518-EEC5-479D-9921-5D8F463DCC60@gmail.com>
Message-ID: <20070311195624.GA14059@localhost.localdomain>

On Sun, 11 Mar 2007, Antonio Linares wrote:
> I am trying to commit from Darwin but I am not familiar with it,
> all the change needed is this line in config/darwin/gcc.cf
> CFLAGS += -DHB_OS_DARWIN
> ++CFLAGS += -arch ppc -arch i386
> I appreciate if someone can commit it,

The above is technical nonsense.
Can you explain what's your goal?

best regards,
Przemek
From antonioharbour at gmail.com  Sun Mar 11 16:08:17 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Mar 11 16:08:32 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <20070311195624.GA14059@localhost.localdomain>
Message-ID: <45f461bb.2a47ec04.3480.479a@mx.google.com>

Przemek, 

>> CFLAGS += -arch ppc -arch i386

> The above is technical nonsense.
> Can you explain what's your goal?

It is called "Universal binaries" in OSX. The binaries and the libraries
contain both the i386 and ppc code "together".

This way, harbour can run in powerpc or in intel, the same executable. The
same libraries can be used for both platforms.

Similar as the first Windows executables had a MsDos stub in them. In an OSX
universal binary, there are two executables in one: the powerpc one and the
intel one. The operating system selects the one to execute. The same for the
libraries.

Regards,

Antonio

From antonioharbour at gmail.com  Mon Mar 12 06:43:29 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Mar 12 06:43:39 2007
Subject: [Harbour] Darwin ar and ranlib
Message-ID: <9FDDF483-75F3-4F5F-B603-85D3E7BBFED4@gmail.com>

Przemek,

I am reviewing the way Harbour is built for Darwin using make_gnu.sh.  
I am not familiar with gnu make,

my interest is to know how ar and ranlib are used. Is this right ?

	ar rc ./lib/libtest.a module.o
	ranlib ./lib/libtest.a

thanks,

regards,

Antonio
From sscc at mweb.co.za  Mon Mar 12 06:52:44 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Mar 12 06:53:20 2007
Subject: [Harbour] Darwin ar and ranlib
In-Reply-To: <9FDDF483-75F3-4F5F-B603-85D3E7BBFED4@gmail.com>
References: <9FDDF483-75F3-4F5F-B603-85D3E7BBFED4@gmail.com>
Message-ID: <45F530FC.9000803@mweb.co.za>

Antonio Linares wrote:

> my interest is to know how ar and ranlib are used. Is this right ?
> 
>     ar rc ./lib/libtest.a module.o
>     ranlib ./lib/libtest.a

 From : http://unixhelp.ed.ac.uk/CGI/man-cgi?ranlib

        ranlib  generates  an index to the contents of an archive and 
stores it
        in the archive.	The index lists each symbol defined by a member 
of  an
        archive that is a relocatable object file.


        The  GNU  ranlib  program  is another form of GNU ar; running 
ranlib is
        completely equivalent to executing ar -s.


Regards
Alex
From antonioharbour at gmail.com  Mon Mar 12 07:03:24 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Mar 12 07:04:00 2007
Subject: [Harbour] Darwin ar and ranlib
In-Reply-To: <45F530FC.9000803@mweb.co.za>
References: <9FDDF483-75F3-4F5F-B603-85D3E7BBFED4@gmail.com>
	<45F530FC.9000803@mweb.co.za>
Message-ID: <CDBB7B67-A91D-4941-9122-421672E8072E@gmail.com>

Alex,

>        The  GNU  ranlib  program  is another form of GNU ar;  
> running ranlib is
>        completely equivalent to executing ar -s.

Thanks, though it seems there is no way to do a ranlib rc module.o as  
I do with ar

It looks as ar and ranlib have to be used together, as Harbour gnu  
make does.

But its not easy to understand how the Harbour GNU make works :-)

Antonio
From druzus at priv.onet.pl  Mon Mar 12 09:09:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 12 09:10:18 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <45f461bb.2a47ec04.3480.479a@mx.google.com>
References: <20070311195624.GA14059@localhost.localdomain>
	<45f461bb.2a47ec04.3480.479a@mx.google.com>
Message-ID: <20070312130943.GA19854@localhost.localdomain>

On Sun, 11 Mar 2007, Antonio Linares wrote:
> Przemek, 
> >> CFLAGS += -arch ppc -arch i386
> > The above is technical nonsense.
> > Can you explain what's your goal?
> It is called "Universal binaries" in OSX. The binaries and the libraries
> contain both the i386 and ppc code "together".

Ah, you are not using FSF GCC but GCC version modified by Apple which
make to independent compilation in such case and then join output file
into single archive. So:
1. these are not standard GCC options
2. you can use C_USR environment variables to pass additional options to
   C compiler, L_USR to linker and A_USR to library manager
3. even only for x86 or only for PPC different binaries can be created,
   in practice at least: PPC@G3, PPC@G4, PPC@G5, x86@32, x86@64 and different
   binaries will have strong speed difference so even if G5 can execute
   G3 code it's rather inefficient.
   (I do not know MacOSX but if port for m68K exists then we should add to
   above Motorola processors)
4. In the install process hb* scripts are created also in MacOSX and they
   have much bigger functionality then build.sh so I suggest to use them.
   They allow to hide differences between *nixes for Harbour users.
   Below I'm attaching description I put in README.RPM - I think you can
   add similar information to MacOSX package.

> This way, harbour can run in powerpc or in intel, the same executable. The
> same libraries can be used for both platforms.

Yes but we the cost of speed. Also users should be able to create heir own
binaries with libraries they have in their systems. You should not force
them installing the same library set as yours.
I guess that MacOSX installation/distribution package is described by some
files in similar to RPM or DEB way (build and install process, suggested
and required dependences, etc.) IMHO such file should be a part of CVS
so users can create binaries themselves with options, libraries and destination
platform they prefer. With some small startup scripts like make_rpm.sh
or make_tgz.sh (please commit them for *nix with executable attribute set
or we will not be able to change it later like in make_gnu.sh) it will be
very easy process for users.

best regards,
Przemek



README.RPM
==========
This RPM distribution of Harbour includes extra commands to make compiling
and linking with Harbour a little easier. There are compiler and linker
wrappers called "hbcc", "hbcmp", "hblnk" and "hbmk".

"hbcc" is a wrapper to the C compiler only. It sets all flags
and paths necessary to compile .c files which include Harbour header
files. The result of its work is an object file.

Use "hbcmp" exactly as you would use the harbour compiler itself.
The main difference with hbcmp is that it results in an object file,
not a C file that needs compiling down to an object. hbcmp also
ensures that the harbour include directory is seen by the harbour compiler.

"hblnk" simply takes a list of object files and links them together
with the harbour virtual machine and run-time library to produce an
executable. The executable will be given the basename of the first object
file if not directly set by the "-o" command line switch.

"hbmk" tries to produce an executable from your .prg file. It's a simple
equivalent of cl.bat from the CA-Clipper distribution.

All these scripts accept command line switches:
-o<outputfilename>      # output file name
-static                 # link with static Harbour libs
-fullstatic             # link with all static libs
-shared                 # link with shared libs (default)
-mt                     # link with multi-thread libs
-gt<hbgt>               # link with <hbgt> GT driver, can be repeated to
                        # link with more GTs. The first one will be
                        #      the default at runtime
-xbgtk                  # link with xbgtk library (xBase GTK+ interface)
-hwgui                  # link with HWGUI library (GTK+ interface)
-l<libname>             # link with <libname> library
-fmstat                 # link with the memory statistics lib
-nofmstat               # do not link with the memory statistics lib (default)
-[no]strip              # strip (no strip) binaries
-main=<main_func>       # set the name of main program function/procedure.
                        # if not set then 'MAIN' is used or if it doesn't
                        # exist the name of first public function/procedure
                        # in first linked object module (link)

Link options work only with "hblnk" and "hbmk" and have no effect
in "hbcc" and "hbcmp".
Other options are passed to Harbour/C compiler/linker.
From antonioharbour at gmail.com  Mon Mar 12 09:22:02 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Mar 12 09:22:10 2007
Subject: [Harbour] Harbour setup for Mac OSX
In-Reply-To: <20070312130943.GA19854@localhost.localdomain>
References: <20070311195624.GA14059@localhost.localdomain>
	<45f461bb.2a47ec04.3480.479a@mx.google.com>
	<20070312130943.GA19854@localhost.localdomain>
Message-ID: <68D1C647-4A49-422A-8D41-B5D1B39B18AD@gmail.com>

Przemek,

When make_gnu.sh builds the Harbour libraries, does it add all the  
OBJs at once ?

If yes, then what happens if a single module is modified, the whole  
library is created again ?

Thanks,

Antonio

From druzus at priv.onet.pl  Mon Mar 12 09:38:15 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 12 09:38:51 2007
Subject: [Harbour] ChangeLog 2007-03-12 14:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070312133815.GA21057@localhost.localdomain>

2007-03-12 14:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexpra.c
    * emulate xHarbour HB_ENUMINDEX() inside FOR EACH loop when
      HB_COMPAT_XHB macro is set
      It's only for compatibility - I strongly suggest to use
            <unumvar>:__enumIndex()
      which is more flexible and allow to chose the enumerator
      variable not only the one from last loop

  * harbour/include/hbexprb.c
    * added comment removed from hbexpra.c

  * harbour/source/compiler/hbmain.c
    ! fixed GPF which can appear when -b option is used in line numbering
      inside codeblocks

best regards,
Przemek
From antonioharbour at gmail.com  Mon Mar 12 09:57:24 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Mar 12 09:57:33 2007
Subject: [Harbour] Darwin ar and ranlib
In-Reply-To: <45F530FC.9000803@mweb.co.za>
References: <9FDDF483-75F3-4F5F-B603-85D3E7BBFED4@gmail.com>
	<45F530FC.9000803@mweb.co.za>
Message-ID: <A223A08A-F2D9-4947-9941-325548E3EA13@gmail.com>

I finally managed to keep using ar rc ... and finally just one call  
to ranlib.

its working fine and I guess it is the same as Harbour make does.

This way is compatible with creating universal libraries.

regards,

Antonio

From e.m.giordano at emagsoftware.it  Mon Mar 12 10:13:48 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Mar 12 10:14:27 2007
Subject: [Harbour] ChangeLog 2007-03-12 14:30 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070312133815.GA21057@localhost.localdomain>
Message-ID: <009f01c764b0$a745ce20$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 12 marzo 2007 14.38
Oggetto: [Harbour] ChangeLog 2007-03-12 14:30 UTC+0100 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2007-03-12 14:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

What is the tag to update to get your changes? It seems not to be beta2.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Mon Mar 12 10:26:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 12 10:27:28 2007
Subject: [Harbour] ChangeLog 2007-03-12 14:30 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <009f01c764b0$a745ce20$0100a8c0@emag>
References: <20070312133815.GA21057@localhost.localdomain>
	<009f01c764b0$a745ce20$0100a8c0@emag>
Message-ID: <20070312142652.GA25007@localhost.localdomain>

On Mon, 12 Mar 2007, Enrico Maria Giordano wrote:
> >2007-03-12 14:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> What is the tag to update to get your changes? It seems not to be beta2.

It was committed to DEVEL branch.
Each time I'm committing to other branch I'm adding branch name to after
ChangeLog in subject.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar 12 10:33:22 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 12 10:33:58 2007
Subject: [Harbour] ChangeLog BETA2 2007-03-12 15:20 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
Message-ID: <20070312143322.GB25007@localhost.localdomain>

2007-03-12 15:20 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/harbour.c
    ! fixed GPF which can appear when -b option is used in line numbering
      inside codeblocks

  * harbour/include/hbver.h
    * updated ChangeLog IDs and retagged CVS as "beta2"


We haven't started binaries release process for BETA2 yet so I hope
that re tagging will not be a problem.
Now I'd like to ask about starting BETA2 release process.
Phil? Alex?

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Mon Mar 12 10:35:27 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Mar 12 10:35:38 2007
Subject: [Harbour] ChangeLog 2007-03-12 14:30 UTC+0100
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20070312133815.GA21057@localhost.localdomain><009f01c764b0$a745ce20$0100a8c0@emag>
	<20070312142652.GA25007@localhost.localdomain>
Message-ID: <00c601c764b3$addcf0d0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 12 marzo 2007 15.26
Oggetto: Re: [Harbour] ChangeLog 2007-03-12 14:30 UTC+0100 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> It was committed to DEVEL branch.
> Each time I'm committing to other branch I'm adding branch name to after
> ChangeLog in subject.

Perfect, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From goosfancito at gmail.com  Mon Mar 12 11:40:20 2007
From: goosfancito at gmail.com (GoosFancito)
Date: Mon Mar 12 11:40:28 2007
Subject: [Harbour] linux
Message-ID: <000801c764bc$bffbd4d0$0301a8c0@pc>

Gente,

    Que distribucion de linux debo utilizar para harbour?

Gracias
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070312/257226a6/attachment.html
From goosfancito at gmail.com  Mon Mar 12 14:09:21 2007
From: goosfancito at gmail.com (GoosFancito)
Date: Mon Mar 12 14:09:28 2007
Subject: [Harbour] Compilar los source del harbour
Message-ID: <000a01c764d1$90aabec0$0301a8c0@pc>

Baje del CVS los source del harbour.
Donde existe doc para poder leer como crear 
el compilador del harbour a partir de los sources bajados.

De donde?
Gracias.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070312/b6c88321/attachment.html
From sscc at mweb.co.za  Tue Mar 13 03:16:55 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Mar 13 03:17:07 2007
Subject: [Harbour] ChangeLog BETA2 2007-03-12 15:20 UTC+0100 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20070312143322.GB25007@localhost.localdomain>
References: <20070312143322.GB25007@localhost.localdomain>
Message-ID: <45F64FE7.2000301@mweb.co.za>

Przemyslaw Czerpak wrote:

> We haven't started binaries release process for BETA2 yet so I hope
> that re tagging will not be a problem.
> Now I'd like to ask about starting BETA2 release process.
> Phil? Alex?

I hardly feel qualified to comment, but sure let's go ahead. I will try 
and contribute MSVC6 and MSVC8 builds.

Regards
Akex

From dmacias at mail.udg.mx  Tue Mar 13 05:33:38 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Mar 13 05:33:41 2007
Subject: [Harbour] Re: Build errors
In-Reply-To: <20070311131925.6273D21A43C@antivirus2.noc.udg.mx>
References: <20070311131925.6273D21A43C@antivirus2.noc.udg.mx>
Message-ID: <45F66FF2.5010508@mail.udg.mx>


>> in source/main/Makefile
>> change:
>>
>> LIBS=\
>>     pp       \
>>     common   \
>>     compiler \
>>
>> to:
>>
>> LIBS=\
>>     compiler \
>>     pp       \
>>     common   \
>>
>> and check if it helps. As I can see GCC/LD rules in OS2 make files
>> do not use library grouping.
>>
>>
>>   
>
> Yes, with that changes it work fine
>
> Thanks Przemek

Przemek:

Are you going to update source/main/Makefile in CVS for this change ?

Gracias,
David Macias


From druzus at priv.onet.pl  Tue Mar 13 07:38:27 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Mar 13 07:39:03 2007
Subject: [Harbour] Re: Build errors
In-Reply-To: <45F66FF2.5010508@mail.udg.mx>
References: <20070311131925.6273D21A43C@antivirus2.noc.udg.mx>
	<45F66FF2.5010508@mail.udg.mx>
Message-ID: <20070313113827.GA2844@localhost.localdomain>

On Tue, 13 Mar 2007, David Arturo Macias Corona wrote:
> Are you going to update source/main/Makefile in CVS for this change ?

,-------------------------------------------------------------------------
| 2007-03-11 11:00 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
|   * harbour/source/main/Makefile
|     * Changed order of linked libraries for linkers with linear library
|       symbols scanning
`-------------------------------------------------------------------------

best regards,
Przemek
From druzus at priv.onet.pl  Tue Mar 13 14:40:43 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Mar 13 14:41:24 2007
Subject: [Harbour] ChangeLog 2007-03-13 19:40 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070313184043.GA25810@localhost.localdomain>

2007-03-13 19:40 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
  * harbour/include/hbapiitm.h
  * harbour/source/vm/garbage.c
  * harbour/source/vm/extend.c
  * harbour/source/vm/itemapi.c
    + added hb_gcFunc(), hb_parptrGC(), hb_itemGetPtrGC()
      hb_parptrGC() and hb_itemGetPtrGC() uses GC cleanup function address
      to validate if pointer item points to expected memory block type

  * harbour/source/common/hbhash.c
  * harbour/source/compiler/hbident.c
    * formatting and minor modifications

  * harbour/source/pp/pplib.c
  * harbour/source/pp/pplib2.c
    * use hb_parptrGC() to be sure that given pointer item points
      to PP structure

  + harbour/include/hbregex.h
  + harbour/source/rtl/hbregex.c
  * harbour/source/rtl/Makefile
  * harbour/common.mak
    + added support for regular expressions. Now it's enabled by default
      only in *nixes (POSIX regex) and BCC 5.5 (PCRE regex). Setting
      HB_PCRE_REGEX macro enables Perl-Compatible Regular Expressions
      and HB_POSIX_REGEX - POSIX regular expressions. In xHarbour regex
      support is enabled for all builds because PCRE source code is stored
      in CVS. If you will want we can make the same.
    + the following C functions are available:
      hb_regexCompile(), hb_regexGet(), hb_regexFree(), hb_regexMatch()
    + the following PGR functions are available:
      HB_REGEXCOMP(), HB_ISREGEX(), HB_ATX(), HB_REGEX(), HB_REGEXMATCH(),
      HB_REGEXSPLIT(), HB_REGEXATX(), HB_REGEXALL()
      They are working in similar way to the ones in xHarbour with the
      exception to some bug fixes and form of compiled regular expression.
      In Harbour it's pointer item for which HB_ISREGEX() returns TRUE when
      in xHarbour it's binary string.

  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
    * enabled code to seek in index using regular expressions
      (DBOI_SKIPREGEX[BACK])

best regards,
Przemek
From dbtopas at dbtopas.lt  Tue Mar 13 15:20:00 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Mar 13 15:19:59 2007
Subject: [Harbour] ChangeLog 2007-03-13 19:40 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070313184043.GA25810@localhost.localdomain>
References: <20070313184043.GA25810@localhost.localdomain>
Message-ID: <45F6F960.4030601@dbtopas.lt>

>     + added support for regular expressions. Now it's enabled by default
>       only in *nixes (POSIX regex) and BCC 5.5 (PCRE regex).

Is it ok? So, .prg file will be not portable and fuctionality 
(POSIX/PCRE) will depend on platform?


Best regards,
Mindaugas
From druzus at priv.onet.pl  Tue Mar 13 17:39:58 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Mar 13 17:40:34 2007
Subject: [Harbour] ChangeLog 2007-03-13 19:40 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <45F6F960.4030601@dbtopas.lt>
References: <20070313184043.GA25810@localhost.localdomain>
	<45F6F960.4030601@dbtopas.lt>
Message-ID: <20070313213958.GA26427@localhost.localdomain>

On Tue, 13 Mar 2007, Mindaugas Kavaliauskas wrote:
> >    + added support for regular expressions. Now it's enabled by default
> >      only in *nixes (POSIX regex) and BCC 5.5 (PCRE regex).
> Is it ok? So, .prg file will be not portable and fuctionality 
> (POSIX/PCRE) will depend on platform?

For me it's perfect because I'm working only with *nixes and using
native platform regex library is much better because I'm sure that
regex syntax in my programs will be the same as in any other programs
install in the same system.
Of course I understand that Windows user may not like it so I expect
they will want to resolve this problem, f.e. they will install some
POSIX compatible regex library and rebuild Harbour with C_USR=-DHB_POSIX_REGEX
or decide to add PCRE to Harbour CVS like in xHarbour. Your choice,
your vote, your decision ;-).

best regards,
Przemek
From druzus at priv.onet.pl  Tue Mar 13 18:35:58 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Mar 13 18:36:33 2007
Subject: [Harbour] ChangeLog 2007-03-13 23:35 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070313223558.GA8119@localhost.localdomain>

2007-03-13 23:35 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/pplib.c
    ! fixed std rules initialization - now it should also use GC pointer
      item or __PP_STDRULES will ignore it

best regards,
Przemek
From sscc at mweb.co.za  Wed Mar 14 02:59:48 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Mar 14 02:59:57 2007
Subject: [Harbour] ChangeLog 2007-03-13 19:40 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070313184043.GA25810@localhost.localdomain>
References: <20070313184043.GA25810@localhost.localdomain>
Message-ID: <45F79D64.2030801@mweb.co.za>

Przemyslaw Czerpak wrote:
> 2007-03-13 19:40 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/common.mak
>     + added support for regular expressions. Now it's enabled by default
>       only in *nixes (POSIX regex) and BCC 5.5 (PCRE regex). Setting
>       HB_PCRE_REGEX macro enables Perl-Compatible Regular Expressions
>       and HB_POSIX_REGEX - POSIX regular expressions. In xHarbour regex
>       support is enabled for all builds because PCRE source code is stored
>       in CVS. If you will want we can make the same.

It seems a good idea to include it, of course we may fall behind on 
updates, but I am sure it is quite stable. My vote is to include it in CVS.

Regards
Alex Strickland

From druzus at priv.onet.pl  Wed Mar 14 09:47:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar 14 09:48:27 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070314134752.GA24849@localhost.localdomain>

2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapiitm.h
  * harbour/source/vm/eval.c
    + added C function hb_execFromArray()

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/hbinet.c
    + added xHarbour compatible INET*() functions - code borrowed
      from xHarbour with some minor modifications and fixes

  * harbour/include/hbextern.ch
    + added regex functions
    + added INET*() functions when compiled with HB_COMPAT_XHB

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Mar 14 09:57:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Mar 14 09:57:54 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070314134752.GA24849@localhost.localdomain>
References: <20070314134752.GA24849@localhost.localdomain>
Message-ID: <97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>

Hi Przemek,

I'd propose to append an HB_ prefix to these functions and use them
as "native" Harbour function. Above that the xHarbour compatible
function names can also stay guarded with HB_COMPAT_XHB.

What do you think?

Brgds,
Viktor

On 2007.03.14., at 14:47, Przemyslaw Czerpak wrote:

> 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbapiitm.h
>   * harbour/source/vm/eval.c
>     + added C function hb_execFromArray()
>
>   * harbour/common.mak
>   * harbour/source/rtl/Makefile
>   + harbour/source/rtl/hbinet.c
>     + added xHarbour compatible INET*() functions - code borrowed
>       from xHarbour with some minor modifications and fixes
>
>   * harbour/include/hbextern.ch
>     + added regex functions
>     + added INET*() functions when compiled with HB_COMPAT_XHB
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Wed Mar 14 10:31:56 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Mar 14 10:32:21 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
Message-ID: <9257026e0703140731y279aab6cm8c409a0191ccae8@mail.gmail.com>

On 3/14/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> Hi Przemek,
>
> I'd propose to append an HB_ prefix to these functions and use them
> as "native" Harbour function. Above that the xHarbour compatible
> function names can also stay guarded with HB_COMPAT_XHB.

May I ask why?

INET functions didn't existed in Clipper so there is no name conflict
and if I understand correctly the use of HB_COMPAT_XHB these functions
will not "exist" in the standard builds.

regards,
Lorenzo Fiorini
From harbour.01 at syenar.hu  Wed Mar 14 10:36:05 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Mar 14 10:36:10 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0703140731y279aab6cm8c409a0191ccae8@mail.gmail.com>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
	<9257026e0703140731y279aab6cm8c409a0191ccae8@mail.gmail.com>
Message-ID: <5503F4B2-DDB5-4BD7-9271-27AE968EFE80@syenar.hu>

Hi Lorenzo,

For at least two reasons:
1) Harbour has a rule that every non-CA-Clipper function (aka extension)
     needs to have an HB_ prefix. This is how we keep the namespace  
clean.
2) Several Harbour users might choose to not enable HB_COMPAT_XHB,
     yet they would like to use these functions.

(also notice that for anyone who enabled HB_COMPAT_XHB, this change
won't make any noticable difference.)

Brgds,
Viktor

On 2007.03.14., at 15:31, Lorenzo Fiorini wrote:

> On 3/14/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>> Hi Przemek,
>>
>> I'd propose to append an HB_ prefix to these functions and use them
>> as "native" Harbour function. Above that the xHarbour compatible
>> function names can also stay guarded with HB_COMPAT_XHB.
>
> May I ask why?
>
> INET functions didn't existed in Clipper so there is no name conflict
> and if I understand correctly the use of HB_COMPAT_XHB these functions
> will not "exist" in the standard builds.
>
> regards,
> Lorenzo Fiorini
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Wed Mar 14 10:49:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar 14 10:50:29 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
Message-ID: <20070314144953.GA13348@localhost.localdomain>

On Wed, 14 Mar 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> I'd propose to append an HB_ prefix to these functions and use them
> as "native" Harbour function. Above that the xHarbour compatible
> function names can also stay guarded with HB_COMPAT_XHB.
> What do you think?

I though about it but I do not like some things in these function
set and I wanted to create some new set of inet functions which will
be safe to use with signals, allow to write not forking single thread
servers, etc. I do not have time for it now so I added this code for
xHarbour compatibility.
We can make these functions "native" Harbour ones but I cannot promise
that I'll be able to keep the interface in the future when I'll begin
to work on inet connections and extended handles, f.e. it will be possible
to make:

    h := fopen( "tcp:127.0.0.1:8080", FR_READWRITE )
    fwrite( h, "Hello!" )
    fclose( h )

and I'd like to make new Harbour native inet interface compatible with
handles created by fopen() as above.

But if you accept some modifications in documented API functions in the
future then we can add HB_* prefix and define these functions as documented
INET API and add wrappers without HB_ prefix when HB_COMPAT_XHB macro is set.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Mar 14 11:04:49 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Mar 14 11:05:10 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070314144953.GA13348@localhost.localdomain>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
	<20070314144953.GA13348@localhost.localdomain>
Message-ID: <813B788B-D4F3-443A-904A-373A02DBDD4F@syenar.hu>

> I though about it but I do not like some things in these function
> set and I wanted to create some new set of inet functions which will
> be safe to use with signals, allow to write not forking single thread
> servers, etc. I do not have time for it now so I added this code for
> xHarbour compatibility.
> We can make these functions "native" Harbour ones but I cannot promise
> that I'll be able to keep the interface in the future when I'll begin
> to work on inet connections and extended handles, f.e. it will be  
> possible
> to make:
>
>     h := fopen( "tcp:127.0.0.1:8080", FR_READWRITE )
>     fwrite( h, "Hello!" )
>     fclose( h )
>
> and I'd like to make new Harbour native inet interface compatible with
> handles created by fopen() as above.

This looks quite good indeed.

> But if you accept some modifications in documented API functions in  
> the
> future then we can add HB_* prefix and define these functions as  
> documented
> INET API and add wrappers without HB_ prefix when HB_COMPAT_XHB  
> macro is set.

I accept anything which makes these functions better, but
to be honest I'm not such a fan of importing feature sets in the whole
from xhb, since we have somewhat different rules and view of
development.

If you plan to add enhanced INET support later, it's also an option  
to add
this xhb functionality to CONTRIB and start to develop the native API  
later.

As an alternative, we might create a new directory inside the source
tree for compatibiliy libraries. This way it would be easy to choose
(link or not link) them at app build time, and the would be well  
separated
from the core code, too.

I tend to like this last version best.

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Mar 14 12:43:39 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Mar 14 12:43:52 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070314134752.GA24849@localhost.localdomain><97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
	<20070314144953.GA13348@localhost.localdomain>
Message-ID: <025c01c76657$ec585bb0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 14 marzo 2007 15.49
Oggetto: Re: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


>    h := fopen( "tcp:127.0.0.1:8080", FR_READWRITE )
>    fwrite( h, "Hello!" )
>    fclose( h )

Wonderful!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From antonioharbour at gmail.com  Wed Mar 14 17:51:21 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Mar 14 17:51:33 2007
Subject: [Harbour] FoxPro end
In-Reply-To: <025c01c76657$ec585bb0$0100a8c0@emag>
Message-ID: <45f86e5d.1a89c4d9.42f6.7ed1@mx.google.com>

http://www.eweek.com:80/article2/0,1895,2103695,00.asp?kc=EWEWEMNL031407EP35
E

> 
Microsoft will release core portions of the FoxPro software to its CodePlex
community development site 
> 

That sounds quite interesting: Harbour may benefit from it.

regards,

Antonio

From irv at patondata.com  Wed Mar 14 18:51:44 2007
From: irv at patondata.com (Irv Paton)
Date: Wed Mar 14 17:54:33 2007
Subject: [Harbour] Re: Need a little help finding my way around.
Message-ID: <000c01c7668b$57224720$0401a8c0@AMD750>

I have a pretty large clipper 5.2 app that  is the core of my one person
business. I have been looking at Harbour for years with the idea of
converting to Windows based program. Windows will probably be obsolete by
the time I'm done, but I'm quite determined to get going now. I do a lot of
linux/perl and some C/C++, and know a little of the Win-API. I have looked a
HwGUI and could go that way, but I would like to get a handle on GTWVT (and
maybe GTWVW). I tried to compile GTWVW with Harbour source, and can see
there are major differences between the GT systems in Harbour and xHarbour.
So, I'm falling back to Harbour's GTWVT and seeing if I can figure that out.
I can see that there is a lot of exciting improvements going on with Harbour
at the development level, but the complete lack of user docs or examples, at
least in this area, are surprising. Does anyone have an example of GTWVT in
a prg, or any user docs? Or, is GTWVT meant to provide Harbour versions of
all the same level calls as are in the Win-API, and should I just try to
program it as if I'm doing a Win-API app under VC (which I'm not good at,
but could do in a pinch). Does anyone feel that more docs are needed, and is
there anything I could do to help in that area? Any comments or suggestions
will be appreciated.

Irv Paton



From druzus at priv.onet.pl  Wed Mar 14 19:35:42 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar 14 19:36:17 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <813B788B-D4F3-443A-904A-373A02DBDD4F@syenar.hu>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
	<20070314144953.GA13348@localhost.localdomain>
	<813B788B-D4F3-443A-904A-373A02DBDD4F@syenar.hu>
Message-ID: <20070314233542.GA15370@localhost.localdomain>

On Wed, 14 Mar 2007, Szak?ts Viktor wrote:
> >But if you accept some modifications in documented API functions in  
> >the
> >future then we can add HB_* prefix and define these functions as  
> >documented
> >INET API and add wrappers without HB_ prefix when HB_COMPAT_XHB  
> >macro is set.
> I accept anything which makes these functions better, but
> to be honest I'm not such a fan of importing feature sets in the whole
> from xhb, since we have somewhat different rules and view of
> development.
> If you plan to add enhanced INET support later, it's also an option  
> to add
> this xhb functionality to CONTRIB and start to develop the native API  
> later.

But I do not know when I'll do that. I was working on extended
file handles for CLIP and my own FlagShip library. I have working
Harbour code too but it's not sth what I can commit - too much
dependences to some of my other code. It's possible that I'll
clean my code in a month but it's also possible I'll do not
touch it for years. Because recent commit allows to adopt most
of xHarbour TIP library (without some code which uses hashes),
xHarbour INET API is already documented and used and it was quite
easy and fast job I decided to make it.

> As an alternative, we might create a new directory inside the source
> tree for compatibiliy libraries. This way it would be easy to choose
> (link or not link) them at app build time, and the would be well  
> separated from the core code, too.
> I tend to like this last version best.

Me, too. Not everything can be separated such cleanly (f.e. compiler/VM
extensions) but such things yes. I thought about sth like that in the
past.
Other opinions?

best regards,
Przemek
From jarabal at ya.com  Wed Mar 14 22:59:15 2007
From: jarabal at ya.com (Javier)
Date: Wed Mar 14 22:59:58 2007
Subject: [Harbour] 2 + 2 = 5 Float carry out problem
Message-ID: <45F8B683.5030008@ya.com>

Procedure Main()
    Local Res, Num := 12.06 - 10.40 - 1.66

   Res := 12.06 - 10.40 - 1.66
   ? Res, Num, Res = 0.00, Num = 0.00
   ? 'What?        0.00          0.00   .F.    .F.'
   ? 'Carry out?', Round(Res,15) = 0, Round(Num,15) = 0
   ? 'Why?', Round(Res,16) = 0, Round(Num,16) = 0, 'is FALSE'
return
The problem is that is very common compare one numeric variable with zero.
BR
Xavi

From philb at philb.us  Wed Mar 14 23:28:42 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Mar 14 23:31:37 2007
Subject: [Harbour] FoxPro end
In-Reply-To: <45f86e5d.1a89c4d9.42f6.7ed1@mx.google.com>
References: <45f86e5d.1a89c4d9.42f6.7ed1@mx.google.com>
Message-ID: <200703142328.42370.philb@philb.us>

On Wednesday 14 March 2007 17:51, Antonio Linares wrote:
> http://www.eweek.com:80/article2/0,1895,2103695,00.asp?kc=EWEWEMNL031407EP3
>5 E
>
>
> Microsoft will release core portions of the FoxPro software to its CodePlex
> community development site
>
>
> That sounds quite interesting: Harbour may benefit from it.

Be careful when you go swimming with sharks. I'd sure want to see the license 
and understand it before I went looking at the code.

-- 
Ballmer is basically saying: We know there's a problem but we're not going to 
tell you what it is because we want to ambush you in the future. 
http://blogs.zdnet.com/hardware/?p=154
From jarabal at ya.com  Thu Mar 15 00:38:39 2007
From: jarabal at ya.com (Javier)
Date: Thu Mar 15 00:39:16 2007
Subject: [Harbour] Float carry out problem. Easier.
In-Reply-To: <45F8B683.5030008@ya.com>
References: <45F8B683.5030008@ya.com>
Message-ID: <45F8CDCF.40602@ya.com>

Procedure Main()
   Local Res
  
   Res := 3.05
   Res -= 1.55    // Problem Res != 1.5
   Res -= 1.50
   //---------
   //     0.00
  
   ? 'Res =', Res, Res = 0
   ? 'What? Res =    0.00 .F.'
   ? 'Carry out?', Round(Res,15) = 0
   ? 'Why?', Round(Res,16) = 0, 'is FALSE'
return
BR
Xavi
From druzus at priv.onet.pl  Thu Mar 15 03:44:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar 15 03:44:36 2007
Subject: [Harbour] 2 + 2 = 5 Float carry out problem
In-Reply-To: <45F8B683.5030008@ya.com>
References: <45F8B683.5030008@ya.com>
Message-ID: <20070315074401.GA32212@localhost.localdomain>

On Thu, 15 Mar 2007, Javier wrote:
> Procedure Main()
>    Local Res, Num := 12.06 - 10.40 - 1.66
>   Res := 12.06 - 10.40 - 1.66
>   ? Res, Num, Res = 0.00, Num = 0.00
>   ? 'What?        0.00          0.00   .F.    .F.'
>   ? 'Carry out?', Round(Res,15) = 0, Round(Num,15) = 0
>   ? 'Why?', Round(Res,16) = 0, Round(Num,16) = 0, 'is FALSE'
> return
> The problem is that is very common compare one numeric variable with zero.

This is expected behavior and it's programmer's job to resolve floating
point arithmetic problems. It has nothing to compare with 0 - the code
above presents only one special case. You will find many publications
about it which explains reasons, how to reduce differences in math
operations, how to calculate maximum difference and check if it's
acceptable in given algorithm/situation, etc.

best regards,
Przemek
From i at kevincarmody.com  Thu Mar 15 07:20:42 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Thu Mar 15 07:19:53 2007
Subject: [Harbour] 2 + 2 = 5 Float carry out problem
In-Reply-To: <45F8B683.5030008@ya.com>
References: <45F8B683.5030008@ya.com>
Message-ID: <45F92C0A.5090407@kevincarmody.com>

Javier,

This is called roundoff error.  It is due to the fact that binary numbers can 
represent only powers of 2 and sums of powers of 2 exactly.  All of the numbers 
in your example are outside of this category.  They can be represented only 
approximately, and when you do arithmetic with them, it is only approximate.

As Przemek points out, this problem is very well known and has been well known 
since the earliest days of computing.  Look for "roundoff error" or "roundoff 
problem" to find ways of dealing with it.

Kevin

Javier wrote:
> Procedure Main()
>    Local Res, Num := 12.06 - 10.40 - 1.66
> 
>   Res := 12.06 - 10.40 - 1.66
>   ? Res, Num, Res = 0.00, Num = 0.00
>   ? 'What?        0.00          0.00   .F.    .F.'
>   ? 'Carry out?', Round(Res,15) = 0, Round(Num,15) = 0
>   ? 'Why?', Round(Res,16) = 0, Round(Num,16) = 0, 'is FALSE'
> return
> The problem is that is very common compare one numeric variable with zero.
> BR
> Xavi
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
From i at kevincarmody.com  Thu Mar 15 07:42:13 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Thu Mar 15 07:41:24 2007
Subject: [Harbour] Re: Need a little help finding my way around.
In-Reply-To: <000c01c7668b$57224720$0401a8c0@AMD750>
References: <000c01c7668b$57224720$0401a8c0@AMD750>
Message-ID: <45F93115.6090005@kevincarmody.com>

Irv,

I also recently came into Harbour after many years in Clipper.  I found that, in 
general, Harbour installation and documentation is weak and thus not very novice 
friendly.  But usually you can get answers to your questions in the help forums. 
  And you can't beat the price.

When I started out in Harbour, I floundered around for weeks trying this and 
that.  I was also considering helping out with Harbour documentation, until I 
found that what I had planned to do had pretty much already been done in Harbour 
MiniGui Extended.  See http://www.hmgextended.com.  Click on the Help section 
and download MiniGUI.chm.  This help file has a nice introduction, installation 
instructions, and the best documentation I have seen so far in the 
Harbour/xHarbour world.

This package allows you to use either Harbour or xHarbour or both, and it 
includes GUI classes and commands which are fairly well documented.  You can 
start porting your Clipper apps right away, either console mode or GUI, 
depending on your ambitions.

Kevin


Irv Paton wrote:
> I have a pretty large clipper 5.2 app that  is the core of my one person
> business. I have been looking at Harbour for years with the idea of
> converting to Windows based program. Windows will probably be obsolete by
> the time I'm done, but I'm quite determined to get going now. I do a lot of
> linux/perl and some C/C++, and know a little of the Win-API. I have looked a
> HwGUI and could go that way, but I would like to get a handle on GTWVT (and
> maybe GTWVW). I tried to compile GTWVW with Harbour source, and can see
> there are major differences between the GT systems in Harbour and xHarbour.
> So, I'm falling back to Harbour's GTWVT and seeing if I can figure that out.
> I can see that there is a lot of exciting improvements going on with Harbour
> at the development level, but the complete lack of user docs or examples, at
> least in this area, are surprising. Does anyone have an example of GTWVT in
> a prg, or any user docs? Or, is GTWVT meant to provide Harbour versions of
> all the same level calls as are in the Win-API, and should I just try to
> program it as if I'm doing a Win-API app under VC (which I'm not good at,
> but could do in a pinch). Does anyone feel that more docs are needed, and is
> there anything I could do to help in that area? Any comments or suggestions
> will be appreciated.
> 
> Irv Paton
> 
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
From irv at patondata.com  Thu Mar 15 12:49:10 2007
From: irv at patondata.com (Irv Paton)
Date: Thu Mar 15 11:50:28 2007
Subject: [Harbour] Re: Docs on Harbour GUI's.
Message-ID: <002b01c76721$db811500$0401a8c0@AMD750>

Kevin,

Thanks for your help. MiniGui really did a nice job on their docs. I'm now
investigating three free packages, HwGUI, Harb MiniGui, and gtwww, and good
commercial options too. MiniGui is by far the most extensively documented,
but HwGUI is pretty impressive with its syntax and OOP and resonalble docs.
What I like about gtwww is that you can convert a Clipper app to Win-API GUI
with just a few function calls (although that's just a start, from which you
have to do lots of polishing). However, I don't know if there is a chance to
get gtwww going on basic Harbour - I'm studying that now. I can find no
specs on the functions in GTWVT (which is the forerunner of gtwvw), other
than gtapi.txt and the source. It seems like GTWVT is written to some
industry standard, sort of similar to the Win-API, and, if so, any info on
that would be helpful.

Irv

From: Kevin Carmody <i@kevincarmody.com>
> Subject: Re: [Harbour] Re: Need a little help finding my way around.
> To: Irv Paton <irv@patondata.com>, "Harbour Project Main Developer
> I also recently came into Harbour after many years in Clipper.  I found
that, in
> general, Harbour installation and documentation is weak and thus not very
novice
> friendly.  But usually you can get answers to your questions in the help
forums.
>   And you can't beat the price.
>
> When I started out in Harbour, I floundered around for weeks trying this
and
> that.  I was also considering helping out with Harbour documentation,
until I
> found that what I had planned to do had pretty much already been done in
Harbour
> MiniGui Extended.  See http://www.hmgextended.com.  Click on the Help
section
> and download MiniGUI.chm.  This help file has a nice introduction,
installation
> instructions, and the best documentation I have seen so far in the
> Harbour/xHarbour world.
>
> This package allows you to use either Harbour or xHarbour or both, and it
> includes GUI classes and commands which are fairly well documented.  You
can
> start porting your Clipper apps right away, either console mode or GUI,
> depending on your ambitions.
>
> Kevin



From rob at steinmetznet.com  Fri Mar 16 02:14:17 2007
From: rob at steinmetznet.com (Robert Steinmetz)
Date: Fri Mar 16 02:14:55 2007
Subject: [Harbour] FoxPro end
In-Reply-To: <200703142328.42370.philb@philb.us>
References: <45f86e5d.1a89c4d9.42f6.7ed1@mx.google.com>
	<200703142328.42370.philb@philb.us>
Message-ID: <45FA35B9.1010604@steinmetznet.com>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070316/f487cbd7/attachment.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rob.vcf
Type: text/x-vcard
Size: 313 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070316/f487cbd7/rob.vcf
From druzus at priv.onet.pl  Fri Mar 16 08:25:56 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 16 08:26:33 2007
Subject: [Harbour] HASH ITEMs
Message-ID: <20070316122556.GA12039@localhost.localdomain>

Hi All,

What is the final conclusion about HASH ITEMs syntax?

I'll commit xHarbour compatible version with indexes like for arrays []
( f.e.: hValue[ "StrKey" ] ) and => as bound operator in explicit hash
creation ( f.e.: { "StrKey" => 123.456, date() => .t. } ) but it will be
covered by HB_COMPAT_XHB macro.

Do we plan to make Harbour native HASHes syntax differ?
Ryszard?

best regards,
Przemek
From dbtopas at dbtopas.lt  Fri Mar 16 09:28:18 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Mar 16 09:28:39 2007
Subject: [Harbour] ChangeLog 2007-03-13 19:40 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070313213958.GA26427@localhost.localdomain>
References: <20070313184043.GA25810@localhost.localdomain>	<45F6F960.4030601@dbtopas.lt>
	<20070313213958.GA26427@localhost.localdomain>
Message-ID: <45FA9B72.90403@dbtopas.lt>

>>>   + added support for regular expressions. Now it's enabled by default
>>>     only in *nixes (POSIX regex) and BCC 5.5 (PCRE regex).
>>
>>Is it ok? So, .prg file will be not portable and fuctionality 
>>(POSIX/PCRE) will depend on platform?
> 
> For me it's perfect because I'm working only with *nixes and using
> native platform regex library is much better because I'm sure that
> regex syntax in my programs will be the same as in any other programs
> install in the same system.
> Of course I understand that Windows user may not like it so I expect
> they will want to resolve this problem, f.e. they will install some
> POSIX compatible regex library and rebuild Harbour with C_USR=-DHB_POSIX_REGEX
> or decide to add PCRE to Harbour CVS like in xHarbour. Your choice,
> your vote, your decision ;-).


Hello,


I'm not using regex very often and each time a have to make a look at 
syntax before I write some regular expression. So, it's not important 
for me which one to use POSIX or PCRE. But I think regex syntax should 
be the same for all platforms. Otherwise, the code will be:

#ifdef __WIN__
   val := HB_REGEX*("..some..pcre..")
#else
   val := HB_REGEX*("..some..posix..re..")
#endif


Best regards,
Mindaugas
From lorenzo.fiorini at gmail.com  Fri Mar 16 11:01:54 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 16 11:01:58 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <20070316122556.GA12039@localhost.localdomain>
References: <20070316122556.GA12039@localhost.localdomain>
Message-ID: <9257026e0703160801g479d8ee3q9c1b8f4394315e1@mail.gmail.com>

On 3/16/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> I'll commit xHarbour compatible version with indexes like for arrays []
> ( f.e.: hValue[ "StrKey" ] ) and => as bound operator in explicit hash
> creation ( f.e.: { "StrKey" => 123.456, date() => .t. } ) but it will be
> covered by HB_COMPAT_XHB macro.

I've got a lot of cgi/ajax code built with xHarbour/inet/tip/hashes
and clearly my biased :)
vote is to keep xHarbour syntax as much as possible.

regards,
Lorenzo Fiorini
From dbtopas at dbtopas.lt  Fri Mar 16 11:08:29 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Mar 16 11:09:11 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
Message-ID: <45FAB2ED.6050503@dbtopas.lt>

>   + harbour/source/rtl/hbinet.c
>     + added xHarbour compatible INET*() functions - code borrowed
>       from xHarbour with some minor modifications and fixes

> I'd propose to append an HB_ prefix to these functions and use them
> as "native" Harbour function. Above that the xHarbour compatible
> function names can also stay guarded with HB_COMPAT_XHB.

> For at least two reasons:
> 1) Harbour has a rule that every non-CA-Clipper function (aka extension)
>     needs to have an HB_ prefix. This is how we keep the namespace  clean.
> 2) Several Harbour users might choose to not enable HB_COMPAT_XHB,
>     yet they would like to use these functions. 


Hello,


perhaps this my opinion is not at correct time, because I see you had 
discussion about function prefix some time ago. So, let it be just my 
point of view.

It is natural for me if core functions of the language does not has 
prefix at all. These functions should have well selected name to avoid 
posibility of user functions with the same name.

Additional libraries (or groups of functions which has independent 
functionality) has prefix to indicate library/functionality.

So, I expect that HB_ prefix means that function functionality is 
related to harbour itself.


For example, HB_COMPILER() returns compile used to build harbour itself.
But, function VERSION() has too general name. I think it should be named 
HB_VERSION(), because VERSION() could also be version of OS, etc.
The function OS() returns much more than OS type, and name OS_VERSION() 
would indicate functionality of more precise.

I think we need HB_ prefix for some hypotetical functions like:
    HB_MEMUSAGE()
    HB_COLLECTGARBAGE()
    HB_EVALSTACKSIZE()
    HB_DYNSYMCOUNT()
It will indicate that functions are related to Harbour (HVM) itself.

But I don't think we need HB_ for all Harbour (i.e. not Clipper) 
functions. Clipper does not have prefix CLIP_. We have functions LEFT(), 
RIGHT(), STR(), but not CLIP_LEFT(), CLIP_RIGHT(), CLIP_STR(). Pascal, C 
and other languages does not have prefix for its core functions.

Let's look at the name, for example:
   HB_MD5()
(here is sample from xHarbour, but I'll use it to indicate my idea).

Do we have some special HB algorithm for MD5? I think MD5 is always MD5, 
so we do not need HB_ prefix in this case.
If names MD5, SHA1, DES, 3DES, GOST, BLOWFISH are too short (or too 
general, or invalid) we can add CRYPT_: CRYPT_MD5(), CRYPT_SHA1(), 
CRYPT_DES(), CRYPT_3DES(), CRYPT_GOST(), CRYPT_BLOWFISH(). This will 
help user to understand, that functions are related to cryptography.
Adding HB_ prefix will not make names more clear. HB_GOST() sounds like 
some soviet standard for Harbour, but not for encryption.

Of cause the namespace saving with HB_ prefix will be usefull for 
functions like MD5(), if HB_MD5() will lack some functionality. And that 
is the case. I'm happy HB_MD5() has this prefix, because it let's me use 
my own MD5() function which has more extended functionality. My MD5() 
could be used for stream data:
   cHash := MD5( cDataBlock1 )
   cHash := MD5( cDataBlock2, cHash )
   cHash := MD5( cDataBlock3, cHash )
instead of
   cHash := HB_MD5( cDataBlock1 + cDataBlock2 + cDataBlock3 )

So, I suggest to leave names unprefixed (or prefixed with prefix 
indicating funtionality) for functions with well-selected functionality, 
but leave HB_ prefix for "sandbox" functions.


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Fri Mar 16 11:22:36 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Mar 16 11:23:17 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <20070316122556.GA12039@localhost.localdomain>
References: <20070316122556.GA12039@localhost.localdomain>
Message-ID: <45FAB63C.6050807@dbtopas.lt>

Przemyslaw Czerpak wrote:
> What is the final conclusion about HASH ITEMs syntax?
> 
> I'll commit xHarbour compatible version with indexes like for arrays []
> ( f.e.: hValue[ "StrKey" ] ) and => as bound operator in explicit hash
> creation ( f.e.: { "StrKey" => 123.456, date() => .t. } ) but it will be
> covered by HB_COMPAT_XHB macro.
> 
> Do we plan to make Harbour native HASHes syntax differ?
> Ryszard?

Hi,


I've implemented GC for hashes in xHarbour and I know some bugs with 
partitioned hashes, which I was unable to fix. So, hash module needs 
some rewrite. I strongly support xHarbour syntax for hashes and even 
without HB_COMPAT_XHB. This syntax is natural and compatible with other 
languages like PHP. I see on the newsgroup, that the only thing making 
problem for the users is aHash:Value syntax. Users expect aHash:Value 
and aHash:VALUE to be different if hash is case sensitive. So, we can 
not support aHash:Value syntax, but I guess some "object oriented" 
people like it a lot.


Best regards,
Mindaugas
From druzus at priv.onet.pl  Fri Mar 16 12:13:26 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 16 12:14:04 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <45FAB63C.6050807@dbtopas.lt>
References: <20070316122556.GA12039@localhost.localdomain>
	<45FAB63C.6050807@dbtopas.lt>
Message-ID: <20070316161326.GA12445@localhost.localdomain>

On Fri, 16 Mar 2007, Mindaugas Kavaliauskas wrote:
> I've implemented GC for hashes in xHarbour and I know some bugs with 
> partitioned hashes, which I was unable to fix. So, hash module needs 
> some rewrite.

I created new Hash implementation from scratch which internally is not
compatible with the xHarbour one.

> I strongly support xHarbour syntax for hashes and even 
> without HB_COMPAT_XHB. This syntax is natural and compatible with other 
> languages like PHP. I see on the newsgroup, that the only thing making 
> problem for the users is aHash:Value syntax. Users expect aHash:Value 
> and aHash:VALUE to be different if hash is case sensitive. So, we can 
> not support aHash:Value syntax, but I guess some "object oriented" 
> people like it a lot.

Using message interface to access hash items is not good idea for me.
In practice it blocks the possibility to send messages directly to hash.
I will not implement it by default though probably it will be supported
by error exception. For sure I will want to leave messages to control
hash item, f.e.:

    hValue := Hash()

    hValue:gotop()
    while ! hValue:eof()
        ? hValue:key(), hValue:value()
        hValue:skip()
    enddo

so I do not want to document that using messages to access hash values
is supported syntax because such method causes name conflicts.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Mar 16 12:30:07 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 16 12:30:13 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <45FAB2ED.6050503@dbtopas.lt>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
	<45FAB2ED.6050503@dbtopas.lt>
Message-ID: <9257026e0703160930w57d9a0cs92711ba1ec9f7903@mail.gmail.com>

On 3/16/07, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt> wrote:

> perhaps this my opinion is not at correct time, because I see you had
> discussion about function prefix some time ago. So, let it be just my
> point of view.
> ...
> So, I suggest to leave names unprefixed (or prefixed with prefix
> indicating funtionality) for functions with well-selected functionality,
> but leave HB_ prefix for "sandbox" functions.

+1

regards,
Lorenzo Fiorini
From lorenzo.fiorini at gmail.com  Fri Mar 16 12:41:42 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 16 12:41:48 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <20070316161326.GA12445@localhost.localdomain>
References: <20070316122556.GA12039@localhost.localdomain>
	<45FAB63C.6050807@dbtopas.lt>
	<20070316161326.GA12445@localhost.localdomain>
Message-ID: <9257026e0703160941v5c1da936oe28aff6f350fa475@mail.gmail.com>

On 3/16/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> so I do not want to document that using messages to access hash values
> is supported syntax because such method causes name conflicts.

I also never liked hash:value syntax, the only "safe" way I see to
access values is hash[ ckey ] like in:

      if cModOrd == 'ASC'
         oCgi:hSession[ cFunc + '_cModOrd' ] = "DESC"
      else
         oCgi:hSession[ cFunc + '_cModOrd' ] = "ASC"
      endif

regards,
Lorenzo Fiorini
From lorenzo.fiorini at gmail.com  Fri Mar 16 12:46:52 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 16 12:47:06 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <20070316161326.GA12445@localhost.localdomain>
References: <20070316122556.GA12039@localhost.localdomain>
	<45FAB63C.6050807@dbtopas.lt>
	<20070316161326.GA12445@localhost.localdomain>
Message-ID: <9257026e0703160946h395e53bcu7c86d8e3aea459a1@mail.gmail.com>

On 3/16/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> I created new Hash implementation from scratch which internally is not
> compatible with the xHarbour one.

Do you plan to implement functions like hHasKey, hGet, hGetPos, ....
in short the ones used in xharbour/source/tip/cgi.prg?

regards,
Lorenzo Fiorini
From lorenzo.fiorini at gmail.com  Fri Mar 16 14:02:24 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 16 14:02:27 2007
Subject: [Harbour] Is getlogin_r secure enough in Linux?
Message-ID: <9257026e0703161102m3caa2489mcbe5fc70a70417a1@mail.gmail.com>

I've just modified source/rtl/net.c to return username with NETNAME(1)
( as I did in xHarbour/Win32 ) using getlogin_r.

Goggling I've found "Avoid getlogin() for security-related purposes. ..."

Is it still true?

Is there a better way to get username in a linux env?

regards,
Lorenzo Fiorini
From maurilio.longo at libero.it  Fri Mar 16 14:11:51 2007
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Mar 16 14:12:28 2007
Subject: [Harbour] HASH ITEMs
References: <20070316122556.GA12039@localhost.localdomain>
Message-ID: <45FADDE7.A9857E08@libero.it>

Please, 

this is to everyone porting 'back' code from xHarbour to Harbour, please don't
change syntax, functions/objects name and so on, otherwise both projects will
diverge even more making a big mess of all.

just my 2c.

thanks.

Maurilio.

Przemyslaw Czerpak ha scritto:
> 
> Hi All,
> 
> What is the final conclusion about HASH ITEMs syntax?
> 
> I'll commit xHarbour compatible version with indexes like for arrays []
> ( f.e.: hValue[ "StrKey" ] ) and => as bound operator in explicit hash
> creation ( f.e.: { "StrKey" => 123.456, date() => .t. } ) but it will be
> covered by HB_COMPAT_XHB macro.
> 
> Do we plan to make Harbour native HASHes syntax differ?
> Ryszard?
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From druzus at priv.onet.pl  Fri Mar 16 14:24:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 16 14:25:16 2007
Subject: [Harbour] Is getlogin_r secure enough in Linux?
In-Reply-To: <9257026e0703161102m3caa2489mcbe5fc70a70417a1@mail.gmail.com>
References: <9257026e0703161102m3caa2489mcbe5fc70a70417a1@mail.gmail.com>
Message-ID: <20070316182441.GA13859@localhost.localdomain>

On Fri, 16 Mar 2007, Lorenzo Fiorini wrote:
> I've just modified source/rtl/net.c to return username with NETNAME(1)
> ( as I did in xHarbour/Win32 ) using getlogin_r.
> Goggling I've found "Avoid getlogin() for security-related purposes. ..."
> Is it still true?

Yes.

> Is there a better way to get username in a linux env?

It will depend what you need. In some cases getenv( "LOGNAME" ) is
the best choice and in some other getpwuid( geteuid() ) or
getpwuid( getuid() )

best regards,
Przemek
From druzus at priv.onet.pl  Fri Mar 16 14:32:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 16 14:33:19 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <9257026e0703160946h395e53bcu7c86d8e3aea459a1@mail.gmail.com>
References: <20070316122556.GA12039@localhost.localdomain>
	<45FAB63C.6050807@dbtopas.lt>
	<20070316161326.GA12445@localhost.localdomain>
	<9257026e0703160946h395e53bcu7c86d8e3aea459a1@mail.gmail.com>
Message-ID: <20070316183244.GB13859@localhost.localdomain>

On Fri, 16 Mar 2007, Lorenzo Fiorini wrote:
> >I created new Hash implementation from scratch which internally is not
> >compatible with the xHarbour one.
> Do you plan to implement functions like hHasKey, hGet, hGetPos, ....
> in short the ones used in xharbour/source/tip/cgi.prg?

I haven't finished them yet. I'd like to keep as much as possible
from existing APIF functions but some things hardly depend on current
xHarbour implementation which is not the best one and in some more
efficient structures (f.e. real binary trees I used) it's necessary
to emulate some of them with some cost of overall performance. When
the code will be ready I'll make some tests before I'll commit final
version to decide what is acceptable.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Mar 16 16:24:04 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 16 16:24:11 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <20070316183244.GB13859@localhost.localdomain>
References: <20070316122556.GA12039@localhost.localdomain>
	<45FAB63C.6050807@dbtopas.lt>
	<20070316161326.GA12445@localhost.localdomain>
	<9257026e0703160946h395e53bcu7c86d8e3aea459a1@mail.gmail.com>
	<20070316183244.GB13859@localhost.localdomain>
Message-ID: <9257026e0703161324l11c487fw6ab321f60dfc5160@mail.gmail.com>

On 3/16/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> When the code will be ready I'll make some tests before I'll commit final
> version to decide what is acceptable.

Many thanks, I'm sure you'll find the best solution.

regards,
Lorenzo Fiorini
From lorenzo.fiorini at gmail.com  Fri Mar 16 16:36:25 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 16 16:36:29 2007
Subject: [Harbour] Is getlogin_r secure enough in Linux?
In-Reply-To: <20070316182441.GA13859@localhost.localdomain>
References: <9257026e0703161102m3caa2489mcbe5fc70a70417a1@mail.gmail.com>
	<20070316182441.GA13859@localhost.localdomain>
Message-ID: <9257026e0703161336s28b00720s8118447b44cab0d5@mail.gmail.com>

On 3/16/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
> It will depend what you need. In some cases getenv( "LOGNAME" ) is
> the best choice and in some other getpwuid( geteuid() ) or
> getpwuid( getuid() )

I'd like to implement an autologin feature that means trust the Linux username.
envvars seems too easy to change so I'm looking for a more secure method.

Any suggestion?

regards,
Lorenzo Fiorini
From irv at patondata.com  Sat Mar 17 20:22:14 2007
From: irv at patondata.com (Irv Paton)
Date: Sat Mar 17 19:23:30 2007
Subject: [Harbour] bcc32 reading environment.
Message-ID: <002801c768f3$7aa31c00$0401a8c0@AMD750>

Can anyone help? Is there a way with bcc32 on WinXP to SET VARIABLE from
command line, and then have it read at compile time with #if
defined(VARIABLE)? I can't find anything that says it can. However, the
tracing.txt doc in the Harbour docs suggests this approach, but doesn't
mention bcc32. I was trying to set HB_TRACE_UTILS (for harbour.c to better
understand it) from the command line as tracing.txt suggest, but couldn't
get bcc32 to see it. Of course, I can do what I need by changing the source,
but this is a good thing to know for learning Harbour.

Thanks,
Irv Paton




From antonioharbour at gmail.com  Sat Mar 17 19:48:51 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Mar 17 19:49:00 2007
Subject: [Harbour] bcc32 reading environment.
In-Reply-To: <002801c768f3$7aa31c00$0401a8c0@AMD750>
References: <002801c768f3$7aa31c00$0401a8c0@AMD750>
Message-ID: <3FD2F5D3-9E2E-4213-BD60-8D62931A6B61@gmail.com>

Irv,

bcc32 ... -DLABEL will define LABEL accesible from your C code:

#ifdef LABEL
    ...
#endif

regards,

Antonio
From harbour.01 at syenar.hu  Sun Mar 18 10:25:56 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Mar 18 10:26:29 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <45FAB2ED.6050503@dbtopas.lt>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
	<45FAB2ED.6050503@dbtopas.lt>
Message-ID: <54E4EE39-EB51-438B-92F6-AC0E4749129E@syenar.hu>

Hi,

Existing Clipper code (the majority of Harbour compiled code),
can conflict with any such non prefixed function names.

Say I have a function MD5() in my own app (or in a library I use),
which does something differently or using different parameter list. If
harbour doesn't prefix, they will collide.

That's why we have this rule for every public symbol, including
functions, header files, constants, and C/Clipper level function
names. Harbour complies with this rule pretty extensively.

Brgds,
Viktor

On 2007.03.16., at 16:08, Mindaugas Kavaliauskas wrote:

>>   + harbour/source/rtl/hbinet.c
>>     + added xHarbour compatible INET*() functions - code borrowed
>>       from xHarbour with some minor modifications and fixes
>
>> I'd propose to append an HB_ prefix to these functions and use them
>> as "native" Harbour function. Above that the xHarbour compatible
>> function names can also stay guarded with HB_COMPAT_XHB.
>
>> For at least two reasons:
>> 1) Harbour has a rule that every non-CA-Clipper function (aka  
>> extension)
>>     needs to have an HB_ prefix. This is how we keep the  
>> namespace  clean.
>> 2) Several Harbour users might choose to not enable HB_COMPAT_XHB,
>>     yet they would like to use these functions.
>
>
> Hello,
>
>
> perhaps this my opinion is not at correct time, because I see you  
> had discussion about function prefix some time ago. So, let it be  
> just my point of view.
>
> It is natural for me if core functions of the language does not has  
> prefix at all. These functions should have well selected name to  
> avoid posibility of user functions with the same name.
>
> Additional libraries (or groups of functions which has independent  
> functionality) has prefix to indicate library/functionality.
>
> So, I expect that HB_ prefix means that function functionality is  
> related to harbour itself.
>
>
> For example, HB_COMPILER() returns compile used to build harbour  
> itself.
> But, function VERSION() has too general name. I think it should be  
> named HB_VERSION(), because VERSION() could also be version of OS,  
> etc.
> The function OS() returns much more than OS type, and name  
> OS_VERSION() would indicate functionality of more precise.
>
> I think we need HB_ prefix for some hypotetical functions like:
>    HB_MEMUSAGE()
>    HB_COLLECTGARBAGE()
>    HB_EVALSTACKSIZE()
>    HB_DYNSYMCOUNT()
> It will indicate that functions are related to Harbour (HVM) itself.
>
> But I don't think we need HB_ for all Harbour (i.e. not Clipper)  
> functions. Clipper does not have prefix CLIP_. We have functions  
> LEFT(), RIGHT(), STR(), but not CLIP_LEFT(), CLIP_RIGHT(), CLIP_STR 
> (). Pascal, C and other languages does not have prefix for its core  
> functions.
>
> Let's look at the name, for example:
>   HB_MD5()
> (here is sample from xHarbour, but I'll use it to indicate my idea).
>
> Do we have some special HB algorithm for MD5? I think MD5 is always  
> MD5, so we do not need HB_ prefix in this case.
> If names MD5, SHA1, DES, 3DES, GOST, BLOWFISH are too short (or too  
> general, or invalid) we can add CRYPT_: CRYPT_MD5(), CRYPT_SHA1(),  
> CRYPT_DES(), CRYPT_3DES(), CRYPT_GOST(), CRYPT_BLOWFISH(). This  
> will help user to understand, that functions are related to  
> cryptography.
> Adding HB_ prefix will not make names more clear. HB_GOST() sounds  
> like some soviet standard for Harbour, but not for encryption.
>
> Of cause the namespace saving with HB_ prefix will be usefull for  
> functions like MD5(), if HB_MD5() will lack some functionality. And  
> that is the case. I'm happy HB_MD5() has this prefix, because it  
> let's me use my own MD5() function which has more extended  
> functionality. My MD5() could be used for stream data:
>   cHash := MD5( cDataBlock1 )
>   cHash := MD5( cDataBlock2, cHash )
>   cHash := MD5( cDataBlock3, cHash )
> instead of
>   cHash := HB_MD5( cDataBlock1 + cDataBlock2 + cDataBlock3 )
>
> So, I suggest to leave names unprefixed (or prefixed with prefix  
> indicating funtionality) for functions with well-selected  
> functionality, but leave HB_ prefix for "sandbox" functions.
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From nsystem at terra.com.br  Tue Mar 20 18:30:56 2007
From: nsystem at terra.com.br (Nsystem)
Date: Tue Mar 20 18:31:13 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070314134752.GA24849@localhost.localdomain><97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu><45FAB2ED.6050503@dbtopas.lt>
	<54E4EE39-EB51-438B-92F6-AC0E4749129E@syenar.hu>
Message-ID: <004c01c76b3f$6e44c1e0$24c79fc8@nlf000>

HI, i try down the cvs , but dont work... any parameters is changed??
thanks

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Sunday, March 18, 2007 11:25 AM
Subject: Re: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> Hi,
>
> Existing Clipper code (the majority of Harbour compiled code),
> can conflict with any such non prefixed function names.
>
> Say I have a function MD5() in my own app (or in a library I use),
> which does something differently or using different parameter list. If
> harbour doesn't prefix, they will collide.
>
> That's why we have this rule for every public symbol, including
> functions, header files, constants, and C/Clipper level function
> names. Harbour complies with this rule pretty extensively.
>
> Brgds,
> Viktor
>
> On 2007.03.16., at 16:08, Mindaugas Kavaliauskas wrote:
>
>>>   + harbour/source/rtl/hbinet.c
>>>     + added xHarbour compatible INET*() functions - code borrowed
>>>       from xHarbour with some minor modifications and fixes
>>
>>> I'd propose to append an HB_ prefix to these functions and use them
>>> as "native" Harbour function. Above that the xHarbour compatible
>>> function names can also stay guarded with HB_COMPAT_XHB.
>>
>>> For at least two reasons:
>>> 1) Harbour has a rule that every non-CA-Clipper function (aka 
>>> extension)
>>>     needs to have an HB_ prefix. This is how we keep the  namespace 
>>> clean.
>>> 2) Several Harbour users might choose to not enable HB_COMPAT_XHB,
>>>     yet they would like to use these functions.
>>
>>
>> Hello,
>>
>>
>> perhaps this my opinion is not at correct time, because I see you  had 
>> discussion about function prefix some time ago. So, let it be  just my 
>> point of view.
>>
>> It is natural for me if core functions of the language does not has 
>> prefix at all. These functions should have well selected name to  avoid 
>> posibility of user functions with the same name.
>>
>> Additional libraries (or groups of functions which has independent 
>> functionality) has prefix to indicate library/functionality.
>>
>> So, I expect that HB_ prefix means that function functionality is 
>> related to harbour itself.
>>
>>
>> For example, HB_COMPILER() returns compile used to build harbour  itself.
>> But, function VERSION() has too general name. I think it should be  named 
>> HB_VERSION(), because VERSION() could also be version of OS,  etc.
>> The function OS() returns much more than OS type, and name  OS_VERSION() 
>> would indicate functionality of more precise.
>>
>> I think we need HB_ prefix for some hypotetical functions like:
>>    HB_MEMUSAGE()
>>    HB_COLLECTGARBAGE()
>>    HB_EVALSTACKSIZE()
>>    HB_DYNSYMCOUNT()
>> It will indicate that functions are related to Harbour (HVM) itself.
>>
>> But I don't think we need HB_ for all Harbour (i.e. not Clipper) 
>> functions. Clipper does not have prefix CLIP_. We have functions  LEFT(), 
>> RIGHT(), STR(), but not CLIP_LEFT(), CLIP_RIGHT(), CLIP_STR (). Pascal, C 
>> and other languages does not have prefix for its core  functions.
>>
>> Let's look at the name, for example:
>>   HB_MD5()
>> (here is sample from xHarbour, but I'll use it to indicate my idea).
>>
>> Do we have some special HB algorithm for MD5? I think MD5 is always  MD5, 
>> so we do not need HB_ prefix in this case.
>> If names MD5, SHA1, DES, 3DES, GOST, BLOWFISH are too short (or too 
>> general, or invalid) we can add CRYPT_: CRYPT_MD5(), CRYPT_SHA1(), 
>> CRYPT_DES(), CRYPT_3DES(), CRYPT_GOST(), CRYPT_BLOWFISH(). This  will 
>> help user to understand, that functions are related to  cryptography.
>> Adding HB_ prefix will not make names more clear. HB_GOST() sounds  like 
>> some soviet standard for Harbour, but not for encryption.
>>
>> Of cause the namespace saving with HB_ prefix will be usefull for 
>> functions like MD5(), if HB_MD5() will lack some functionality. And  that 
>> is the case. I'm happy HB_MD5() has this prefix, because it  let's me use 
>> my own MD5() function which has more extended  functionality. My MD5() 
>> could be used for stream data:
>>   cHash := MD5( cDataBlock1 )
>>   cHash := MD5( cDataBlock2, cHash )
>>   cHash := MD5( cDataBlock3, cHash )
>> instead of
>>   cHash := HB_MD5( cDataBlock1 + cDataBlock2 + cDataBlock3 )
>>
>> So, I suggest to leave names unprefixed (or prefixed with prefix 
>> indicating funtionality) for functions with well-selected  functionality, 
>> but leave HB_ prefix for "sandbox" functions.
>>
>>
>> Best regards,
>> Mindaugas
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From randy at palmasdev.com  Wed Mar 21 09:20:52 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Mar 21 09:24:17 2007
Subject: [Harbour] 2 + 2 = 5 Float carry out problem
In-Reply-To: <45F8B683.5030008@ya.com>
Message-ID: <5.2.0.9.0.20070321091524.00cf77f0@pop3.pathcom.com>

Hi Xavi,

While many people on this list will disagree with this solution, I solved 
this in the Harbour source code itself so that I do not need to deal with 
this in the PRG source. I modified all the numeric comparison functions in 
HVM.C (eg. hb_vmEqual) to round all numeric comparisons to 8 decimals 
before performing the numeric evaluation - This resolved all floating point 
issues in my app. Now, you must understand that, an approach like this is 
not suitable for all applications since certain apps (eg. scientific in 
nature) require much more precision than this. However, in the case of a 
business app, I have found that 8 decimal places is more than enough then 
performing numeric comparisons. You also need to ensure than any 3rd party 
products that use Harbour PRG source will not be adversely affected by this 
loss of precision.

If you like, I can send you my HVM.C to try - I have a version for Build 43 
and the current Beta release as well.

Regards,
Randy.

At 03:59 AM 3/15/2007 +0100, you wrote:
>Procedure Main()
>    Local Res, Num := 12.06 - 10.40 - 1.66
>
>   Res := 12.06 - 10.40 - 1.66
>   ? Res, Num, Res = 0.00, Num = 0.00
>   ? 'What?        0.00          0.00   .F.    .F.'
>   ? 'Carry out?', Round(Res,15) = 0, Round(Num,15) = 0
>   ? 'Why?', Round(Res,16) = 0, Round(Num,16) = 0, 'is FALSE'
>return
>The problem is that is very common compare one numeric variable with zero.
>BR
>Xavi
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Wed Mar 21 13:29:54 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Mar 21 13:30:30 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <54E4EE39-EB51-438B-92F6-AC0E4749129E@syenar.hu>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
	<45FAB2ED.6050503@dbtopas.lt>
	<54E4EE39-EB51-438B-92F6-AC0E4749129E@syenar.hu>
Message-ID: <20070321172954.GA23362@localhost.localdomain>

On Sun, 18 Mar 2007, Szak?ts Viktor wrote:
> Hi,
> Existing Clipper code (the majority of Harbour compiled code),
> can conflict with any such non prefixed function names.
> Say I have a function MD5() in my own app (or in a library I use),
> which does something differently or using different parameter list. If
> harbour doesn't prefix, they will collide.
> That's why we have this rule for every public symbol, including
> functions, header files, constants, and C/Clipper level function
> names. Harbour complies with this rule pretty extensively.

In most cases I have to agree with you - I've seen too much users
messages about name conflicts with some xHarbour functions in the
last years.
Anyhow there are some exceptions when I'd like to not use HB_ prefix.
1. function already have some prefix also used in Clipper in the same
   group of function, f.e. ord*(), db*(), etc. using multiple prefixes
   seems to be strange for me.
2. it's a new function but has corresponding function in Clipper with
   very similar functionality and using similar name convention can help
   to use new functions and/or understand what it does. F.e. I still think
   that GTSYS() is better name then HB_GTSYS() because GTSYS() makes exactly
   the same job for GT subsystem as RDDSYS() for RDD. We already have
   RDDSYS() just like Clipper and IMHO GTSYS() will be more familiar name.

I can commit working hashes code even today. It's not the final version with
binary trees I'm working on but fully functional which cover all xHarbour
hashes functionality with some extensions and fixes.
xHarbour has set of functions to manage hashes which begins with H prefix
and corresponds with Clipper's A*() functions used for arrays. F.e.:
HASH(), HCOPY(), HCLONE(), HSCAN(), HEVAL(), etc. IMHO such names are
reasonable but I will have to use HB_HASH(), HB_HCOPY(), HB_HCLONE(),
HB_HSCAN(), HB_HEVAL() and add alternative versions without HB_ prefix
when HB_COMPAT_XHB macro is set. Are you sure that also here we should
not make an exception?

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Mar 21 13:52:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Mar 21 13:52:52 2007
Subject: [Harbour] ChangeLog 2007-03-14 14:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070321172954.GA23362@localhost.localdomain>
References: <20070314134752.GA24849@localhost.localdomain>
	<97CDB0BC-34F0-42A6-9033-7F30A9D30D7B@syenar.hu>
	<45FAB2ED.6050503@dbtopas.lt>
	<54E4EE39-EB51-438B-92F6-AC0E4749129E@syenar.hu>
	<20070321172954.GA23362@localhost.localdomain>
Message-ID: <CB26C055-6494-4546-B420-65D6081E4189@syenar.hu>

Hi Przemek,

> In most cases I have to agree with you - I've seen too much users
> messages about name conflicts with some xHarbour functions in the
> last years.
> Anyhow there are some exceptions when I'd like to not use HB_ prefix.
> 1. function already have some prefix also used in Clipper in the same
>    group of function, f.e. ord*(), db*(), etc. using multiple prefixes
>    seems to be strange for me.

We can always discuss convenience, but overall I'd think that  
consistency
is higher priority than everything else. I don't know though which  
are these
functions. (and that's the first disadvantage of not using HB_ prefix).

> 2. it's a new function but has corresponding function in Clipper with
>    very similar functionality and using similar name convention can  
> help
>    to use new functions and/or understand what it does. F.e. I  
> still think
>    that GTSYS() is better name then HB_GTSYS() because GTSYS()  
> makes exactly
>    the same job for GT subsystem as RDDSYS() for RDD. We already have
>    RDDSYS() just like Clipper and IMHO GTSYS() will be more  
> familiar name.

Looks better indeed, but some can easily have a function named GTSYS().

> I can commit working hashes code even today. It's not the final  
> version with
> binary trees I'm working on but fully functional which cover all  
> xHarbour
> hashes functionality with some extensions and fixes.
> xHarbour has set of functions to manage hashes which begins with H  
> prefix
> and corresponds with Clipper's A*() functions used for arrays. F.e.:
> HASH(), HCOPY(), HCLONE(), HSCAN(), HEVAL(), etc. IMHO such names are
> reasonable but I will have to use HB_HASH(), HB_HCOPY(), HB_HCLONE(),
> HB_HSCAN(), HB_HEVAL() and add alternative versions without HB_ prefix
> when HB_COMPAT_XHB macro is set. Are you sure that also here we should
> not make an exception?

Yes. (I think it was a mistake in xhb to use these function named in  
the first
place.)

In Harbour we need to maintain xhb compatibility through the dedicated
macro for those who need it. (also notice that it would be way more
convenient to add HB_ prefixed versions to xhb to maintain compatibility
with Harbour, as the namespace would be less polluted overall. This is
not a decision I could influence though.). Same effect could be achieved
with a simple wrapper (or header) which needs to be added when someone
wants to compile a hb program using xhb. And we're back to the "separate
compatibility libraries for other xbase products" issue.

Brgds,
Viktor

From druzus at priv.onet.pl  Thu Mar 22 08:27:58 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar 22 08:28:45 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070322122758.GA707@localhost.localdomain>

2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
    * updated for new files - please check

  * harbour/harbour.spec
    * added compiler library

  * harbour/bin/pack_src.sh
  * harbour/bin/hb-func.sh
    * updated for new files and libraries

  * harbour/config/w32/mingw32.cf
  * harbour/config/w32/watcom.cf
  * harbour/config/w32/xcc.cf
    * added winsock libraries

  * harbour/include/hbapicdp.h
  * harbour/source/rtl/cdpapi.c
    + added hb_cdpicmp() - not case sensitive version of hb_cdpcmp()

  * harbour/include/hbapiitm.h
  * harbour/source/vm/itemapi.c
    + hb_itemStrICmp(), hb_itemCopyFromRef(), hb_itemMoveFromRef()

  * harbour/include/hbapi.h
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbexpra.c
  * harbour/include/hbexprb.c
  * harbour/include/hbexprop.h
  * harbour/include/hbmacro.h
  * harbour/include/hbpcode.h
  * harbour/include/hbvmpub.h
  * harbour/include/hbxvm.h
  * harbour/source/common/expropt1.c
  * harbour/source/compiler/complex.c
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/gencc.c
  * harbour/source/compiler/gencli.c
  * harbour/source/compiler/genhrb.c
  * harbour/source/compiler/genobj32.c
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.yyh
  * harbour/source/compiler/hbdead.c
  * harbour/source/compiler/hbfix.c
  * harbour/source/compiler/hblbl.c
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/hbopt.c
  * harbour/source/compiler/hbpcode.c
  * harbour/source/compiler/hbstripl.c
  * harbour/source/macro/macro.y
  * harbour/source/macro/macro.yyc
  * harbour/source/macro/macro.yyh
  * harbour/source/macro/macrolex.c
  * harbour/source/vm/Makefile
  * harbour/source/vm/arrays.c
  * harbour/source/vm/asort.c
  * harbour/source/vm/classes.c
  * harbour/source/vm/eval.c
  * harbour/source/vm/garbage.c
  * harbour/source/vm/hvm.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/macro.c
  + harbour/source/vm/hashes.c
  + harbour/source/vm/hashfunc.c
    + added hash items, f.e.:
         local h1 := {=>}, h2 := { "a"=>1.234, "b"=>2.345 }
         ? h2[ "a" ], h2[ "b ]
    + added support for DYNAMIC function declaration - it allow to define
      functions which are lately bound at runtime, f.e.:
         /*** t01.prg ***/
         dynamic func1
         proc main()
         local h:=__hrbload("t02.hrb")
         ? func1()
         return

         /*** t02.prg ***/
         func func1
         return "Hello!!!"

    % use new FUNCALL structure to hold EXTERNAL and DYNAMIC functions,
      it reduce memory usage, FUNCALL is much smaller then FUNCTION
    % use symbol scope bits when possible instead of making some linear scan
    + added new enumarator message: __ENUMKEY - it allow to access
      key value when hash item is base enumerator value, f.e.:
         proc main()
         local v, h:={"a"=>1.000,"b"=>2.000,"c"=>3.000}
         heval( h, { |k,v,i| qout( k, v, i ) } ); ?
         for each v in h
            ? v, "=>", v:__enumKey(), v:__enumValue(), v:__enumIndex(), ;
                       valtype(v:__enumBase())
            v += 0.123
         next
         ? ;heval( h, { |k,v,i| qout( k, v, i ) } )
         return
    + added C level hb_hash*() functions
    + added support for full HASH item cloning and updated array cloning
      to also clone nested hashes - please note that xHarbour does not do
      that, in xHarbour ACLONE() clones _ONLY_ nested arrays and HCLONE()
      _DOES_NOT_ clone _ANY_ nested items.

  * harbour/include/hbextern.ch
    + added hash functions HB_H*()
    * changed INET*() functions to HB_INET*()
    + added hash functions H*() and socket functions INET*() when
      HB_COMPAT_XHB is set

  * harbour/include/hbtypes.h
    + added missing HB_EXTERN_BEGIN / HB_EXTERN_END

  * harbour/include/hbpp.h
  * harbour/source/pp/ppcore.c
    ! added protection against automatic word concatenation in some cases
    ! fixed preprocessing expressions when match marker matches ';' token

  * harbour/source/rtl/Makefile
  + harbour/source/rtl/itemseri.c
    + added functions for item serialization: HB_SERIALIZE() and
      HB_DESERIALIZE() - these function are not binary compatible
      with xHarbour functions with the same names but make very
      similar job with the exception to serialization of codeblock
      and object variables - Harbour does not allow to serialize
      codeblocks and serialize objects as arrays.
      In most cases these functions can replace the xHarbour ones
    + added HB_DESERIALBEGIN() and HB_DESERIALIZE() functions covered
      by HB_COMPAT_XHB macro - this functions are only for compatibility
      with existing xHarbour code, In Harbour HB_DESERIALBEGIN() is
      dummy function which returns first parameter and HB_DESERIALNEXT()
      is a simple wrapper to HB_DESERIALIZE() so it's not necessary to
      use them.

  * harbour/source/rtl/hbinet.c
    * changed INET*() functions to HB_INET*() and enable them for default
      build
    + added INET*() functions wrappers covered by HB_COMPAT_XHB macro

  * harbour/source/rtl/hbrandom.c
    + added HB_RANDOMINT() - xHarbour compatible

  * harbour/source/rtl/len.c
    + added support for HASHes

  * harbour/source/rtl/valtype.c
    + added support for HASHes
    + added set of HB_IS*() functions - they are a little bit faster then
      calling VALTYPE( v ) == <cVal>
    - removed HB_ISBYREF() - this function cannot longer work, it was using
      a Clipper incompatible anomalies in passing variables by reference I
      fixed so it has to stop to work. If it will be realy necessary to
      implement HB_ISBYREF() function then please inform me - it will have
      to be done at compiler level or with some much deeper HVM stack
      checking.

  * harbour/source/vm/extend.c
    ! fixed hb_extIsArray() and hb_extIsObject() to work well with
      parameters passed by reference.
      Please note that now hb_extIsArray() return TRUE only for pure arrays
      not object values.

  * harbour/contrib/Makefile
  + harbour/contrib/tip/Changelog
  + harbour/contrib/tip/Makefile
  + harbour/contrib/tip/atokens.c
  + harbour/contrib/tip/base64x.c
  + harbour/contrib/tip/cgi.prg
  + harbour/contrib/tip/client.prg
  + harbour/contrib/tip/credent.prg
  + harbour/contrib/tip/cstr.prg
  + harbour/contrib/tip/encb64.prg
  + harbour/contrib/tip/encmthd.c
  + harbour/contrib/tip/encoder.prg
  + harbour/contrib/tip/encqp.prg
  + harbour/contrib/tip/encurl.prg
  + harbour/contrib/tip/ftpcln.prg
  + harbour/contrib/tip/hbhex2n.c
  + harbour/contrib/tip/httpcln.prg
  + harbour/contrib/tip/mail.prg
  + harbour/contrib/tip/popcln.prg
  + harbour/contrib/tip/smtpcln.prg
  + harbour/contrib/tip/tip.ch
  + harbour/contrib/tip/url.prg
  + harbour/contrib/tip/utils.c
    + added TIP library - code borrowed from xHarbour



   Please test - a lot of above code is not well tested, also some peaces
   were written over year ago for different things (f.e. serialization for
   NETRDD) and now I collected them and committed.
   The TIP library was not tested at all. It can be compiled but I cannot
   say if it works - I hope that people familiar with it can make necessary
   test and fixes.
   It's also not the final version of low level HASH item code. I'm working
   on more efficient structure which uses binary tries but I cannot say when
   I'll finish it (maybe in this weekend or maybe in next year) so I committed
   working version now even if I'm not happy with overall performance (BTW
   not worser then in xHarbour)

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Mar 22 09:27:17 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar 22 09:27:31 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070322122758.GA707@localhost.localdomain>
References: <20070322122758.GA707@localhost.localdomain>
Message-ID: <9257026e0703220627l61456798k40d90993c0c3f749@mail.gmail.com>

On 3/22/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
> 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/common.mak
> ....
>    It's also not the final version of low level HASH item code. I'm working
>    on more efficient structure which uses binary tries but I cannot say when
>    I'll finish it (maybe in this weekend or maybe in next year) so I committed
>    working version now even if I'm not happy with overall performance (BTW
>    not worser then in xHarbour)

Many, many, many thanks.

I'll do my best to test TIP and hash code.

regards,
Lorenzo Fiorini
From harbour.01 at syenar.hu  Thu Mar 22 11:27:50 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Mar 22 11:28:00 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070322122758.GA707@localhost.localdomain>
References: <20070322122758.GA707@localhost.localdomain>
Message-ID: <DFB84130-CD73-4852-923B-188D455F94F7@syenar.hu>

Thanks for this massive update Przemek.

Brgds,
Viktor

On 2007.03.22., at 13:27, Przemyslaw Czerpak wrote:

> 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/common.mak
>     * updated for new files - please check
>
>   * harbour/harbour.spec
>     * added compiler library
>
>   * harbour/bin/pack_src.sh
>   * harbour/bin/hb-func.sh
>     * updated for new files and libraries
>
>   * harbour/config/w32/mingw32.cf
>   * harbour/config/w32/watcom.cf
>   * harbour/config/w32/xcc.cf
>     * added winsock libraries
>
>   * harbour/include/hbapicdp.h
>   * harbour/source/rtl/cdpapi.c
>     + added hb_cdpicmp() - not case sensitive version of hb_cdpcmp()
>
>   * harbour/include/hbapiitm.h
>   * harbour/source/vm/itemapi.c
>     + hb_itemStrICmp(), hb_itemCopyFromRef(), hb_itemMoveFromRef()
>
>   * harbour/include/hbapi.h
>   * harbour/include/hbcomp.h
>   * harbour/include/hbcompdf.h
>   * harbour/include/hbexpra.c
>   * harbour/include/hbexprb.c
>   * harbour/include/hbexprop.h
>   * harbour/include/hbmacro.h
>   * harbour/include/hbpcode.h
>   * harbour/include/hbvmpub.h
>   * harbour/include/hbxvm.h
>   * harbour/source/common/expropt1.c
>   * harbour/source/compiler/complex.c
>   * harbour/source/compiler/genc.c
>   * harbour/source/compiler/gencc.c
>   * harbour/source/compiler/gencli.c
>   * harbour/source/compiler/genhrb.c
>   * harbour/source/compiler/genobj32.c
>   * harbour/source/compiler/harbour.y
>   * harbour/source/compiler/harbour.yyc
>   * harbour/source/compiler/harbour.yyh
>   * harbour/source/compiler/hbdead.c
>   * harbour/source/compiler/hbfix.c
>   * harbour/source/compiler/hblbl.c
>   * harbour/source/compiler/hbmain.c
>   * harbour/source/compiler/hbopt.c
>   * harbour/source/compiler/hbpcode.c
>   * harbour/source/compiler/hbstripl.c
>   * harbour/source/macro/macro.y
>   * harbour/source/macro/macro.yyc
>   * harbour/source/macro/macro.yyh
>   * harbour/source/macro/macrolex.c
>   * harbour/source/vm/Makefile
>   * harbour/source/vm/arrays.c
>   * harbour/source/vm/asort.c
>   * harbour/source/vm/classes.c
>   * harbour/source/vm/eval.c
>   * harbour/source/vm/garbage.c
>   * harbour/source/vm/hvm.c
>   * harbour/source/vm/itemapi.c
>   * harbour/source/vm/macro.c
>   + harbour/source/vm/hashes.c
>   + harbour/source/vm/hashfunc.c
>     + added hash items, f.e.:
>          local h1 := {=>}, h2 := { "a"=>1.234, "b"=>2.345 }
>          ? h2[ "a" ], h2[ "b ]
>     + added support for DYNAMIC function declaration - it allow to  
> define
>       functions which are lately bound at runtime, f.e.:
>          /*** t01.prg ***/
>          dynamic func1
>          proc main()
>          local h:=__hrbload("t02.hrb")
>          ? func1()
>          return
>
>          /*** t02.prg ***/
>          func func1
>          return "Hello!!!"
>
>     % use new FUNCALL structure to hold EXTERNAL and DYNAMIC  
> functions,
>       it reduce memory usage, FUNCALL is much smaller then FUNCTION
>     % use symbol scope bits when possible instead of making some  
> linear scan
>     + added new enumarator message: __ENUMKEY - it allow to access
>       key value when hash item is base enumerator value, f.e.:
>          proc main()
>          local v, h:={"a"=>1.000,"b"=>2.000,"c"=>3.000}
>          heval( h, { |k,v,i| qout( k, v, i ) } ); ?
>          for each v in h
>             ? v, "=>", v:__enumKey(), v:__enumValue(), v:__enumIndex 
> (), ;
>                        valtype(v:__enumBase())
>             v += 0.123
>          next
>          ? ;heval( h, { |k,v,i| qout( k, v, i ) } )
>          return
>     + added C level hb_hash*() functions
>     + added support for full HASH item cloning and updated array  
> cloning
>       to also clone nested hashes - please note that xHarbour does  
> not do
>       that, in xHarbour ACLONE() clones _ONLY_ nested arrays and  
> HCLONE()
>       _DOES_NOT_ clone _ANY_ nested items.
>
>   * harbour/include/hbextern.ch
>     + added hash functions HB_H*()
>     * changed INET*() functions to HB_INET*()
>     + added hash functions H*() and socket functions INET*() when
>       HB_COMPAT_XHB is set
>
>   * harbour/include/hbtypes.h
>     + added missing HB_EXTERN_BEGIN / HB_EXTERN_END
>
>   * harbour/include/hbpp.h
>   * harbour/source/pp/ppcore.c
>     ! added protection against automatic word concatenation in some  
> cases
>     ! fixed preprocessing expressions when match marker matches ';'  
> token
>
>   * harbour/source/rtl/Makefile
>   + harbour/source/rtl/itemseri.c
>     + added functions for item serialization: HB_SERIALIZE() and
>       HB_DESERIALIZE() - these function are not binary compatible
>       with xHarbour functions with the same names but make very
>       similar job with the exception to serialization of codeblock
>       and object variables - Harbour does not allow to serialize
>       codeblocks and serialize objects as arrays.
>       In most cases these functions can replace the xHarbour ones
>     + added HB_DESERIALBEGIN() and HB_DESERIALIZE() functions covered
>       by HB_COMPAT_XHB macro - this functions are only for  
> compatibility
>       with existing xHarbour code, In Harbour HB_DESERIALBEGIN() is
>       dummy function which returns first parameter and  
> HB_DESERIALNEXT()
>       is a simple wrapper to HB_DESERIALIZE() so it's not necessary to
>       use them.
>
>   * harbour/source/rtl/hbinet.c
>     * changed INET*() functions to HB_INET*() and enable them for  
> default
>       build
>     + added INET*() functions wrappers covered by HB_COMPAT_XHB macro
>
>   * harbour/source/rtl/hbrandom.c
>     + added HB_RANDOMINT() - xHarbour compatible
>
>   * harbour/source/rtl/len.c
>     + added support for HASHes
>
>   * harbour/source/rtl/valtype.c
>     + added support for HASHes
>     + added set of HB_IS*() functions - they are a little bit  
> faster then
>       calling VALTYPE( v ) == <cVal>
>     - removed HB_ISBYREF() - this function cannot longer work, it  
> was using
>       a Clipper incompatible anomalies in passing variables by  
> reference I
>       fixed so it has to stop to work. If it will be realy  
> necessary to
>       implement HB_ISBYREF() function then please inform me - it  
> will have
>       to be done at compiler level or with some much deeper HVM stack
>       checking.
>
>   * harbour/source/vm/extend.c
>     ! fixed hb_extIsArray() and hb_extIsObject() to work well with
>       parameters passed by reference.
>       Please note that now hb_extIsArray() return TRUE only for  
> pure arrays
>       not object values.
>
>   * harbour/contrib/Makefile
>   + harbour/contrib/tip/Changelog
>   + harbour/contrib/tip/Makefile
>   + harbour/contrib/tip/atokens.c
>   + harbour/contrib/tip/base64x.c
>   + harbour/contrib/tip/cgi.prg
>   + harbour/contrib/tip/client.prg
>   + harbour/contrib/tip/credent.prg
>   + harbour/contrib/tip/cstr.prg
>   + harbour/contrib/tip/encb64.prg
>   + harbour/contrib/tip/encmthd.c
>   + harbour/contrib/tip/encoder.prg
>   + harbour/contrib/tip/encqp.prg
>   + harbour/contrib/tip/encurl.prg
>   + harbour/contrib/tip/ftpcln.prg
>   + harbour/contrib/tip/hbhex2n.c
>   + harbour/contrib/tip/httpcln.prg
>   + harbour/contrib/tip/mail.prg
>   + harbour/contrib/tip/popcln.prg
>   + harbour/contrib/tip/smtpcln.prg
>   + harbour/contrib/tip/tip.ch
>   + harbour/contrib/tip/url.prg
>   + harbour/contrib/tip/utils.c
>     + added TIP library - code borrowed from xHarbour
>
>
>
>    Please test - a lot of above code is not well tested, also some  
> peaces
>    were written over year ago for different things (f.e.  
> serialization for
>    NETRDD) and now I collected them and committed.
>    The TIP library was not tested at all. It can be compiled but I  
> cannot
>    say if it works - I hope that people familiar with it can make  
> necessary
>    test and fixes.
>    It's also not the final version of low level HASH item code. I'm  
> working
>    on more efficient structure which uses binary tries but I cannot  
> say when
>    I'll finish it (maybe in this weekend or maybe in next year) so  
> I committed
>    working version now even if I'm not happy with overall  
> performance (BTW
>    not worser then in xHarbour)
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jarabal at ya.com  Thu Mar 22 12:22:58 2007
From: jarabal at ya.com (Javier)
Date: Thu Mar 22 12:23:44 2007
Subject: [Harbour] 2 + 2 = 5 Float carry out problem
In-Reply-To: <45F8B683.5030008@ya.com>
References: <45F8B683.5030008@ya.com>
Message-ID: <4602AD62.9060803@ya.com>

Thank you Randy,
I think that people on this list doesn't have this problem... if they 
know it.
C programmer's don't have this problem, they select the type and the 
arithmetic to utilize. Is common to utilize a double integer with the 
last four digits like decimal: type currency,  range of 
?922337203685477.5807 (MS Solution).
typedef struct  tagCY
    {
    LONGLONG int64;
    }    CY;

#else
// Real definition that works with the C++ compiler.
typedef union tagCY {
    struct {        
#ifdef _MAC         
        long          Hi;
        unsigned long Lo;
#else               
        unsigned long Lo;
        long          Hi;
#endif              
    };              
    LONGLONG int64; 
} CY;               
#endif
#endif
// Size is 8.
typedef CY CURRENCY;
And operate with integer arithmetic.
Harbour programmer's don't have this possibility, only provides of one 
numeric type, harbour decides that arithmetic to utilize.
Inside Harbour has 3 numeric data types: HB_IT_INTEGER, HB_IT_LONG, 
HB_IT_DOUBLE
Also .-
2006-02-08 14:05 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
    * enable 'Y' (currency) fields - translated to HB_IT_DOUBLE
I think that it is an error because it's contrary to the currency 
objective. The better solution would be to provide of a fourth inside 
type, HB_IT_CURRENCY, and the easier it would be that Harbour 
programmer's decides in the declaration of the variable or for the field.

Best regards.
Xavi

From lorenzo.fiorini at gmail.com  Thu Mar 22 14:32:13 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar 22 14:32:49 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070322122758.GA707@localhost.localdomain>
References: <20070322122758.GA707@localhost.localdomain>
Message-ID: <9257026e0703221132u4a98bbb1g493be9d1981f582@mail.gmail.com>

On 3/22/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

>    Please test - a lot of above code is not well tested, also some peaces
>    were written over year ago for different things (f.e. serialization for
>    NETRDD) and now I collected them and committed.
>    The TIP library was not tested at all. It can be compiled but I cannot
>    say if it works - I hope that people familiar with it can make necessary
>    test and fixes.

I'm trying to build my cgi apps with this ChangeLog but I need sth
like xHarbour's
TEXT INTO ... ENDTEXT. Any idea?

Just to report other differences I've found so far:

- try catch end ( easily converted to begin sequence end )
- pcrepos miss
- xharbour's contrib/gd miss
- xharbour contrib/pgsql miss
- gtnul miss

I've tried to copy contrib/gd and contrig/pgsql from xHarbour but I get:

gdwrp.c:67:20: error: hbfast.h: No such file or directory
gdwrp.c:1657: error: 'HB_ITEM' undeclared (first use in this function)

I've also tried to build xwc apps but I miss gtnul and I've many
#ifdef __XHARBOUR__ to "investigate" in GT functions.

I'll keep on trying.

regards,
Lorenzo Fiorini
From druzus at priv.onet.pl  Thu Mar 22 15:30:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar 22 15:31:08 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0703221132u4a98bbb1g493be9d1981f582@mail.gmail.com>
References: <20070322122758.GA707@localhost.localdomain>
	<9257026e0703221132u4a98bbb1g493be9d1981f582@mail.gmail.com>
Message-ID: <20070322193033.GA28367@localhost.localdomain>

On Thu, 22 Mar 2007, Lorenzo Fiorini wrote:
> I'm trying to build my cgi apps with this ChangeLog but I need sth
> like xHarbour's
> TEXT INTO ... ENDTEXT. Any idea?

The new preprocessor allow to easy control preprocessed stream so
you can define it yourself.
In xHarbour for new PP it was defined as:
   #command TEXT INTO <lValue> => ;
      <lValue> := "" ; hb_setwith( {|_1| <lValue> += _1 } );;
      text __TextInto, hb_SetWith

so it internally uses WITH OBJECT value as temporary holder for code
block used by __textInto() function.
You can make it much easier using new PP features. See these three
different commands:

   #command TEXT1 INTO <v> => #pragma __text|<v>+=%s;<v>:=""
   #command TEXT2 INTO <v> => #pragma __cstream|<v>:=%s
   #command TEXT3 INTO <v> => #pragma __text|<v>+=%s+HB_OSNEWLINE();<v>:=""

and chose the one you think it's the best for you. Please also check
generated .ppo files to compare the final code.

> Just to report other differences I've found so far:
> - try catch end ( easily converted to begin sequence end )

exactly.

> - pcrepos miss

yes, you can use the one from xHarbour. We can also add it to CVS.
I'm still waiting for other opinions about it. So far every bodies 
agreed to add it to CVS.

> - xharbour's contrib/gd miss
> - xharbour contrib/pgsql miss

Yes but I think they can be easy ported.

> - gtnul miss

No. GTNUL is always present in Harbour and it's a part of RTL library.

> I've tried to copy contrib/gd and contrig/pgsql from xHarbour but I get:
> gdwrp.c:67:20: error: hbfast.h: No such file or directory
> gdwrp.c:1657: error: 'HB_ITEM' undeclared (first use in this function)

They are accessing item internals. Just like most of other xHarbour code
these libraries have to be cleaned to use documented API functions only.
Such modifications will also help to keep xHarbour version of these
libraries cleaner and much easier for update. Maybe their authors can
do that.

> I've also tried to build xwc apps but I miss gtnul

As I said GTNUL is always present and Harbour works only in multi GT mode.
You can use GTXWC without any additional code.

> and I've many
> #ifdef __XHARBOUR__ to "investigate" in GT functions.
> I'll keep on trying.

Maybe code below can help you a little bit.
IMHO we can add such file to CVS and update it.

best regards,
Przemek



/*** hbcompat.ch ***/

#ifdef __HARBOUR__

#ifdef __XHARBOUR__
   #include "gtinfo.ch"
   #include "gfx.ch"
#else
   #include "hbgtinfo.ch"
   #include "hbgfx.ch"
#endif


#ifdef __XHARBOUR__
   #xtranslate hb_gtSys                => gtSys
   #xtranslate hb_gtInfo([<xx,...>])   => gtInfo([<xx>])
   #xtranslate hb_gtVersion([<xx>])    => hb_gt_Version([<xx>])
#else
   #xtranslate gtSys                   => hb_gtSys
   #xtranslate gtInfo([<xx,...>])      => hb_gtInfo([<xx>])
   #xtranslate hb_gt_Version([<xx>])   => hb_gtVersion([<xx>])
   #xtranslate gtSetClipboard(<xx>)    => hb_gtInfo( GTI_CLIPBOARDDATA, <xx> )
   #xtranslate gtGetClipboard()        => hb_gtInfo( GTI_CLIPBOARDDATA )
   #xtranslate gtGetClipBoardSize()    => len( hb_gtInfo( GTI_CLIPBOARDDATA ) )
   #xtranslate gtPasteClipBoard([<n>]) => hb_gtInfo( GTI_CLIPBOARDPAST )
   #xtranslate gfxPrimitive([<xx,...>])=> hb_gfxPrimitive([<xx>])
   #xtranslate gfxText([<xx,...>])     => hb_gfxText([<xx,...>])
#endif

#endif /* __HARBOUR__ */
From lorenzo.fiorini at gmail.com  Thu Mar 22 17:03:30 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar 22 17:03:33 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070322193033.GA28367@localhost.localdomain>
References: <20070322122758.GA707@localhost.localdomain>
	<9257026e0703221132u4a98bbb1g493be9d1981f582@mail.gmail.com>
	<20070322193033.GA28367@localhost.localdomain>
Message-ID: <9257026e0703221403r4306c089h165302146e9fb0fd@mail.gmail.com>

On 3/22/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> You can make it much easier using new PP features. See these three
> different commands:
>
>    #command TEXT1 INTO <v> => #pragma __text|<v>+=%s;<v>:=""
>    #command TEXT2 INTO <v> => #pragma __cstream|<v>:=%s
>    #command TEXT3 INTO <v> => #pragma __text|<v>+=%s+HB_OSNEWLINE();<v>:=""
>
> and chose the one you think it's the best for you. Please also check
> generated .ppo files to compare the final code.

Thanks I'll try.

> yes, you can use the one from xHarbour. We can also add it to CVS.
> I'm still waiting for other opinions about it. So far every bodies
> agreed to add it to CVS.

Yes, probably it is the easier thing to do.

> No. GTNUL is always present in Harbour and it's a part of RTL library.

> They are accessing item internals. Just like most of other xHarbour code
> these libraries have to be cleaned to use documented API functions only.
> Such modifications will also help to keep xHarbour version of these
> libraries cleaner and much easier for update. Maybe their authors can
> do that.

I guess I'll have to do it myself :(

> As I said GTNUL is always present and Harbour works only in multi GT mode.
> You can use GTXWC without any additional code.

Strange gcc says it miss it. I'll recheck it tomorrow.

> Maybe code below can help you a little bit.

Yes, it'll help me a lot.

regards,
Lorenzo Fiorini
From druzus at priv.onet.pl  Thu Mar 22 17:20:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar 22 17:21:17 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0703221403r4306c089h165302146e9fb0fd@mail.gmail.com>
References: <20070322122758.GA707@localhost.localdomain>
	<9257026e0703221132u4a98bbb1g493be9d1981f582@mail.gmail.com>
	<20070322193033.GA28367@localhost.localdomain>
	<9257026e0703221403r4306c089h165302146e9fb0fd@mail.gmail.com>
Message-ID: <20070322212041.GA30179@localhost.localdomain>

On Thu, 22 Mar 2007, Lorenzo Fiorini wrote:
> >They are accessing item internals. Just like most of other xHarbour code
> >these libraries have to be cleaned to use documented API functions only.
> >Such modifications will also help to keep xHarbour version of these
> >libraries cleaner and much easier for update. Maybe their authors can
> >do that.
> I guess I'll have to do it myself :(

The modification in C code can be done quite fast - I've already made them
I can send you updated code - IMHO it's worth to update also xHarbour code
in CVS because current code will never work with automatic GC. For PGSQL it
will be probably enough so I'll commit this library but GD tries to create
class definition itself and I do not think it will work in Harbour. It's a
.prg code which has to be updated too but here I'd like leave the
modification to someone else who knows the GD library.

> >As I said GTNUL is always present and Harbour works only in multi GT mode.
> >You can use GTXWC without any additional code.
> Strange gcc says it miss it. I'll recheck it tomorrow.

I do not understand what is strange.
If you have unnecessary request for gtnul library in your make files then
remove it or create dummy library file called libgtnul.a

best regards,
Przemek
From dmacias at mail.udg.mx  Thu Mar 22 22:42:19 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Mar 22 22:41:50 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <46033E8B.2090704@mail.udg.mx>

Przemek:

These are results of current Harbour devel branch build under OS/2:
( ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak )

---------------------------------------------------------
[E:\hbbuild\harbour]make -r           1>make_gnu.log
../../../../source/rtl/os2/gcc/rtl.a(hbinet.o): Undefined symbol 
tcp_h_errno referenced from text segment
make[3]: *** [hbrun.exe] Error 1
make[2]: *** [descend] Error 2
---------------------------------------------------------

Gracias,
David Macias


From dmacias at mail.udg.mx  Thu Mar 22 22:51:03 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Mar 22 22:51:07 2007
Subject: [Harbour] Harbour under Linux Mandriva 2007
In-Reply-To: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
Message-ID: <46034097.10606@mail.udg.mx>

Years ago I build Harbour under Mandrake 9, 10 without troubles

Now I will try to build under Mandriva 2007 Free

Any one have seen troubles (to build/use Harbour) in this release ?

In first tests, hbgtmk.sh show me missing dependencies:
    bison
    flex

Mandriva 2007 does not include bison and flex

What bison/flex versions should I use ?

Gracias,
David Macias

From druzus at priv.onet.pl  Thu Mar 22 23:07:16 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar 22 23:08:14 2007
Subject: [Harbour] ChangeLog 2007-03-23 04:05 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070323030715.GA4098@localhost.localdomain>

2007-03-23 04:05 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/pack_src.sh
  + harbour/contrib/pgsql/Changelog
  + harbour/contrib/pgsql/Makefile
  + harbour/contrib/pgsql/README
  + harbour/contrib/pgsql/make_b32.bat
  + harbour/contrib/pgsql/makefile.bc
  + harbour/contrib/pgsql/pgrdd.prg
  + harbour/contrib/pgsql/postgres.c
  + harbour/contrib/pgsql/postgres.ch
  + harbour/contrib/pgsql/tpostgre.prg
  + harbour/contrib/pgsql/tstpgrdd.prg
  + harbour/contrib/pgsql/tests/Makefile
  + harbour/contrib/pgsql/tests/async.prg
  + harbour/contrib/pgsql/tests/cache.prg
  + harbour/contrib/pgsql/tests/dbf2pg.prg
  + harbour/contrib/pgsql/tests/simple.prg
  + harbour/contrib/pgsql/tests/stress.prg
  + harbour/contrib/pgsql/tests/test.prg
    + added Postgres SQL library - code borrowed from xHarbour

  * harbour/source/rtl/empty.c
    + added support for HASH items

  * harbour/source/rtl/itemseri.c
    + added SYMBOL items serialization

best regards,
Przemek
From druzus at priv.onet.pl  Thu Mar 22 23:22:16 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar 22 23:22:52 2007
Subject: [Harbour] Harbour under Linux Mandriva 2007
In-Reply-To: <46034097.10606@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<46034097.10606@mail.udg.mx>
Message-ID: <20070323032216.GB4098@localhost.localdomain>

On Thu, 22 Mar 2007, David Arturo Macias Corona wrote:
> Years ago I build Harbour under Mandrake 9, 10 without troubles
> Now I will try to build under Mandriva 2007 Free
> Any one have seen troubles (to build/use Harbour) in this release ?
> In first tests, hbgtmk.sh show me missing dependencies:
>    bison
>    flex

Bison and flex are not longer necessary to build Harbour.
I'll remove these packages from required dependences list ASAP.

> Mandriva 2007 does not include bison and flex

I do not believe it's true. Without bison or other YACC compatible
grammar parser most of included in MDV2K7 languages cannot be
created so such packages for sure exists. Maybe not included in
some basic distribution packages.

> What bison/flex versions should I use ?

FLEX is not used by Harbour at all. Bison is necessary only if you want
to make your own modifications in grammar rules and it should be at least
1.875 though due to some bugs in this version 2.1 or higher is suggested.
Just remove bison and flex from dependences list in your hbgtmk.sh and
try again. I'll update harbour.spec in few minutes.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Mar 22 23:23:39 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Mar 22 23:24:14 2007
Subject: [Harbour] ChangeLog 2007-03-23 04:25 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070323032339.GC4098@localhost.localdomain>

2007-03-23 04:25 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
  * harbour/hbgtmk.sh
    - removed bison and flex from dependences list

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Mar 23 05:22:17 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 23 05:22:24 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070322212041.GA30179@localhost.localdomain>
References: <20070322122758.GA707@localhost.localdomain>
	<9257026e0703221132u4a98bbb1g493be9d1981f582@mail.gmail.com>
	<20070322193033.GA28367@localhost.localdomain>
	<9257026e0703221403r4306c089h165302146e9fb0fd@mail.gmail.com>
	<20070322212041.GA30179@localhost.localdomain>
Message-ID: <9257026e0703230222l4347c464ld61e87bb9e281c21@mail.gmail.com>

On 3/22/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> but GD tries to create
> class definition itself and I do not think it will work in Harbour. It's a
> .prg code which has to be updated too but here I'd like leave the
> modification to someone else who knows the GD library.

I'll try to fix GD.

> I do not understand what is strange.
> If you have unnecessary request for gtnul library in your make files then
> remove it or create dummy library file called libgtnul.a

Ok I got it, Harbour defines gtnul in RTL so there is no libgtnul.a.

regards,
Lorenzo Fiorini
From lorenzo.fiorini at gmail.com  Fri Mar 23 06:40:40 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 23 06:40:43 2007
Subject: [Harbour] Newline in strings difference between Harbour and xHarbour
Message-ID: <9257026e0703230340u4f9dd122xcd84cfa177deedc2@mail.gmail.com>

The code below builds under xHarbour ( 0.99.70 ) while Harbour gives
"unterminated string".

I know, Harbour is compatible with Clipper here, but things like Sql,
Js and Html often require long and complex strings concatenations and
having to break them line per line is a pain.

regards,
Lorenzo Fiorini

procedure main

   local cSql
   local cField

   cField = "code"


   cSql  = "select distinct f1, f2, f3 ;
            from table1 ;
            where f1 in ( '" + cField + "' ) and f2='4000';
           "

   ?? cSql

return
From e.m.giordano at emagsoftware.it  Fri Mar 23 06:43:52 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Mar 23 06:44:32 2007
Subject: [Harbour] Newline in strings difference between Harbour and
	xHarbour
References: <9257026e0703230340u4f9dd122xcd84cfa177deedc2@mail.gmail.com>
Message-ID: <00dd01c76d38$28137b30$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 23 marzo 2007 11.40
Oggetto: [Harbour] Newline in strings difference between Harbour and xHarbour


> The code below builds under xHarbour ( 0.99.70 ) while Harbour gives
> "unterminated string".

Current xHarbour from CVS gives that error as well.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Fri Mar 23 09:30:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 23 09:31:15 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <46033E8B.2090704@mail.udg.mx>
References: <20070304160715.C41882572F8@antivirus.noc.udg.mx>
	<46033E8B.2090704@mail.udg.mx>
Message-ID: <20070323133038.GA9603@localhost.localdomain>

On Thu, 22 Mar 2007, David Arturo Macias Corona wrote:
> Przemek:
> These are results of current Harbour devel branch build under OS/2:
> ( ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak )
> ---------------------------------------------------------
> [E:\hbbuild\harbour]make -r           1>make_gnu.log
> ../../../../source/rtl/os2/gcc/rtl.a(hbinet.o): Undefined symbol 
> tcp_h_errno referenced from text segment
> make[3]: *** [hbrun.exe] Error 1
> make[2]: *** [descend] Error 2
> ---------------------------------------------------------

I guess it's a reference to h_errno and in one of included header
files h_errno is defined as tcp_h_errno.
I'm afraid that these time I will not be able to help you without
seeing header files and library you are using but I think it's easy
to fix. You should only make some experiments. First check if tcp_h_errno
is defined in one of libraries you are using and maybe it will be enough
to add this library to linked library list. It's also possible that
translation from h_errno to tcp_h_errno depends on some macros you can
set/unset. Just look at netdb.h where h_errno should be defined.
In config/os2/gcc.cf TCPV40HDRS macro is defined - maybe this macro
interacts with h_errno definition?
Make some tests and I think you will find solution or maybe some other
OS2 user can help.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Mar 23 09:34:55 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 23 09:35:32 2007
Subject: [Harbour] ChangeLog 2007-03-22 12:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0703230222l4347c464ld61e87bb9e281c21@mail.gmail.com>
References: <20070322122758.GA707@localhost.localdomain>
	<9257026e0703221132u4a98bbb1g493be9d1981f582@mail.gmail.com>
	<20070322193033.GA28367@localhost.localdomain>
	<9257026e0703221403r4306c089h165302146e9fb0fd@mail.gmail.com>
	<20070322212041.GA30179@localhost.localdomain>
	<9257026e0703230222l4347c464ld61e87bb9e281c21@mail.gmail.com>
Message-ID: <20070323133455.GB9603@localhost.localdomain>

On Fri, 23 Mar 2007, Lorenzo Fiorini wrote:
> >but GD tries to create
> >class definition itself and I do not think it will work in Harbour. It's a
> >.prg code which has to be updated too but here I'd like leave the
> >modification to someone else who knows the GD library.
> I'll try to fix GD.

Below is a patch for C code.
HTH,

best regards,
Przemek




--- old/gdwrp.c	2007-03-23 14:33:09.000000000 +0100
+++ gdwrp.c	2007-03-22 21:53:50.000000000 +0100
@@ -64,11 +64,9 @@
 
 #include "hbapi.h"
 #include "hbapiitm.h"
-#include "hbfast.h"
 #include "hbstack.h"
 #include "hbapierr.h"
 #include "hbapifs.h"
-//#include "hrbdll.h"
 
 #ifdef HAVE_CONFIG_H
 #include "config.h"
@@ -1654,9 +1652,7 @@
    {
       gdImagePtr im;
       int x1, y1, x2, y2;
-      HB_ITEM pClipArray;
-
-      pClipArray.type = HB_IT_NIL;
+      PHB_ITEM pClipArray;
 
       /* Retrieve image pointer */
       im = (gdImagePtr) hb_parptr( 1 );
@@ -1665,15 +1661,14 @@
       gdImageGetClip(im, &x1, &y1, &x2, &y2);
 
       /* Return clipping rectangle value in an array */
-      hb_arrayNew( &pClipArray, 4 );
-      hb_itemPutNI( hb_arrayGetItemPtr( &pClipArray, 1 ), x1 );
-      hb_itemPutNI( hb_arrayGetItemPtr( &pClipArray, 2 ), y1 );
-      hb_itemPutNI( hb_arrayGetItemPtr( &pClipArray, 3 ), x2 );
-      hb_itemPutNI( hb_arrayGetItemPtr( &pClipArray, 4 ), y2 );
+      pClipArray = hb_itemArrayNew( 4 );
+      hb_itemPutNI( hb_arrayGetItemPtr( pClipArray, 1 ), x1 );
+      hb_itemPutNI( hb_arrayGetItemPtr( pClipArray, 2 ), y1 );
+      hb_itemPutNI( hb_arrayGetItemPtr( pClipArray, 3 ), x2 );
+      hb_itemPutNI( hb_arrayGetItemPtr( pClipArray, 4 ), y2 );
 
       /* return array */
-      hb_itemReturnForward( &pClipArray );
-
+      hb_itemRelease( hb_itemReturnForward( pClipArray ) );
    }
    else
    {
@@ -2557,14 +2552,11 @@
       if ( !( err ) )
       {
          /* Save in array the correct text rectangle dimensions */
-         HB_ITEM pArray;
-         pArray.type = HB_IT_NIL;
-         hb_arrayNew( &pArray, 8 );
+         hb_arrayNew( pRect, 8 );
          for( i = 0; i < 8; i ++ )
          {
-            hb_itemPutNI( hb_arrayGetItemPtr( &pArray, i+1 ), aRect[i] );
+            hb_itemPutNI( hb_arrayGetItemPtr( pRect, i+1 ), aRect[i] );
          }
-         hb_itemCopy( pRect, &pArray );
       }
       hb_retc( err );
 
From dmacias at mail.udg.mx  Fri Mar 23 10:20:04 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Mar 23 10:20:10 2007
Subject: [Harbour] Re: Harbour under Linux Mandriva 2007
In-Reply-To: <20070323032314.EC9DE1E0020@antivirus2.noc.udg.mx>
References: <20070323032314.EC9DE1E0020@antivirus2.noc.udg.mx>
Message-ID: <4603E214.2070102@mail.udg.mx>

Przemek :

>> Mandriva 2007 does not include bison and flex
>>     
>
> I do not believe it's true. Without bison or other YACC compatible
> grammar parser most of included in MDV2K7 languages cannot be
> created so such packages for sure exists. Maybe not included in
> some basic distribution packages.
>
>   

Confirmed
Bison and flex are not included in Mandriva 2007 Free (four CDs)
Searching in Internet many users report the same, and comments about bad 
quality of recent Mandriva releases ( since 2005 )

> FLEX is not used by Harbour at all. Bison is necessary only if you want
> to make your own modifications in grammar rules and it should be at least
> 1.875 though due to some bugs in this version 2.1 or higher is suggested.
> Just remove bison and flex from dependences list in your hbgtmk.sh and
> try again. I'll update harbour.spec in few minutes.
>
>   

OK
Below are output of current Harbour devel branch build under Mandriva 
2007 Free
   It show errors in gtsln and odbc
As I see, it include strange characters  (saved in Linux:gedit and read 
with OS/2)  :-)

Below are included output of hbtest

---------------------------------------------------------------------------
      Version: Harbour devel build 1.1-0 Intl.
     Compiler: GNU C 4.1.1 (32 bit)
           OS: Linux 2.6.17-5mdv i686
   Date, Time: 2007.03.23 07:59:32
       Output: (stdout)
Shortcut opt.: ON
     Switches: 
===========================================================================

[...]

Test calls passed:       4217 ( 99.29 % )
Test calls failed:         30 ( 0.71 % )
                   ----------
            Total:       4247 ( Time elapsed: 0.13 seconds )

Gracias,
David Macias


In file included from ../../gtsln.c:57:
../../gtsln.h:73:19: error: slang.h: No existe el fichero o el directorio
../../gtsln.c: In function ???sigwinch_handler???:
../../gtsln.c:133: warning: implicit declaration of function ???SLsignal???
../../gtsln.c: In function ???hb_sln_colorTrans???:
../../gtsln.c:163: warning: implicit declaration of function 
???SLtt_set_color???
../../gtsln.c: In function ???hb_sln_setACSCtrans???:
../../gtsln.c:234: error: ???SLtt_Graphics_Char_Pairs??? undeclared 
(first use in this function)
../../gtsln.c:234: error: (Each undeclared identifier is reported only once
../../gtsln.c:234: error: for each function it appears in.)
../../gtsln.c:273: error: ???SLSMG_HLINE_CHAR??? undeclared (first use 
in this function)
../../gtsln.c:274: error: ???SLSMG_VLINE_CHAR??? undeclared (first use 
in this function)
../../gtsln.c:275: error: ???SLSMG_ULCORN_CHAR??? undeclared (first use 
in this function)
../../gtsln.c:276: error: ???SLSMG_URCORN_CHAR??? undeclared (first use 
in this function)
../../gtsln.c:277: error: ???SLSMG_LLCORN_CHAR??? undeclared (first use 
in this function)
../../gtsln.c:278: error: ???SLSMG_LRCORN_CHAR??? undeclared (first use 
in this function)
../../gtsln.c:279: error: ???SLSMG_RTEE_CHAR??? undeclared (first use in 
this function)
../../gtsln.c:280: error: ???SLSMG_LTEE_CHAR??? undeclared (first use in 
this function)
../../gtsln.c:281: error: ???SLSMG_UTEE_CHAR??? undeclared (first use in 
this function)
../../gtsln.c:282: error: ???SLSMG_DTEE_CHAR??? undeclared (first use in 
this function)
../../gtsln.c:283: error: ???SLSMG_PLUS_CHAR??? undeclared (first use in 
this function)
../../gtsln.c:295: error: ???SLSMG_CKBRD_CHAR??? undeclared (first use 
in this function)
../../gtsln.c: In function ???hb_sln_SetCursorStyle???:
../../gtsln.c:489: warning: implicit declaration of function 
???SLtt_set_cursor_visibility???
../../gtsln.c:521: warning: implicit declaration of function 
???SLtt_write_string???
../../gtsln.c: In function ???hb_gt_sln_Init???:
../../gtsln.c:579: error: ???SLang_TT_Read_FD??? undeclared (first use 
in this function)
../../gtsln.c:580: error: ???SLang_TT_Write_FD??? undeclared (first use 
in this function)
../../gtsln.c:583: warning: implicit declaration of function 
???SLtt_get_terminfo???
../../gtsln.c:586: warning: implicit declaration of function ???SLkp_init???
../../gtsln.c:604: warning: implicit declaration of function 
???SLsmg_init_smg???
../../gtsln.c:610: error: ???SLang_Ignore_User_Abort??? undeclared 
(first use in this function)
../../gtsln.c:613: warning: implicit declaration of function 
???SLang_set_abort_signal???
../../gtsln.c:646: error: ???SLtt_Blink_Mode??? undeclared (first use in 
this function)
../../gtsln.c:647: error: ???SLtt_Use_Blink_For_ACS??? undeclared (first 
use in this function)
../../gtsln.c:655: error: ???SLsmg_Display_Eight_Bit??? undeclared 
(first use in this function)
../../gtsln.c:656: error: ???SLsmg_Newline_Behavior??? undeclared (first 
use in this function)
../../gtsln.c:656: error: ???SLSMG_NEWLINE_SCROLLS??? undeclared (first 
use in this function)
../../gtsln.c:664: warning: implicit declaration of function 
???SLtt_set_alt_char_set???
../../gtsln.c:667: warning: implicit declaration of function 
???SLsmg_set_color???
../../gtsln.c:673: warning: implicit declaration of function ???SLsmg_cls???
../../gtsln.c:674: warning: implicit declaration of function 
???SLsmg_gotorc???
../../gtsln.c:675: warning: implicit declaration of function 
???SLsmg_refresh???
../../gtsln.c:685: warning: implicit declaration of function 
???SLang_reset_tty???
../../gtsln.c:692: error: ???SLtt_Screen_Rows??? undeclared (first use 
in this function)
../../gtsln.c:692: error: ???SLtt_Screen_Cols??? undeclared (first use 
in this function)
../../gtsln.c:698: warning: implicit declaration of function 
???SLsmg_get_row???
../../gtsln.c:698: warning: implicit declaration of function 
???SLsmg_get_column???
../../gtsln.c: In function ???hb_gt_sln_Exit???:
../../gtsln.c:712: warning: implicit declaration of function 
???SLtt_flush_output???
../../gtsln.c:721: warning: implicit declaration of function 
???SLsmg_reset_smg???
../../gtsln.c: In function ???hb_gt_sln_IsColor???:
../../gtsln.c:748: error: ???SLtt_Use_Ansi_Colors??? undeclared (first 
use in this function)
../../gtsln.c:749: warning: control reaches end of non-void function
../../gtsln.c: In function ???hb_gt_sln_SetBlink???:
../../gtsln.c:770: error: ???SLtt_Blink_Mode??? undeclared (first use in 
this function)
../../gtsln.c: In function ???hb_gt_sln_Tone???:
../../gtsln.c:795: warning: implicit declaration of function ???SLtt_beep???
../../gtsln.c: In function ???hb_gt_sln_Suspend???:
../../gtsln.c:830: warning: implicit declaration of function 
???SLsmg_suspend_smg???
../../gtsln.c: In function ???hb_gt_sln_Resume???:
../../gtsln.c:844: warning: implicit declaration of function 
???SLsmg_resume_smg???
../../gtsln.c: In function ???hb_gt_sln_Redraw???:
../../gtsln.c:969: warning: implicit declaration of function 
???SLsmg_write_raw???
../../gtsln.c: In function ???hb_gt_sln_Refresh???:
../../gtsln.c:988: error: ???SLtt_Screen_Rows??? undeclared (first use 
in this function)
../../gtsln.c:988: error: ???SLtt_Screen_Cols??? undeclared (first use 
in this function)
make[4]: *** [gtsln.o] Error 1
make[3]: *** [descend] Error 2
../../odbc.c:103:17: error: sql.h: No existe el fichero o el directorio
../../odbc.c:104:20: error: sqlext.h: No existe el fichero o el directorio
../../odbc.c:105:22: error: sqltypes.h: No existe el fichero o el directorio
../../odbc.c: In function ???HB_FUN_SQLALLOCEN???:
../../odbc.c:125: error: ???HENV??? undeclared (first use in this function)
../../odbc.c:125: error: (Each undeclared identifier is reported only once
../../odbc.c:125: error: for each function it appears in.)
../../odbc.c:125: error: expected ???;??? before ???hEnv???
../../odbc.c:126: error: ???RETCODE??? undeclared (first use in this 
function)
../../odbc.c:126: error: expected ???;??? before ???ret???
../../odbc.c:128: error: ???hEnv??? undeclared (first use in this function)
../../odbc.c:129: error: ???ret??? undeclared (first use in this function)
../../odbc.c: In function ???HB_FUN_SQLALLOCCO???:
../../odbc.c:134: error: ???HDBC??? undeclared (first use in this function)
../../odbc.c:134: error: expected ???;??? before ???hDbc???
../../odbc.c:135: error: ???RETCODE??? undeclared (first use in this 
function)
../../odbc.c:135: error: expected ???;??? before ???ret???
../../odbc.c:137: error: ???hDbc??? undeclared (first use in this function)
../../odbc.c:138: error: ???ret??? undeclared (first use in this function)
../../odbc.c: In function ???HB_FUN_SQLDRIVERC???:
../../odbc.c:144: error: ???SWORD??? undeclared (first use in this function)
../../odbc.c:144: error: expected ???;??? before ???wLen???
../../odbc.c:145: error: ???RETCODE??? undeclared (first use in this 
function)
../../odbc.c:145: error: expected ???;??? before ???ret???
../../odbc.c:154: error: ???ret??? undeclared (first use in this function)
../../odbc.c:154: warning: implicit declaration of function 
???SQLDriverConnect???
../../odbc.c:154: error: ???HDBC??? undeclared (first use in this function)
../../odbc.c:154: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLCONNECT???:
../../odbc.c:165: error: ???RETCODE??? undeclared (first use in this 
function)
../../odbc.c:165: error: expected ???;??? before ???ret???
../../odbc.c:172: error: ???ret??? undeclared (first use in this function)
../../odbc.c: In function ???HB_FUN_SQLDISCONN???:
../../odbc.c:177: warning: implicit declaration of function 
???SQLDisconnect???
../../odbc.c:177: error: ???HDBC??? undeclared (first use in this function)
../../odbc.c:177: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLFREECON???:
../../odbc.c:182: warning: implicit declaration of function 
???SQLFreeConnect???
../../odbc.c:182: error: ???HDBC??? undeclared (first use in this function)
../../odbc.c:182: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLFREEENV???:
../../odbc.c:187: warning: implicit declaration of function ???SQLFreeEnv???
../../odbc.c:187: error: ???HENV??? undeclared (first use in this function)
../../odbc.c:187: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLALLOCST???:
../../odbc.c:192: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:192: error: expected ???;??? before ???hStmt???
../../odbc.c:194: warning: implicit declaration of function 
???SQLAllocStmt???
../../odbc.c:194: error: ???HDBC??? undeclared (first use in this function)
../../odbc.c:194: error: expected ???)??? before ???hb_parnl???
../../odbc.c:195: error: ???hStmt??? undeclared (first use in this function)
../../odbc.c: In function ???HB_FUN_SQLFREESTM???:
../../odbc.c:200: warning: implicit declaration of function 
???SQLFreeStmt???
../../odbc.c:200: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:200: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLEXECDIR???:
../../odbc.c:205: warning: implicit declaration of function 
???SQLExecDirect???
../../odbc.c:205: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:205: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLFETCH???:
../../odbc.c:210: warning: implicit declaration of function ???SQLFetch???
../../odbc.c:210: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:210: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLGETDATA???:
../../odbc.c:215: error: ???SDWORD??? undeclared (first use in this 
function)
../../odbc.c:215: error: expected ???;??? before ???lLen???
../../odbc.c:216: error: ???PTR??? undeclared (first use in this function)
../../odbc.c:216: error: expected ???;??? before ???bBuffer???
../../odbc.c:217: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:217: error: expected ???;??? before ???wType???
../../odbc.c:220: error: ???lLen??? undeclared (first use in this function)
../../odbc.c:221: error: ???bBuffer??? undeclared (first use in this 
function)
../../odbc.c:222: error: ???bOut??? undeclared (first use in this function)
../../odbc.c:223: error: ???lInitBuff??? undeclared (first use in this 
function)
../../odbc.c:224: error: ???wType??? undeclared (first use in this function)
../../odbc.c:224: error: ???SQL_BINARY??? undeclared (first use in this 
function)
../../odbc.c:226: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c:226: error: ???SQL_NO_DATA??? undeclared (first use in this 
function)
../../odbc.c:229: warning: implicit declaration of function ???SQLGetData???
../../odbc.c:229: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:229: error: expected ???)??? before ???hb_parnl???
../../odbc.c:230: error: ???SQL_SUCCESS??? undeclared (first use in this 
function)
../../odbc.c:232: error: ???LPSTR??? undeclared (first use in this function)
../../odbc.c:232: error: expected ???)??? before ???bBuffer???
../../odbc.c:232: error: too few arguments to function ???hb_storclen???
../../odbc.c:235: error: ???SQL_SUCCESS_WITH_INFO??? undeclared (first 
use in this function)
../../odbc.c:248: error: expected ???)??? before ???bBuffer???
../../odbc.c:248: error: too few arguments to function ???hb_storclen???
../../odbc.c:256: error: expected ???)??? before ???bOut???
../../odbc.c:256: error: too few arguments to function ???hb_storclen???
../../odbc.c:265: error: expected ???)??? before ???bBuffer???
../../odbc.c:268: error: expected ???)??? before ???bOut???
../../odbc.c: In function ???HB_FUN_SQLNUMRES???:
../../odbc.c:276: error: ???SQLSMALLINT??? undeclared (first use in this 
function)
../../odbc.c:276: error: expected ???;??? before ???nCols???
../../odbc.c:277: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:277: error: expected ???;??? before ???wResult???
../../odbc.c:280: error: ???nCols??? undeclared (first use in this function)
../../odbc.c:282: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c: In function ???HB_FUN_SQLDESCRIB???:
../../odbc.c:288: error: ???SDWORD??? undeclared (first use in this 
function)
../../odbc.c:288: error: expected ???;??? before ???lLen???
../../odbc.c:289: error: ???PTR??? undeclared (first use in this function)
../../odbc.c:289: error: expected ???;??? before ???bBuffer???
../../odbc.c:290: error: ???SQLSMALLINT??? undeclared (first use in this 
function)
../../odbc.c:290: error: expected ???;??? before ???wBufLen???
../../odbc.c:291: error: expected ???;??? before ???wDataType???
../../odbc.c:292: error: ???SQLUINTEGER??? undeclared (first use in this 
function)
../../odbc.c:292: error: expected ???;??? before ???wColSize???
../../odbc.c:293: error: expected ???;??? before ???wDecimals???
../../odbc.c:294: error: expected ???;??? before ???wNullable???
../../odbc.c:295: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:295: error: expected ???;??? before ???wResult???
../../odbc.c:300: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c:300: error: ???SQL_SUCCESS??? undeclared (first use in this 
function)
../../odbc.c:300: error: ???SQL_SUCCESS_WITH_INFO??? undeclared (first 
use in this function)
../../odbc.c:302: error: ???LPSTR??? undeclared (first use in this function)
../../odbc.c:302: error: expected ???)??? before ???bBuffer???
../../odbc.c:303: error: too few arguments to function ???hb_storclen???
../../odbc.c:304: error: ???wBufLen??? undeclared (first use in this 
function)
../../odbc.c:305: error: ???wDataType??? undeclared (first use in this 
function)
../../odbc.c:306: error: ???wColSize??? undeclared (first use in this 
function)
../../odbc.c:307: error: ???wDecimals??? undeclared (first use in this 
function)
../../odbc.c:308: error: ???wNullable??? undeclared (first use in this 
function)
../../odbc.c:311: error: expected ???)??? before ???bBuffer???
../../odbc.c: In function ???HB_FUN_SQLCOLATTRIBUTE???:
../../odbc.c:318: error: ???SDWORD??? undeclared (first use in this 
function)
../../odbc.c:318: error: expected ???;??? before ???lLen???
../../odbc.c:319: error: ???PTR??? undeclared (first use in this function)
../../odbc.c:319: error: expected ???;??? before ???bBuffer???
../../odbc.c:320: error: ???SQLSMALLINT??? undeclared (first use in this 
function)
../../odbc.c:320: error: expected ???;??? before ???wBufLen???
../../odbc.c:321: error: expected ???;??? before ???wNumPtr???
../../odbc.c:322: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:322: error: expected ???;??? before ???wResult???
../../odbc.c:330: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c:330: error: ???SQL_SUCCESS??? undeclared (first use in this 
function)
../../odbc.c:330: error: ???SQL_SUCCESS_WITH_INFO??? undeclared (first 
use in this function)
../../odbc.c:332: error: ???LPSTR??? undeclared (first use in this function)
../../odbc.c:332: error: expected ???)??? before ???bBuffer???
../../odbc.c:333: error: too few arguments to function ???hb_storclen???
../../odbc.c:334: error: ???wBufLen??? undeclared (first use in this 
function)
../../odbc.c:335: error: ???wNumPtr??? undeclared (first use in this 
function)
../../odbc.c:338: error: expected ???)??? before ???bBuffer???
../../odbc.c: In function ???HB_FUN_SQLEXTENDE???:
../../odbc.c:345: error: ???SQLUINTEGER??? undeclared (first use in this 
function)
../../odbc.c:345: error: expected ???;??? before ???uiRowCountPtr???
../../odbc.c:346: error: ???SQLUSMALLINT??? undeclared (first use in 
this function)
../../odbc.c:346: error: expected ???;??? before ???siRowStatus???
../../odbc.c:347: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:347: error: expected ???;??? before ???wResult???
../../odbc.c:353: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c:353: error: ???SQL_SUCCESS??? undeclared (first use in this 
function)
../../odbc.c:353: error: ???SQL_SUCCESS_WITH_INFO??? undeclared (first 
use in this function)
../../odbc.c:355: error: ???uiRowCountPtr??? undeclared (first use in 
this function)
../../odbc.c:356: error: ???siRowStatus??? undeclared (first use in this 
function)
../../odbc.c: In function ???HB_FUN_SQLFETCHSC???:
../../odbc.c:364: warning: implicit declaration of function 
???SQLFetchScroll???
../../odbc.c:364: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:364: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLERROR???:
../../odbc.c:371: error: ???SQLINTEGER??? undeclared (first use in this 
function)
../../odbc.c:371: error: expected ???;??? before ???lError???
../../odbc.c:372: error: ???SWORD??? undeclared (first use in this function)
../../odbc.c:372: error: expected ???;??? before ???wLen???
../../odbc.c:374: warning: implicit declaration of function ???SQLError???
../../odbc.c:374: error: ???HENV??? undeclared (first use in this function)
../../odbc.c:374: error: expected ???)??? before ???hb_parnl???
../../odbc.c:379: error: ???lError??? undeclared (first use in this 
function)
../../odbc.c: In function ???HB_FUN_SQLROWCOUN???:
../../odbc.c:385: error: ???SQLINTEGER??? undeclared (first use in this 
function)
../../odbc.c:385: error: expected ???;??? before ???iRowCountPtr???
../../odbc.c:386: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:386: error: expected ???;??? before ???wResult???
../../odbc.c:388: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c:388: error: ???SQL_SUCCESS??? undeclared (first use in this 
function)
../../odbc.c:388: error: ???SQL_SUCCESS_WITH_INFO??? undeclared (first 
use in this function)
../../odbc.c:390: error: ???iRowCountPtr??? undeclared (first use in 
this function)
../../odbc.c: In function ???HB_FUN_SQLGETINFO???:
../../odbc.c:399: error: ???SQLSMALLINT??? undeclared (first use in this 
function)
../../odbc.c:399: error: expected ???;??? before ???wLen???
../../odbc.c:400: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:400: error: expected ???;??? before ???wResult???
../../odbc.c:402: error: ???wLen??? undeclared (first use in this function)
../../odbc.c:403: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c: In function ???HB_FUN_SQLSETCONNECTOPTION???:
../../odbc.c:408: warning: implicit declaration of function 
???SQLSetConnectOption???
../../odbc.c:408: error: ???HDBC??? undeclared (first use in this function)
../../odbc.c:408: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLSETSTMTOPTION???:
../../odbc.c:414: warning: implicit declaration of function 
???SQLSetStmtOption???
../../odbc.c:414: error: ???SQLHSTMT??? undeclared (first use in this 
function)
../../odbc.c:414: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLGETCONNECTOPTION???:
../../odbc.c:421: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:421: error: expected ???;??? before ???wResult???
../../odbc.c:422: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c:422: error: ???SQL_SUCCESS??? undeclared (first use in this 
function)
../../odbc.c: In function ???HB_FUN_SQLGETSTMTOPTION???:
../../odbc.c:431: error: ???WORD??? undeclared (first use in this function)
../../odbc.c:431: error: expected ???;??? before ???wResult???
../../odbc.c:433: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c:433: error: ???SQL_SUCCESS??? undeclared (first use in this 
function)
../../odbc.c: In function ???HB_FUN_SQLCOMMIT???:
../../odbc.c:443: warning: implicit declaration of function 
???SQLTransact???
../../odbc.c:443: error: ???HENV??? undeclared (first use in this function)
../../odbc.c:443: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLROLLBACK???:
../../odbc.c:448: error: ???HENV??? undeclared (first use in this function)
../../odbc.c:448: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLPREPARE???:
../../odbc.c:457: warning: implicit declaration of function ???SQLPrepare???
../../odbc.c:457: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:457: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLEXECUTE???:
../../odbc.c:462: warning: implicit declaration of function ???SQLExecute???
../../odbc.c:462: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:462: error: expected ???)??? before ???hb_parnl???
../../odbc.c: In function ???HB_FUN_SQLEXECUTESCALAR???:
../../odbc.c:467: error: ???HSTMT??? undeclared (first use in this function)
../../odbc.c:467: error: expected ???;??? before ???hStmt???
../../odbc.c:468: error: ???SDWORD??? undeclared (first use in this 
function)
../../odbc.c:468: error: expected ???;??? before ???lLen???
../../odbc.c:470: error: ???SWORD??? undeclared (first use in this function)
../../odbc.c:470: error: expected ???;??? before ???wResult???
../../odbc.c:472: error: ???wResult??? undeclared (first use in this 
function)
../../odbc.c:472: error: ???HDBC??? undeclared (first use in this function)
../../odbc.c:472: error: expected ???)??? before ???hb_parnl???
../../odbc.c:474: error: ???SQL_SUCCESS??? undeclared (first use in this 
function)
../../odbc.c:474: error: ???SQL_SUCCESS_WITH_INFO??? undeclared (first 
use in this function)
../../odbc.c:476: error: expected ???)??? before ???hStmt???
../../odbc.c:479: error: expected ???)??? before ???hStmt???
../../odbc.c:480: error: ???SQL_NO_DATA??? undeclared (first use in this 
function)
../../odbc.c:482: error: expected ???)??? before ???hStmt???
../../odbc.c:490: error: expected ???)??? before ???hStmt???
../../odbc.c: In function ???HB_FUN_SQLMORERESULTS???:
../../odbc.c:520: warning: implicit declaration of function 
???SQLMoreResults???
../../odbc.c:520: error: ???SQLHSTMT??? undeclared (first use in this 
function)
../../odbc.c:520: error: expected ???)??? before ???hb_parnl???
make[3]: *** [odbc.o] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [first] Error 2
make: *** [first] Error 2






Harbour Regression Test Suite
Copyright 1999-2000, http://www.harbour-project.org
---------------------------------------------------------------------------
      Version: Harbour devel build 1.1-0 Intl.
     Compiler: GNU C 4.1.1 (32 bit)
           OS: Linux 2.6.17-5mdv i686
   Date, Time: 2007.03.23 07:59:32
       Output: (stdout)
Shortcut opt.: ON
     Switches: 
===========================================================================
R No.  Line            TestCall()                               -> 
Result                                                                                
| 
Expected                                                                             

---------------------------------------------------------------------------
!  592 MAIN_HVMA(339)  saArray[ 1000 ]                        
       Result: "E BASE 1132 Bound error array access A:2:A:{.[1].};N:1000 "
     Expected: "E BASE 1132 Bound error array access "
!  593 MAIN_HVMA(340)  saArray[ 1000 ] := 1                   
       Result: "E BASE 1133 Bound error array assign A:1:N:1000 "
     Expected: "E BASE 1133 Bound error array assign "
!  722 MAIN_HVMA(501)  RTSTR( 00000500000000000000 )          
       Result: " 16  500000000000000"
     Expected: " 21       500000000000000"
!  723 MAIN_HVMA(502)  RTSTR( 0500000000000000 )              
       Result: " 16  500000000000000"
     Expected: " 17   500000000000000"
! 1067 MAIN_MATH(359)  Str(1234567890 * 1234567890 )          
       Result: " 1524157875019052100"
     Expected: " 1524157875019052000"
! 1427 MAIN_STR(275)   AllTrim( NIL )                         
       Result: "E BASE 2022 Argument error ALLTRIM A:1:U:NIL F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1428 MAIN_STR(276)   AllTrim( 100 )                         
       Result: "E BASE 2022 Argument error ALLTRIM A:1:N:100 F:S"
     Expected: "E BASE 2022 Argument error ALLTRIM F:S"
! 1500 MAIN_STR(376)   StrTran( NIL )                         
       Result: "E BASE 1126 Argument error STRTRAN A:1:U:NIL F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1501 MAIN_STR(377)   StrTran( 100 )                         
       Result: "E BASE 1126 Argument error STRTRAN A:1:N:100 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 1502 MAIN_STR(379)   StrTran( "AA", 1 )                     
       Result: "E BASE 1126 Argument error STRTRAN A:2:C:AA;N:1 F:S"
     Expected: "E BASE 1126 Argument error STRTRAN F:S"
! 2239 MAIN_TRANS(414) Transform(".", "@E" )                  
       Result: ""
     Expected: " "
! 2241 MAIN_TRANS(416) Transform("..", "@E" )                 
       Result: ""
     Expected: ","+Chr(0)+""
! 2243 MAIN_TRANS(418) Transform(",.,", "@E" )                
       Result: ".,."
     Expected: ",,."
! 2244 MAIN_TRANS(419) Transform(".,.", "@E" )                
       Result: ".,"
     Expected: ""+Chr(0)+".."
! 2245 MAIN_TRANS(420) Transform("OPI", "@E ." )              
       Result: "."
     Expected: ""+Chr(0)+",."
! 2246 MAIN_TRANS(421) Transform("JKL", "@E ," )              
       Result: ","
     Expected: ""+Chr(0)+"P."
! 2563 MAIN_ARRAY(107) aFill( NIL )                           
       Result: "E BASE 9999 Argument error AFILL A:1:U:NIL "
     Expected: "E BASE 9999 Argument error AFILL "
! 2607 MAIN_ARRAY(167) aSize( NIL )                           
       Result: "E BASE 2023 Argument error ASIZE A:1:U:NIL "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2608 MAIN_ARRAY(168) aSize( {} )                            
       Result: "E BASE 2023 Argument error ASIZE A:1:A:{.[0].} "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2609 MAIN_ARRAY(169) aSize( ErrorNew() )                    
       Result: "E BASE 2023 Argument error ASIZE A:1:O:ERROR Object "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2610 MAIN_ARRAY(171) aSize( NIL, 0 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:0 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2613 MAIN_ARRAY(174) aSize( NIL, 1 )                        
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2619 MAIN_ARRAY(180) aSize( NIL, -1 )                       
       Result: "E BASE 2023 Argument error ASIZE A:2:U:NIL;N:-1 "
     Expected: "E BASE 2023 Argument error ASIZE "
! 2634 MAIN_ARRAY(205) Array( -1 )                            
       Result: "E BASE 1131 Bound error array dimension A:1:N:-1 "
     Expected: "E BASE 1131 Bound error array dimension "
! 2635 MAIN_ARRAY(206) Array( 1, 0, -10 )                     
       Result: "E BASE 1131 Bound error array dimension A:3:N:1;N:0;N:-10 "
     Expected: "E BASE 1131 Bound error array dimension "
! 3035 MAIN_MISC(285)  HB_SToD("99990101")                    
       Result: HB_SToD("99990101")
     Expected: HB_SToD("        ")
! 3043 MAIN_MISC(293)  HB_SToD("19 90905")                    
       Result: HB_SToD("        ")
     Expected: HB_SToD("17490905")
! 3044 MAIN_MISC(294)  HB_SToD("199 0905")                    
       Result: HB_SToD("        ")
     Expected: HB_SToD("19740905")
! 4245 MAIN_LAST(179)  __MRestore( "$NOTHERE.MEM", .F. )      
       Result: "E BASE 2005 Open error $NOTHERE.MEM 
A:2:C:$NOTHERE.MEM;L:.F. F:DR"
     Expected: "E BASE 2005 Open error $NOTHERE.MEM F:DR"
! 4247 MAIN_LAST(183)  __MSave( BADFNAME(), "*", .T. )        
       Result: "E BASE 2006 Create error *BADNAM/*.MEM 
A:3:C:*BADNAM/*.MEM;C:*;L:.T. F:DR"
     Expected: "E BASE 2006 Create error *BADNAM/*.MEM F:DR"
===========================================================================
Test calls passed:       4217 ( 99.29 % )
Test calls failed:         30 ( 0.71 % )
                   ----------
            Total:       4247 ( Time elapsed: 0.13 seconds )

WARNING ! Failures detected



From druzus at priv.onet.pl  Fri Mar 23 12:20:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 23 12:21:16 2007
Subject: [Harbour] Re: Harbour under Linux Mandriva 2007
In-Reply-To: <4603E214.2070102@mail.udg.mx>
References: <20070323032314.EC9DE1E0020@antivirus2.noc.udg.mx>
	<4603E214.2070102@mail.udg.mx>
Message-ID: <20070323162040.GA14750@localhost.localdomain>

On Fri, 23 Mar 2007, David Arturo Macias Corona wrote:
> Below are output of current Harbour devel branch build under Mandriva 
> 2007 Free
>   It show errors in gtsln and odbc

You do not have slang devel and unix-odbc devel packages installed
so it's expected behavior.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Mar 23 12:48:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 23 12:49:25 2007
Subject: [Harbour] Newline in strings difference between Harbour and
	xHarbour
In-Reply-To: <9257026e0703230340u4f9dd122xcd84cfa177deedc2@mail.gmail.com>
References: <9257026e0703230340u4f9dd122xcd84cfa177deedc2@mail.gmail.com>
Message-ID: <20070323164849.GA18511@localhost.localdomain>

On Fri, 23 Mar 2007, Lorenzo Fiorini wrote:
> The code below builds under xHarbour ( 0.99.70 ) while Harbour gives
> "unterminated string".
> I know, Harbour is compatible with Clipper here, but things like Sql,
> Js and Html often require long and complex strings concatenations and
> having to break them line per line is a pain.

Sorry but I do not want to change it. Current behavior is caused by
Clipper compatible line tokenization and a lot of pending code depends
on it. Probably it will be possible to hack the situation when RT error
is generated and continue string in next line but I'm not sure it's good
idea to make sth like that. It will cause that locating some typos will
be harder.
    c := 'This is a test" // which should not be compiled ;
                          // but it will be ` :-O '
Anyhow new PP has also Clipper incompatible behavior in preprocessing
strings quoted by '[' ']'. This anomaly is a "feature" you are asking
for, so code like this:

    proc main()
    local cSql, cField := "'FIELD'"
    cSql := [select distinct f1, f2, f3 ;
             from table1 ;
             where f1 in (] + cField + [) and f2='4000' ;
            ]
    ? cSql
    return

can be compiled by new PP as long as we will keep this Clipper
incompatible behavior - see my messages to Phil when I tried to
explain the problem.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Mar 23 14:12:59 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 23 14:13:33 2007
Subject: [Harbour] Newline in strings difference between Harbour and
	xHarbour
In-Reply-To: <20070323164849.GA18511@localhost.localdomain>
References: <9257026e0703230340u4f9dd122xcd84cfa177deedc2@mail.gmail.com>
	<20070323164849.GA18511@localhost.localdomain>
Message-ID: <9257026e0703231112g33e6cf57o15559c27bba429bd@mail.gmail.com>

On 3/23/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Sorry but I do not want to change it.

I respect your decision.
It is a php "feature" that once started to use is difficult to forget,
and it was my mistake to rely on it. I also "feel" that [] is
temporary and that you don't like it either.

Could you consider other possibilities like using special eol marker (
like ;; ), extended strings or PP to have a "clean" syntax or should I
start rewrite my code :)

regards,
Lorenzo Fiorini
From dmacias at mail.udg.mx  Sat Mar 24 07:26:08 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Mar 24 07:26:13 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <20070323142042.66234426D5A@antivirus2.noc.udg.mx>
References: <20070323142042.66234426D5A@antivirus2.noc.udg.mx>
Message-ID: <46050AD0.5020807@mail.udg.mx>


Przemek:

> I guess it's a reference to h_errno and in one of included header
> files h_errno is defined as tcp_h_errno.
> I'm afraid that these time I will not be able to help you without
> seeing header files and library you are using but I think it's easy
> to fix. You should only make some experiments. First check if tcp_h_errno
> is defined in one of libraries you are using and maybe it will be enough
> to add this library to linked library list. It's also possible that
> translation from h_errno to tcp_h_errno depends on some macros you can
> set/unset. Just look at netdb.h where h_errno should be defined.
> In config/os2/gcc.cf TCPV40HDRS macro is defined - maybe this macro
> interacts with h_errno definition?
> Make some tests and I think you will find solution or maybe some other
> OS2 user can help.
>   

You did it again, you solved  :-)

\usr\include\netdb.ch have code as these:

..................................

#ifdef TCPV40HDRS
#define h_errno         (tcp_h_errno())   /* __MT__ safe */
#else
#define h_errno         (*tcp_h_errno1()) /* __MT__ safe */
#endif

..................................


and harbour\config\os2\gcc.cf have:

..................................

# 26/03/2004 - <maurilio.longo@libero.it>
# added -DTCPV40HDRS to compile with GCC 3.2.2 on OS/2 v4.0 with mixed 
16/32 bit tcp/ip stack
# to be removed if compiled on a tcp/ip stack >= 4.1 (eComStation, for 
example)
CFLAGS += -DTCPV40HDRS

..................................


My OS/2 is eComStation 1.2MR:
     VER   -->  The Operating System/2 Version is 4.50

so removing:
     CFLAGS += -DTCPV40HDRS

cause Harbour build entirely without problems

How can be managed this difference (OS/2 v4.0, v4.5) in order to 
include/exclude -DTCPV40HDRS without editing harbour\config\os2\gcc.cf 
when updated ?

Gracias,
David Macias

From druzus at priv.onet.pl  Sat Mar 24 08:25:30 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Mar 24 08:26:06 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <46050AD0.5020807@mail.udg.mx>
References: <20070323142042.66234426D5A@antivirus2.noc.udg.mx>
	<46050AD0.5020807@mail.udg.mx>
Message-ID: <20070324122530.GA25845@localhost.localdomain>

On Sat, 24 Mar 2007, David Arturo Macias Corona wrote:
> \usr\include\netdb.ch have code as these:
> #ifdef TCPV40HDRS
> #define h_errno         (tcp_h_errno())   /* __MT__ safe */
> #else
> #define h_errno         (*tcp_h_errno1()) /* __MT__ safe */
> #endif
> ..................................
> and harbour\config\os2\gcc.cf have:
> # 26/03/2004 - <maurilio.longo@libero.it>
> # added -DTCPV40HDRS to compile with GCC 3.2.2 on OS/2 v4.0 with mixed 
> 16/32 bit tcp/ip stack
> # to be removed if compiled on a tcp/ip stack >= 4.1 (eComStation, for 
> example)
> CFLAGS += -DTCPV40HDRS
> My OS/2 is eComStation 1.2MR:
>     VER   -->  The Operating System/2 Version is 4.50
> so removing:
>     CFLAGS += -DTCPV40HDRS
> cause Harbour build entirely without problems
> How can be managed this difference (OS/2 v4.0, v4.5) in order to 
> include/exclude -DTCPV40HDRS without editing harbour\config\os2\gcc.cf 
> when updated ?

I do not know OS2 but if it's possible to detect the version using some
environment variable then we can cover these definition in some if statement.
Can you check which environment variables are set in your OS2?

BTW I've just checked that OpenWatcom uses only (*tcp_h_errno1()) as h_errno
so probably by default we should not set TCPV40HDRS. If it will not be
possible to detect OS2 version using environment variables then I'll remove
this definition from config\os2\gcc.cf and users with older OS2 version
will have to set it using C_USR envvar, f.e.: SET C_USR=-DTCPV40HDRS

best regards,
Przemek
From dmacias at mail.udg.mx  Sun Mar 25 07:35:19 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Mar 25 07:35:22 2007
Subject: [Harbour] Re: Harbour under Linux Mandriva 2007
In-Reply-To: <20070324160015.15C3D1E6829@antivirus2.noc.udg.mx>
References: <20070324160015.15C3D1E6829@antivirus2.noc.udg.mx>
Message-ID: <46065E77.6020703@mail.udg.mx>

Przemek:

> You do not have slang devel and unix-odbc devel packages installed
> so it's expected behavior.
>
>   

Mandriva 2007 Free does not include both, just include:
- libslang1-1.4.9-8mdk
- libunixODBC1-2.2.11-14mdv2007.0


Searching in Internet, seem that slang-devel does not exist for Mandriva 
2007

I installed:
-  libslang1-devel-1.4.9-7mdk.i586.rpm    
   It belong to Mandriva 2006
-  libunixODBC1-devel-2.2.11-14mdv2007.0.i586.rpm

and current Harbour devel branch build entirely under Mandriva 2007 
(Free) without troubles/missings

Gracias,
David Macias


From dmacias at mail.udg.mx  Sun Mar 25 07:50:49 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sun Mar 25 07:50:51 2007
Subject: [Harbour] Re: Problems to build Harbour
In-Reply-To: <20070324160015.15C3D1E6829@antivirus2.noc.udg.mx>
References: <20070324160015.15C3D1E6829@antivirus2.noc.udg.mx>
Message-ID: <46066219.1000802@mail.udg.mx>

Przemek:


> I do not know OS2 but if it's possible to detect the version using some
> environment variable then we can cover these definition in some if statement.
> Can you check which environment variables are set in your OS2?
>
>   
Results of SET are included below, with gcc environment set
Seem that does not exist any value useful for set difference between 4.0 
and 4.5 versions

Perhaps
    OS=ecs
but it apply to difference between OS/2 ( 4.5 and below ) and 
eComStation (4.5) and not between 4.0 and 4.5 versions

> BTW I've just checked that OpenWatcom uses only (*tcp_h_errno1()) as h_errno
> so probably by default we should not set TCPV40HDRS. If it will not be
> possible to detect OS2 version using environment variables then I'll remove
> this definition from config\os2\gcc.cf and users with older OS2 version
> will have to set it using C_USR envvar, f.e.: SET C_USR=-DTCPV40HDRS
>
>   
I am agree,
but, "users with older OS2 version" (4.0 and below) will be agree ?   :-)

Gracias,
David Macias


WP_OBJHANDLE=133530
AUTOSTART=PROGRAMS,TASKLIST,FOLDERS
C1=SDDGRADD
COMSPEC=E:\OS2\CMD.EXE
DEVICEFONTDISABLED=NO
DIRCMD=/V
DISPLAYTYPE=VGA
DLSINI=E:\IBMLAN\NETPROG\NETGUI.INI
ENH_STRETCH=NO
ETC=E:\MPTN\ETC
GLOSSARY=E:\OS2\HELP\GLOSS;
GRADD_CHAINS=C1
GREEXT=SDDGREXT
HOME=E:\HOME\DEFAULT
HOSTNAME=DAVID1
IKEYMAN40_HOME=E:\IBMGSK40
IKEYMAN50_HOME=E:\IBMGSK50
IKEYMAN_HOME=E:\IBMGSK
INIT_FILE_NAMES=netgui
INIT_FILE_RANGES=200
IPF_KEYS=SBCS
JAVA_HIGH_MEMORY=1
KEYS=ON
LANG=en_US
LANINSTEP=S:\cid\server\IBMLS
LOGFILES=E:\var\log
MMBASE=E:\MMOS2;
MMSTREAM=/S:64 /P:64 /H:256 /Q:1024 /E:1024
MMYIELD=10
MOZILLA_HOME=E:\HOME\DEFAULT
NCDEBUG=4000
NOLARGENTEXEICON=1
OS2_SHELL=E:\OS2\CMD.EXE
OS=ecs
OSDIR=E:\ecs
PROGRAMS=E:\PROGRAMS
PROMPT=[$p]
RESTARTOBJECTS=STARTUPFOLDERSONLY,REBOOTONLY
RUNWORKPLACE=E:\OS2\PMSHELL.EXE
SCCANBENUKED=ON
SCKILLFEATUREENABLED=ON
SHELLHANDLESINC=20
SOMDDIR=E:\OS2\ETC\DSOM
SOMIR=E:\OS2\ETC\SOM.IR;E:\OS2\ETC\WPSH.IR;E:\OS2\ETC\WPDSERV.IR;E:\OS2\ETC\REXX.IR;
SYSTEM_INI=E:\OS2\OS2SYS.INI
TCPLANG=en_US
TEMP=E:\var\temp
TIMESYNC=0
TMP=E:\var\temp
TZ=CST6CDT,4,1,0,7200,10,-1,0,7200,3600
UNZIPOPT=-C
USER_INI=E:\OS2\OS2.INI
USE_HOSTS_FIRST=1
VCFG_NO_DDC=TRUE
VIDEO_DEVICES=VIO_SVGA
VIO_SVGA=DEVICE(BVHVGA,BVHSVGA)
WPS_COMMUNICATION=YES
HELP=E:\ecs\help;E:\VT\SPCH_RO\HELP;E:\MPTN;E:\MPTN\HELP;E:\OS2\HELP;E:\ecs\system\ewps\help;E:\IBMLAN\NETPROG;E:\TCPIP\HELP;E:\MMOS2\HELP;E:\WarpZip;
ULSPATH=E:\LANGUAGE
BOOKSHELF=E:\IBMLAN\NETPROG;E:\OS2\BOOK;E:\ecs\book;E:\TCPIP\HELP;E:\MMOS2;
EPMPATH=E:\OS2\APPS;
NLSPATH=E:\MPTN\MSG\NLS\%N;E:\TCPIP\msg\ENUS850\%N;
MOZ_PLUGIN_PATH=E:\PROGRAMS\MOZ_PLUG
DMIPATH=E:\DMISL\BIN
CLASSPATH=E:\os2\javaapps\lvmgui.zip;E:\TCPIP\java;
NWDBPATH=E:\IBMLAN\NETPROG
DSPPATH=E:\MMOS2\DSP;
SPCH_RUN=E:\VT\SPCH_RUN
SPCH_RO=E:\VT\SPCH_RO
SPCH_RW=E:\VT\SPCH_RW
SPCH_BIN=E:\VT\SPCH_BIN
SPCH_PATH=E:\VT\SPCH_RO\LANGS\%L\POOLS
SPCH_TRN=E:\VT\SPCH_BSF
WORKPLACE__PROCESS=NO
WORKPLACE_PRIMARY_CP=?
WORKPLACE_NATIVE=0
4OS2TEST_ENV=@eval[2 + 2]
PATH_EMXPGCC=E:\usr
CCENV=EMX
BUILD_ENV=EMX
BUILD_PLATFORM=OS2
DPATH=E:\usr\lib;E:\IBMLAN\NETPROG;E:\VT\SPCH_BIN;E:\IBMLAN;E:\MUGLIB;E:\ECS\LANG;E:\MPTN;E:\IBMCOM;E:\OS2;E:\OS2\SYSTEM;E:\OS2\MDOS\WINOS2;E:\OS2\INSTALL;E:\;E:\OS2\BITMAP;E:\OS2\MDOS;E:\OS2\APPS;E:\MMOS2;E:\MMOS2\INSTALL;
PATH=E:\usr\i386-pc-os2-emx\bin;E:\usr\bin;E:\IBMLAN\NETPROG;E:\VT\SPCH_BIN;E:\MUGLIB;E:\PROGRAMS\NETSCAPE\PROGRAM;E:\ECS\BIN;E:\IBMGSK50\BIN;E:\IBMGSK40\BIN;E:\IBMGSK\BIN;E:\MPTN\BIN;E:\TCPIP\BIN;E:\IBMCOM;E:\OS2;E:\OS2\SYSTEM;E:\OS2\MDOS\WINOS2;E:\OS2\INSTALL;E:\;E:\OS2\MDOS;E:\OS2\APPS;E:\EMX\BIN;E:\PROGRAMS\JAVA142\BIN;E:\MMOS2\FREEDB;E:\MMOS2;E:\MMOS2\MMPLAYER;
C_INCLUDE_PATH=E:/usr/lib/gcc-lib/i386-pc-os2-emx/3.3.5/include;E:/usr/include;
CPLUS_INCLUDE_PATH=E:/usr/include/c++/3.3.5/;E:/usr/include/c++/3.3.5/i386-pc-os2-emx;E:/usr/include/c++/3.3.5/backward;E:/usr/include;
LIBRARY_PATH=E:/usr/lib/gcc-lib/i386-pc-os2-emx/3.3.5;E:/usr/lib;
INFOPATH=E:/usr/info;
PROTODIR=E:/usr/include/c++/gen
BEGINLIBPATH=E:\usr\i386-pc-os2-emx\lib;E:\usr\lib;

From lorenzo.fiorini at gmail.com  Mon Mar 26 06:35:18 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 26 06:35:22 2007
Subject: [Harbour] Newline in strings difference between Harbour and
	xHarbour
In-Reply-To: <9257026e0703231112g33e6cf57o15559c27bba429bd@mail.gmail.com>
References: <9257026e0703230340u4f9dd122xcd84cfa177deedc2@mail.gmail.com>
	<20070323164849.GA18511@localhost.localdomain>
	<9257026e0703231112g33e6cf57o15559c27bba429bd@mail.gmail.com>
Message-ID: <9257026e0703260335l5ce83794ib31c7eb4e5fa7021@mail.gmail.com>

On 3/23/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

> Could you consider other possibilities like using special eol marker (
> like ;; ), extended strings or PP to have a "clean" syntax or should I
> start rewrite my code :)

Sorry if I reply to myself but I'd like to say that I've read previous
threads about [] issue and I've started to "fix" my code using it.
Since it works also in xHarbour "old" PP it is the easiest path for me.

May I ask to keep this "feature" in the future or at least allow to
enable with a define?

regards,
Lorenzo Fiorini
From antonioharbour at gmail.com  Tue Mar 27 07:39:51 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Mar 26 07:40:05 2007
Subject: [Harbour] CDX error on an old build
Message-ID: <4607b10b.2cb01edb.3a97.ffff88ef@mx.google.com>

Przemek,

Testing this code:

   USE ( CurDir() + "\Customer" ) VIA "DBFCDX"
   INDEX ON Customer->Last TO ( CurDir() + "\LAST" )

On 2006-10-07 04:25 UTC+0200 Przemyslaw Czerpak changelog, we get an
internal error:

Hb_cdxIndexCheckVersion: Read error on index heading page

Any hints about how to quick fix it without a complete upgrade to the recent
build ? Many thanks,

Regards,

Antonio

From gerrylist at drouillard.ca  Mon Mar 26 09:18:20 2007
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Mon Mar 26 09:18:59 2007
Subject: [Harbour] Re: Harbour under Linux Mandriva 2007
In-Reply-To: <46065E77.6020703@mail.udg.mx>
References: <20070324160015.15C3D1E6829@antivirus2.noc.udg.mx>
	<46065E77.6020703@mail.udg.mx>
Message-ID: <4607C81C.6050009@drouillard.ca>

David Arturo Macias Corona wrote:
> Przemek:
> 
>> You do not have slang devel and unix-odbc devel packages installed
>> so it's expected behavior.
>>
>>   
> 
> Mandriva 2007 Free does not include both, just include:
> - libslang1-1.4.9-8mdk
> - libunixODBC1-2.2.11-14mdv2007.0
> 
> 
> Searching in Internet, seem that slang-devel does not exist for Mandriva 
> 2007
> 
http://ftp.sunet.se/pub/os/Linux/distributions/Mandriva/official/2007.0/i586/media/main/release/

-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.ca
From lorenzo.fiorini at gmail.com  Mon Mar 26 11:41:58 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 26 11:42:33 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal if
	'index' is new
Message-ID: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>

It gives Bound array/1133 error if 'index' does not exist.

xHarbour "add" xVal in the 'index'.

If 'index' already exist it works.

Is it supposed to work in this way?

regards,
Lorenzo Fiorini
From lorenzo.fiorini at gmail.com  Mon Mar 26 13:03:32 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 26 13:03:36 2007
Subject: [Harbour] Re: Runtime error with syntax hHash[ 'index' ] := xVal if
	'index' is new
In-Reply-To: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
Message-ID: <9257026e0703261003kc2d30beqa5324a73dc84520b@mail.gmail.com>

On 3/26/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

> Is it supposed to work in this way?

It seems that xHarbour has HB_HASH_AUTOADD true by default.

How can I get the same behaviour?

regards,
Lorenzo Fiorini
From i at kevincarmody.com  Mon Mar 26 13:04:44 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Mon Mar 26 13:03:44 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal
	if	'index' is new
In-Reply-To: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
Message-ID: <4607FD2C.4010802@kevincarmody.com>

Lorenzo,

Yes, this is the way hashes are supposed to work.  If you are not sure whether 
an index is in the hash, you should test for it first with the IN operator or 
HHASKEY().  Below are fragments from a program I recently developed that makes 
heavy use of hashes.

LOCAL cTab := CHR(9)
LOCAL hTransChar := { ;
   cTab  => {1,       ,       }, ;
   ' '   => {1,       ,       }, ;
   'a'   => {1,       ,       }, ;
   '+a'  => {2,       ,       }, ;
   'A'   => {3, 0x0101,       }, ;
   '+A'  => {3, 0x0100,       }, ;
   ...
   '8'   => {1,       ,       }, ;
   '9'   => {1,       ,       }  }

...

IF HHASKEY(hTransChar, cStr)
   aChar := hTransChar[cStr]
   nType := aChar[1]
   nCode := aChar[2]
   ...
ELSE
   nType := 0
   nCode := 0
END

...

Instead of

IF HHASKEY(hTransChar, cStr)

I could also have written

IF cStr IN hTransChar

Kevin


Lorenzo Fiorini wrote:
> It gives Bound array/1133 error if 'index' does not exist.
> 
> xHarbour "add" xVal in the 'index'.
> 
> If 'index' already exist it works.
> 
> Is it supposed to work in this way?
> 
> regards,
> Lorenzo Fiorini
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
From lorenzo.fiorini at gmail.com  Mon Mar 26 13:12:40 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 26 13:12:44 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal if
	'index' is new
In-Reply-To: <4607FD2C.4010802@kevincarmody.com>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
	<4607FD2C.4010802@kevincarmody.com>
Message-ID: <9257026e0703261012t635c74a6p89e975f7ace23fa4@mail.gmail.com>

On 3/26/07, Kevin Carmody <i@kevincarmody.com> wrote:

> Yes, this is the way hashes are supposed to work.  If you are not sure whether
> an index is in the hash, you should test for it first with the IN operator or
> HHASKEY().  Below are fragments from a program I recently developed that makes
> heavy use of hashes.

Thanks Kevin, I know that I should check the key before access it, but
the "problem" is about to create the key or better to add a key to an
existing hash.

regards,
Lorenzo Fiorini
From druzus at priv.onet.pl  Mon Mar 26 13:12:24 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 26 13:13:00 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal if
	'index' is new
In-Reply-To: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
Message-ID: <20070326171224.GA25611@localhost.localdomain>

On Mon, 26 Mar 2007, Lorenzo Fiorini wrote:
> It gives Bound array/1133 error if 'index' does not exist.
> xHarbour "add" xVal in the 'index'.
> If 'index' already exist it works.
> Is it supposed to work in this way?

Yes. It's auto add feature and it can be controlled by
    HB_HAUTOADD( <hValue>, <lOnOff> ) -> <lPrevSetting>
function or xHarbour compatible: HSETAUTOADD()/HGETAUTOADD()
By default in new Hash item it's set to FALSE in Harbour and to TRUE
in xHarbour. If you think it's better to set AUTOADD to TRUE by
default then I can change it but please note that in Harbour autoadd
feature works also in access operations not only in assign like in
xHarbour and you can define default value by
    HB_HDEFAULT( <hValue>, <xDefault> ) -> <xPrevDefault>
(or HDEFAULT())

It allows to create code like:

   hValue := {=>}
   HB_HAUTOADD( hValue, .t. )
   HB_HDEFAULT( hValue, 0 )
   dbEval( {|| hValue[ field->ARTICULE ] += field->QUANTITY } )
   hEval( hValue, { |art, qty| qout( art, qty ) } )

or:

   hValue := {=>}
   HB_HAUTOADD( hValue, .t. )
   HB_HDEFAULT( hValue, { 0, 0 } )
   dbEval( {|| hValue[ field->ARTICULE, 1 ] += field->QUANTITY, ;
               hValue[ field->ARTICULE, 2 ] += field->QUANTITY * field->PRICE } )
   hEval( hValue, { |art, aVal| qout( art, aVal[ 1 ], aVal[ 2 ] ) } )

Next difference between Harbour and xHarbour in Hash management is passing
hash items by reference just like array items, try this code in Harbour and
xHarbour to it:
   proc main()
      local h:={1=>100}, a:={100}
      p(@h[1],@a[1])
      ? h[1], a[1]
   return
   proc p(v1,v2)
      v1+=1000
      v2+=1000
   return

In Harbour FOR EACH has native support for Hash items not emulated
by some object values like in xHarbour. This code should show it:

   proc main()
      local v, h:={"a"=>1.000,"b"=>2.000,"c"=>3.000}
      heval( h, { |k,v,i| qout( k, v, i ) } ); ?
      for each v in h
         ? valtype(v), v:classname
   #ifdef __XHARBOUR__
         ?? " =>", v, v:key, v:value, HB_EnumIndex()
         v:value += 0.123
   #else
         ?? " =>", v, v:__enumKey(), v:__enumValue(), v:__enumIndex()
         v += 0.123
   #endif
      next
      ?; heval( h, { |k,v,i| qout( k, v, i ) } ); ? "."
   return

In Harbour Hash items support KEYS and VALUES messages like in xHarbour
but you cannot access/assign hash items using messages.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar 26 13:22:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 26 13:22:39 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal
	if	'index' is new
In-Reply-To: <4607FD2C.4010802@kevincarmody.com>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
	<4607FD2C.4010802@kevincarmody.com>
Message-ID: <20070326172204.GB25611@localhost.localdomain>

On Mon, 26 Mar 2007, Kevin Carmody wrote:
> Yes, this is the way hashes are supposed to work.  If you are not sure 
> whether an index is in the hash, you should test for it first with the IN 
> operator or HHASKEY().

In xHarbour IN operator is translated to $ by lexer so in xHarbour
there is not separate IN operator but only $ is extended to work
with array and hash items.
In Harbour $ is also extended if you compile HVM with HB_COMPAT_XHB.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar 26 13:22:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 26 13:23:22 2007
Subject: [Harbour] Newline in strings difference between Harbour and
	xHarbour
In-Reply-To: <9257026e0703260335l5ce83794ib31c7eb4e5fa7021@mail.gmail.com>
References: <9257026e0703230340u4f9dd122xcd84cfa177deedc2@mail.gmail.com>
	<20070323164849.GA18511@localhost.localdomain>
	<9257026e0703231112g33e6cf57o15559c27bba429bd@mail.gmail.com>
	<9257026e0703260335l5ce83794ib31c7eb4e5fa7021@mail.gmail.com>
Message-ID: <20070326172247.GC25611@localhost.localdomain>

On Mon, 26 Mar 2007, Lorenzo Fiorini wrote:
> Sorry if I reply to myself but I'd like to say that I've read previous
> threads about [] issue and I've started to "fix" my code using it.
> Since it works also in xHarbour "old" PP it is the easiest path for me.
> May I ask to keep this "feature" in the future or at least allow to
> enable with a define?

I will remember about it.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Mar 26 13:25:57 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 26 13:26:01 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal if
	'index' is new
In-Reply-To: <20070326171224.GA25611@localhost.localdomain>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
	<20070326171224.GA25611@localhost.localdomain>
Message-ID: <9257026e0703261025u7f46f68dudde44b00e1ec3e8f@mail.gmail.com>

On 3/26/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> If you think it's better to set AUTOADD to TRUE by
> default then I can change it but please note that in Harbour autoadd
> feature works also in access operations not only in assign like in
> xHarbour and you can define default value by
>     HB_HDEFAULT( <hValue>, <xDefault> ) -> <xPrevDefault>
> (or HDEFAULT())

I've a lot of code to already written so I'd really like to have
AUTOADD true by default or at least a global set to choose it.

> It allows to create code like:
>
>    hValue := {=>}
>    HB_HAUTOADD( hValue, .t. )
>    HB_HDEFAULT( hValue, 0 )
>    dbEval( {|| hValue[ field->ARTICULE ] += field->QUANTITY } )
>    hEval( hValue, { |art, qty| qout( art, qty ) } )

Great.

regards,
Lorenzo Fiorini
From lorenzo.fiorini at gmail.com  Mon Mar 26 13:28:33 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 26 13:28:40 2007
Subject: [Harbour] Newline in strings difference between Harbour and
	xHarbour
In-Reply-To: <20070326172247.GC25611@localhost.localdomain>
References: <9257026e0703230340u4f9dd122xcd84cfa177deedc2@mail.gmail.com>
	<20070323164849.GA18511@localhost.localdomain>
	<9257026e0703231112g33e6cf57o15559c27bba429bd@mail.gmail.com>
	<9257026e0703260335l5ce83794ib31c7eb4e5fa7021@mail.gmail.com>
	<20070326172247.GC25611@localhost.localdomain>
Message-ID: <9257026e0703261028t487223abv9232b1ffaeab916c@mail.gmail.com>

On 3/26/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
>
> I will remember about it.

Many thanks.

regards,
Lorenzo Fiorini
From druzus at priv.onet.pl  Mon Mar 26 13:34:26 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 26 13:35:02 2007
Subject: [Harbour] CDX error on an old build
In-Reply-To: <4607b10b.2cb01edb.3a97.ffff88ef@mx.google.com>
References: <4607b10b.2cb01edb.3a97.ffff88ef@mx.google.com>
Message-ID: <20070326173426.GA27474@localhost.localdomain>

On Tue, 27 Mar 2007, Antonio Linares wrote:
> Przemek,
> Testing this code:
>    USE ( CurDir() + "\Customer" ) VIA "DBFCDX"
>    INDEX ON Customer->Last TO ( CurDir() + "\LAST" )
> On 2006-10-07 04:25 UTC+0200 Przemyslaw Czerpak changelog, we get an
> internal error:
> Hb_cdxIndexCheckVersion: Read error on index heading page
> Any hints about how to quick fix it without a complete upgrade to the recent
> build ? Many thanks,

There was no modification in CDX code since 2006-10-07 which can change it
so I have no idea why you want to upgrade to recent build.

best regards,
Przemek
From antonioharbour at gmail.com  Tue Mar 27 13:45:22 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Mar 26 13:45:34 2007
Subject: [Harbour] CDX error on an old build
In-Reply-To: <20070326173426.GA27474@localhost.localdomain>
Message-ID: <460806b8.0506bf1e.3a97.ffffc6b5@mx.google.com>

Przemek, 

>
There was no modification in CDX code since 2006-10-07 which can change it
so I have no idea why you want to upgrade to recent build.
>

Ok, and any suggestion about where the error may come from ? Thanks,

Regards,

Antonio

From druzus at priv.onet.pl  Mon Mar 26 14:00:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 26 14:00:36 2007
Subject: [Harbour] CDX error on an old build
In-Reply-To: <460806b8.0506bf1e.3a97.ffffc6b5@mx.google.com>
References: <20070326173426.GA27474@localhost.localdomain>
	<460806b8.0506bf1e.3a97.ffffc6b5@mx.google.com>
Message-ID: <20070326180001.GA27757@localhost.localdomain>

On Tue, 27 Mar 2007, Antonio Linares wrote:
> Ok, and any suggestion about where the error may come from ? Thanks,

See the code:
   if( hb_fsSeek( pIndex->hFile, 0x04, FS_SET ) != 0x04 ||
       hb_fsRead( pIndex->hFile, byBuf, 8 ) != 8 )

so it's corrupted .cdx file smaller then 12 bytes (maybe it can be
produced by some nested RT errors in user application - I still haven't
cleaned CDX code yet to protect against some strange .prg code) or serious
problem with file system or network/file server.

best regards,
Przemek
From i at kevincarmody.com  Mon Mar 26 14:04:11 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Mon Mar 26 14:03:10 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <20070316122556.GA12039@localhost.localdomain>
References: <20070316122556.GA12039@localhost.localdomain>
Message-ID: <46080B1B.9080204@kevincarmody.com>

Przemek,

Your original message is a little old, but I want to say that I'm glad to see 
that you are adding hashes to Harbour.

I recently developed a fairly large application that makes heavy use of hashes. 
  Based on my experience, I would like to request the following.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

1. Make sure the 127 index limit bug doesn't migrate into Harbour.  Description: 
   In xHarbour, a hash constant containing more than 127 keys results in not 
found errors on some or all of the keys.  There is no analogous problem with 
arrays.    I reported this bug a few weeks ago to the xHarbour forum, but it was 
ignored.  See below for an example.

2. Do partitioning automatically and ignore partitioning functions. 
Justification:  Hashes are like indexed databases, and arrays are like unindexed
databases.  No RDD requires or AFAIK allows the user to perform configurations 
like this.  Indexes are always optimized *automatically* by the RDD.  Arrays 
also do not require or allow any kind of configuration of this kind, even if 
they are huge.  Hash functionality such as this should be hidden from the user.

3. Make .IN. synonymous with IN operator.  Justification:  Clipper operators 
containing alpha characters are delimited by periods, so they are not confused 
with variables.  This is a convention going back to dBase, Basic, and Fortran.

4. Add HBUILD(hDest, aKeys, aValues) to make or extend a hash from parallel 
arrays of keys and values.  This would be the inverse of HGETKEYS() and 
HGETVALUES().

5. Make HDEL(hHash, ...), HSETVALUEAT(hHash, ...), and HDELAT(hHash, ...), 
HEVAL(hHash, ...), and HALLOCATE(hHash, ...) return hHash instead of NIL.

6. Add an array function AHASVAL(aArray, xVal) synonymous with xVal IN aArray, 
analogous to HHASVAL().

7. Make HSIZE() synonymous with HALLOCATE(), analogous to ASIZE().

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Example of the 127 index limit bug in xHarbour:

LOCAL hTrans1 := { ;
     0 => 'Val   0', ;
     1 => 'Val   1', ;
     2 => 'Val   2', ;
     ...
   255 => 'Val 255'  }

LOCAL hTrans2 := { ;
     0 => 'Val   0', ;
     1 => 'Val   1', ;
     2 => 'Val   2', ;
     ...
   126 => 'Val 126'  }

LOCAL hTrans3 := { ;
   127 => 'Val 127', ;
     ...
   253 => 'Val 253'  }

LOCAL hTrans4 := { ;
   254 => 'Val 254', ;
   255 => 'Val 255'  }

LOCAL hTrans5 := hTrans2 + hTrans3 + hTrans4
LOCAL hTrans6 := {=>}
LOCAL hTrans7 := {=>}

HEVAL(hTrans1, {|nKey, cVal| hTrans6 += {nKey => cVal}})

FOR nPos := 0 TO 255
   hTrans7 += {nPos => 'Value ' + STR(nPos,3)}
NEXT

Results:

33 IN hTrans1 returns .F. - should return .T.
33 IN hTrans2 returns .T.
33 IN hTrans5 returns .T.
33 IN hTrans6 returns .F. - should return .T.
33 IN hTrans7 returns .T.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Thanks for your great work.

Kevin


Przemyslaw Czerpak wrote:
> Hi All,
> 
> What is the final conclusion about HASH ITEMs syntax?
> 
> I'll commit xHarbour compatible version with indexes like for arrays []
> ( f.e.: hValue[ "StrKey" ] ) and => as bound operator in explicit hash
> creation ( f.e.: { "StrKey" => 123.456, date() => .t. } ) but it will be
> covered by HB_COMPAT_XHB macro.
> 
> Do we plan to make Harbour native HASHes syntax differ?
> Ryszard?
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From dbtopas at dbtopas.lt  Mon Mar 26 14:06:56 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Mar 26 14:04:53 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal
	if	'index' is new
In-Reply-To: <20070326171224.GA25611@localhost.localdomain>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
	<20070326171224.GA25611@localhost.localdomain>
Message-ID: <46080BC0.6070606@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Yes. It's auto add feature and it can be controlled by
>     HB_HAUTOADD( <hValue>, <lOnOff> ) -> <lPrevSetting>
> function or xHarbour compatible: HSETAUTOADD()/HGETAUTOADD()
> By default in new Hash item it's set to FALSE in Harbour and to TRUE
> in xHarbour. If you think it's better to set AUTOADD to TRUE by
> default then I can change it but please note that in Harbour autoadd
> feature works also in access operations not only in assign like in
> xHarbour and you can define default value by
>     HB_HDEFAULT( <hValue>, <xDefault> ) -> <xPrevDefault>
> (or HDEFAULT())


Hello,


I've not understood this: "not only in assign like in xHarbour". What 
does it mean "autoadd in assign"? If I do assign:
    aHash[ "key" ] := value
then it is NOT AUTOadd, I'd rather call it explict add. I understand 
autoadd, as feature when (key,value) pair is added in code like this:
    aHash := {=>}
    HB_HAUTOADD(aHash, .T.)
    HB_HDEFAULT(aHash, "default value")
    ? aHash[ "key" ]
i.e. on access.


>> If you think it's better to set AUTOADD to TRUE by
>> default then I can change it but please note that in Harbour autoadd
>> feature works also in access operations not only in assign like in
>> xHarbour and you can define default value by
>>     HB_HDEFAULT( <hValue>, <xDefault> ) -> <xPrevDefault>
> 
> I've a lot of code to already written so I'd really like to have
> AUTOADD true by default or at least a global set to choose it. 

If setting autoadd default to true means, that code:
     aHash := {=>}
     ? aHash[ "key" ]
does not generate runtime error and "key" is autoadded to hash, so I 
think such behaviour is wrong. It will hide many bugs.


For me, hash is form of array, what can be indexed with string indexes. 
I use "a" prefix for hashes, but not "h". "h" is for handle, so hFile is 
file handle for sure, but not a hash.
Array has autoadd false, so I expect hashes also by default. If we want 
to change array autoadd behaviour, we can make functions HB_AAUTOADD(), 
HB_ADEFAULT():
    aArray := {}
    HB_AAUTOADD(aArray, .T.)
    HB_ADEFAULT(aArray, 0)
    aArray[ 10 ] := 15
    aArray[ 5 ] += 3
    ? LEN(aArray), aArray[ 1 ], aArray[ 5 ], aArray[ 10 ] // 10 0 3 15

But I still expect runtime error in code:
    aHash := {=>}
    ? aHash[ "key" ]
for the same reasons as / (just like in)
    aArray := {}
    ? aArray[ 5 ]


Best regards,
Mindaugas
From druzus at priv.onet.pl  Mon Mar 26 15:01:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 26 15:01:45 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <46080B1B.9080204@kevincarmody.com>
References: <20070316122556.GA12039@localhost.localdomain>
	<46080B1B.9080204@kevincarmody.com>
Message-ID: <20070326190109.GA28539@localhost.localdomain>

On Mon, 26 Mar 2007, Kevin Carmody wrote:
> 1. Make sure the 127 index limit bug doesn't migrate into Harbour.  
> Description: In xHarbour, a hash constant containing more than 127 keys 
>   results in not found errors on some or all of the keys.  There is no 
> analogous problem with arrays.    I reported this bug a few weeks ago to 
> the xHarbour forum, but it was ignored.  See below for an example.

This problem is caused by xHarbour limitations in passed parameters due
to hacked method of implementing variable number of parameters. This bug
can be exploited in xHarbour by any function which receives more then 255
parameters. When you are creating HASH item by {k1=>v1, ..., kN=>vN}
xHarbour executes function HASH() with k1,v1, ..., kN,vN parameters and
because number of parameters greater then 255 means in xHarbour function
with variable number of parameters then you have unexpected results.
I implemented HASH code in Harbour from scratch - only list of .prg
functions used for HASH items with their RT error codes is borrowed
from xHarbour for compatibility so I should not inherit any xHarbour
bugs like the above or:
    proc main()
       local h:={=>,=>}
    return
or:
    proc main()
       local h:={1=>100}, a:={100}
       p(@h[1],@a[1])
       ? h[1], a[1]
       ? "."
    return
    proc p(v1,v2)
       v1+=1000
       v2+=1000
    return

etc, but it's possible to I created some new ones ;-) Please inform me
about any problems you will find in Harbour hash items implementation.

> 2. Do partitioning automatically and ignore partitioning functions. 
> Justification:  Hashes are like indexed databases, and arrays are like 
> unindexed
> databases.  No RDD requires or AFAIK allows the user to perform 
> configurations like this.  Indexes are always optimized *automatically* by 
> the RDD.  Arrays also do not require or allow any kind of configuration of 
> this kind, even if they are huge.  Hash functionality such as this should 
> be hidden from the user.

Yes of course. Such things should never be a part of user API. There are
no HSETPARTITION()/HGETPARTITION() in Harbour and I do not plan to add them.
Internal hash representation is not sth what should be changed or controlled
by user.

> 3. Make .IN. synonymous with IN operator.  Justification:  Clipper 
> operators containing alpha characters are delimited by periods, so they are 
> not confused with variables.  This is a convention going back to dBase, 
> Basic, and Fortran.

Yes - .IN. does not break existing code like pure IN, HAS or LIKE but $
works exactly like IN so do we really need .IN.?

> 4. Add HBUILD(hDest, aKeys, aValues) to make or extend a hash from parallel 
> arrays of keys and values.  This would be the inverse of HGETKEYS() and 
> HGETVALUES().

You can easy create it as:

    FUNC HBUILD( hDest, aKeys, aValues )
    LOCAL key, val
    FOR EACH key, val IN aKeys, aValues
       HB_HSET( hDest, key, val )
    NEXT
    RETURN hDest

> 5. Make HDEL(hHash, ...), HSETVALUEAT(hHash, ...), and HDELAT(hHash, ...), 
> HEVAL(hHash, ...), and HALLOCATE(hHash, ...) return hHash instead of NIL.

Reasonable, they should work in similar way to corresponding A*() functions
which returns array. I planed to make it after first reports from users to
not introduce additional incompatibilities to xHarbour in basic tests.

> 6. Add an array function AHASVAL(aArray, xVal) synonymous with xVal IN 
> aArray, analogous to HHASVAL().

Victor will not like it ;-)
You can easy create it as:

    FUNC AHASVAL( aArray, xVal )
    RETURN ASCAN( aArray, xVal,,, .t. ) != 0

> 7. Make HSIZE() synonymous with HALLOCATE(), analogous to ASIZE().

Yes, it should be called [HB_]HSIZE() and used HALLOCATE() only in XHB
compat mode. Anyhow this function will lost its functionality and will
be only helper function when I'll change internal hash representation.
It's similar situation as with H[SG]ETPARTITION() so I'm not sure I should
change the name - I'll think about it. I added [HB_]HALLOCATE only due to
interaction with speed in current implementation.

best regards,
Przemek
From druzus at priv.onet.pl  Mon Mar 26 15:42:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Mar 26 15:42:45 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal
	if	'index' is new
In-Reply-To: <46080BC0.6070606@dbtopas.lt>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
	<20070326171224.GA25611@localhost.localdomain>
	<46080BC0.6070606@dbtopas.lt>
Message-ID: <20070326194209.GB28539@localhost.localdomain>

On Mon, 26 Mar 2007, Mindaugas Kavaliauskas wrote:
> >Yes. It's auto add feature and it can be controlled by
> >    HB_HAUTOADD( <hValue>, <lOnOff> ) -> <lPrevSetting>
> >function or xHarbour compatible: HSETAUTOADD()/HGETAUTOADD()
> >By default in new Hash item it's set to FALSE in Harbour and to TRUE
> >in xHarbour. If you think it's better to set AUTOADD to TRUE by
> >default then I can change it but please note that in Harbour autoadd
> >feature works also in access operations not only in assign like in
> >xHarbour and you can define default value by
> >    HB_HDEFAULT( <hValue>, <xDefault> ) -> <xPrevDefault>
> >(or HDEFAULT())
> I've not understood this: "not only in assign like in xHarbour". What 
> does it mean "autoadd in assign"? If I do assign:
>    aHash[ "key" ] := value
> then it is NOT AUTOadd,

No - it is added in both Harbour and xHarbour when HASH item has autoadd
flag set. Just make a test in xHarbour where AUTOADD is set by default.

> I'd rather call it explict add.

It also can confused in some cases, f.e.:
    aHash[ "key" ] += value

> I understand 
> autoadd, as feature when (key,value) pair is added in code like this:
>    aHash := {=>}
>    HB_HAUTOADD(aHash, .T.)
>    HB_HDEFAULT(aHash, "default value")
>    ? aHash[ "key" ]
> i.e. on access.

This code works only in Harbour. In xHarbour it will not work - just try.

> >>If you think it's better to set AUTOADD to TRUE by
> >>default then I can change it but please note that in Harbour autoadd
> >>feature works also in access operations not only in assign like in
> >>xHarbour and you can define default value by
> >>    HB_HDEFAULT( <hValue>, <xDefault> ) -> <xPrevDefault>
> >I've a lot of code to already written so I'd really like to have
> >AUTOADD true by default or at least a global set to choose it. 
> If setting autoadd default to true means, that code:
>     aHash := {=>}
>     ? aHash[ "key" ]
> does not generate runtime error and "key" is autoadded to hash,

In Harbour it is, in xHarbour always RT error is generated.

> so I think such behaviour is wrong. It will hide many bugs.

Yes and it was the reason I chose FALSE as default without checking
xHarbour behavior. I thought it was also FALSE in xHarbour and I was
surprise seeing Lorenzo message but I've tested it and AUTOADD is
enabled by default :-(
I agree it may cause bugs in code and should be enabled only when
user explicitly requests about it. Maybe it should be covered by
HB_COMPAT_XHB macro but it will have the same bad side effect as
using global SETtings - it will interact with 3-rd party code
when two libraries expect different default behavior.
The problem is that people already have code which expects xHarbour
default behavior.

> For me, hash is form of array, what can be indexed with string indexes. 
> I use "a" prefix for hashes, but not "h". "h" is for handle, so hFile is 
> file handle for sure, but not a hash.
> Array has autoadd false, so I expect hashes also by default. If we want 
> to change array autoadd behaviour, we can make functions HB_AAUTOADD(), 
> HB_ADEFAULT():
>    aArray := {}
>    HB_AAUTOADD(aArray, .T.)
>    HB_ADEFAULT(aArray, 0)
>    aArray[ 10 ] := 15
>    aArray[ 5 ] += 3
>    ? LEN(aArray), aArray[ 1 ], aArray[ 5 ], aArray[ 10 ] // 10 0 3 15
> But I still expect runtime error in code:
>    aHash := {=>}
>    ? aHash[ "key" ]
> for the same reasons as / (just like in)
>    aArray := {}
>    ? aArray[ 5 ]

Arrays needs continuous indexes and this is the main difference between
arrays and hashes not the fact that you can use strings as keys so
autoadd implemented for arrays will never be the same as for hashes,
f.e.:
    aArray := {}
    HB_AAUTOADD(aArray, .T.)
    HB_ADEFAULT(aArray, 0)
    aArray[ 5 ] += 3
    ? LEN(aArray)

    aHash := {=>}
    HB_HAUTOADD(aArray, .T.)
    HB_HDEFAULT(aArray, 0)
    aArray[ 5 ] += 3
    ? LEN(aArray)

will never give comparable results so I do not agree that we have to
implement also HB_AAUTOADD()/HB_ADEFAULT().

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Mar 26 16:08:03 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Mar 26 16:08:07 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal if
	'index' is new
In-Reply-To: <20070326194209.GB28539@localhost.localdomain>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
	<20070326171224.GA25611@localhost.localdomain>
	<46080BC0.6070606@dbtopas.lt>
	<20070326194209.GB28539@localhost.localdomain>
Message-ID: <9257026e0703261308h5f59605ar38fadfe82f5e95d5@mail.gmail.com>

On 3/26/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Yes and it was the reason I chose FALSE as default without checking
> xHarbour behavior. I thought it was also FALSE in xHarbour and I was
> surprise seeing Lorenzo message but I've tested it and AUTOADD is
> enabled by default :-(

Unfortunately without AUTOADD, porting hash code from xHarbour can be
really a problem.

regards,
Lorenzo Fiorini
From antonioharbour at gmail.com  Sun Mar 25 19:24:32 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Mar 26 19:24:42 2007
Subject: [Harbour] CurDrive() in Darwin
Message-ID: <46085636.734bb097.75cc.01c1@mx.google.com>

Przemek,

CurDrive() is returning "A" on Darwin. Is it ok ?

Regards,

Antonio

From i at kevincarmody.com  Mon Mar 26 19:49:36 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Mon Mar 26 19:48:36 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <20070326190109.GA28539@localhost.localdomain>
References: <20070316122556.GA12039@localhost.localdomain>	<46080B1B.9080204@kevincarmody.com>
	<20070326190109.GA28539@localhost.localdomain>
Message-ID: <46085C10.5050607@kevincarmody.com>

Przemek,

Przemyslaw Czerpak wrote:
> On Mon, 26 Mar 2007, Kevin Carmody wrote:
> Please inform me
> about any problems you will find in Harbour hash items implementation.

What version of Harbour has the current hash implementation and where can I 
download it?

> Yes - .IN. does not break existing code like pure IN, HAS or LIKE but $
> works exactly like IN so do we really need .IN.?

You're right, we don't need .IN. if we have $.

>> 7. Make HSIZE() synonymous with HALLOCATE(), analogous to ASIZE().
> 
> Yes, it should be called [HB_]HSIZE() and used HALLOCATE() only in XHB
> compat mode. Anyhow this function will lost its functionality and will
> be only helper function when I'll change internal hash representation.
> It's similar situation as with H[SG]ETPARTITION() so I'm not sure I should
> change the name - I'll think about it. I added [HB_]HALLOCATE only due to
> interaction with speed in current implementation.

Yes, speed is the reason to use HALLOCATE/HSIZE.  Just as one ASIZE is faster 
than a large number of AADDs, HSIZE followed by some function that would copy in 
keys and values to positions would be faster than building a large hash by 
adding one key at a time.

I'm glad to see that you are thinking of improving the xHarbour design.  I think 
that in general, the xHarbour design went only halfway to using the parallels 
with arrays.  So, in xHarbour, we have HCOPY and HEVAL, but no HSIZE or HADD. 
HDEL reduces the size of the hash, but ADEL does not reduce the size of the 
array.  We can use + to concatenate two hashes, but not two arrays.  We have a 
way of setting keys and values at given positions in a new hash via HASH, and a 
way of changing a value at a given position via HSETVALUE, but no way of 
changing a key at a given position.

 >> If setting autoadd default to true means, that code:
 >>     aHash := {=>}
 >>     ? aHash[ "key" ]
 >> does not generate runtime error and "key" is autoadded to hash,
 >
 > In Harbour it is, in xHarbour always RT error is generated.
 >
 >> so I think such behaviour is wrong. It will hide many bugs.
 >
 > Yes and it was the reason I chose FALSE as default without checking
 > xHarbour behavior. I thought it was also FALSE in xHarbour and I was
 > surprise seeing Lorenzo message but I've tested it and AUTOADD is
 > enabled by default :-(

Przemek, I think you are right to default the auto add mode to off.  I don't 
think it should normally be set on, because the accessor method (hHash["key"] := 
"value") is not a good way to build a hash - this notation does not make it 
clear whether we intend to add a new key or modify an existing one.

Here again, hashes should be more like arrays.  We don't extend the range of 
array indexes by assigning into a previously nonexistent index.  Instead, we use 
ASIZE or ADD to extend the array.  So it should be for hashes.  We should 
normally use a function, not an accessor, to build a hash.  We should use + or 
an HADD function to add new keys.  The accessor method should normally be only 
be used to modify the value of an existing key - perhaps it should always be 
this way.

Kevin
From alex at belacy.belgorod.su  Tue Mar 27 06:30:56 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Tue Mar 27 06:32:01 2007
Subject: [Harbour] Beta 2
Message-ID: <520327870.20070327143056@belacy.belgorod.su>

Hi All,

I haven't read any mail for some time and have found just now that there is
Beta 2 ready.
I'll upload it to Sourceforge in a few next days.

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From randy at palmasdev.com  Tue Mar 27 10:59:07 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Tue Mar 27 10:59:18 2007
Subject: [Harbour] Changing alias name dynamically
Message-ID: <5.2.0.9.0.20070327105800.00d6adc8@pop3.pathcom.com>

Hi all,

Is there a Harbour extension/feature to allow an alias to be changed for an 
open table _without_ having to close and re-open the table?

TIA.

Regards,
Randy.

From alex at belacy.belgorod.su  Wed Mar 28 03:02:02 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Wed Mar 28 03:03:24 2007
Subject: [Harbour] Release Beta2 - first files has been uploaded
Message-ID: <217911611.20070328110202@belacy.belgorod.su>

The following files are now available via the Harbour download page on
Sourceforge:

harbour-0.99.2.src.zip
harbour-0.99.2.src.tar.gz
harbour-0.99.2.bin.w32.bcc32.zip

Web site has been updated, the news item has been added to the SF
page.

You may upload other packages to ftp://upload.sourceforge.net,
incoming/ directory.

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From philb at philb.us  Wed Mar 28 03:07:31 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Mar 28 03:12:24 2007
Subject: [Harbour] Release Beta2 - first files has been uploaded
In-Reply-To: <217911611.20070328110202@belacy.belgorod.su>
References: <217911611.20070328110202@belacy.belgorod.su>
Message-ID: <200703280307.31702.philb@philb.us>

On Wednesday 28 March 2007 03:02, Alexander S.Kresin wrote:
> The following files are now available via the Harbour download page on
> Sourceforge:
>
> harbour-0.99.2.src.zip
> harbour-0.99.2.src.tar.gz
> harbour-0.99.2.bin.w32.bcc32.zip
>
> Web site has been updated, the news item has been added to the SF
> page.
>
> You may upload other packages to ftp://upload.sourceforge.net,
> incoming/ directory.

Thanks.

-- 
Ballmer is basically saying: We know there's a problem but we're not going to 
tell you what it is because we want to ambush you in the future. 
http://blogs.zdnet.com/hardware/?p=154
From antonioharbour at gmail.com  Wed Mar 28 03:12:31 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Mar 28 03:12:42 2007
Subject: [Harbour] Release Beta2 - first files has been uploaded
In-Reply-To: <217911611.20070328110202@belacy.belgorod.su>
Message-ID: <460a1562.790ac66a.6823.5a27@mx.google.com>

Alexander, 

> Web site has been updated, the news item has been added to the SF page.

Thanks! 

Would it be possible to update Harbour web site "earlier news" dates ?
Recently I was on a Harbour semminar at Holland and when I showed them the
Harbour site they said "it looks like the project is abandoned, as those
dates are quite old..."

Thanks,

Regards,

Antonio

From smarino at prodigy.net.mx  Wed Mar 28 04:10:14 2007
From: smarino at prodigy.net.mx (SMMR)
Date: Wed Mar 28 04:10:36 2007
Subject: [Harbour] Release Beta2 - first files has been uploaded
In-Reply-To: <217911611.20070328110202@belacy.belgorod.su>
References: <217911611.20070328110202@belacy.belgorod.su>
Message-ID: <460A22E6.1020808@prodigy.net.mx>

Alexander S.Kresin escribi?:
> The following files are now available via the Harbour download page on
> Sourceforge:
>
> harbour-0.99.2.src.zip
> harbour-0.99.2.src.tar.gz
> harbour-0.99.2.bin.w32.bcc32.zip
>
> Web site has been updated, the news item has been added to the SF
> page.
>
> You may upload other packages to ftp://upload.sourceforge.net,
> incoming/ directory.
>
>   
Thanks!

From alex at belacy.belgorod.su  Wed Mar 28 06:20:28 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Wed Mar 28 06:21:50 2007
Subject: [Harbour] Re: Release Beta2 - first files has been uploaded
In-Reply-To: <460a1562.790ac66a.6823.5a27@mx.google.com>
References: <460a1562.790ac66a.6823.5a27@mx.google.com>
Message-ID: <119819742.20070328142028@belacy.belgorod.su>

Wednesday, March 28, 2007, 11:12:31 AM, Antonio Linares <antonioharbour@gmail.com> wrote:

AL> Would it be possible to update Harbour web site "earlier news" dates ?

  I've reassembled the news on the site. Probably, it's better now.


-- 
Regards,
 Alexander
http://kresin.belgorod.su


From antonioharbour at gmail.com  Wed Mar 28 06:33:03 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Mar 28 06:33:13 2007
Subject: [Harbour] Re: Release Beta2 - first files has been uploaded
In-Reply-To: <119819742.20070328142028@belacy.belgorod.su>
Message-ID: <460a4464.10a4ed94.6823.ffff8cb0@mx.google.com>

Alexander, 

> I've reassembled the news on the site. Probably, it's better now.

Thanks!

Regards,

Antonio

From sscc at mweb.co.za  Wed Mar 28 06:58:13 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Mar 28 06:58:56 2007
Subject: [Harbour] Release Beta2 - first files has been uploaded
In-Reply-To: <217911611.20070328110202@belacy.belgorod.su>
References: <217911611.20070328110202@belacy.belgorod.su>
Message-ID: <460A4A45.9030504@mweb.co.za>

Alexander S.Kresin wrote:

> The following files are now available via the Harbour download page on
> Sourceforge:

I would like to upload MSVC6 binaries for Beta2, is there a batch file 
to create the zip, or I'll just use the xHarbour one (pack_bin.bat)?

Regards
Alex


From alex at belacy.belgorod.su  Wed Mar 28 07:30:28 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Wed Mar 28 07:31:19 2007
Subject: [Harbour] Re: Release Beta2 - first files has been uploaded
In-Reply-To: <460A4A45.9030504@mweb.co.za>
References: <217911611.20070328110202@belacy.belgorod.su>
	<460A4A45.9030504@mweb.co.za>
Message-ID: <13924019919.20070328153028@belacy.belgorod.su>

Wednesday, March 28, 2007, 2:58:13 PM, Alex Strickland <sscc@mweb.co.za> wrote:

AS> Alexander S.Kresin wrote:

>> The following files are now available via the Harbour download page on
>> Sourceforge:

AS> I would like to upload MSVC6 binaries for Beta2, is there a batch file 
AS> to create the zip, or I'll just use the xHarbour one (pack_bin.bat)?

 When I create the bcc binary package, I don't use any automated
 procedure. Just look at the content of previous package and include
 the same files.


-- 
Regards,
 Alexander
http://kresin.belgorod.su


From sscc at mweb.co.za  Wed Mar 28 08:00:29 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Mar 28 08:00:43 2007
Subject: [Harbour] Re: Release Beta2 - first files has been uploaded
In-Reply-To: <13924019919.20070328153028@belacy.belgorod.su>
References: <217911611.20070328110202@belacy.belgorod.su>	<460A4A45.9030504@mweb.co.za>
	<13924019919.20070328153028@belacy.belgorod.su>
Message-ID: <460A58DD.8010409@mweb.co.za>

Alexander S.Kresin wrote:

>  When I create the bcc binary package, I don't use any automated
>  procedure. Just look at the content of previous package and include
>  the same files.

OK, harbour-0.99.2.bin.w32.msvc6.zip uploaded to 
ftp://upload.sourceforge.net/incoming/ .

Regards
Alex

From alex at belacy.belgorod.su  Wed Mar 28 08:51:41 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Wed Mar 28 09:00:01 2007
Subject: [Harbour] Re: Release Beta2 - first files has been uploaded
In-Reply-To: <460A58DD.8010409@mweb.co.za>
References: <217911611.20070328110202@belacy.belgorod.su>
	<460A4A45.9030504@mweb.co.za>
	<13924019919.20070328153028@belacy.belgorod.su>
	<460A58DD.8010409@mweb.co.za>
Message-ID: <3828893484.20070328165141@belacy.belgorod.su>

Wednesday, March 28, 2007, 4:00:29 PM, Alex Strickland <sscc@mweb.co.za> wrote:

AS> OK, harbour-0.99.2.bin.w32.msvc6.zip uploaded to
AS> ftp://upload.sourceforge.net/incoming/ .

 Thanks, it is on SF download page now.

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From dbtopas at dbtopas.lt  Wed Mar 28 11:35:53 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Mar 28 11:33:48 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal
	if	'index' is new
In-Reply-To: <20070326194209.GB28539@localhost.localdomain>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>	<20070326171224.GA25611@localhost.localdomain>	<46080BC0.6070606@dbtopas.lt>
	<20070326194209.GB28539@localhost.localdomain>
Message-ID: <460A8B59.3090901@dbtopas.lt>

Hello,


>>>By default in new Hash item it's set to FALSE in Harbour and to TRUE
>>>in xHarbour. If you think it's better to set AUTOADD to TRUE by
>>>default then I can change it but please note that in Harbour autoadd
>>>feature works also in access operations not only in assign like in
>>>xHarbour and you can define default value by
>>>   HB_HDEFAULT( <hValue>, <xDefault> ) -> <xPrevDefault>
>>
>>I've not understood this: "not only in assign like in xHarbour". What 
>>does it mean "autoadd in assign"? If I do assign:
>>   aHash[ "key" ] := value
>>then it is NOT AUTOadd,
> 
> No - it is added in both Harbour and xHarbour when HASH item has autoadd
> flag set. Just make a test in xHarbour where AUTOADD is set by default.

Yes, I've understood now. Before today tests, I've had an idea that in
xHarbour
   aHash[ xKey ] := xValue
is synonym for
   HSet(aHash, xKey, xValue)
and
   ? aHash[ xKey ]
is synonym for
   ? HGet(aHash, xKey),
that autoadd influences access of aHash[ xKey ] behaviour (adds new key
on accesss or generate runtime error) and autoadd is default to FALSE.

Now I see difference between
   aHash[ xKey ] := xValue
and
   HSet(aHash, xKey, xValue),
and now I understand what autoadd do in xHarbour.


 > will never give comparable results so I do not agree that we have to
 > implement also HB_AAUTOADD()/HB_ADEFAULT().

I've tried to explain my point of view about similiarity of hashes and 
arrays, and I had no intention to talk about implementation of these 
functions.

-------------------------------------------------------

 > The problem is that people already have code which expects xHarbour
 > default behavior.

I'm also got used to xHarbour's assign autoadd feature. The code
    aHash[ xKey ] := xValue
looks more clear for me, than
    HB_HSET( aHash, xKey, xValue ),
and it is difficult to say that would be my opinion if I hadn't seen 
this xHarbour behaviour.
I've reviewed my code. This is almost no code which reassigns existing 
value in hash, so, to be compatible with current Harbour's autoadd=.F., 
I should change 99% of hash assign to a little but more ugly HB_HSET(). 
But it will not influence some possible error traps a lot.

But I do not want
    ? aHash[ "key does not exists" ]
to return NIL, instead of runtime error. This will "help" to hide bugs 
in the future.



One of possible ways to have advantages of Harbour's hash and keep
compatibility with xHarbour is to extend autoadd flag to:

#define HB_HAUTOADD_NEVER  (or _NONE)                    0
#define HB_HAUTOADD_ASSIGN (or _SET)                     1
#define HB_HAUTOADD_ALWAYS (or _GETSET, _ASSIGN_ACCESS)  2

Setting default behaviour to HB_HAUTOADD_ASSIGN we will get xHarbour's
behaviour.


> It also can confused in some cases, f.e.:
>     aHash[ "key" ] += value

I think this requires autoadd flag _ALWAYS to avoid RTE, if "key" is not 
included into the hash.


 > I agree it may cause bugs in code and should be enabled only when
 > user explicitly requests about it. Maybe it should be covered by
 > HB_COMPAT_XHB macro but it will have the same bad side effect as
 > using global SETtings - it will interact with 3-rd party code
 > when two libraries expect different default behavior.

I'm against SET(HB_HAUTOADD), because library programmer can not guess 
what setting will be chosen by application programmer. So, instead of 
writing:
    aHash[ xKey ] := xValue
we should write:
    LOCAL nOldAutoAdd

    nOldAutoAdd := SET( HB_HAUTOADD, HB_HAUTOADD_ASSIGN )
    aHash[ xKey ] := xValue
    SET( HB_HAUTOADD, nOldAutoAdd )


That was just my point of view and I trust your's decision.


Best regards,
Mindaugas

From e.m.giordano at emagsoftware.it  Wed Mar 28 14:24:29 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Mar 28 14:25:05 2007
Subject: [Harbour] Bug in DbOrderInfo()
Message-ID: <01b601c77166$530e7dd0$0100a8c0@emag>

This is the sample:

#include "DbInfo.ch"


REQUEST DBFCDX


FUNCTION MAIN()

    RDDSETDEFAULT( "DBFCDX" )

    USE TEST

    INDEX ON FIELD -> last + FIELD -> first TAG FIR_LAS TO TEST__

    ? ORDCOUNT(), ORDNAME()

    ? DBORDERINFO( DBOI_ISMULTITAG )

    CLOSE

    INKEY( 0 )

    RETURN NIL

Result:

         2 FIR_LAS
Error DBCMD/1015  Argument error: DBORDERINFO
Called from DBORDERINFO(0)
Called from MAIN(17)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From elart at elart.it  Wed Mar 28 16:18:04 2007
From: elart at elart.it (elart)
Date: Wed Mar 28 16:15:31 2007
Subject: [Harbour] Release Beta2 - rpm Fedora core 5 are uploaded
In-Reply-To: <200703280307.31702.philb@philb.us>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us>
Message-ID: <460ACD7C.60706@elart.it>

harbour beta2 rpms for Fedora core5 i386 are uploaded into
upload.sourceforge.net/incoming

HTH

From philb at philb.us  Wed Mar 28 23:52:27 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Mar 28 23:57:46 2007
Subject: [Harbour] Release Beta2 - rpm Fedora core 5 are uploaded
In-Reply-To: <460ACD7C.60706@elart.it>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us> <460ACD7C.60706@elart.it>
Message-ID: <200703282352.27113.philb@philb.us>

On Wednesday 28 March 2007 16:18, elart wrote:
> harbour beta2 rpms for Fedora core5 i386 are uploaded into
> upload.sourceforge.net/incoming

Thanks.

-- 
Ballmer is basically saying: We know there's a problem but we're not going to 
tell you what it is because we want to ambush you in the future. 
http://blogs.zdnet.com/hardware/?p=154
From alex at belacy.belgorod.su  Thu Mar 29 01:29:20 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Thu Mar 29 01:30:22 2007
Subject: [Harbour] Re: Release Beta2 - rpm Fedora core 5 are uploaded
In-Reply-To: <460ACD7C.60706@elart.it>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us> <460ACD7C.60706@elart.it>
Message-ID: <552653742.20070329092920@belacy.belgorod.su>

Thursday, March 29, 2007, 12:18:04 AM, elart <elart@elart.it> wrote:

e> harbour beta2 rpms for Fedora core5 i386 are uploaded into
e> upload.sourceforge.net/incoming

 Thanks, they are accessible now from the SF download page.

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From antonioharbour at gmail.com  Thu Mar 29 01:41:31 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Mar 29 01:41:39 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <552653742.20070329092920@belacy.belgorod.su>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us> <460ACD7C.60706@elart.it>
	<552653742.20070329092920@belacy.belgorod.su>
Message-ID: <45179B39-5A9F-4C75-8419-162BC414A482@gmail.com>

I can provide the Harbour for Mac OSX setup package if it is of  
interest, and if it is going to be published at sourceforge too

regards,

Antonio
From alex at belacy.belgorod.su  Thu Mar 29 01:55:18 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Thu Mar 29 01:56:27 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <45179B39-5A9F-4C75-8419-162BC414A482@gmail.com>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us> <460ACD7C.60706@elart.it>
	<552653742.20070329092920@belacy.belgorod.su>
	<45179B39-5A9F-4C75-8419-162BC414A482@gmail.com>
Message-ID: <1314211651.20070329095518@belacy.belgorod.su>

Thursday, March 29, 2007, 9:41:31 AM, Antonio Linares <antonioharbour@gmail.com> wrote:

AL> I can provide the Harbour for Mac OSX setup package if it is of  
AL> interest, and if it is going to be published at sourceforge too

 Sure, I'll add it to the sf download page.

-- 
Regards,
 Alexander
http://kresin.belgorod.su


From antonioharbour at gmail.com  Thu Mar 29 02:01:46 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Mar 29 02:01:57 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <1314211651.20070329095518@belacy.belgorod.su>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us> <460ACD7C.60706@elart.it>
	<552653742.20070329092920@belacy.belgorod.su>
	<45179B39-5A9F-4C75-8419-162BC414A482@gmail.com>
	<1314211651.20070329095518@belacy.belgorod.su>
Message-ID: <223C7296-06E0-46DD-9E67-85EDF7A28656@gmail.com>

Alexander,

Thanks for your answer. If I do a:

  cvs -z3 -d:pserver:anonymous@harbour-project.cvs.sourceforge.net:/ 
cvsroot/harbour-project co -P harbour

will I get the beta2 sources ?

Thanks,

Antonio

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070329/71e23ce2/attachment.html
From sscc at mweb.co.za  Thu Mar 29 03:04:15 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Mar 29 03:04:49 2007
Subject: [Harbour] CVS Write Access
Message-ID: <460B64EF.1090700@mweb.co.za>

To the Project Admin

May I have CVS write access, I would like to commit a small change to 
the seconds() function under Win32?

My login is alexstrickland

Regards
Alex
From alex at belacy.belgorod.su  Thu Mar 29 03:16:44 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Thu Mar 29 03:18:05 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <223C7296-06E0-46DD-9E67-85EDF7A28656@gmail.com>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us> <460ACD7C.60706@elart.it>
	<552653742.20070329092920@belacy.belgorod.su>
	<45179B39-5A9F-4C75-8419-162BC414A482@gmail.com>
	<1314211651.20070329095518@belacy.belgorod.su>
	<223C7296-06E0-46DD-9E67-85EDF7A28656@gmail.com>
Message-ID: <169098438.20070329111644@belacy.belgorod.su>

Thursday, March 29, 2007, 10:01:46 AM, Antonio Linares <antonioharbour@gmail.com> wrote:

AL> Alexander,

AL> Thanks for your answer. If I do a:

AL>   cvs -z3 -d:pserver:anonymous@harbour-project.cvs.sourceforge.net:/ 
AL> cvsroot/harbour-project co -P harbour

AL> will I get the beta2 sources ?

If your current repository is development branch, you, probably, need
to add -r "beta1", but I don't sure in result :).

IMO, it is more easy to download beta2 source package from the sf
download page http://sourceforge.net/project/showfiles.php?group_id=681


-- 
Regards,
 Alexander
http://kresin.belgorod.su


From alex at belacy.belgorod.su  Thu Mar 29 03:20:57 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Thu Mar 29 03:21:58 2007
Subject: [Harbour] Re:  CVS Write Access
In-Reply-To: <460B64EF.1090700@mweb.co.za>
References: <460B64EF.1090700@mweb.co.za>
Message-ID: <739351506.20070329112057@belacy.belgorod.su>

Thursday, March 29, 2007, 11:04:15 AM, Alex Strickland <sscc@mweb.co.za> wrote:

AS> To the Project Admin

AS> May I have CVS write access, I would like to commit a small change to 
AS> the seconds() function under Win32?

AS> My login is alexstrickland

 You has been added to the developers list.


-- 
Regards,
 Alexander
http://kresin.belgorod.su


From labitas at gmail.com  Thu Mar 29 05:40:43 2007
From: labitas at gmail.com (Saulius Zrelskis)
Date: Thu Mar 29 05:40:47 2007
Subject: [Harbour] Bug in DbOrderInfo()
In-Reply-To: <01b601c77166$530e7dd0$0100a8c0@emag>
References: <01b601c77166$530e7dd0$0100a8c0@emag>
Message-ID: <2386af1b0703290240g870df5ck65086622f7631c57@mail.gmail.com>

There are more cases with error you mentioned:

  DBOI_AUTOOPEN
  DBOI_AUTOORDER
  DBOI_AUTOSHARE
  DBOI_BAGCOUNT
  DBOI_BAGNUMBER
  DBOI_CHGONLY
  DBOI_ISREADONLY
  DBOI_ISSORTRECNO
  DBOI_KEYDEC
  DBOI_LARGEFILE
  DBOI_MULTIKEY
  DBOI_OPTIMIZE
  DBOI_OPTLEVEL
  DBOI_PARTIAL
  DBOI_RECNO
  DBOI_SETCODEBLOCK
  DBOI_SHARED
  DBOI_STRICTREAD
  DBOI_TEMPLATE
  DBOI_UPDATECOUNTER


Moreover, is this behavior true:
both DbInfo(DBI_FULLPATH) and DbOrderInfo(DBOI_FULLPATH)
returns not full path


Regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070329/c480ed17/attachment-0001.html
From sscc at mweb.co.za  Thu Mar 29 05:54:39 2007
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Mar 29 05:54:44 2007
Subject: [Harbour] Re:  CVS Write Access
In-Reply-To: <739351506.20070329112057@belacy.belgorod.su>
References: <460B64EF.1090700@mweb.co.za>
	<739351506.20070329112057@belacy.belgorod.su>
Message-ID: <460B8CDF.5090507@mweb.co.za>

Alexander S.Kresin wrote:
> 
>  You has been added to the developers list.
> 

Thank you.

Regards
Alex

From antonioharbour at gmail.com  Thu Mar 29 07:03:31 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Mar 29 07:03:38 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <169098438.20070329111644@belacy.belgorod.su>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us> <460ACD7C.60706@elart.it>
	<552653742.20070329092920@belacy.belgorod.su>
	<45179B39-5A9F-4C75-8419-162BC414A482@gmail.com>
	<1314211651.20070329095518@belacy.belgorod.su>
	<223C7296-06E0-46DD-9E67-85EDF7A28656@gmail.com>
	<169098438.20070329111644@belacy.belgorod.su>
Message-ID: <BEB5E8F4-B8FE-490E-91CF-D63D9BEBD0F0@gmail.com>

Alexander,

> IMO, it is more easy to download beta2 source package from the sf
> download page http://sourceforge.net/project/showfiles.php? 
> group_id=681

ok, I got it built. Where should I upload it ?

Thanks,

Antonio


From alex at belacy.belgorod.su  Thu Mar 29 08:25:02 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Thu Mar 29 08:26:12 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <BEB5E8F4-B8FE-490E-91CF-D63D9BEBD0F0@gmail.com>
References: <217911611.20070328110202@belacy.belgorod.su>
	<200703280307.31702.philb@philb.us> <460ACD7C.60706@elart.it>
	<552653742.20070329092920@belacy.belgorod.su>
	<45179B39-5A9F-4C75-8419-162BC414A482@gmail.com>
	<1314211651.20070329095518@belacy.belgorod.su>
	<223C7296-06E0-46DD-9E67-85EDF7A28656@gmail.com>
	<169098438.20070329111644@belacy.belgorod.su>
	<BEB5E8F4-B8FE-490E-91CF-D63D9BEBD0F0@gmail.com>
Message-ID: <8510487569.20070329162502@belacy.belgorod.su>

Thursday, March 29, 2007, 3:03:31 PM, Antonio Linares <antonioharbour@gmail.com> wrote:

AL> Alexander,

>> IMO, it is more easy to download beta2 source package from the sf
>> download page http://sourceforge.net/project/showfiles.php? 
>> group_id=681

AL> ok, I got it built. Where should I upload it ?

ftp://upload.sourceforge.net/incoming/


-- 
Regards,
 Alexander
http://kresin.belgorod.su


From i at kevincarmody.com  Thu Mar 29 08:45:07 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Thu Mar 29 08:44:04 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <20070326190109.GA28539@localhost.localdomain>
References: <20070316122556.GA12039@localhost.localdomain>	<46080B1B.9080204@kevincarmody.com>
	<20070326190109.GA28539@localhost.localdomain>
Message-ID: <460BB4D3.9020700@kevincarmody.com>

Przemyslaw Czerpak wrote:
 > Please inform me
 > about any problems you will find in Harbour hash items implementation.

I have tried the current version of Harbour on my program, and it 
performs exactly as the xHarbour version of the program.  This program 
does a variety of file conversions and relies heavily on a number of 
different types of hashes.  The only change I made for the Harbour 
version was to replace IN operators with $.

Kevin



From niki at synel.co.il  Thu Mar 29 09:07:15 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Mar 29 10:07:29 2007
Subject: [Harbour] SF: bugtracker items
Message-ID: <460BBA03.4737@synel.co.il>

There are a few open bugs in the SF tracker:
http://sourceforge.net/tracker/?atid=100681&group_id=681&func=browse

(Its the end of the quarter and I can't spend any time on this
 project now, sorry)

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From lorenzo.fiorini at gmail.com  Thu Mar 29 11:00:22 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Mar 29 11:00:37 2007
Subject: [Harbour] HASH ITEMs
In-Reply-To: <46085C10.5050607@kevincarmody.com>
References: <20070316122556.GA12039@localhost.localdomain>
	<46080B1B.9080204@kevincarmody.com>
	<20070326190109.GA28539@localhost.localdomain>
	<46085C10.5050607@kevincarmody.com>
Message-ID: <9257026e0703290800s408ff068y56c9171cbf656ee1@mail.gmail.com>

On 3/27/07, Kevin Carmody <i@kevincarmody.com> wrote:

> Przemek, I think you are right to default the auto add mode to off.  I don't
> think it should normally be set on, because the accessor method (hHash["key"] :=
> "value") is not a good way to build a hash - this notation does not make it
> clear whether we intend to add a new key or modify an existing one.

I've checked at http://en.wikipedia.org/wiki/Associative_array and
many "web" languages seem to use assign to add values. This does not
mean it is correct but at least that it is a reasonable request. I
simply ask to have AUTOADD by default using HB_COMPAT_XHB or even with
another specific define.

regards,
Lorenzo Fiorini

JavaScript:
my_cars["cool"]="Mustang";
my_cars["family"]="Station Wagon";

Perl:
$hash{ 'key' } = 'value';
$hash{ $key } = $value;

Php:
$price['Gasket'] = 15.29;
$price['Wheel']  = 75.25;

Python:
d1["to"] = "two"
d1["for"] = "four"

Ruby:
h["a"] = 9
h["c"] = 4
From antonioharbour at gmail.com  Thu Mar 29 11:13:05 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Mar 29 11:13:20 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <8510487569.20070329162502@belacy.belgorod.su>
Message-ID: <460bd787.53eac497.2745.ffffc2f2@mx.google.com>

Alexander, 

AL> ok, I got it built. Where should I upload it ?

> ftp://upload.sourceforge.net/incoming/

Ok, already uploaded as harbour-0.99.2-OSX.zip

Thanks,

Regards,

Antonio

From e.m.giordano at emagsoftware.it  Thu Mar 29 12:23:06 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Mar 29 12:23:42 2007
Subject: [Harbour] HASH ITEMs
References: <20070316122556.GA12039@localhost.localdomain><46080B1B.9080204@kevincarmody.com><20070326190109.GA28539@localhost.localdomain><46085C10.5050607@kevincarmody.com>
	<9257026e0703290800s408ff068y56c9171cbf656ee1@mail.gmail.com>
Message-ID: <001a01c7721e$889a7e00$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 29 marzo 2007 17.00
Oggetto: Re: [Harbour] HASH ITEMs


> JavaScript:
> my_cars["cool"]="Mustang";
> my_cars["family"]="Station Wagon";
>
> Perl:
> $hash{ 'key' } = 'value';
> $hash{ $key } = $value;
>
> Php:
> $price['Gasket'] = 15.29;
> $price['Wheel']  = 75.25;
>
> Python:
> d1["to"] = "two"
> d1["for"] = "four"
>
> Ruby:
> h["a"] = 9
> h["c"] = 4

Also in C++.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From antonioharbour at gmail.com  Thu Mar 29 12:48:18 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Mar 29 12:48:30 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <8510487569.20070329162502@belacy.belgorod.su>
Message-ID: <460bedd8.3fe03c85.1237.ffffd280@mx.google.com>

Alexander, 

>> ftp://upload.sourceforge.net/incoming/

> Ok, already uploaded as harbour-0.99.2-OSX.zip

Did you get the file ? Its the first time that I upload there and I am not
sure if I did it right,

Thanks,

Antonio

From dbtopas at dbtopas.lt  Thu Mar 29 12:52:51 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Mar 29 12:50:53 2007
Subject: [Harbour] PCode optimization
Message-ID: <460BEEE3.8040006@dbtopas.lt>

Hello,


This code optimizes HB_P_PUSHany + HB_P_POP with a jump in between of
these instructions.

The idea to write this code came from discussion about
HB_SYMBOL_UNUSED(). I've tried to find solution, like this:
#define HB_SYMBOL_UNUSED(symbol)   IF(.F., symbol, NIL)

IF( lCase, FUNC1(), NIL ) before:
	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
	HB_P_JUMPFALSENEAR, 9,	/* 9 (abs: 00017) */
	HB_P_PUSHFUNCSYM, 2, 0,	/* FUNC1 */
	HB_P_FUNCTIONSHORT, 0,
	HB_P_JUMPNEAR, 3,	/* 3 (abs: 00018) */
	HB_P_PUSHNIL,
	HB_P_POP,
after:
	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
	HB_P_JUMPFALSENEAR, 7,	/* 7 (abs: 00015) */
	HB_P_PUSHFUNCSYM, 2, 0,	/* FUNC1 */
	HB_P_DOSHORT, 0,


IF( lCase, 5, "abc" ) before:
	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
	HB_P_JUMPFALSENEAR, 6,	/* 6 (abs: 00058) */
	HB_P_PUSHBYTE, 5,	/* 5 */
	HB_P_JUMPNEAR, 8,	/* 8 (abs: 00064) */
	HB_P_PUSHSTRSHORT, 4,	/* 4 */
	'a', 'b', 'c', 0,
	HB_P_POP,
after:
	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
	HB_P_POP,


To optimize this PCODE to zero, I've changed hbmain.c:
if( iPass == 0 )
{
   hb_compOptimizePCode( HB_COMP_PARAM, HB_COMP_PARAM->functions.pLast );
}
to:
if( iPass <= 1 )
{
   hb_compOptimizePCode( HB_COMP_PARAM, HB_COMP_PARAM->functions.pLast );
}
but I this should be reviewed by the author of hb_compOptimizeJumps().

Optimization of
         HB_P_LINE, 34, 0,	/* 34 */
	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
	HB_P_POP,
         HB_P_LINE, 36, 0,	/* 36 */
makes PCODE:
         HB_P_LINE, 34, 0,	/* 34 */
         HB_P_LINE, 36, 0,	/* 36 */

To optimize these lines, I've implemented:
   static HB_OPT_FUNC( hb_p_line )
and changed to:
   if( iPass <= 2 )

Later I needed to increase number of total optimization passes to minimize:
          HB_P_NOP,
          HB_P_NOP,
          HB_P_NOP,
          HB_P_LINE, 36, 0,	/* 36 */
to:
          HB_P_LINE, 36, 0,	/* 36 */

Maybe it's good to set optimization flag in hb_compNOOPfill() and repeat 
optimization passed until nothing is optimized.



Best regards,
Mindaugas
-------------- next part --------------
--- hbopt_old.c	Fri Mar 23 18:31:20 2007
+++ hbopt.c	Thu Mar 29 19:41:24 2007
@@ -537,6 +537,186 @@
    return 4;
 }
 
+
+static HB_OPT_FUNC( hb_p_pop )
+{
+   ULONG * pAddr;
+   ULONG ulJumpCount, ulJumpMax, ulJumpAddr, ulPos, ulLastPos;
+   BOOL  bCanOptimize;
+
+   if ( // Ensure jump optimisation is enabled and ...
+        pFunc->iJumps &&                      
+        // ... jump to current HB_P_POP exists
+        hb_compIsJump( cargo->HB_COMP_PARAM, pFunc, lPCodePos ) ) 
+   {
+      // Mindaugas Kavaliauskas 2007-03-29: 
+      //
+      // We optimize only HB_P_POP with jumps. Jumpless HB_P_POP optimization 
+      // is spread among the other functions of push instructions optimization, 
+      // like HB_P_PUSHLOCAL, HB_P_PUSHNIL, etc.
+      //
+      // HB_P_DUPLICATE and HB_P_FUNCTION are missing this optimization, 
+      // but I do not know if such PCODE can be generated
+      //
+      // We can move all HB_P_PUSHany + HB_P_POP optimization here by changing 
+      // the above condition to: cargo->HB_COMP_PARAM & HB_COMPFLAG_OPTJUMP
+      // but this will make compiler to trace the whole function PCODE for *every* 
+      // HB_P_POP. I've not tested the speed of compiler in such case.
+
+
+      pAddr = NULL;
+      ulJumpCount = ulJumpMax = 0;
+
+      // We need to trace all PCODE, since reverse PCODE trace is unavailible
+
+      bCanOptimize = 1;
+      ulPos = ulLastPos = 0;
+      while( ulPos < pFunc->lPCodePos && bCanOptimize )
+      {
+         switch( pFunc->pCode[ ulPos ] )
+         {
+            case HB_P_JUMPNEAR:
+            case HB_P_JUMPFALSENEAR:
+            case HB_P_JUMPTRUENEAR:
+               ulJumpAddr = ulPos + ( signed char ) pFunc->pCode[ ulPos + 1 ];
+               break;
+   
+            case HB_P_JUMP:
+            case HB_P_JUMPFALSE:
+            case HB_P_JUMPTRUE:
+               ulJumpAddr = ulPos + HB_PCODE_MKSHORT( &pFunc->pCode[ ulPos + 1 ] );
+               break;
+   
+            case HB_P_JUMPFAR:
+            case HB_P_JUMPFALSEFAR:
+            case HB_P_JUMPTRUEFAR:
+               ulJumpAddr = ulPos + HB_PCODE_MKINT24( &pFunc->pCode[ ulPos + 1 ] );
+               break;
+
+            default:
+               ulJumpAddr = 0;
+               break;
+
+         }
+
+         if( ulJumpAddr == lPCodePos || ulPos == lPCodePos ) 
+         {
+            // jump to current HB_P_POP found
+            switch( pFunc->pCode[ ulLastPos ] )
+            {
+               // any push instruction
+               case HB_P_FALSE:
+               case HB_P_FUNCTION:
+               case HB_P_FUNCTIONSHORT:
+               case HB_P_DUPLICATE:
+               case HB_P_PUSHBLOCK:
+               case HB_P_PUSHBLOCKSHORT:
+               case HB_P_PUSHBYTE:
+               case HB_P_PUSHINT:
+               case HB_P_PUSHLOCAL:
+               case HB_P_PUSHLOCALNEAR:
+               case HB_P_PUSHLONG: 
+               case HB_P_PUSHNIL:
+               case HB_P_PUSHDOUBLE:
+               case HB_P_PUSHSELF: 
+               case HB_P_PUSHSTATIC: 
+               case HB_P_PUSHSTR:
+               case HB_P_PUSHSTRSHORT:
+               case HB_P_PUSHSYM:
+               case HB_P_PUSHSYMNEAR:
+               case HB_P_TRUE:
+               case HB_P_ZERO:
+               case HB_P_ONE:
+               case HB_P_PUSHLONGLONG:
+               case HB_P_PUSHDATE:              
+               case HB_P_PUSHSTRHIDDEN: 
+               case HB_P_PUSHSTRLARGE: 
+                  if( ulJumpCount == ulJumpMax )
+                  {
+                      ulJumpMax += 16;
+                      if ( ulJumpCount )
+                         pAddr = (ULONG*) hb_xrealloc( pAddr, sizeof( ULONG ) * ulJumpMax );
+                      else
+                         pAddr = (ULONG*) hb_xgrab( sizeof( ULONG ) * ulJumpMax );
+                  }
+                  pAddr[ ulJumpCount++ ] = ulLastPos;
+                  break;
+
+               // Process jump right before HB_P_POP
+               case HB_P_JUMPNEAR:
+               case HB_P_JUMPFALSENEAR:
+               case HB_P_JUMPTRUENEAR:
+               case HB_P_JUMP:
+               case HB_P_JUMPFALSE:
+               case HB_P_JUMPTRUE:
+               case HB_P_JUMPFAR:
+               case HB_P_JUMPFALSEFAR:
+               case HB_P_JUMPTRUEFAR:
+                  break;   
+
+               default:
+                  bCanOptimize = 0;
+                  break;
+            }
+         }
+         ulLastPos = ulPos;
+         ulPos += hb_compPCodeSize( pFunc, ulPos );
+      }
+
+      if( bCanOptimize )
+      {
+         for( ulPos = 0; ulPos < ulJumpCount; ulPos++ )
+         {
+            switch( pFunc->pCode[ pAddr[ ulPos ] ] )
+            {
+               case HB_P_FALSE:
+               case HB_P_DUPLICATE:
+               case HB_P_PUSHBLOCK:
+               case HB_P_PUSHBLOCKSHORT:
+               case HB_P_PUSHBYTE:
+               case HB_P_PUSHINT:
+               case HB_P_PUSHLOCAL:
+               case HB_P_PUSHLOCALNEAR:
+               case HB_P_PUSHLONG: 
+               case HB_P_PUSHNIL:
+               case HB_P_PUSHDOUBLE:
+               case HB_P_PUSHSELF:
+               case HB_P_PUSHSTATIC:
+               case HB_P_PUSHSTR: 
+               case HB_P_PUSHSTRSHORT:
+               case HB_P_PUSHSYM: 
+               case HB_P_PUSHSYMNEAR:
+               case HB_P_TRUE:
+               case HB_P_ZERO:
+               case HB_P_ONE:
+               case HB_P_PUSHLONGLONG:
+               case HB_P_PUSHDATE:              
+               case HB_P_PUSHSTRHIDDEN: 
+               case HB_P_PUSHSTRLARGE: 
+                  hb_compNOOPfill( pFunc, pAddr[ ulPos ], hb_compPCodeSize( pFunc, pAddr[ ulPos ] ), FALSE, FALSE );
+                  break;
+
+               case HB_P_FUNCTION:
+                  pFunc->pCode[ pAddr[ ulPos ] ] = HB_P_DO;
+                  break;
+
+               case HB_P_FUNCTIONSHORT:
+                  pFunc->pCode[ pAddr[ ulPos ] ] = HB_P_DOSHORT;
+                  break;
+            }
+         }
+
+         hb_compNOOPfill( pFunc, lPCodePos, 1, FALSE, FALSE ); // HB_P_POP
+      }
+
+      if( pAddr )
+         hb_xfree( pAddr );
+   }
+
+   return 1;
+}
+
+
 /* NOTE: The  order of functions have to match the order of opcodes mnemonics
  */
 static HB_OPT_FUNC_PTR s_opt_table[] =
@@ -616,7 +796,7 @@
    NULL,                       /* HB_P_OR,                   */
    NULL,                       /* HB_P_PARAMETER,            */
    NULL,                       /* HB_P_PLUS,                 */
-   NULL,                       /* HB_P_POP,                  */
+   hb_p_pop,                   /* HB_P_POP,                  */
    NULL,                       /* HB_P_POPALIAS,             */
    NULL,                       /* HB_P_POPALIASEDFIELD,      */
    NULL,                       /* HB_P_POPALIASEDFIELDNEAR,  */
From alex at belacy.belgorod.su  Thu Mar 29 13:35:49 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Thu Mar 29 13:36:13 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <460bedd8.3fe03c85.1237.ffffd280@mx.google.com>
References: <460bedd8.3fe03c85.1237.ffffd280@mx.google.com>
Message-ID: <12713816236.20070329213549@belacy.belgorod.su>

On  Thursday, March 29, 2007, 20:48 Antonio Linares <antonioharbour@gmail.com> wrote:

AL> Alexander, 

>>> ftp://upload.sourceforge.net/incoming/

>> Ok, already uploaded as harbour-0.99.2-OSX.zip

AL> Did you get the file ? Its the first time that I upload there and I am not
AL> sure if I did it right,

 Yes, thanks. It's on the place. I've just added it to the download
 page.
 I have marked the architecture as Mac Universal (PPC/x86). Is it
 right ?


Regards,
 Alexander
http://kresin.belgorod.su

From antonioharbour at gmail.com  Thu Mar 29 13:40:16 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Mar 29 13:40:28 2007
Subject: [Harbour] Re: Release Beta2 - OSX setup package
In-Reply-To: <12713816236.20070329213549@belacy.belgorod.su>
Message-ID: <460bfa07.69776f5b.4ec6.ffffd3ce@mx.google.com>

Alexander, 

> Yes, thanks. It's on the place. I've just added it to the download  page.

Thanks,

> I have marked the architecture as Mac Universal (PPC/x86). Is it  right ?

Yes :-)

Regards,

Antonio

From druzus at priv.onet.pl  Fri Mar 30 06:09:07 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 30 06:09:44 2007
Subject: [Harbour] PCode optimization
In-Reply-To: <460BEEE3.8040006@dbtopas.lt>
References: <460BEEE3.8040006@dbtopas.lt>
Message-ID: <20070330100907.GA16283@localhost.localdomain>

On Thu, 29 Mar 2007, Mindaugas Kavaliauskas wrote:
> Hello,
> This code optimizes HB_P_PUSHany + HB_P_POP with a jump in between of
> these instructions.
> The idea to write this code came from discussion about
> HB_SYMBOL_UNUSED(). I've tried to find solution, like this:
> #define HB_SYMBOL_UNUSED(symbol)   IF(.F., symbol, NIL)
> IF( lCase, FUNC1(), NIL ) before:
> 	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
> 	HB_P_JUMPFALSENEAR, 9,	/* 9 (abs: 00017) */
> 	HB_P_PUSHFUNCSYM, 2, 0,	/* FUNC1 */
> 	HB_P_FUNCTIONSHORT, 0,
> 	HB_P_JUMPNEAR, 3,	/* 3 (abs: 00018) */
> 	HB_P_PUSHNIL,
> 	HB_P_POP,
> after:
> 	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
> 	HB_P_JUMPFALSENEAR, 7,	/* 7 (abs: 00015) */
> 	HB_P_PUSHFUNCSYM, 2, 0,	/* FUNC1 */
> 	HB_P_DOSHORT, 0,
> 
> 
> IF( lCase, 5, "abc" ) before:
> 	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
> 	HB_P_JUMPFALSENEAR, 6,	/* 6 (abs: 00058) */
> 	HB_P_PUSHBYTE, 5,	/* 5 */
> 	HB_P_JUMPNEAR, 8,	/* 8 (abs: 00064) */
> 	HB_P_PUSHSTRSHORT, 4,	/* 4 */
> 	'a', 'b', 'c', 0,
> 	HB_P_POP,
> after:
> 	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
> 	HB_P_POP,
> 
> To optimize this PCODE to zero, I've changed hbmain.c:
> if( iPass == 0 )
> {
>   hb_compOptimizePCode( HB_COMP_PARAM, HB_COMP_PARAM->functions.pLast );
> }
> to:
> if( iPass <= 1 )
> {
>   hb_compOptimizePCode( HB_COMP_PARAM, HB_COMP_PARAM->functions.pLast );
> }
> but I this should be reviewed by the author of hb_compOptimizeJumps().

In header of hbmain.c this function is assigned to Ron but in fact the
code inside is mine.
This modification is OK - it will also help in some other situations
with some speed cost.

> Optimization of
>         HB_P_LINE, 34, 0,	/* 34 */
> 	HB_P_PUSHLOCALNEAR, 2,	/* LCASE */
> 	HB_P_POP,
>         HB_P_LINE, 36, 0,	/* 36 */
> makes PCODE:
>         HB_P_LINE, 34, 0,	/* 34 */
>         HB_P_LINE, 36, 0,	/* 36 */
> 
> To optimize these lines, I've implemented:
>   static HB_OPT_FUNC( hb_p_line )
> and changed to:
>   if( iPass <= 2 )
> Later I needed to increase number of total optimization passes to minimize:
>          HB_P_NOP,
>          HB_P_NOP,
>          HB_P_NOP,
>          HB_P_LINE, 36, 0,	/* 36 */
> to:
>          HB_P_LINE, 36, 0,	/* 36 */
> Maybe it's good to set optimization flag in hb_compNOOPfill() and repeat 
> optimization passed until nothing is optimized.

We can add switch with number of optimization passes but in this case
it's much easier to reach the same effect in differ way with much smaller
cost. File hbexprb.c function hb_compExprUseIIF:

      case HB_EA_STATEMENT:
         {
            HB_EXPR_USE( pSelf, HB_EA_PUSH_PCODE );
            HB_GEN_FUNC1( PCode1, HB_P_POP );  /* remove a value if used in statement */
         }
         break;

Change to:
      case HB_EA_STATEMENT:
         {
            LONG lPosFalse, lPosEnd;
            HB_EXPR_PTR pExpr = pSelf->value.asList.pExprList;

            HB_EXPR_USE( pExpr, HB_EA_PUSH_PCODE );
            lPosFalse = HB_GEN_FUNC1( JumpFalse, 0 );
            pExpr =pExpr->pNext;

            HB_EXPR_USE( pExpr, HB_EA_PUSH_POP );
            lPosEnd = HB_GEN_FUNC1( Jump, 0 );
            pExpr =pExpr->pNext;

            HB_GEN_FUNC1( JumpHere, lPosFalse );
            HB_EXPR_USE( pExpr, HB_EA_PUSH_POP );
            HB_GEN_FUNC1( JumpHere, lPosEnd );
         }
#endif
         break;

It will cause that we will generate optimized PCODE of _all_ similar
situations, f.e.:
    iif( lCase, a+=2, a-- )
without very expensive scanning of function body for each HB_P_POP
pcode. Just try.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Mar 30 06:20:31 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 30 06:21:06 2007
Subject: [Harbour] Runtime error with syntax hHash[ 'index' ] := xVal
	if	'index' is new
In-Reply-To: <460A8B59.3090901@dbtopas.lt>
References: <9257026e0703260841lbf10884qe7e1e8fb91a550d8@mail.gmail.com>
	<20070326171224.GA25611@localhost.localdomain>
	<46080BC0.6070606@dbtopas.lt>
	<20070326194209.GB28539@localhost.localdomain>
	<460A8B59.3090901@dbtopas.lt>
Message-ID: <20070330102031.GB16283@localhost.localdomain>

On Wed, 28 Mar 2007, Mindaugas Kavaliauskas wrote:
> But I do not want
>    ? aHash[ "key does not exists" ]
> to return NIL, instead of runtime error. This will "help" to hide bugs 
> in the future.

The code like this will never work without autoadd in access operation:

    hValue := {=>}
    HB_HAUTOADD( hValue, .t. )
    HB_HDEFAULT( hValue, { 0, 0 }
    dbgotop()
    while !eof()
        a := hValue[ FIELD->ARTICULE ]
        a[ 1 ] += FIELD->QUANTITY
        a[ 2 ] += FIELD->QUANTITY * FIELD->PRICE
        dbskip()
    enddo

Change this code to work with xHarbour and think about the overhead
programmer needs to add without autoadd on access.

> One of possible ways to have advantages of Harbour's hash and keep
> compatibility with xHarbour is to extend autoadd flag to:
> #define HB_HAUTOADD_NEVER  (or _NONE)                    0
> #define HB_HAUTOADD_ASSIGN (or _SET)                     1
> #define HB_HAUTOADD_ALWAYS (or _GETSET, _ASSIGN_ACCESS)  2

Yes, I also thought about such flags.
Probably I will change it in this weekend.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Mar 30 06:58:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 30 06:59:20 2007
Subject: [Harbour] Bug in DbOrderInfo()
In-Reply-To: <01b601c77166$530e7dd0$0100a8c0@emag>
References: <01b601c77166$530e7dd0$0100a8c0@emag>
Message-ID: <20070330105844.GA18779@localhost.localdomain>

On Wed, 28 Mar 2007, Enrico Maria Giordano wrote:
> This is the sample:
> #include "DbInfo.ch"
> REQUEST DBFCDX
> FUNCTION MAIN()
>    RDDSETDEFAULT( "DBFCDX" )
>    USE TEST
>    INDEX ON FIELD -> last + FIELD -> first TAG FIR_LAS TO TEST__
>    ? ORDCOUNT(), ORDNAME()
>    ? DBORDERINFO( DBOI_ISMULTITAG )
>    CLOSE
>    INKEY( 0 )
>    RETURN NIL
> Result:
>         2 FIR_LAS
> Error DBCMD/1015  Argument error: DBORDERINFO
> Called from DBORDERINFO(0)
> Called from MAIN(17)

I haven't implemented this flag for DBFCDX yet. Many of different DBOI_*
actions are implemented only for DBFNTX. DBOI_ISMULTITAG should return
for current DBFCDX always true because we are supporting only multi tag
CDX indexes just like COMIX and DBFCDX in CL53. I'll add this flag
and some others in next commit.

best regards,
Przemek
From tomaz.zupan at orpo.si  Fri Mar 30 07:07:53 2007
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Mar 30 07:08:00 2007
Subject: [Harbour] Beta2 binaries for Mandriva 2007 uploaded
Message-ID: <200703301307.54195.tomaz.zupan@orpo.si>


-- 
Toma? Zupan
ORPO d.o.o.
http://www.orpo.si
From e.m.giordano at emagsoftware.it  Fri Mar 30 07:32:42 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Mar 30 07:33:19 2007
Subject: [Harbour] Bug in DbOrderInfo()
References: <01b601c77166$530e7dd0$0100a8c0@emag>
	<20070330105844.GA18779@localhost.localdomain>
Message-ID: <000601c772bf$218da740$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerdi 30 marzo 2007 12.58
Oggetto: Re: [Harbour] Bug in DbOrderInfo()


> I haven't implemented this flag for DBFCDX yet. Many of different DBOI_*
> actions are implemented only for DBFNTX. DBOI_ISMULTITAG should return
> for current DBFCDX always true because we are supporting only multi tag
> CDX indexes just like COMIX and DBFCDX in CL53. I'll add this flag
> and some others in next commit.

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From alex at belacy.belgorod.su  Fri Mar 30 07:50:09 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Fri Mar 30 07:51:35 2007
Subject: [Harbour] Re: Beta2 binaries for Mandriva 2007 uploaded
In-Reply-To: <200703301307.54195.tomaz.zupan@orpo.si>
References: <200703301307.54195.tomaz.zupan@orpo.si>
Message-ID: <8725414075.20070330155009@belacy.belgorod.su>

Friday, March 30, 2007, 3:07:53 PM, Tomaz Zupan <tomaz.zupan@orpo.si> wrote:


 Are you sure that upload them to a right place ?
 There aren't any harbour* files accessible for addition now.


-- 
Regards,
 Alexander
http://kresin.belgorod.su


From tomaz.zupan at orpo.si  Fri Mar 30 08:04:50 2007
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Mar 30 08:05:26 2007
Subject: [Harbour] Re: Beta2 binaries for Mandriva 2007 uploaded
In-Reply-To: <8725414075.20070330155009@belacy.belgorod.su>
References: <200703301307.54195.tomaz.zupan@orpo.si>
	<8725414075.20070330155009@belacy.belgorod.su>
Message-ID: <200703301404.50179.tomaz.zupan@orpo.si>

Dne petek 30. marca 2007 13:50 je Alexander S.Kresin napisal(a):
>
>  Are you sure that upload them to a right place ?
>  There aren't any harbour* files accessible for addition now.
I uploaded yesterdey at the evening, but forgot to send an email. I will 
upload again tonight.

-- 
Toma? Zupan
ORPO d.o.o.
http://www.orpo.si
From druzus at priv.onet.pl  Fri Mar 30 09:15:55 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 30 09:17:28 2007
Subject: [Harbour] ChangeLog 2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070330131555.GA2097@localhost.localdomain>

2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexprb.c
    % optimize PCODE generated for IIF() used as statement

  * harbour/include/hbpp.h
    * fixed typo in comment

  * harbour/source/pp/ppcore.c
    * fixed .ppo output in some string expressions inside []

  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
    + added some missing DBOI_* actions

  * harbour/source/rtl/hbregex.c
    + added comment

  * harbour/source/vm/hashes.c
    * set autoadd by default when compiled with HB_COMPAT_XHB macro

  * harbour/source/debug/debugger.prg
  * harbour/source/rdd/dbstrux.prg
  * harbour/source/rtl/tbrowse.prg
    * removed unnecessary NIL in in IIF() statements
  * harbour/utils/hbtest/rt_misc.prg
    * removed unnecessary ::cValue in in IIF() statements

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Mar 30 10:30:25 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 30 10:30:31 2007
Subject: [Harbour] ChangeLog 2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330131555.GA2097@localhost.localdomain>
References: <20070330131555.GA2097@localhost.localdomain>
Message-ID: <9257026e0703300730i63aced73hcec1a50edc9eb1eb@mail.gmail.com>

On 3/30/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

>   * harbour/source/vm/hashes.c
>     * set autoadd by default when compiled with HB_COMPAT_XHB macro

Many thanks.

regards,
Lorenzo Fiorini
From lorenzo.fiorini at gmail.com  Fri Mar 30 11:00:57 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 30 11:01:02 2007
Subject: [Harbour] ChangeLog 2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330131555.GA2097@localhost.localdomain>
References: <20070330131555.GA2097@localhost.localdomain>
Message-ID: <9257026e0703300800t1c6a0111k691406e2ed0aedce@mail.gmail.com>

On 3/30/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

>   * harbour/source/pp/ppcore.c
>     * fixed .ppo output in some string expressions inside []

Can this be the reason why:

 cSql = [ select crecflag ;
                     from acs ;
                     where crectype = 'USR' and ;
                     creccode = '] + UPPER( cUsrNam ) + [' ;
                     and substr( crecdata, 25, 32 ) = '] + HB_MD5(
cUsrPwd ) + [' ]

gets preprocessed into:

      cSql = [ select crecflag  from acs  where crectype = "USR" and
creccode = "] + UPPER( cUsrNam ) + ["  and substr( crecdata, 25, 32 )
= "] + HB_MD5( cUsrPwd ) + [" ]

regards,
Lorenzo Fiorini
From druzus at priv.onet.pl  Fri Mar 30 11:59:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 30 12:00:28 2007
Subject: [Harbour] ChangeLog 2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0703300800t1c6a0111k691406e2ed0aedce@mail.gmail.com>
References: <20070330131555.GA2097@localhost.localdomain>
	<9257026e0703300800t1c6a0111k691406e2ed0aedce@mail.gmail.com>
Message-ID: <20070330155947.GA3041@localhost.localdomain>

On Fri, 30 Mar 2007, Lorenzo Fiorini wrote:
> >  * harbour/source/pp/ppcore.c
> >    * fixed .ppo output in some string expressions inside []
> Can this be the reason why:
> cSql = [ select crecflag ;
>                     from acs ;
>                     where crectype = 'USR' and ;
>                     creccode = '] + UPPER( cUsrNam ) + [' ;
>                     and substr( crecdata, 25, 32 ) = '] + HB_MD5( cUsrPwd ) + [' ]
> gets preprocessed into:
>      cSql = [ select crecflag  from acs  where crectype = "USR" and
> creccode = "] + UPPER( cUsrNam ) + ["  and substr( crecdata, 25, 32 )
> = "] + HB_MD5( cUsrPwd ) + [" ]

This modification did not change preprocessor behavior only fixed
generated .ppo files.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Mar 30 12:09:00 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 30 12:09:05 2007
Subject: [Harbour] ChangeLog 2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330155947.GA3041@localhost.localdomain>
References: <20070330131555.GA2097@localhost.localdomain>
	<9257026e0703300800t1c6a0111k691406e2ed0aedce@mail.gmail.com>
	<20070330155947.GA3041@localhost.localdomain>
Message-ID: <9257026e0703300909t6a03c89ei6c2e7adf9b13ad08@mail.gmail.com>

On 3/30/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> This modification did not change preprocessor behavior only fixed
> generated .ppo files.

Yes, I've reverted to old ppcore.c and it works in the same way.

The problem that in SQL ' and " have very different meaning.

Is there a way I can use "extended" [] strings that does not change
the string content?

regards,
Lorenzo Fiorini
From druzus at priv.onet.pl  Fri Mar 30 12:51:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 30 12:52:23 2007
Subject: [Harbour] ChangeLog 2007-03-30 18:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070330165147.GA7072@localhost.localdomain>

2007-03-30 18:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/ppcore.c
    + added support for multiline string concatenated by ';'
      f.e.:
         cVar := "line 1;
         line 2;
         line 3"
      To enable the above it's necessary to build PP with
      HB_PP_MULTILINE_STRING macro.
      It's not Clipper compatible extension and it's not enabled by default
      anyhow old PP worked in such way so I'm leaving the decision to Harbour
      community if the above should be enabled by default or not.

best regards,
Przemek
From dbtopas at dbtopas.lt  Fri Mar 30 12:55:42 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Mar 30 12:53:41 2007
Subject: [Harbour] PCode optimization
In-Reply-To: <20070330100907.GA16283@localhost.localdomain>
References: <460BEEE3.8040006@dbtopas.lt>
	<20070330100907.GA16283@localhost.localdomain>
Message-ID: <460D410E.6080806@dbtopas.lt>

Przemyslaw Czerpak wrote:
> We can add switch with number of optimization passes but in this case
> it's much easier to reach the same effect in differ way with much smaller
> cost. File hbexprb.c function hb_compExprUseIIF:
> 
> ...
> 
> It will cause that we will generate optimized PCODE of _all_ similar
> situations, f.e.:
>     iif( lCase, a+=2, a-- )
> without very expensive scanning of function body for each HB_P_POP
> pcode. Just try.


Hi,


Your solution (as always) is better than we can expect! :)
I see I've commited a solution for "Meaningless use of expression" also.

In some cases, code is still not fully optimized and additional passes 
are needed, ex.,
   IF( lCase, xSomeLocal, QSELF() )
   IF( lCase, xSomeLocal, @some_func() )
but these cases are very unnatural and followed by meaningless 
expression warning, so I don't think we need to change anything.


 > This modification is OK - it will also help in some other situations
 > with some speed cost.

If you find my code usefull feel free to modify, commit, etc.



Best regards,
Mindaugas












From druzus at priv.onet.pl  Fri Mar 30 12:54:38 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Mar 30 12:55:13 2007
Subject: [Harbour] ChangeLog 2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0703300909t6a03c89ei6c2e7adf9b13ad08@mail.gmail.com>
References: <20070330131555.GA2097@localhost.localdomain>
	<9257026e0703300800t1c6a0111k691406e2ed0aedce@mail.gmail.com>
	<20070330155947.GA3041@localhost.localdomain>
	<9257026e0703300909t6a03c89ei6c2e7adf9b13ad08@mail.gmail.com>
Message-ID: <20070330165438.GB7072@localhost.localdomain>

On Fri, 30 Mar 2007, Lorenzo Fiorini wrote:
> Is there a way I can use "extended" [] strings that does not change
> the string content?

Try current devel branch compiled with HB_PP_MULTILINE_STRING macro.
It allow to use multiline strings quoted by (") or (') like in old PP.
See the ChangeLog. 

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Mar 30 13:17:15 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 30 13:17:18 2007
Subject: [Harbour] ChangeLog 2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330165438.GB7072@localhost.localdomain>
References: <20070330131555.GA2097@localhost.localdomain>
	<9257026e0703300800t1c6a0111k691406e2ed0aedce@mail.gmail.com>
	<20070330155947.GA3041@localhost.localdomain>
	<9257026e0703300909t6a03c89ei6c2e7adf9b13ad08@mail.gmail.com>
	<20070330165438.GB7072@localhost.localdomain>
Message-ID: <9257026e0703301017qfed108emf0a06faca1901974@mail.gmail.com>

On 3/30/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Try current devel branch compiled with HB_PP_MULTILINE_STRING macro.
> It allow to use multiline strings quoted by (") or (') like in old PP.
> See the ChangeLog.

Many, many, many, many, many, ... thanks. It works.

regards,
Lorenzo Fiorini
From tomaz.zupan at orpo.si  Fri Mar 30 13:40:39 2007
From: tomaz.zupan at orpo.si (Tomaz Zupan)
Date: Fri Mar 30 13:41:15 2007
Subject: [Harbour] Uploaded Mandriva 2007 files (beta2)
Message-ID: <200703301940.39190.tomaz.zupan@orpo.si>



LP, Toma? Zupan
From lorenzo.fiorini at gmail.com  Fri Mar 30 14:01:27 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Mar 30 14:01:32 2007
Subject: [Harbour] ChangeLog 2007-03-30 15:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330165438.GB7072@localhost.localdomain>
References: <20070330131555.GA2097@localhost.localdomain>
	<9257026e0703300800t1c6a0111k691406e2ed0aedce@mail.gmail.com>
	<20070330155947.GA3041@localhost.localdomain>
	<9257026e0703300909t6a03c89ei6c2e7adf9b13ad08@mail.gmail.com>
	<20070330165438.GB7072@localhost.localdomain>
Message-ID: <9257026e0703301101q466639d6x19e4a109cebb3974@mail.gmail.com>

On 3/30/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Try current devel branch compiled with HB_PP_MULTILINE_STRING macro.
> It allow to use multiline strings quoted by (") or (') like in old PP.
> See the ChangeLog.

Harbour 3 secs vs xHarbour 8 secs for the same page that execute a
Postgresql query.

I need some rtl sources from xHarbour but they compile without problems.

Many, many, many thanks again.

regards,
Lorenzo Fiorini
From dmacias at mail.udg.mx  Fri Mar 30 20:58:29 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Mar 30 20:58:31 2007
Subject: [Harbour] Beta 2 binaries for OS/2-eCS
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <460DB235.3060108@mail.udg.mx>

Harbour Beta 2 binaries file for OS/2-eComStation uploaded to:

ftp://upload.sourceforge.net/incoming/

as harbour-0.99.2.bin-os2.gcc.zip


Gracias,
David Macias

From alex at belacy.belgorod.su  Sat Mar 31 01:06:43 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Sat Mar 31 01:15:07 2007
Subject: [Harbour] Re: Uploaded Mandriva 2007 files (beta2)
In-Reply-To: <200703301940.39190.tomaz.zupan@orpo.si>
References: <200703301940.39190.tomaz.zupan@orpo.si>
Message-ID: <18750198.20070331090643@belacy.belgorod.su>

On  Friday, March 30, 2007, 21:40 Tomaz Zupan <tomaz.zupan@orpo.si> wrote:

 Thanks, added to the sf download page.

Regards,
 Alexander
http://kresin.belgorod.su

From alex at belacy.belgorod.su  Sat Mar 31 01:12:26 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Sat Mar 31 01:15:09 2007
Subject: [Harbour] Re: Beta 2 binaries for OS/2-eCS
In-Reply-To: <460DB235.3060108@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<460DB235.3060108@mail.udg.mx>
Message-ID: <1261093372.20070331091226@belacy.belgorod.su>

On  Saturday, March 31, 2007, 4:58 David Arturo Macias Corona <dmacias@mail.udg.mx> wrote:

DAMC> Harbour Beta 2 binaries file for OS/2-eComStation uploaded to:

DAMC> ftp://upload.sourceforge.net/incoming/

DAMC> as harbour-0.99.2.bin-os2.gcc.zip

 Sorry, I have added it to the mandriva release accidentally - there
 was a number of mandriva files, and was forced to delete it ...
 Could you re-upload this file ?


Regards,
 Alexander
http://kresin.belgorod.su

From lorenzo.fiorini at gmail.com  Sat Mar 31 04:05:43 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Mar 31 04:05:46 2007
Subject: [Harbour] Issues porting gtxwc apps from xHarbour to Harbour
Message-ID: <9257026e0703310105n78346b65r99e1fad6d46af292@mail.gmail.com>

Now that cgi apps are working, I've tried to build my "desktop" gtxwc
apps under Linux Fedora Core 5 which is my main platform.

The only "big" problem so far is that the mouse is not working.

These are the changes I had to do:

- copy hbini.prg and hbmd5.c from xHarbour rtl to Harbour rtl
- change NETNAME() to report user name with NETNAME(1)
- add hbcompat.ch to translate gt calls ( see prev msg from Przemek )
- remove -lgtnul and -lpcrepos from makefile
- remove tracelog calls
- remove  set eol _EOL where _EOL is chr(13)+chr(10)
- replace
      nProcID := HB_OpenProcess( cCmdStr )
      nRetCode := HB_ProcessValue( nProcID )
 with
     run( cCmdStr )
- remove like operator f.e. alltrim( TBL->CTBLNAME ) like xTables
- copy contrig/gd from xHarbour/contrib and "fix" code in:
   -- gdwrp.c following Przemek  prev msg suggestions
   -- gdimage.prg
     __ObjectClone( oDestImage, Self )
     //Self := __ObjClone( oDestImage ) // doesn't work
     it seems that the author had to replace not working __ObjClone in xHarbour
     probably in Harbour rhis is not required

I'll deeply test the apps in the next days.

Any comment?

regards,
Lorenzo Fiorini
From druzus at priv.onet.pl  Sat Mar 31 04:31:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Mar 31 04:31:58 2007
Subject: [Harbour] Issues porting gtxwc apps from xHarbour to Harbour
In-Reply-To: <9257026e0703310105n78346b65r99e1fad6d46af292@mail.gmail.com>
References: <9257026e0703310105n78346b65r99e1fad6d46af292@mail.gmail.com>
Message-ID: <20070331083123.GA29957@localhost.localdomain>

On Sat, 31 Mar 2007, Lorenzo Fiorini wrote:
> Now that cgi apps are working, I've tried to build my "desktop" gtxwc
> apps under Linux Fedora Core 5 which is my main platform.
> The only "big" problem so far is that the mouse is not working.

Mouse perfectly works with GTXWC for me.

> These are the changes I had to do:
> - copy hbini.prg and hbmd5.c from xHarbour rtl to Harbour rtl

hbmd5.c needs some fixes. It does not work for 64bit platforms,
files longer then 4GB and MD5 calculated for files can give wrong
results in some cases. I'll commit cleaned version with some other
checksum functions soon.

> - change NETNAME() to report user name with NETNAME(1)

I think we can change it in CVS.

> - add hbcompat.ch to translate gt calls ( see prev msg from Przemek )
> - remove -lgtnul and -lpcrepos from makefile
> - remove tracelog calls

We can add .prg interface for tracelog.

> - remove  set eol _EOL where _EOL is chr(13)+chr(10)

Probably we should add _SET_EOL.

> - replace
>      nProcID := HB_OpenProcess( cCmdStr )
>      nRetCode := HB_ProcessValue( nProcID )
> with
>     run( cCmdStr )

I'll add commands to controll processes later.

> - remove like operator f.e. alltrim( TBL->CTBLNAME ) like xTables

    <x> LIKE <y> => HB_REGEXMATCH( <y>, <x>, .t. )
    <x> HAS  <y> => HB_REGEXMATCH( <y>, <x>, .f. )

I'll add HB_REGEXHAS() and HB_REGEXLIKE() in next commit.

> - copy contrig/gd from xHarbour/contrib and "fix" code in:
>   -- gdwrp.c following Przemek  prev msg suggestions
>   -- gdimage.prg
>     __ObjectClone( oDestImage, Self )
>     //Self := __ObjClone( oDestImage ) // doesn't work
>     it seems that the author had to replace not working __ObjClone in 
>     xHarbour
>     probably in Harbour rhis is not required

Internal class code in Harbour is differ then in xHarbour so I cannot
say if such code written for xHarbour will work with Harbour. I strongly
suggest to use hbclass.ch interface.

best regards,
Przemek
From dmacias at mail.udg.mx  Sat Mar 31 06:09:12 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Sat Mar 31 06:09:15 2007
Subject: [Harbour] Beta 2 binaries for OS/2-eCS
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <460E3348.9010204@mail.udg.mx>

 > Sorry, I have added it to the mandriva release accidentally - there
 > was a number of mandriva files, and was forced to delete it ...
 > Could you re-upload this file ?

Done

Harbour Beta 2 binaries file for OS/2-eComStation uploaded to:

ftp://upload.sourceforge.net/incoming/

as harbour-0.99.2.bin-os2.gcc.zip


Gracias,
David Macias


From druzus at priv.onet.pl  Sat Mar 31 06:42:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Mar 31 06:42:45 2007
Subject: [Harbour] ChangeLog 2007-03-31 12:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070331104209.GA614@localhost.localdomain>

2007-03-31 12:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/Makefile
  + harbour/include/hbchksum.h
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/hbadler.c
  + harbour/source/rtl/hbcrc.c
  + harbour/source/rtl/hbmd5.c
    + added functions to calculate different checksums
         HB_ADLER( <cValue> [, <nStart> ] ) -> <nCC>
         HB_CRC32( <cValue> [, <nStart> ] ) -> <nCRC>
         HB_CRC16( <cValue> [, <nStart> ] ) -> <nCRC>
         HB_CRC  ( <cValue> [, <nStart> ] [, <nPolynomial> ] ) -> <nCRC>
         HB_CRCCT( <cValue> [, <nStart> ] [, <nPolynomial> ] ) -> <nCRC>
         HB_MD5( <cString> ) -> <cMD5>
         HB_MD5FILE( <cFileName> ) -> <cMD5>
      HB_CRC() is general CRC function which can be used for any polynomial
      given as second argument, f.e.: 0x104C11DB7 is CRC32 polynomial,
      0x18005 -> CRC16, 0x11021 -> CRC16 X.26, 0x1393 -> CRC12, 0x101 -> LCR8
      HB_CRCCT() makes exactly the same job but it uses broken algorithm.
      Unfortunately it seems that this broken version is widely used by many
      other projects, f.e. HB_CRCCT() gives exactly the same results as
      COM_CRC() from CT3. Generated results are usually "good enough" but
      if you do not need compatibility with some other tools which uses
      broken CRC algorithm then I suggest to not use it.
      HB_ADLER() is ADLER32 check sum - this function gives the same results
      as HB_CHECKSUM in xHarbour.
      HB_MD5*() functions are from Dmitry V. Korzhov code modified a
      little bit by me for other then x86@32 machines files and buffers
      longer then 2^32. I also fixed possible problems with wrong results
      in some cases.

  * harbour/source/compiler/hbmain.c
    * increase number of optimization passes

  * harbour/source/pp/ppcore.c
    * cleaned C compiler warning

best regards,
Przemek
From druzus at priv.onet.pl  Sat Mar 31 07:02:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Mar 31 07:02:37 2007
Subject: [Harbour] PCode optimization
In-Reply-To: <460D410E.6080806@dbtopas.lt>
References: <460BEEE3.8040006@dbtopas.lt>
	<20070330100907.GA16283@localhost.localdomain>
	<460D410E.6080806@dbtopas.lt>
Message-ID: <20070331110200.GB614@localhost.localdomain>

On Fri, 30 Mar 2007, Mindaugas Kavaliauskas wrote:
> In some cases, code is still not fully optimized and additional passes 
> are needed, ex.,
>   IF( lCase, xSomeLocal, QSELF() )
>   IF( lCase, xSomeLocal, @some_func() )
> but these cases are very unnatural and followed by meaningless 
> expression warning, so I don't think we need to change anything.

I've just increased number of optimization passes and now examples like
above are fully reduced.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Sat Mar 31 07:26:03 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Mar 31 07:26:37 2007
Subject: [Harbour] ChangeLog 2007-03-31 12:40 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20070331104209.GA614@localhost.localdomain>
Message-ID: <010401c77387$5de841f0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 31 marzo 2007 12.42
Oggetto: [Harbour] ChangeLog 2007-03-31 12:40 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)

I'm still having problems with CVS. The latest changelog I'm able to get is

2007-03-12 15:20 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

I tried either beta2 branch and no branch. What else can I try?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Sat Mar 31 07:36:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Mar 31 07:36:37 2007
Subject: [Harbour] ChangeLog 2007-03-31 12:40 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <010401c77387$5de841f0$0100a8c0@emag>
References: <20070331104209.GA614@localhost.localdomain>
	<010401c77387$5de841f0$0100a8c0@emag>
Message-ID: <20070331113601.GA21088@localhost.localdomain>

On Sat, 31 Mar 2007, Enrico Maria Giordano wrote:
> I'm still having problems with CVS. The latest changelog I'm able to get is
> 2007-03-12 15:20 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

The above is last entry in beta branch. There is no such ChangeLog
note in devel branch.

> I tried either beta2 branch and no branch. What else can I try?

If you want to switch to main (devel) branch from the beta one you should
use cvs checkout with -A switch. The branch tag is stick so so as long
as you do not remove it explicitly (-A switch) you will work with the beta
branch.

BTW If you want to use both branches simultaneously then I suggest you
to create two separated repository copies.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Sat Mar 31 07:53:43 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Mar 31 07:54:18 2007
Subject: [Harbour] ChangeLog 2007-03-31 12:40 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20070331104209.GA614@localhost.localdomain><010401c77387$5de841f0$0100a8c0@emag>
	<20070331113601.GA21088@localhost.localdomain>
Message-ID: <014301c7738b$3b0992c0$0100a8c0@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 31 marzo 2007 13.36
Oggetto: Re: [Harbour] ChangeLog 2007-03-31 12:40 UTC+0200 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> If you want to switch to main (devel) branch from the beta one you should
> use cvs checkout with -A switch. The branch tag is stick so so as long
> as you do not remove it explicitly (-A switch) you will work with the beta
> branch.

Thank you, solved! Using TortoiseCVS one has to select HEAD branch to switch 
to main branch.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From i at kevincarmody.com  Sat Mar 31 08:14:00 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Sat Mar 31 08:12:57 2007
Subject: [Harbour] 3rd party Clipper library equivalents
Message-ID: <460E5088.7040708@kevincarmody.com>


I'm planning to port a large Clipper application to Harbour.  This 
application uses a number of functions from third party Clipper 
libraries, which I have listed below.  Does anyone know if there are 
equivalents in Harbour, and if so what they are?

TIA for your help.

Kevin


MVLIST memvar list functions by Dave Pearson
  MVLPrivates()     List of all private variables
  MVLPublics()      List of all public variables

Successware Six database drivers
  SX_AutoOpen()     Enables/disables auto-open mode for structural indexes
  SX_Compress()     Compress string
  SX_Decompress()   Decompress compressed string
  SX_KeyCount()     Get number of keys in index or tag
  SX_KeyNo()        Get position of current key within index or tag
  SX_TagInfo()      Get information about tags in index file
                      Tag name
                      Index expression
                      Filter expression
                      Whether tag is UNIQUE
                      Whether tag is DESCENDING
                      Whether tag is RYO

LFNLib, long file names and file operations
  LF_GetFInfo()     Get file created/modified/accessed dates and times, 
size, attributes
  LF_GetFSize()     Get file size including slack
  LF_SetFAttr()     Set file attributes
  LF_SetFTime()     Set file created/modified/accessed date and time
  LF_VolInfo()      Get volume info
                      Drive name
                      Maximum file name length
                      Maximum path name length
                      File system (FAT32 etc)
                      Whether searches are case sensitive
                      Whether case is preserved in directory entries
                      Whether Unicode is used in file and directory names
                      Whether DOS long filename functions are supported
                      Whether the volume is compressed

Nanforum library
  FT_Default()      Get or set default drive
  FT_DskFree()      Get amount of available disk space
  FT_DskSize()      Get maximum capacity of drive
  FT_Origin()       Get path and filename of the current program  

OS Lib
  OL_IsNT()         Check if OS is Windows NT/2K/XP
  OL_OsVerMaj()     Get OS major version number
  OL_OsVerMin()     Get OS minor version number
  OL_WinCbCopy()    Get text from Windows clipboard
  OL_WinCbPaste()   Put text into Windows clipboard

From lorenzo.fiorini at gmail.com  Sat Mar 31 09:00:55 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Mar 31 09:00:58 2007
Subject: [Harbour] Issues porting gtxwc apps from xHarbour to Harbour
In-Reply-To: <20070331083123.GA29957@localhost.localdomain>
References: <9257026e0703310105n78346b65r99e1fad6d46af292@mail.gmail.com>
	<20070331083123.GA29957@localhost.localdomain>
Message-ID: <9257026e0703310600k3e30c9ceg78f28ea3c3de59@mail.gmail.com>

On 3/31/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Mouse perfectly works with GTXWC for me.

I'm sure and I wonder where can be the problem. I've tried with
mousetst.prg and it works with
hbmk -gtcrs but with -gtxwc returns "No mouse present !".

> hbmd5.c needs some fixes. It does not work for 64bit platforms,
> files longer then 4GB and MD5 calculated for files can give wrong
> results in some cases. I'll commit cleaned version with some other
> checksum functions soon.

Many thanks.

> I think we can change it in CVS.

I've tried to use getlogin_r but it returns username only if the exe
is run from a terminal.
At the moment I've simply used:

      if( bGetUser )
      {
         pszValue = hb_getenv( "USER" );
      }
      else
      {
         gethostname( pszValue, MAXGETHOSTNAME );
      }

feel free to find a better implementation.

> > - remove tracelog calls
>
> We can add .prg interface for tracelog.

Many thanks.

> Probably we should add _SET_EOL.

It is very useful to set EOL policy since we're moving from DOS data to Linux.

> >      nProcID := HB_OpenProcess( cCmdStr )
> >      nRetCode := HB_ProcessValue( nProcID )
> > with
> >     run( cCmdStr )
>
> I'll add commands to controll processes later.

Can I use run for the moment?

> I'll add HB_REGEXHAS() and HB_REGEXLIKE() in next commit.

Many thanks.

> Internal class code in Harbour is differ then in xHarbour so I cannot
> say if such code written for xHarbour will work with Harbour. I strongly
> suggest to use hbclass.ch interface.

I'll review the code asap.

regards,
Lorenzo Fiorini
From alex at belacy.belgorod.su  Sat Mar 31 09:03:04 2007
From: alex at belacy.belgorod.su (Alexander S.Kresin)
Date: Sat Mar 31 09:03:42 2007
Subject: [Harbour] Re: Beta 2 binaries for OS/2-eCS
In-Reply-To: <460E3348.9010204@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<460E3348.9010204@mail.udg.mx>
Message-ID: <10217319504.20070331170304@belacy.belgorod.su>

On  Saturday, March 31, 2007, 14:09 David Arturo Macias Corona <dmacias@mail.udg.mx> wrote:

DAMC> Harbour Beta 2 binaries file for OS/2-eComStation uploaded to:

DAMC> ftp://upload.sourceforge.net/incoming/

DAMC> as harbour-0.99.2.bin-os2.gcc.zip


 Gracias, added to the sf download page.



Regards,
 Alexander
http://kresin.belgorod.su

